# 快速联调指南

## 🚀 立即开始测试

### 第一步：确认环境
```bash
# 1. 确认后端服务运行
访问：http://192.168.54.229:8080/lovetime/api/couple/status
（需要先登录获取Token）

# 2. 确认前端配置
打开 utils/config.js，确认 baseURL 正确
```

### 第二步：测试顺序（建议）

#### ✅ 测试1：查询绑定状态（最简单）
**操作：**
1. 打开小程序，进入"我们"页面
2. 查看控制台输出

**成功标志：**
- 控制台显示：`✅ [情侣关系API] 查询绑定状态成功`
- 页面显示绑定状态（已绑定/未绑定）

**如果失败：**
- 检查Token是否有效
- 检查网络连接
- 查看控制台详细错误信息

---

#### ✅ 测试2：生成邀请码
**操作：**
1. 进入"我们"页面
2. 点击"邀请另一半"
3. 点击"生成邀请码"

**成功标志：**
- 显示邀请码（6位字符串）
- 显示过期时间
- 控制台显示：`✅ [情侣关系API] 生成邀请码成功`

**如果失败：**
- 检查是否已绑定（已绑定状态下无法生成邀请码）
- 检查Token是否有效

---

#### ✅ 测试3：验证邀请码（需要两个账号）
**操作：**
1. 账号A生成邀请码：`ABC123`
2. 账号B进入邀请页面，URL带参数：`pages/invite/index?code=ABC123`

**成功标志：**
- 显示账号A的昵称和头像
- 显示"收到邀请"提示
- 控制台显示：`✅ [情侣关系API] 验证邀请码成功`

---

#### ✅ 测试4：接受邀请
**操作：**
1. 在测试3的基础上，点击"接受邀请"按钮

**成功标志：**
- 显示"绑定成功"提示
- 自动跳转到"我们"页面
- 显示对方信息
- 控制台显示：`✅ [情侣关系API] 接受邀请成功`

---

## 🔍 调试技巧

### 查看请求详情
所有API调用都会在控制台输出详细信息，包括：
- 📍 请求地址（完整URL）
- 📋 请求方法（GET/POST）
- 📤 请求参数
- 📦 响应数据

### 常见问题快速定位

**问题：401 Unauthorized**
```
原因：Token无效
解决：
1. 重新登录获取新Token
2. 检查 uni.getStorageSync('login_info') 中是否有token字段
```

**问题：Network Error**
```
原因：后端服务未启动或网络不通
解决：
1. 检查后端服务是否运行
2. 在浏览器访问 baseURL 测试连通性
```

**问题：响应数据格式不对**
```
原因：后端返回格式与前端期望不一致
解决：
1. 查看控制台输出的"📦 响应数据"
2. 前端已做兼容处理，但建议后端返回统一格式：
   {
     success: true,
     data: { ... }
   }
```

---

## 📱 微信分享测试

### 测试步骤
1. 生成邀请码后
2. 点击右上角"..." → "转发"
3. 发送给另一个微信账号
4. 另一个账号点击卡片进入小程序

### 预期结果
- 自动进入邀请页面
- URL参数中包含邀请码：`pages/invite/index?code=ABC123`
- 自动验证邀请码并显示邀请方信息

---

## ✅ 测试检查清单

在开始联调前，确保：
- [ ] 后端服务已启动
- [ ] 前端 baseURL 配置正确
- [ ] 测试账号已登录（有有效Token）
- [ ] 微信开发者工具已打开控制台（查看日志）
- [ ] 准备两个测试账号（用于测试绑定流程）

---

## 📞 需要帮助？

如果遇到问题：
1. **首先查看控制台** - 所有请求都有详细日志
2. **检查后端日志** - 看是否收到请求
3. **对比接口文档** - 确认请求格式是否正确

**提示：** 前端代码已包含完善的错误处理和日志输出，所有API调用都会在控制台显示完整信息，便于快速定位问题。

