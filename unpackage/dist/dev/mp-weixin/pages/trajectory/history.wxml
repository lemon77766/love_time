<view class="history-page data-v-3f8fde69" style="{{'padding-top:' + aa}}"><view class="custom-navbar data-v-3f8fde69"><view class="navbar-gradient-bg data-v-3f8fde69"></view><view class="status-bar data-v-3f8fde69" style="{{'height:' + a}}"></view><view class="navbar-content data-v-3f8fde69" style="{{'height:' + c}}"><view class="navbar-back data-v-3f8fde69" bindtap="{{b}}"><text class="back-icon data-v-3f8fde69">←</text></view><view class="navbar-title data-v-3f8fde69"><text class="title-text data-v-3f8fde69">历史轨迹</text></view><view class="navbar-placeholder data-v-3f8fde69"></view></view></view><view class="content-area data-v-3f8fde69"><view class="date-card data-v-3f8fde69"><view class="date-card-header data-v-3f8fde69"><text class="card-title data-v-3f8fde69">选择时间区间</text></view><view class="date-range-selector data-v-3f8fde69"><view class="date-item-wrapper data-v-3f8fde69"><text class="date-label-text data-v-3f8fde69">开始日期</text><picker class="data-v-3f8fde69" mode="date" value="{{f}}" start="{{g}}" end="{{h}}" bindchange="{{i}}"><view class="date-item data-v-3f8fde69"><text class="{{['date-value', 'data-v-3f8fde69', e && 'placeholder']}}">{{d}}</text><text class="date-icon data-v-3f8fde69">📅</text></view></picker></view><view class="date-arrow data-v-3f8fde69"><text class="arrow-icon data-v-3f8fde69">→</text></view><view class="date-item-wrapper data-v-3f8fde69"><text class="date-label-text data-v-3f8fde69">结束日期</text><picker class="data-v-3f8fde69" mode="date" value="{{l}}" start="{{m}}" end="{{n}}" bindchange="{{o}}"><view class="date-item data-v-3f8fde69"><text class="{{['date-value', 'data-v-3f8fde69', k && 'placeholder']}}">{{j}}</text><text class="date-icon data-v-3f8fde69">📅</text></view></picker></view></view><view class="date-actions data-v-3f8fde69"><button bindtap="{{q}}" disabled="{{r}}" class="{{['btn-query', 'data-v-3f8fde69', s && 'loading']}}"><text wx:if="{{p}}" class="btn-text data-v-3f8fde69">查询轨迹</text><text wx:else class="btn-text data-v-3f8fde69">加载中...</text></button><button wx:if="{{t}}" class="btn-clear data-v-3f8fde69" bindtap="{{v}}"><text class="btn-text data-v-3f8fde69">清除</text></button></view></view><view wx:if="{{w}}" class="stats-card data-v-3f8fde69"><view class="stats-item data-v-3f8fde69"><text class="stats-icon data-v-3f8fde69">📍</text><view class="stats-content data-v-3f8fde69"><text class="stats-label data-v-3f8fde69">轨迹点</text><text class="stats-value data-v-3f8fde69">{{x}}</text></view></view><view class="stats-divider data-v-3f8fde69"></view><view class="stats-item data-v-3f8fde69"><text class="stats-icon data-v-3f8fde69">🗓️</text><view class="stats-content data-v-3f8fde69"><text class="stats-label data-v-3f8fde69">时间范围</text><text class="stats-value-small data-v-3f8fde69">{{y}} 至 {{z}}</text></view></view></view><view class="map-container data-v-3f8fde69"><map class="map data-v-3f8fde69" latitude="{{A}}" longitude="{{B}}" scale="{{C}}" markers="{{D}}" polyline="{{E}}" show-location="{{false}}" enable-zoom="{{true}}" enable-scroll="{{true}}" bindmarkertap="{{F}}"/><view wx:if="{{G}}" class="empty-state data-v-3f8fde69"><view class="empty-icon data-v-3f8fde69">🗺️</view><text class="empty-text data-v-3f8fde69">该时间段内没有轨迹点</text><text class="empty-hint data-v-3f8fde69">请选择其他时间区间</text></view><view wx:if="{{H}}" class="loading-overlay data-v-3f8fde69"><view class="loading-spinner data-v-3f8fde69"></view><text class="loading-text data-v-3f8fde69">正在加载轨迹...</text></view></view></view><view wx:if="{{I}}" class="modal-mask data-v-3f8fde69" bindtap="{{Z}}"><view class="modal data-v-3f8fde69" catchtap="{{Y}}"><view class="modal-header data-v-3f8fde69"><text class="modal-title data-v-3f8fde69">{{J}}</text><text class="modal-date data-v-3f8fde69">{{K}}</text></view><view class="modal-content data-v-3f8fde69"><view wx:if="{{L}}" class="point-address data-v-3f8fde69"><text class="address-label data-v-3f8fde69">📍</text><text class="address-text data-v-3f8fde69">{{M}}</text></view><image wx:if="{{N}}" src="{{O}}" class="point-image data-v-3f8fde69" mode="aspectFill"/><image wx:elif="{{P}}" src="{{Q}}" class="point-image data-v-3f8fde69" mode="aspectFill"/><text class="point-description data-v-3f8fde69">{{R}}</text><view wx:if="{{S}}" class="point-meta data-v-3f8fde69"><text wx:if="{{T}}" class="meta-text data-v-3f8fde69">到访次数：{{U}}</text><text wx:if="{{V}}" class="meta-text data-v-3f8fde69">停留时长：{{W}}</text></view></view><view class="modal-actions data-v-3f8fde69"><button class="btn secondary data-v-3f8fde69" bindtap="{{X}}">关闭</button></view></view></view></view>