<view class="trajectory-page" style="{{'padding-top:' + D}}"><view class="custom-navbar"><view class="navbar-gradient-bg"></view><view class="status-bar" style="{{'height:' + a}}"></view><view class="navbar-content" style="{{'height:' + b}}"><view class="navbar-title"><text class="title-text">恋爱轨迹</text></view></view></view><view class="content-area"><view class="header"><text class="subtitle">记录你们一起走过的点点滴滴</text></view><view class="map-container"><image class="map-bg" src="{{c}}" mode="aspectFill"/><view wx:for="{{d}}" wx:for-item="point" wx:key="b" class="trajectory-point" style="{{'top:' + point.c + ';' + ('left:' + point.d)}}" bindtap="{{point.e}}"><view class="point-marker"><text class="point-icon">📍</text></view><view class="point-label">{{point.a}}</view></view><view wx:if="{{e}}" class="trajectory-line"></view></view><view class="add-button" bindtap="{{f}}"><text class="add-icon">+</text><text class="add-text">添加轨迹点</text></view><view wx:if="{{g}}" class="modal-mask" bindtap="{{o}}"><view class="modal" catchtap="{{n}}"><view class="modal-header"><text class="modal-title">{{h}}</text><text class="modal-date">{{i}}</text></view><view class="modal-content"><image wx:if="{{j}}" src="{{k}}" class="point-image" mode="aspectFill"/><text class="point-description">{{l}}</text></view><view class="modal-actions"><button class="btn secondary" bindtap="{{m}}">关闭</button></view></view></view><view wx:if="{{p}}" class="modal-mask" bindtap="{{C}}"><view class="modal" catchtap="{{B}}"><text class="modal-title">添加轨迹点</text><view class="form"><view class="form-item"><text class="label">地点名称</text><input class="input" placeholder="如：第一次约会的地方" value="{{q}}" bindinput="{{r}}"/></view><view class="form-item"><text class="label">日期</text><input class="input" placeholder="如：2023-05-20" value="{{s}}" bindinput="{{t}}"/></view><view class="form-item"><text class="label">描述</text><block wx:if="{{r0}}"><textarea class="textarea" placeholder="记录这个地点的特别回忆..." value="{{v}}" bindinput="{{w}}"></textarea></block></view><view class="form-item"><text class="label">在地图上选择位置</text><button class="btn primary" bindtap="{{x}}">选择位置</button><text wx:if="{{y}}" class="position-info">已选择位置</text></view></view><view class="modal-actions"><button class="btn secondary" bindtap="{{z}}">取消</button><button class="btn primary" bindtap="{{A}}">保存</button></view></view></view></view></view>