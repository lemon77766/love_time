<view class="trajectory-page data-v-bfa9c4cc" style="{{'padding-top:' + aq}}"><view class="custom-navbar data-v-bfa9c4cc"><view class="navbar-gradient-bg data-v-bfa9c4cc"></view><view class="status-bar data-v-bfa9c4cc" style="{{'height:' + a}}"></view><view class="navbar-content data-v-bfa9c4cc" style="{{'height:' + b}}"><view class="navbar-title data-v-bfa9c4cc"><text class="title-text data-v-bfa9c4cc">恋爱轨迹</text></view></view></view><view class="content-area data-v-bfa9c4cc"><view class="header data-v-bfa9c4cc"><text class="subtitle data-v-bfa9c4cc">记录你们一起走过的点点滴滴</text></view><view class="history-card data-v-bfa9c4cc"><view class="history-card-header data-v-bfa9c4cc"><text class="history-title data-v-bfa9c4cc">历史轨迹</text></view><view class="date-range-selector data-v-bfa9c4cc"><picker class="data-v-bfa9c4cc" mode="date" value="{{e}}" start="{{f}}" end="{{g}}" bindchange="{{h}}"><view class="date-item data-v-bfa9c4cc"><text class="date-label data-v-bfa9c4cc">开始日期</text><text class="{{['date-value', 'data-v-bfa9c4cc', d && 'placeholder']}}">{{c}}</text></view></picker><text class="date-separator data-v-bfa9c4cc">至</text><picker class="data-v-bfa9c4cc" mode="date" value="{{k}}" start="{{l}}" end="{{m}}" bindchange="{{n}}"><view class="date-item data-v-bfa9c4cc"><text class="date-label data-v-bfa9c4cc">结束日期</text><text class="{{['date-value', 'data-v-bfa9c4cc', j && 'placeholder']}}">{{i}}</text></view></picker></view><view class="history-actions data-v-bfa9c4cc"><button class="btn-query data-v-bfa9c4cc" bindtap="{{p}}" disabled="{{q}}">{{o}}</button><button wx:if="{{r}}" class="btn-clear data-v-bfa9c4cc" bindtap="{{s}}">清除</button></view><view wx:if="{{t}}" class="history-summary data-v-bfa9c4cc"><text class="summary-text data-v-bfa9c4cc"> 共找到 {{v}} 个轨迹点， 总行程 {{w}}</text></view></view><view wx:if="{{x}}" class="location-card data-v-bfa9c4cc"><view class="location-card-header data-v-bfa9c4cc"><text class="location-title data-v-bfa9c4cc">实时位置</text><view class="location-actions data-v-bfa9c4cc"><view class="refresh-btn data-v-bfa9c4cc" bindtap="{{y}}"><text class="refresh-icon data-v-bfa9c4cc">🔄</text></view><view class="{{['toggle-btn', 'data-v-bfa9c4cc', A && 'active']}}" bindtap="{{B}}"><text class="toggle-text data-v-bfa9c4cc">{{z}}</text></view></view></view><view wx:if="{{C}}" class="location-item data-v-bfa9c4cc"><view class="location-label data-v-bfa9c4cc"><text class="location-icon data-v-bfa9c4cc">📍</text><text class="location-name data-v-bfa9c4cc">我的位置</text></view><view class="location-info data-v-bfa9c4cc"><text class="location-address data-v-bfa9c4cc">{{D}}</text><text wx:if="{{E}}" class="location-time data-v-bfa9c4cc">{{F}}</text></view></view><view wx:if="{{G}}" class="location-item data-v-bfa9c4cc"><view class="location-label data-v-bfa9c4cc"><text class="location-icon data-v-bfa9c4cc">💕</text><text class="location-name data-v-bfa9c4cc">对方位置</text></view><view class="location-info data-v-bfa9c4cc"><text class="location-address data-v-bfa9c4cc">{{H}}</text><text wx:if="{{I}}" class="location-time data-v-bfa9c4cc">{{J}}</text></view></view><view wx:if="{{K}}" class="distance-info data-v-bfa9c4cc"><text class="distance-label data-v-bfa9c4cc">双方距离</text><text class="distance-value data-v-bfa9c4cc">{{L}}</text></view><view wx:if="{{M}}" class="location-error data-v-bfa9c4cc"><text class="error-text data-v-bfa9c4cc">{{N}}</text></view></view><view class="map-container data-v-bfa9c4cc"><map class="map data-v-bfa9c4cc" latitude="{{O}}" longitude="{{P}}" scale="{{Q}}" markers="{{R}}" polyline="{{S}}" show-location="{{true}}" enable-zoom="{{true}}" enable-scroll="{{true}}" bindtap="{{T}}" bindmarkertap="{{U}}"/><view wx:if="{{V}}" class="map-placeholder data-v-bfa9c4cc"><image class="map-bg data-v-bfa9c4cc" src="{{W}}" mode="aspectFill"/><view wx:for="{{X}}" wx:for-item="point" wx:key="b" class="trajectory-point data-v-bfa9c4cc" style="{{'top:' + point.c + ';' + ('left:' + point.d)}}" bindtap="{{point.e}}"><view class="point-marker data-v-bfa9c4cc"><text class="point-icon data-v-bfa9c4cc">📍</text></view><view class="point-label data-v-bfa9c4cc">{{point.a}}</view></view><view wx:if="{{Y}}" class="trajectory-line data-v-bfa9c4cc"></view></view></view></view><view wx:if="{{Z}}" class="modal-mask data-v-bfa9c4cc" bindtap="{{ap}}"><view class="modal data-v-bfa9c4cc" catchtap="{{ao}}"><view class="modal-header data-v-bfa9c4cc"><text class="modal-title data-v-bfa9c4cc">{{aa}}</text><text class="modal-date data-v-bfa9c4cc">{{ab}}</text></view><view class="modal-content data-v-bfa9c4cc"><view wx:if="{{ac}}" class="point-address data-v-bfa9c4cc"><text class="address-label data-v-bfa9c4cc">📍</text><text class="address-text data-v-bfa9c4cc">{{ad}}</text></view><image wx:if="{{ae}}" src="{{af}}" class="point-image data-v-bfa9c4cc" mode="aspectFill"/><image wx:elif="{{ag}}" src="{{ah}}" class="point-image data-v-bfa9c4cc" mode="aspectFill"/><text class="point-description data-v-bfa9c4cc">{{ai}}</text><view wx:if="{{aj}}" class="point-meta data-v-bfa9c4cc"><text class="meta-text data-v-bfa9c4cc">到访次数：{{ak}}</text><text wx:if="{{al}}" class="meta-text data-v-bfa9c4cc">停留时长：{{am}}</text></view></view><view class="modal-actions data-v-bfa9c4cc"><button class="btn secondary data-v-bfa9c4cc" bindtap="{{an}}">关闭</button></view></view></view></view>