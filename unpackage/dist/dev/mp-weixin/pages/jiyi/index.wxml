<view class="memory-page"><view class="header"><text class="greeting">恋爱长河</text><text class="subtext"> 沿着水墨长河，记录你们的每一个恋爱阶段</text></view><view class="{{['river-wrapper', h && 'active']}}" bindmouseenter="{{i}}" bindmouseleave="{{j}}" bindtap="{{k}}" bindtouchstart="{{l}}"><image class="river-bg" src="{{a}}" mode="aspectFill"/><view wx:if="{{b}}" class="select-hint">在长河图片上点击设置节点位置</view><view wx:if="{{c}}" class="temp-dot" style="{{'top:' + d + ';' + ('left:' + e)}}"></view><view wx:for="{{f}}" wx:for-item="stage" wx:key="a" class="{{['stage-card', stage.b]}}" style="{{'top:' + stage.c + ';' + ('left:' + stage.d)}}" bindtap="{{stage.e}}"><view class="stage-marker"><text class="heart-icon">💙</text></view></view><view class="add-stage" bindtap="{{g}}"><text class="add-icon">＋</text><text class="add-text">新增阶段</text></view></view><view wx:if="{{m}}" class="modal-mask" bindtap="{{v}}"><view class="modal detail-modal" catchtap="{{t}}"><image class="detail-bg-image" src="{{n}}" mode="aspectFill"></image><view class="detail-content-wrapper"><text class="detail-title">{{o}}</text><text class="detail-date">{{p}}</text><view class="detail-content"><text wx:if="{{q}}" class="detail-desc">{{r}}</text><text wx:else class="detail-empty">暂无详细描述</text></view><view class="modal-actions"><button class="btn" bindtap="{{s}}">关闭</button></view></view></view></view><view wx:if="{{w}}" class="modal-mask" bindtap="{{K}}"><view class="modal" catchtap="{{J}}"><text class="modal-title">新增恋爱阶段</text><view class="form"><view class="form-item"><text class="label">标题</text><input class="input" placeholder="如：初遇、表白、第一次旅行" value="{{x}}" bindinput="{{y}}"/></view><view class="form-item"><text class="label">日期</text><input class="input" placeholder="如：2023-05-20" value="{{z}}" bindinput="{{A}}"/></view><view class="form-item"><text class="label">详细描述</text><block wx:if="{{r0}}"><textarea class="textarea" placeholder="记录更详细的故事..." value="{{B}}" bindinput="{{C}}"></textarea></block></view><view class="form-item"><button class="btn primary" bindtap="{{D}}">在长河上选择位置</button><text wx:if="{{E}}">已选择：Top {{F}}%，Left {{G}}%</text></view></view><view class="modal-actions"><button class="btn secondary" bindtap="{{H}}">取消</button><button class="btn primary" bindtap="{{I}}">保存</button></view></view></view></view>