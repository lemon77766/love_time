<view class="memory-page"><view class="header"><text class="greeting">恋爱长河</text><text class="subtext"> 沿着水墨长河，记录你们的每一个恋爱阶段</text></view><view class="{{['river-wrapper', i && 'active']}}" bindmouseenter="{{j}}" bindmouseleave="{{k}}" bindtap="{{l}}" bindtouchstart="{{m}}"><image class="river-bg" src="{{a}}" mode="aspectFill"/><view wx:if="{{b}}" class="hover-hint">将鼠标移动到长河上显示阶段（移动端请点击）</view><view wx:if="{{c}}" class="select-hint">在长河图片上点击设置节点位置</view><view wx:if="{{d}}" class="temp-dot" style="{{'top:' + e + ';' + ('left:' + f)}}"></view><view wx:for="{{g}}" wx:for-item="stage" wx:key="f" class="{{['stage-card', stage.g]}}" style="{{'top:' + stage.h + ';' + ('left:' + stage.i)}}" bindmouseenter="{{stage.j}}" bindmouseleave="{{stage.k}}" bindtap="{{stage.l}}"><view class="stage-dot"></view><view wx:if="{{stage.a}}" class="{{['stage-popup', stage.e]}}"><text class="stage-title">{{stage.b}}</text><text class="stage-date">{{stage.c}}</text><text class="stage-desc">{{stage.d}}</text></view></view><view class="add-stage" bindtap="{{h}}"><text class="add-icon">＋</text><text class="add-text">新增阶段</text></view></view><view wx:if="{{n}}" class="modal-mask" bindtap="{{t}}"><view class="modal" catchtap="{{s}}"><text class="modal-title">{{o}}</text><text class="modal-sub">{{p}}</text><text class="modal-desc">{{q}}</text><view class="modal-actions"><button class="btn" bindtap="{{r}}">关闭</button></view></view></view><view wx:if="{{v}}" class="modal-mask" bindtap="{{P}}"><view class="modal" catchtap="{{O}}"><text class="modal-title">新增恋爱阶段</text><view class="form"><view class="form-item"><text class="label">标题</text><input class="input" placeholder="如：初遇、表白、第一次旅行" value="{{w}}" bindinput="{{x}}"/></view><view class="form-item"><text class="label">日期</text><input class="input" placeholder="如：2023-05-20" value="{{y}}" bindinput="{{z}}"/></view><view class="form-item"><text class="label">摘要</text><input class="input" placeholder="一句话描述该阶段" value="{{A}}" bindinput="{{B}}"/></view><view class="form-item"><text class="label">详细描述</text><block wx:if="{{r0}}"><textarea class="textarea" placeholder="记录更详细的故事..." value="{{C}}" bindinput="{{D}}"></textarea></block></view><view class="form-item"><text class="label">位置侧边</text><picker range="{{F}}" value="{{G}}" bindchange="{{H}}"><view class="picker-value">{{E}}</view></picker></view><view class="form-item"><button class="btn primary" bindtap="{{I}}">在长河上选择位置</button><text wx:if="{{J}}">已选择：Top {{K}}%，Left {{L}}%</text></view></view><view class="modal-actions"><button class="btn secondary" bindtap="{{M}}">取消</button><button class="btn primary" bindtap="{{N}}">保存</button></view></view></view></view>