<view class="history-page data-v-ce9de2cf" style="{{'padding-top:' + aa}}"><view class="custom-navbar data-v-ce9de2cf"><view class="navbar-gradient-bg data-v-ce9de2cf"></view><view class="status-bar data-v-ce9de2cf" style="{{'height:' + a}}"></view><view class="navbar-content data-v-ce9de2cf" style="{{'height:' + c}}"><view class="navbar-back data-v-ce9de2cf" bindtap="{{b}}"><text class="back-icon data-v-ce9de2cf">←</text></view><view class="navbar-title data-v-ce9de2cf"><text class="title-text data-v-ce9de2cf">历史轨迹</text></view><view class="navbar-placeholder data-v-ce9de2cf"></view></view></view><view class="content-area data-v-ce9de2cf"><view class="card date-card data-v-ce9de2cf"><view class="card-header data-v-ce9de2cf"><text class="card-title data-v-ce9de2cf">选择时间区间</text></view><view class="date-range-selector data-v-ce9de2cf"><view class="date-item-wrapper data-v-ce9de2cf"><text class="date-label-text data-v-ce9de2cf">开始日期</text><picker class="data-v-ce9de2cf" mode="date" value="{{f}}" start="{{g}}" end="{{h}}" bindchange="{{i}}"><view class="date-item data-v-ce9de2cf"><text class="{{['date-value', 'data-v-ce9de2cf', e && 'placeholder']}}">{{d}}</text><text class="date-icon data-v-ce9de2cf">📅</text></view></picker></view><view class="date-arrow data-v-ce9de2cf"><text class="arrow-icon data-v-ce9de2cf">→</text></view><view class="date-item-wrapper data-v-ce9de2cf"><text class="date-label-text data-v-ce9de2cf">结束日期</text><picker class="data-v-ce9de2cf" mode="date" value="{{l}}" start="{{m}}" end="{{n}}" bindchange="{{o}}"><view class="date-item data-v-ce9de2cf"><text class="{{['date-value', 'data-v-ce9de2cf', k && 'placeholder']}}">{{j}}</text><text class="date-icon data-v-ce9de2cf">📅</text></view></picker></view></view><view class="date-actions data-v-ce9de2cf"><button bindtap="{{q}}" disabled="{{r}}" class="{{['btn-query', 'data-v-ce9de2cf', s && 'loading']}}"><text wx:if="{{p}}" class="btn-text data-v-ce9de2cf">查询轨迹</text><text wx:else class="btn-text data-v-ce9de2cf">加载中...</text></button><button wx:if="{{t}}" class="btn-clear data-v-ce9de2cf" bindtap="{{v}}"><text class="btn-text data-v-ce9de2cf">清除</text></button></view></view><view wx:if="{{w}}" class="card stats-card data-v-ce9de2cf"><view class="stats-item data-v-ce9de2cf"><text class="stats-icon data-v-ce9de2cf">📍</text><view class="stats-content data-v-ce9de2cf"><text class="stats-label data-v-ce9de2cf">轨迹点</text><text class="stats-value data-v-ce9de2cf">{{x}}</text></view></view><view class="stats-divider data-v-ce9de2cf"></view><view class="stats-item data-v-ce9de2cf"><text class="stats-icon data-v-ce9de2cf">🗓️</text><view class="stats-content data-v-ce9de2cf"><text class="stats-label data-v-ce9de2cf">时间范围</text><text class="stats-value-small data-v-ce9de2cf">{{y}} 至 {{z}}</text></view></view></view><view class="card map-container data-v-ce9de2cf"><map class="map data-v-ce9de2cf" latitude="{{A}}" longitude="{{B}}" scale="{{C}}" markers="{{D}}" polyline="{{E}}" show-location="{{false}}" enable-zoom="{{true}}" enable-scroll="{{true}}" bindmarkertap="{{F}}"/><view wx:if="{{G}}" class="empty-state data-v-ce9de2cf"><view class="empty-icon data-v-ce9de2cf">🗺️</view><text class="empty-text data-v-ce9de2cf">该时间段内没有轨迹点</text><text class="empty-hint data-v-ce9de2cf">请选择其他时间区间</text></view><view wx:if="{{H}}" class="loading-overlay data-v-ce9de2cf"><view class="loading-spinner data-v-ce9de2cf"></view><text class="loading-text data-v-ce9de2cf">正在加载轨迹...</text></view></view></view><view wx:if="{{I}}" class="modal-mask data-v-ce9de2cf" bindtap="{{Z}}"><view class="modal data-v-ce9de2cf" catchtap="{{Y}}"><view class="modal-header data-v-ce9de2cf"><text class="modal-title data-v-ce9de2cf">{{J}}</text><text class="modal-date data-v-ce9de2cf">{{K}}</text></view><view class="modal-content data-v-ce9de2cf"><view wx:if="{{L}}" class="point-address data-v-ce9de2cf"><text class="address-label data-v-ce9de2cf">📍</text><text class="address-text data-v-ce9de2cf">{{M}}</text></view><image wx:if="{{N}}" src="{{O}}" class="point-image data-v-ce9de2cf" mode="aspectFill"/><image wx:elif="{{P}}" src="{{Q}}" class="point-image data-v-ce9de2cf" mode="aspectFill"/><text class="point-description data-v-ce9de2cf">{{R}}</text><view wx:if="{{S}}" class="point-meta data-v-ce9de2cf"><text wx:if="{{T}}" class="meta-text data-v-ce9de2cf">到访次数：{{U}}</text><text wx:if="{{V}}" class="meta-text data-v-ce9de2cf">停留时长：{{W}}</text></view></view><view class="modal-actions data-v-ce9de2cf"><button class="btn secondary data-v-ce9de2cf" bindtap="{{X}}">关闭</button></view></view></view></view>