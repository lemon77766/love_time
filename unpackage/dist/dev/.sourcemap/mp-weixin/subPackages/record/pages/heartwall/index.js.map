{"version":3,"file":"index.js","sources":["subPackages/record/pages/heartwall/index.vue","D:/softcaree/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNccmVjb3JkXHBhZ2VzXGhlYXJ0d2FsbFxpbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"heartwall-page\" :style=\"{ paddingTop: containerPaddingTop }\">\r\n    <!-- Ëá™ÂÆö‰πâÂØºËà™Ê†è -->\r\n    <view class=\"custom-navbar\">\r\n      <!-- Ê∏êÂèòËÉåÊôØ -->\r\n      <view class=\"navbar-gradient-bg\"></view>\r\n      <!-- Áä∂ÊÄÅÊ†èÂç†‰Ωç -->\r\n      <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\r\n      <!-- ÂØºËà™Ê†èÂÜÖÂÆπ -->\r\n      <view class=\"navbar-content\" :style=\"{ height: navBarHeight + 'px' }\">\r\n        <view class=\"navbar-left\" @click=\"goBack\">\r\n          <text class=\"back-icon\">‚Üê</text>\r\n        </view>\r\n        <view class=\"navbar-title\">\r\n          <text class=\"title-text\">Áà±ÂøÉÁÖßÁâáÂ¢ô</text>\r\n        </view>\r\n        <view class=\"navbar-right\"></view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- È°πÁõÆÂàóË°® -->\r\n    <view v-if=\"projects.length > 0\" class=\"projects-list\">\r\n      <view v-for=\"(project, index) in projects\" :key=\"index\" class=\"card\" @click=\"editProject(index)\">\r\n        <view class=\"cover\" :class=\"{ 'no-image': !project.cover }\">\r\n          <image v-if=\"project.cover\" class=\"cover-img\" :src=\"project.cover\" mode=\"aspectFill\" />\r\n          <text v-else class=\"cover-placeholder\">‚ô•</text>\r\n        </view>\r\n        <view class=\"meta\">\r\n          <view class=\"row\"><text class=\"label\">È°πÁõÆÂêçÁß∞Ôºö</text><text class=\"value\">{{ project.projectName || 'Êú™ËÆæÁΩÆ' }}</text></view>\r\n          <view class=\"row\"><text class=\"label\">ËøõÂ∫¶Ôºö</text><text class=\"value bold\">{{ project.progress }}/{{ project.total }}</text></view>\r\n          <view class=\"row\"><text class=\"label\">ÂàõÂª∫Êó∂Èó¥Ôºö</text><text class=\"value\">{{ project.createdAt || '-' }}</text></view>\r\n        </view>\r\n        <view class=\"actions-cell\">\r\n          <text class=\"delete-btn\" @click.stop=\"deleteProject(index)\">Âà†Èô§</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"content-tip\" v-else>\r\n      üé® ÊöÇÊó†È°πÁõÆÔºåÁÇπÂáª‰∏ãÊñπÊåâÈíÆÂàõÂª∫Êñ∞È°πÁõÆ\r\n    </view>\r\n\r\n    <view class=\"bottom\">\r\n      <button class=\"start-btn\" @click=\"startCreate\">+ ÂàõÂª∫Êñ∞È°πÁõÆ</button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { getProjects, deleteProject, getProjectPhotos } from '@/api/heartwall.js';\r\nimport config from '@/utils/config.js';\r\n\r\n// Â§ÑÁêÜÂõæÁâáURLÔºöÂ¶ÇÊûúÊòØÁõ∏ÂØπË∑ØÂæÑÔºåÊãºÊé•baseURL\r\nfunction processImageUrl(url) {\r\n  if (!url || url === '') {\r\n    return '';\r\n  }\r\n  \r\n  // Â¶ÇÊûúÂ∑≤ÁªèÊòØÂÆåÊï¥ÁöÑURLÔºàhttp:// Êàñ https://ÔºâÔºåÁõ¥Êé•ËøîÂõû\r\n  if (url.startsWith('http://') || url.startsWith('https://')) {\r\n    return url;\r\n  }\r\n  \r\n  // Â¶ÇÊûúÊòØÁõ∏ÂØπË∑ØÂæÑÔºà‰ª• / ÂºÄÂ§¥ÔºâÔºåÊãºÊé•baseURL\r\n  if (url.startsWith('/')) {\r\n    // ÁßªÈô§baseURLÊú´Â∞æÂèØËÉΩÂ≠òÂú®ÁöÑÊñúÊù†ÔºåÈÅøÂÖçÂèåÊñúÊù†\r\n    const baseUrl = config.baseURL.endsWith('/') ? config.baseURL.slice(0, -1) : config.baseURL;\r\n    return baseUrl + url;\r\n  }\r\n  \r\n  // ÂÖ∂‰ªñÊÉÖÂÜµÔºàÂèØËÉΩÊòØÁõ∏ÂØπË∑ØÂæÑ‰ΩÜ‰∏ç‰ª•/ÂºÄÂ§¥ÔºâÔºå‰πüÂ∞ùËØïÊãºÊé•\r\n  const baseUrl = config.baseURL.endsWith('/') ? config.baseURL.slice(0, -1) : config.baseURL;\r\n  return baseUrl + '/' + url;\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      statusBarHeight: 0,\r\n      navBarHeight: 44,\r\n      screenWidth: 375,\r\n      projects: [],\r\n      loading: false\r\n    };\r\n  },\r\n  computed: {\r\n    containerPaddingTop() {\r\n      const totalHeightPx = this.statusBarHeight + this.navBarHeight;\r\n      const pxToRpx = 750 / this.screenWidth;\r\n      const totalHeightRpx = totalHeightPx * pxToRpx;\r\n      return totalHeightRpx + 20 + 'rpx';\r\n    }\r\n  },\r\n  // Âú®È°µÈù¢ÈîÄÊØÅÊó∂ÂèñÊ∂à‰∫ã‰ª∂ÁõëÂê¨\r\n  beforeDestroy() {\r\n    uni.$off('heartwallPhotoUpdated', this.handlePhotoUpdated);\r\n  },\r\n  onLoad() {\r\n    this.getSystemInfo();\r\n  },\r\n  mounted() {\r\n    this.getSystemInfo();\r\n    // ‰∏çÂÜçÂº∫Âà∂Ë¶ÅÊ±ÇÁôªÂΩïÔºåÂÖÅËÆ∏Áî®Êà∑ÂÖàÊµèËßàÈ°µÈù¢\r\n    // Âú®Áî®Êà∑Â∞ùËØïÊâßË°åÈúÄË¶ÅÁôªÂΩïÁöÑÊìç‰ΩúÊó∂ÂÜçÊ£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ\r\n    \r\n    // Ê£ÄÊü•ÊòØÂê¶‰∏∫Ê∏∏ÂÆ¢Áî®Êà∑\r\n    const loginInfo = uni.getStorageSync('login_info');\r\n    const isGuest = !loginInfo || loginInfo.isGuest || !loginInfo.isLoggedIn;\r\n    \r\n    if (isGuest) {\r\n      // Ê∏∏ÂÆ¢Ê®°ÂºèÔºö‰ΩøÁî®ÈªòËÆ§Êï∞ÊçÆÔºå‰∏çË∞ÉÁî®API\r\n      console.log('üë§ Ê∏∏ÂÆ¢Ê®°ÂºèÔºöÊòæÁ§∫Á§∫‰æãÈ°πÁõÆ');\r\n      this.useGuestMode();\r\n    } else {\r\n      // ÁôªÂΩïÁî®Êà∑Ôºö‰ªéÂêéÁ´ØÂä†ËΩΩÊï∞ÊçÆ\r\n      try {\r\n        this.loadProjects();\r\n      } catch (error) {\r\n        console.error('Âä†ËΩΩÊúçÂä°Âô®Êï∞ÊçÆÂ§±Ë¥•:', error);\r\n        // Â¶ÇÊûúÂä†ËΩΩÂ§±Ë¥•ÔºåÂõûÈÄÄÂà∞Ê∏∏ÂÆ¢Ê®°Âºè\r\n        this.useGuestMode();\r\n      }\r\n    }\r\n    \r\n    // ÁõëÂê¨ÁÖßÁâáÊõ¥Êñ∞‰∫ã‰ª∂ÔºåÂà∑Êñ∞Â∞ÅÈù¢Âõæ\r\n    uni.$on('heartwallPhotoUpdated', this.handlePhotoUpdated);\r\n  },\r\n  onShow() {\r\n    // Ê£ÄÊü•ÊòØÂê¶‰∏∫Ê∏∏ÂÆ¢Áî®Êà∑\r\n    const loginInfo = uni.getStorageSync('login_info');\r\n    const isGuest = !loginInfo || loginInfo.isGuest || !loginInfo.isLoggedIn;\r\n    \r\n    if (!isGuest) {\r\n      // Âè™ÊúâÁôªÂΩïÁî®Êà∑ÊâçÈáçÊñ∞Âä†ËΩΩÊï∞ÊçÆ\r\n      try {\r\n        uni.removeStorageSync('heartwall_projects');\r\n      } catch (e) {\r\n        console.warn('‚ö†Ô∏è [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Ê∏ÖÈô§ÁºìÂ≠òÂ§±Ë¥•:', e);\r\n      }\r\n      this.loadProjects();\r\n    }\r\n    // Ê∏∏ÂÆ¢Áî®Êà∑‰∏çÈáçÊñ∞Âä†ËΩΩÊï∞ÊçÆÔºå‰øùÊåÅÁé∞ÊúâÁöÑÁ§∫‰æãÊï∞ÊçÆ\r\n  },\r\n  methods: {\r\n    // Ê∏∏ÂÆ¢Ê®°ÂºèÔºö‰ΩøÁî®ÈªòËÆ§Êï∞ÊçÆ\r\n    useGuestMode() {\r\n      // ËÆæÁΩÆÁ§∫‰æãÈ°πÁõÆ\r\n      this.projects = [\r\n        {\r\n          id: 'sample1',\r\n          title: 'Á§∫‰æãÂøÉÂΩ¢Â¢ô1',\r\n          photos: [],\r\n          createTime: new Date().toLocaleDateString(),\r\n          filledCount: 0,\r\n          projectId: 'sample1'\r\n        },\r\n        {\r\n          id: 'sample2', \r\n          title: 'Á§∫‰æãÂøÉÂΩ¢Â¢ô2',\r\n          photos: [],\r\n          createTime: new Date().toLocaleDateString(),\r\n          filledCount: 0,\r\n          projectId: 'sample2'\r\n        }\r\n      ];\r\n      \r\n      console.log('‚úÖ Ê∏∏ÂÆ¢Ê®°ÂºèÂàùÂßãÂåñÂÆåÊàê');\r\n    },\r\n\r\n    goBack() {\r\n      uni.navigateBack();\r\n    },\r\n    // Â§ÑÁêÜÁÖßÁâáÊõ¥Êñ∞‰∫ã‰ª∂\r\n    handlePhotoUpdated(data) {\r\n      console.log('üì∑ [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Êé•Êî∂Âà∞ÁÖßÁâáÊõ¥Êñ∞‰∫ã‰ª∂:', data);\r\n      \r\n      // Êü•ÊâæÂØπÂ∫îÁöÑÈ°πÁõÆÂπ∂Êõ¥Êñ∞Â∞ÅÈù¢Âõæ\r\n      const projectIndex = this.projects.findIndex(p => p.projectId == data.projectId);\r\n      if (projectIndex !== -1) {\r\n        // Â¶ÇÊûúËØ•È°πÁõÆËøòÊ≤°ÊúâÂ∞ÅÈù¢ÂõæÔºåÊàñËÄÖÊõ¥Êñ∞ÁöÑÊòØÁ¨¨‰∏ÄÂº†ÁÖßÁâáÔºàpositionIndexËæÉÂ∞èÔºâÔºåÂàôÊõ¥Êñ∞Â∞ÅÈù¢Âõæ\r\n        if (!this.projects[projectIndex].cover || data.positionIndex <= 5) {\r\n          this.$set(this.projects[projectIndex], 'cover', data.photoUrl);\r\n          console.log(`‚úÖ [Áà±ÂøÉÂ¢ôÈ°µÈù¢] È°πÁõÆ ${data.projectId} Â∞ÅÈù¢ÂõæÂ∑≤Êõ¥Êñ∞`);\r\n          \r\n          // Êõ¥Êñ∞Êú¨Âú∞ÁºìÂ≠ò\r\n          try {\r\n            uni.setStorageSync('heartwall_projects', this.projects);\r\n          } catch (e) {\r\n            console.warn('‚ö†Ô∏è [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Êõ¥Êñ∞Êú¨Âú∞ÁºìÂ≠òÂ§±Ë¥•:', e);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    getSystemInfo() {\r\n      const systemInfo = uni.getSystemInfoSync();\r\n      this.statusBarHeight = systemInfo.statusBarHeight || 0;\r\n      this.screenWidth = systemInfo.windowWidth || 375;\r\n      // #ifdef MP-WEIXIN\r\n      this.navBarHeight = 44;\r\n      // #endif\r\n      // #ifdef H5\r\n      this.navBarHeight = 44;\r\n      // #endif\r\n    },\r\n    async loadProjects() {\r\n      if (this.loading) return;\r\n      this.loading = true;\r\n      \r\n      try {\r\n        console.log('üì° [Áà±ÂøÉÂ¢ôÈ°µÈù¢] ÂºÄÂßã‰ªéÂêéÁ´ØÂä†ËΩΩÈ°πÁõÆÂàóË°®');\r\n        \r\n        // Ë∞ÉÁî®ÂêéÁ´ØAPIËé∑ÂèñÈ°πÁõÆÂàóË°®\r\n        const response = await getProjects();\r\n        \r\n        console.log('üì° [Áà±ÂøÉÂ¢ôÈ°µÈù¢] ÂêéÁ´ØËøîÂõûÊï∞ÊçÆ:', response);\r\n        console.log('üì° [Áà±ÂøÉÂ¢ôÈ°µÈù¢] response.data:', response.data);\r\n        console.log('üì° [Áà±ÂøÉÂ¢ôÈ°µÈù¢] response.projects:', response.projects);\r\n        console.log('üì° [Áà±ÂøÉÂ¢ôÈ°µÈù¢] response.data[0]:', response.data && response.data[0]);\r\n        \r\n        // Â§ÑÁêÜÂìçÂ∫îÊï∞ÊçÆ\r\n        let projectsData = [];\r\n        if (response && response.data) {\r\n          // Â¶ÇÊûúÂìçÂ∫îÊòØ { data: [...] }\r\n          projectsData = Array.isArray(response.data) ? response.data : (response.data.projects || []);\r\n        } else if (Array.isArray(response)) {\r\n          // Â¶ÇÊûúÂìçÂ∫îÁõ¥Êé•ÊòØÊï∞ÁªÑ\r\n          projectsData = response;\r\n        } else if (response && response.projects) {\r\n          // Â¶ÇÊûúÂìçÂ∫îÊòØ { projects: [...] }\r\n          projectsData = response.projects;\r\n        }\r\n        \r\n        // ËΩ¨Êç¢ÂêéÁ´ØÊï∞ÊçÆÊ†ºÂºè‰∏∫ÂâçÁ´ØÊòæÁ§∫Ê†ºÂºè\r\n        console.log('üîç [Áà±ÂøÉÂ¢ôÈ°µÈù¢] ÂéüÂßãÈ°πÁõÆÊï∞ÊçÆ:', projectsData);\r\n        console.log('üîç [Áà±ÂøÉÂ¢ôÈ°µÈù¢] ÂéüÂßãÈ°πÁõÆÊï∞ÊçÆÈïøÂ∫¶:', projectsData.length);\r\n        if (projectsData.length > 0) {\r\n          console.log('üîç [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Á¨¨‰∏Ä‰∏™È°πÁõÆÁöÑÊâÄÊúâÂ≠óÊÆµ:', Object.keys(projectsData[0]));\r\n          console.log('üîç [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Á¨¨‰∏Ä‰∏™È°πÁõÆÁöÑÂÆåÊï¥Êï∞ÊçÆ:', JSON.stringify(projectsData[0], null, 2));\r\n        }\r\n        \r\n        this.projects = projectsData.map((project, index) => {\r\n          // Á°Æ‰øùÊ≠£Á°ÆÊèêÂèñ projectName\r\n          const projectName = project.projectName !== undefined && project.projectName !== null \r\n            ? String(project.projectName).trim() \r\n            : (project.name || 'Êú™ËÆæÁΩÆ');\r\n          \r\n          console.log(`üîç [Áà±ÂøÉÂ¢ôÈ°µÈù¢] È°πÁõÆ ${index} ÂéüÂßãÊï∞ÊçÆ:`, project);\r\n          console.log(`üîç [Áà±ÂøÉÂ¢ôÈ°µÈù¢] È°πÁõÆ ${index} projectName ÂéüÂßãÂÄº:`, project.projectName);\r\n          console.log(`üîç [Áà±ÂøÉÂ¢ôÈ°µÈù¢] È°πÁõÆ ${index} ÊèêÂèñÁöÑ projectName:`, projectName);\r\n          \r\n          const mappedProject = {\r\n            projectId: project.projectId || project.id,\r\n            cover: project.cover || project.coverImage || project.coverPhotoUrl || '',\r\n            projectName: projectName || 'Êú™ËÆæÁΩÆ',\r\n            progress: project.progress || project.photoCount || 0,\r\n            total: project.total || project.maxPhotos || 40,\r\n            createdAt: project.createdAt || project.createTime || project.created_time || '-',\r\n            // ‰øùÁïôÂêéÁ´ØÂéüÂßãÊï∞ÊçÆÁî®‰∫éÁºñËæëÊó∂‰ΩøÁî®\r\n            _original: project\r\n          };\r\n          console.log(`üîç [Áà±ÂøÉÂ¢ôÈ°µÈù¢] È°πÁõÆ ${index} Êò†Â∞ÑÂêéÁöÑÊï∞ÊçÆ:`, mappedProject);\r\n          return mappedProject;\r\n        });\r\n        \r\n        console.log(`‚úÖ [Áà±ÂøÉÂ¢ôÈ°µÈù¢] ÊàêÂäüÂä†ËΩΩ ${this.projects.length} ‰∏™È°πÁõÆ`);\r\n        console.log('üîç [Áà±ÂøÉÂ¢ôÈ°µÈù¢] ÊúÄÁªàÈ°πÁõÆÂàóË°®:', this.projects);\r\n        \r\n        // ‰∏∫Ê≤°ÊúâÂ∞ÅÈù¢ÂõæÁöÑÈ°πÁõÆËé∑ÂèñÁ¨¨‰∏ÄÂº†ÁÖßÁâá‰Ωú‰∏∫Â∞ÅÈù¢Âõæ\r\n        await this.loadProjectCovers();\r\n        \r\n        // ÂêåÊó∂Êõ¥Êñ∞Êú¨Âú∞ÁºìÂ≠òÔºà‰Ωú‰∏∫Â§á‰ªΩÔºâ\r\n        try {\r\n          uni.setStorageSync('heartwall_projects', this.projects);\r\n        } catch (e) {\r\n          console.warn('‚ö†Ô∏è [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Êõ¥Êñ∞Êú¨Âú∞ÁºìÂ≠òÂ§±Ë¥•:', e);\r\n        }\r\n      } catch (error) {\r\n        console.error('‚ùå [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Âä†ËΩΩÈ°πÁõÆÂàóË°®Â§±Ë¥•:', error);\r\n        \r\n        // Â¶ÇÊûúAPIË∞ÉÁî®Â§±Ë¥•ÔºåÂ∞ùËØï‰ªéÊú¨Âú∞ÁºìÂ≠òËØªÂèñÔºàÈôçÁ∫ßÂ§ÑÁêÜÔºâ\r\n        try {\r\n          const cached = uni.getStorageSync('heartwall_projects');\r\n          if (Array.isArray(cached) && cached.length > 0) {\r\n            console.warn('‚ö†Ô∏è [Áà±ÂøÉÂ¢ôÈ°µÈù¢] ‰ΩøÁî®Êú¨Âú∞ÁºìÂ≠òÊï∞ÊçÆ‰Ωú‰∏∫ÈôçÁ∫ßÊñπÊ°à');\r\n            this.projects = cached;\r\n            uni.showToast({ \r\n              title: 'ÁΩëÁªúÂºÇÂ∏∏ÔºåÂ∑≤Âä†ËΩΩÊú¨Âú∞Êï∞ÊçÆ', \r\n              icon: 'none',\r\n              duration: 2000\r\n            });\r\n          } else {\r\n            this.projects = [];\r\n          }\r\n        } catch (e) {\r\n          this.projects = [];\r\n        }\r\n        \r\n        // ÊòæÁ§∫ÈîôËØØÊèêÁ§∫\r\n        uni.showToast({ \r\n          title: 'Âä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªú', \r\n          icon: 'none',\r\n          duration: 2000\r\n        });\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    // ‰∏∫Ê≤°ÊúâÂ∞ÅÈù¢ÂõæÁöÑÈ°πÁõÆËé∑ÂèñÁ¨¨‰∏ÄÂº†ÁÖßÁâá‰Ωú‰∏∫Â∞ÅÈù¢Âõæ\r\n    async loadProjectCovers() {\r\n      try {\r\n        console.log('üñºÔ∏è [Áà±ÂøÉÂ¢ôÈ°µÈù¢] ÂºÄÂßãÂä†ËΩΩÈ°πÁõÆÂ∞ÅÈù¢Âõæ');\r\n        \r\n        // ÊâæÂá∫ÊâÄÊúâÊ≤°ÊúâÂ∞ÅÈù¢ÂõæÁöÑÈ°πÁõÆ\r\n        const projectsWithoutCover = this.projects\r\n          .map((project, index) => ({ project, index }))\r\n          .filter(({ project }) => !project.cover || project.cover === '');\r\n        \r\n        console.log(`üñºÔ∏è [Áà±ÂøÉÂ¢ôÈ°µÈù¢] ÈúÄË¶ÅÂä†ËΩΩÂ∞ÅÈù¢ÂõæÁöÑÈ°πÁõÆÊï∞Èáè: ${projectsWithoutCover.length}`);\r\n        \r\n        if (projectsWithoutCover.length === 0) {\r\n          console.log('‚úÖ [Áà±ÂøÉÂ¢ôÈ°µÈù¢] ÊâÄÊúâÈ°πÁõÆÈÉΩÊúâÂ∞ÅÈù¢ÂõæÔºåÊó†ÈúÄÂä†ËΩΩ');\r\n          return;\r\n        }\r\n        \r\n        // Âπ∂Ë°åËé∑ÂèñÊâÄÊúâÈ°πÁõÆÁöÑÁ¨¨‰∏ÄÂº†ÁÖßÁâá\r\n        const coverPromises = projectsWithoutCover.map(async ({ project, index }) => {\r\n          try {\r\n            const projectId = project.projectId || project.id;\r\n            if (!projectId) {\r\n              console.warn(`‚ö†Ô∏è [Áà±ÂøÉÂ¢ôÈ°µÈù¢] È°πÁõÆ ${index} Ê≤°Êúâ projectIdÔºåË∑≥ËøáÂä†ËΩΩÂ∞ÅÈù¢Âõæ`);\r\n              return { index, cover: null };\r\n            }\r\n            \r\n            console.log(`üì∑ [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Ëé∑ÂèñÈ°πÁõÆ ${index} (ID: ${projectId}) ÁöÑÁ¨¨‰∏ÄÂº†ÁÖßÁâá`);\r\n            \r\n            // Âè™Ëé∑ÂèñÁ¨¨‰∏ÄÂº†ÁÖßÁâáÔºàpageSize=1Ôºâ\r\n            const photosResponse = await getProjectPhotos(projectId, { page: 1, pageSize: 1 });\r\n            \r\n            // Â§ÑÁêÜÁÖßÁâáÊï∞ÊçÆ\r\n            let photosData = [];\r\n            if (photosResponse && photosResponse.data) {\r\n              photosData = Array.isArray(photosResponse.data) ? photosResponse.data : (photosResponse.data.photos || []);\r\n            } else if (Array.isArray(photosResponse)) {\r\n              photosData = photosResponse;\r\n            } else if (photosResponse && photosResponse.photos) {\r\n              photosData = photosResponse.photos;\r\n            }\r\n            \r\n            // Ëé∑ÂèñÁ¨¨‰∏ÄÂº†ÁÖßÁâáÁöÑURL\r\n            let coverUrl = '';\r\n            if (photosData.length > 0) {\r\n              const firstPhoto = photosData[0];\r\n              const rawUrl = firstPhoto.photoUrl || firstPhoto.photo_url || firstPhoto.thumbnailUrl || firstPhoto.thumbnail_url || '';\r\n              // Â§ÑÁêÜURLÔºöÂ¶ÇÊûúÊòØÁõ∏ÂØπË∑ØÂæÑÔºåÊãºÊé•baseURL\r\n              coverUrl = processImageUrl(rawUrl);\r\n              console.log(`‚úÖ [Áà±ÂøÉÂ¢ôÈ°µÈù¢] È°πÁõÆ ${index} ÊâæÂà∞Â∞ÅÈù¢Âõæ - ÂéüÂßãURL: ${rawUrl}, Â§ÑÁêÜÂêéURL: ${coverUrl}`);\r\n            } else {\r\n              console.log(`‚ö†Ô∏è [Áà±ÂøÉÂ¢ôÈ°µÈù¢] È°πÁõÆ ${index} Ê≤°ÊúâÁÖßÁâáÔºåÊó†Ê≥ïËÆæÁΩÆÂ∞ÅÈù¢Âõæ`);\r\n            }\r\n            \r\n            return { index, cover: coverUrl };\r\n          } catch (error) {\r\n            console.error(`‚ùå [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Ëé∑ÂèñÈ°πÁõÆ ${index} Â∞ÅÈù¢ÂõæÂ§±Ë¥•:`, error);\r\n            return { index, cover: null };\r\n          }\r\n        });\r\n        \r\n        // Á≠âÂæÖÊâÄÊúâÂ∞ÅÈù¢ÂõæÂä†ËΩΩÂÆåÊàê\r\n        const coverResults = await Promise.all(coverPromises);\r\n        \r\n        // Êõ¥Êñ∞È°πÁõÆÁöÑÂ∞ÅÈù¢Âõæ\r\n        coverResults.forEach(({ index, cover }) => {\r\n          if (cover) {\r\n            // ‰ΩøÁî® Vue.set Á°Æ‰øùÂìçÂ∫îÂºèÊõ¥Êñ∞\r\n            this.$set(this.projects[index], 'cover', cover);\r\n            console.log(`‚úÖ [Áà±ÂøÉÂ¢ôÈ°µÈù¢] È°πÁõÆ ${index} Â∞ÅÈù¢ÂõæÂ∑≤Êõ¥Êñ∞:`, cover);\r\n          }\r\n        });\r\n        \r\n        // Êõ¥Êñ∞Êú¨Âú∞ÁºìÂ≠ò\r\n        try {\r\n          uni.setStorageSync('heartwall_projects', this.projects);\r\n        } catch (e) {\r\n          console.warn('‚ö†Ô∏è [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Êõ¥Êñ∞Êú¨Âú∞ÁºìÂ≠òÂ§±Ë¥•:', e);\r\n        }\r\n        \r\n        console.log('‚úÖ [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Â∞ÅÈù¢ÂõæÂä†ËΩΩÂÆåÊàê');\r\n      } catch (error) {\r\n        console.error('‚ùå [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Âä†ËΩΩÂ∞ÅÈù¢ÂõæÂ§±Ë¥•:', error);\r\n        // ‰∏çÂΩ±Âìç‰∏ªÊµÅÁ®ãÔºåÂè™ËÆ∞ÂΩïÈîôËØØ\r\n      }\r\n    },\r\n    startCreate() {\r\n      // Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÁôªÂΩï\r\n      const loginInfo = uni.getStorageSync('login_info');\r\n      if (!loginInfo || loginInfo.isGuest || !loginInfo.isLoggedIn) {\r\n        uni.showModal({\r\n          title: 'ÈúÄË¶ÅÁôªÂΩï',\r\n          content: 'ÂàõÂª∫È°πÁõÆÈúÄË¶ÅÁôªÂΩïÂêéÊâçËÉΩ‰ΩøÁî®ÔºåÊòØÂê¶ÂâçÂæÄÁôªÂΩïÔºü\\n\\nÊÇ®‰ªçÁÑ∂ÂèØ‰ª•ÁªßÁª≠ÊµèËßàÁé∞ÊúâÈ°πÁõÆ„ÄÇ',\r\n          confirmText: 'ÂéªÁôªÂΩï',\r\n          cancelText: 'ÁªßÁª≠ÊµèËßà',\r\n          success: (res) => {\r\n            if (res.confirm) {\r\n              uni.navigateTo({\r\n                url: '/pages/login/index'\r\n              });\r\n            }\r\n          }\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // Ê∏ÖÈô§ÂΩìÂâçÁºñËæëÁ¥¢ÂºïÔºåË°®Á§∫ÂàõÂª∫Êñ∞È°πÁõÆ\r\n      uni.removeStorageSync('heartwall_editing_projectId');\r\n      uni.removeStorageSync('heartwall_grid_images');\r\n      uni.navigateTo({ url: '/subPackages/record/pages/heartwall/create' });\r\n    },\r\n    editProject(index) {\r\n      // ‰øùÂ≠òÊ≠£Âú®ÁºñËæëÁöÑÈ°πÁõÆID\r\n      const project = this.projects[index];\r\n      if (project && project.projectId) {\r\n        uni.setStorageSync('heartwall_editing_projectId', project.projectId);\r\n        // Â¶ÇÊûúÊúâÂéüÂßãÊï∞ÊçÆÔºå‰πü‰øùÂ≠ò‰∏Ä‰ªΩ\r\n        if (project._original) {\r\n          uni.setStorageSync('heartwall_editing_project', JSON.stringify(project._original));\r\n        }\r\n      }\r\n      uni.navigateTo({ url: '/subPackages/record/pages/heartwall/create' });\r\n    },\r\n    async deleteProject(index) {\r\n      // Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÁôªÂΩï\r\n      const loginInfo = uni.getStorageSync('login_info');\r\n      if (!loginInfo || loginInfo.isGuest || !loginInfo.isLoggedIn) {\r\n        uni.showModal({\r\n          title: 'ÈúÄË¶ÅÁôªÂΩï',\r\n          content: 'Âà†Èô§È°πÁõÆÈúÄË¶ÅÁôªÂΩïÂêéÊâçËÉΩ‰ΩøÁî®ÔºåÊòØÂê¶ÂâçÂæÄÁôªÂΩïÔºü',\r\n          confirmText: 'ÂéªÁôªÂΩï',\r\n          cancelText: 'ÁªßÁª≠ÊµèËßà',\r\n          success: (res) => {\r\n            if (res.confirm) {\r\n              uni.navigateTo({\r\n                url: '/pages/login/index'\r\n              });\r\n            }\r\n          }\r\n        });\r\n        return;\r\n      }\r\n      \r\n      const project = this.projects[index];\r\n      const projectId = project?.projectId || project?.id;\r\n      \r\n      uni.showModal({\r\n        title: 'Á°ÆËÆ§Âà†Èô§',\r\n        content: 'Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™È°πÁõÆÂêóÔºüÂà†Èô§ÂêéÊó†Ê≥ïÊÅ¢Â§ç„ÄÇ',\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            try {\r\n              // Â¶ÇÊûúÊúâprojectIdÔºåË∞ÉÁî®ÂêéÁ´ØAPIÂà†Èô§\r\n              if (projectId) {\r\n                console.log(`üóëÔ∏è [Áà±ÂøÉÂ¢ôÈ°µÈù¢] ÂºÄÂßãÂà†Èô§È°πÁõÆ ID: ${projectId}`);\r\n                await deleteProject(projectId);\r\n                console.log(`‚úÖ [Áà±ÂøÉÂ¢ôÈ°µÈù¢] È°πÁõÆÂà†Èô§ÊàêÂäü ID: ${projectId}`);\r\n              }\r\n              \r\n              // ‰ªéÂàóË°®‰∏≠ÁßªÈô§\r\n              this.projects.splice(index, 1);\r\n              \r\n              // Êõ¥Êñ∞Êú¨Âú∞ÁºìÂ≠ò\r\n              try {\r\n                uni.setStorageSync('heartwall_projects', this.projects);\r\n              } catch (e) {}\r\n              \r\n              uni.showToast({ title: 'Â∑≤Âà†Èô§', icon: 'success' });\r\n            } catch (error) {\r\n              console.error('‚ùå [Áà±ÂøÉÂ¢ôÈ°µÈù¢] Âà†Èô§È°πÁõÆÂ§±Ë¥•:', error);\r\n              uni.showToast({ \r\n                title: error.message || 'Âà†Èô§Â§±Ë¥•ÔºåËØ∑ÈáçËØï', \r\n                icon: 'none' \r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Ëá™ÂÆö‰πâÂØºËà™Ê†èÊ†∑Âºè */\r\n.custom-navbar {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 9999;\r\n  background-color: #FFFAF4;\r\n  overflow: hidden;\r\n}\r\n\r\n.navbar-gradient-bg {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 200%;\r\n  background: rgba(255, 255, 255, 0.7);\r\n  backdrop-filter: blur(15px);\r\n  -webkit-backdrop-filter: blur(15px);\r\n}\r\n\r\n.status-bar {\r\n  width: 100%;\r\n  background: transparent;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.navbar-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 30rpx;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.navbar-title {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  text-align: center;\r\n}\r\n\r\n.title-text {\r\n  font-size: 36rpx;\r\n  font-weight: 500;\r\n  color: #4A4A4A;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n\r\n.navbar-left {\r\n  width: 80rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.back-icon {\r\n  font-size: 50rpx;\r\n  font-weight: 600;\r\n  color: #4A4A4A;\r\n  line-height: 1;\r\n  cursor: pointer;\r\n  transition: opacity 0.3s;\r\n}\r\n\r\n.back-icon:active {\r\n  opacity: 0.6;\r\n}\r\n\r\n.navbar-right {\r\n  width: 80rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.heartwall-page { \r\n  min-height: 100vh; \r\n  background: #FFFAF4; \r\n  padding-bottom: 120rpx; \r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.projects-list { padding: 24rpx 24rpx 0 24rpx; }\r\n.card { \r\n  margin-bottom: 24rpx; \r\n  padding: 20rpx; \r\n  background: rgba(255, 255, 255, 0.7);\r\n  backdrop-filter: blur(15px);\r\n  -webkit-backdrop-filter: blur(15px);\r\n  border-radius: 16rpx; \r\n  box-shadow: 0 8rpx 12rpx rgba(0, 0, 0, 0.04), inset 0 0 0 2rpx rgba(255,255,255,0.5);\r\n  display: flex; \r\n  gap: 20rpx; \r\n  position: relative; \r\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\r\n}\r\n.card:active { \r\n  transform: scale(0.98);\r\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\r\n}\r\n.cover { \r\n  width: 160rpx; \r\n  height: 160rpx; \r\n  border-radius: 16rpx; \r\n  background: rgba(255, 255, 255, 0.5); \r\n  display: flex; \r\n  align-items: center; \r\n  justify-content: center; \r\n  overflow: hidden; \r\n  flex-shrink: 0; \r\n}\r\n.cover-img { width: 100%; height: 100%; }\r\n.no-image { \r\n  background: linear-gradient(135deg, #FFB5C2 0%, #FFD4A3 100%); \r\n}\r\n.cover-placeholder { \r\n  font-size: 60rpx; \r\n  color: rgba(255, 255, 255, 0.8); \r\n}\r\n.meta { \r\n  flex: 1; \r\n  display: flex; \r\n  flex-direction: column; \r\n  gap: 12rpx; \r\n  justify-content: center; \r\n}\r\n.row { \r\n  display: flex; \r\n  align-items: baseline; \r\n  gap: 8rpx; \r\n}\r\n.label { \r\n  color: #4A4A4A; \r\n  font-size: 26rpx; \r\n  font-weight: 500;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.value { \r\n  color: #666; \r\n  font-size: 26rpx; \r\n  font-weight: 400;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.bold { \r\n  font-weight: 600; \r\n  color: #4A4A4A;\r\n}\r\n.actions-cell { \r\n  position: absolute; \r\n  top: 20rpx; \r\n  right: 20rpx; \r\n}\r\n.delete-btn { \r\n  font-size: 24rpx; \r\n  color: #ff6b6b; \r\n  background: rgba(255,107,107,0.1); \r\n  padding: 8rpx 16rpx; \r\n  border-radius: 20rpx; \r\n}\r\n.content-tip { \r\n  margin: 32rpx 24rpx; \r\n  color: #666; \r\n  font-size: 26rpx; \r\n  text-align: center; \r\n  font-weight: 400;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.bottom { \r\n  position: fixed; \r\n  left: 0; \r\n  right: 0; \r\n  bottom: 24rpx; \r\n  display: flex; \r\n  justify-content: center; \r\n}\r\n.start-btn { \r\n  width: 80%; \r\n  border-radius: 999rpx; \r\n  padding: 18rpx 0; \r\n  background: linear-gradient(135deg, #FFB5C2 0%, #FFD4A3 100%);\r\n  color: #ffffff; \r\n  font-size: 28rpx; \r\n  box-shadow: 0 8rpx 24rpx rgba(255, 181, 194, 0.4); \r\n  font-weight: 600;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/love_time/subPackages/record/pages/heartwall/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["baseUrl","config","uni","getProjects","getProjectPhotos","deleteProject"],"mappings":"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"}