{"version":3,"file":"create.js","sources":["subPackages/record/pages/heartwall/create.vue","D:/softcaree/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNccmVjb3JkXHBhZ2VzXGhlYXJ0d2FsbFxjcmVhdGUudnVl"],"sourcesContent":["<template>\r\n  <view class=\"create-page\" :style=\"{ paddingTop: containerPaddingTop }\">\r\n    <!-- Ëá™ÂÆö‰πâÂØºËà™Ê†èÔºà‰∏éÈ¶ñÈ°µ‰∏ÄËá¥Ôºâ -->\r\n    <view class=\"custom-navbar\">\r\n      <view class=\"navbar-gradient-bg\"></view>\r\n      <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\r\n      <view class=\"navbar-content\" :style=\"{ height: navBarHeight + 'px' }\">\r\n        <view class=\"navbar-left\" @click=\"goBack\">\r\n          <text class=\"back-icon\">‚Üê</text>\r\n        </view>\r\n        <view class=\"navbar-title\">\r\n          <text class=\"title-text\">Áà±ÂøÉÁÖßÁâáÂ¢ô</text>\r\n        </view>\r\n        <view class=\"navbar-right\"></view>\r\n      </view>\r\n    </view>\r\n    <view class=\"center\">\r\n      <view id=\"heartArea\" class=\"heart-grid\">\r\n        <view v-for=\"(cell, idx) in heartMask\" :key=\"idx\" class=\"cell\" :class=\"{ hole: !cell, filled: cell && images[idx] }\" @tap=\"onPickSingle(idx)\">\r\n          <image v-if=\"images[idx]\" :src=\"images[idx]\" mode=\"aspectFill\" />\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ÁÖßÁâáÊï∞ÈáèÊèêÁ§∫ -->\r\n    <view class=\"photo-count\">\r\n      <text class=\"count-text\">Â∑≤Ê∑ªÂä† {{ filledCount }}/{{ totalSlots }} Âº†ÁÖßÁâá</text>\r\n      <text v-if=\"filledCount > 0\" class=\"clear-btn\" @click=\"clearAllImages\">Ê∏ÖÁ©∫</text>\r\n    </view>\r\n\r\n    <view class=\"actions\">\r\n      <button class=\"btn yellow\" @click=\"onBatchUpload\">\r\n        ÊâπÈáè‰∏ä‰º†ÁÖßÁâá ({{ remainingSlots > 0 ? `ËøòÂèØÊ∑ªÂä†${Math.min(9, remainingSlots)}Âº†` : 'Â∑≤Êª°' }})\r\n      </button>\r\n      <button class=\"btn green\" @click=\"onSaveProject\">‰øùÂ≠òÈ°πÁõÆ</button>\r\n      \r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { createProject, updateProject, uploadPhoto, uploadPhotoWithFile, getProjectDetail, getProjectPhotos, clearProjectPhotos, updatePhoto } from '@/api/heartwall.js';\r\nimport http from '@/utils/http.js';\r\nimport config from '@/utils/config.js';\r\n\r\n// Â§ÑÁêÜÂõæÁâáURLÔºöÂ¶ÇÊûúÊòØÁõ∏ÂØπË∑ØÂæÑÔºåÊãºÊé•baseURL\r\nfunction processImageUrl(url) {\r\n  if (!url || url === '') {\r\n    return '';\r\n  }\r\n  \r\n  // Â¶ÇÊûúÂ∑≤ÁªèÊòØÂÆåÊï¥ÁöÑURLÔºàhttp:// Êàñ https://ÔºâÔºåÁõ¥Êé•ËøîÂõû\r\n  if (url.startsWith('http://') || url.startsWith('https://')) {\r\n    return url;\r\n  }\r\n  \r\n  // Â¶ÇÊûúÊòØÁõ∏ÂØπË∑ØÂæÑÔºà‰ª• / ÂºÄÂ§¥ÔºâÔºåÊãºÊé•baseURL\r\n  if (url.startsWith('/')) {\r\n    // ÂÖºÂÆπÈîôËØØËøîÂõûÁöÑÂâçÁ´ØË∑ØÂæÑÔºåÂ¶Ç /pages/heartwall/uploads/... -> ÂΩí‰∏ÄÂåñ‰∏∫ /uploads/... ÊàñÂéªÊéâ /pages ÂâçÁºÄ\r\n    if (url.startsWith('/pages/')) {\r\n      const stripped = url.replace(/^\\/pages/, '');\r\n      const uploadsIndex = stripped.indexOf('/uploads/');\r\n      if (uploadsIndex !== -1) {\r\n        url = stripped.slice(uploadsIndex);\r\n      } else {\r\n        url = stripped.startsWith('/') ? stripped : '/' + stripped;\r\n      }\r\n    }\r\n    // ÁßªÈô§baseURLÊú´Â∞æÂèØËÉΩÂ≠òÂú®ÁöÑÊñúÊù†ÔºåÈÅøÂÖçÂèåÊñúÊù†\r\n    const baseUrl = config.baseURL.endsWith('/') ? config.baseURL.slice(0, -1) : config.baseURL;\r\n    return baseUrl + url;\r\n  }\r\n  \r\n  // ÂÖ∂‰ªñÊÉÖÂÜµÔºàÂèØËÉΩÊòØÁõ∏ÂØπË∑ØÂæÑ‰ΩÜ‰∏ç‰ª•/ÂºÄÂ§¥ÔºâÔºå‰πüÂ∞ùËØïÊãºÊé•\r\n  const baseUrl = config.baseURL.endsWith('/') ? config.baseURL.slice(0, -1) : config.baseURL;\r\n  return baseUrl + '/' + url;\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      statusBarHeight: 0,\r\n      navBarHeight: 44,\r\n      screenWidth: 375,\r\n      // 9x9 ÂøÉÂΩ¢Êé©Á†ÅÔºà1 Ë°®Á§∫ÂèØÂ°´ÂÖÖÔºå0 Ë°®Á§∫Á©∫‰ΩçÔºâÔºõÂèØÊåâÈúÄË∞ÉÊï¥\r\n      heartMask: [\r\n        0,1,1,0,0,1,1,0,0,\r\n        1,1,1,1,1,1,1,1,0,\r\n        1,1,1,1,1,1,1,1,0,\r\n        1,1,1,1,1,1,1,1,0,\r\n        0,1,1,1,1,1,1,0,0,\r\n        0,0,1,1,1,1,0,0,0,\r\n        0,0,0,1,1,0,0,0,0,\r\n        0,0,0,0,0,0,0,0,0,\r\n        0,0,0,0,0,0,0,0,0\r\n      ],\r\n      images: [],\r\n      editingProjectId: null,  // Ê≠£Âú®ÁºñËæëÁöÑÈ°πÁõÆIDÔºånull Ë°®Á§∫ÂàõÂª∫Êñ∞È°πÁõÆ\r\n      saving: false,  // ‰øùÂ≠ò‰∏≠Áä∂ÊÄÅ\r\n      photoMap: {}  // Â≠òÂÇ®positionIndexÂà∞photoIdÁöÑÊò†Â∞Ñ { positionIndex: photoId }\r\n    };\r\n  },\r\n  computed: {\r\n    containerPaddingTop() {\r\n      const totalHeightPx = this.statusBarHeight + this.navBarHeight;\r\n      const pxToRpx = 750 / this.screenWidth;\r\n      return totalHeightPx * pxToRpx + 'rpx';\r\n    },\r\n    // ÊÄªÂÖ±ÂèØÂ°´ÂÖÖÁöÑ‰ΩçÁΩÆÊï∞\r\n    totalSlots() {\r\n      return this.heartMask.filter(cell => cell === 1).length;\r\n    },\r\n    // Â∑≤Â°´ÂÖÖÁöÑÁÖßÁâáÊï∞\r\n    filledCount() {\r\n      let count = 0;\r\n      for (let i = 0; i < this.heartMask.length; i++) {\r\n        if (this.heartMask[i] && this.images[i]) {\r\n          count++;\r\n        }\r\n      }\r\n      return count;\r\n    },\r\n    // Ââ©‰ΩôÂèØÊ∑ªÂä†ÁöÑÁÖßÁâáÊï∞\r\n    remainingSlots() {\r\n      return this.totalSlots - this.filledCount;\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.getSystemInfo();\r\n    // Ê£ÄÊü•ÊòØÂê¶Âú®ÁºñËæëÁé∞ÊúâÈ°πÁõÆ\r\n    try {\r\n      const editingProjectId = uni.getStorageSync('heartwall_editing_projectId');\r\n      if (editingProjectId) {\r\n        this.editingProjectId = editingProjectId;\r\n        // ‰ªéÂêéÁ´ØÂä†ËΩΩÈ°πÁõÆÊï∞ÊçÆ\r\n        await this.loadProjectFromBackend(editingProjectId);\r\n      } else {\r\n        // Â¶ÇÊûúÊ≤°ÊúâÈ°πÁõÆIDÔºåÂ∞ùËØï‰ªéÊú¨Âú∞ÁºìÂ≠òÂä†ËΩΩÔºàÂÖºÂÆπÊóßÊï∞ÊçÆÔºâ\r\n      const cached = uni.getStorageSync('heartwall_grid_images');\r\n      if (Array.isArray(cached)) {\r\n        this.images = cached;\r\n      }\r\n      }\r\n    } catch (e) {\r\n      console.error('Âä†ËΩΩÈ°πÁõÆÊï∞ÊçÆÂ§±Ë¥•:', e);\r\n    }\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      uni.navigateBack();\r\n    },\r\n    getSystemInfo() {\r\n      // #ifdef MP-WEIXIN\r\n      try {\r\n        const windowInfo = wx.getWindowInfo && wx.getWindowInfo();\r\n        if (windowInfo) {\r\n          this.statusBarHeight = windowInfo.statusBarHeight || 0;\r\n          this.screenWidth = windowInfo.windowWidth || 375;\r\n        } else {\r\n          const sys = uni.getSystemInfoSync();\r\n          this.statusBarHeight = sys.statusBarHeight || 0;\r\n          this.screenWidth = sys.windowWidth || 375;\r\n        }\r\n      } catch (e) {\r\n        const sys = uni.getSystemInfoSync();\r\n        this.statusBarHeight = sys.statusBarHeight || 0;\r\n        this.screenWidth = sys.windowWidth || 375;\r\n      }\r\n      this.navBarHeight = 44;\r\n      // #endif\r\n      // #ifdef H5\r\n      const sysH5 = uni.getSystemInfoSync();\r\n      this.statusBarHeight = sysH5.statusBarHeight || 0;\r\n      this.screenWidth = sysH5.windowWidth || 375;\r\n      this.navBarHeight = 44;\r\n      // #endif\r\n      // #ifndef MP-WEIXIN || H5\r\n      const sysOther = uni.getSystemInfoSync();\r\n      this.statusBarHeight = sysOther.statusBarHeight || 0;\r\n      this.screenWidth = sysOther.windowWidth || 375;\r\n      this.navBarHeight = 44;\r\n      // #endif\r\n    },\r\n    async onBatchUpload() {\r\n      // ËÆ°ÁÆóÁ©∫‰ΩçÊï∞Èáè\r\n      const emptySlots = this.getEmptySlots();\r\n      if (emptySlots.length === 0) {\r\n        uni.showToast({ title: 'ÁÖßÁâáÂ¢ôÂ∑≤Êª°', icon: 'none' });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // uni-app ‰∏ÄÊ¨°ÊúÄÂ§öÈÄâÊã© 9 Âº†ÂõæÁâáÔºàÂæÆ‰ø°Â∞èÁ®ãÂ∫èÈôêÂà∂Ôºâ\r\n        const maxCount = Math.min(9, emptySlots.length);\r\n        const res = await uni.chooseImage({ \r\n          count: maxCount, \r\n          sizeType: ['compressed'], \r\n          sourceType: ['album', 'camera'] \r\n        });\r\n        \r\n        if (!res || !res.tempFilePaths || res.tempFilePaths.length === 0) return;\r\n        \r\n        const files = res.tempFilePaths;\r\n        \r\n        // ÊåâÈ°∫Â∫èÂ°´ÂÖÖÁ©∫‰Ωç\r\n        for (let i = 0; i < files.length && i < emptySlots.length; i++) {\r\n          const idx = emptySlots[i];\r\n          this.$set(this.images, idx, files[i]);\r\n        }\r\n        \r\n        this.persist();\r\n        \r\n        // ÊèêÁ§∫Áî®Êà∑\r\n        const remainingSlots = emptySlots.length - files.length;\r\n        if (remainingSlots > 0) {\r\n          uni.showToast({ \r\n            title: `Â∑≤Ê∑ªÂä†${files.length}Âº†ÔºåËøòÂèØÊ∑ªÂä†${remainingSlots}Âº†`, \r\n            icon: 'none',\r\n            duration: 2000\r\n          });\r\n        } else {\r\n          uni.showToast({ \r\n            title: `Â∑≤Ê∑ªÂä†${files.length}Âº†ÁÖßÁâá`, \r\n            icon: 'success' \r\n          });\r\n        }\r\n      } catch (e) {\r\n        console.error('ÊâπÈáè‰∏ä‰º†Â§±Ë¥•:', e);\r\n      }\r\n    },\r\n    \r\n    // Ëé∑ÂèñÊâÄÊúâÁ©∫‰ΩçÁöÑÁ¥¢Âºï\r\n    getEmptySlots() {\r\n      const slots = [];\r\n      for (let i = 0; i < this.heartMask.length; i++) {\r\n        if (this.heartMask[i] && !this.images[i]) {\r\n          slots.push(i);\r\n        }\r\n      }\r\n      return slots;\r\n    },\r\n    \r\n    // Ê∏ÖÁ©∫ÊâÄÊúâÁÖßÁâá\r\n    async clearAllImages() {\r\n      uni.showModal({\r\n        title: 'Á°ÆËÆ§Ê∏ÖÁ©∫',\r\n        content: 'Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÁÖßÁâáÂêóÔºüÊ∏ÖÁ©∫ÂêéÊó†Ê≥ïÊÅ¢Â§ç„ÄÇ',\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            try {\r\n              // Â¶ÇÊûúÊúâÈ°πÁõÆIDÔºåË∞ÉÁî®ÂêéÁ´ØÊé•Âè£Ê∏ÖÁ©∫\r\n              if (this.editingProjectId) {\r\n                uni.showLoading({ title: 'Ê∏ÖÁ©∫‰∏≠...', mask: true });\r\n                console.log('üóëÔ∏è [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÂºÄÂßãÊ∏ÖÁ©∫È°πÁõÆÁÖßÁâáÔºåÈ°πÁõÆID:', this.editingProjectId);\r\n                \r\n                await clearProjectPhotos(this.editingProjectId);\r\n                \r\n                console.log('‚úÖ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] È°πÁõÆÁÖßÁâáÊ∏ÖÁ©∫ÊàêÂäü');\r\n                uni.hideLoading();\r\n              }\r\n              \r\n              // Ê∏ÖÁ©∫ÂâçÁ´ØÊï∞ÊçÆ\r\n              this.images = [];\r\n              this.photoMap = {};\r\n              this.persist();\r\n              \r\n            uni.showToast({ title: 'Â∑≤Ê∏ÖÁ©∫', icon: 'success' });\r\n            } catch (error) {\r\n              console.error('‚ùå [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] Ê∏ÖÁ©∫È°πÁõÆÁÖßÁâáÂ§±Ë¥•:', error);\r\n              uni.hideLoading();\r\n              \r\n              // Âç≥‰ΩøÂêéÁ´ØÊ∏ÖÁ©∫Â§±Ë¥•Ôºå‰πüÊ∏ÖÁ©∫ÂâçÁ´ØÊï∞ÊçÆ\r\n              this.images = [];\r\n              this.persist();\r\n              \r\n              uni.showToast({ \r\n                title: error.message || 'Ê∏ÖÁ©∫Â§±Ë¥•ÔºåÂ∑≤Ê∏ÖÁ©∫Êú¨Âú∞Êï∞ÊçÆ', \r\n                icon: 'none',\r\n                duration: 2000\r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    async onPickSingle(idx) {\r\n      if (!this.heartMask[idx]) return;\r\n      \r\n      try {\r\n        // ÈÄâÊã©Êñ∞ÂõæÁâá\r\n        const res = await uni.chooseImage({ \r\n          count: 1,\r\n          sizeType: ['compressed'],\r\n          sourceType: ['album', 'camera']\r\n        });\r\n        \r\n        if (!res || !res.tempFilePaths || !res.tempFilePaths[0]) {\r\n          return;\r\n        }\r\n        \r\n        const newImagePath = res.tempFilePaths[0];\r\n        const isExistingPhoto = this.images[idx] && this.editingProjectId;\r\n        const photoId = this.photoMap[idx];\r\n        \r\n        // Â¶ÇÊûúÂ∑≤ÊúâÈ°πÁõÆ‰∏îÊúâphotoIdÔºåËØ¥ÊòéÊòØÊõøÊç¢Â∑≤ÊúâÁÖßÁâá\r\n        if (isExistingPhoto && photoId) {\r\n          uni.showLoading({ title: 'ÊõøÊç¢‰∏≠...', mask: true });\r\n          \r\n          try {\r\n            console.log(`üîÑ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÂºÄÂßãÊõøÊç¢‰ΩçÁΩÆ ${idx} ÁöÑÁÖßÁâáÔºåphotoId: ${photoId}`);\r\n            \r\n            // 1. ‰∏ä‰º†Êñ∞ÂõæÁâáÂà∞ÊúçÂä°Âô®\r\n            console.log('üì§ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ‰∏ä‰º†Êñ∞ÂõæÁâáÂà∞ÊúçÂä°Âô®...');\r\n            const photoUrl = await this.uploadImageToServer(newImagePath);\r\n            console.log('‚úÖ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] Êñ∞ÂõæÁâá‰∏ä‰º†ÊàêÂäüÔºåURL:', photoUrl);\r\n            \r\n            // 2. Êõ¥Êñ∞ÂêéÁ´ØÁÖßÁâá‰ø°ÊÅØ\r\n            const updateData = {\r\n              photoUrl: photoUrl,\r\n              thumbnailUrl: photoUrl,\r\n              positionIndex: idx\r\n            };\r\n            \r\n            console.log('üìù [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] Êõ¥Êñ∞ÂêéÁ´ØÁÖßÁâá‰ø°ÊÅØ...');\r\n            await updatePhoto(photoId, updateData);\r\n            console.log('‚úÖ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÂêéÁ´ØÁÖßÁâáÊõ¥Êñ∞ÊàêÂäü');\r\n            \r\n            // 3. Êõ¥Êñ∞ÂâçÁ´ØÊòæÁ§∫\r\n            this.$set(this.images, idx, photoUrl);\r\n            this.persist();\r\n            \r\n            uni.hideLoading();\r\n            uni.showToast({ \r\n              title: 'ÊõøÊç¢ÊàêÂäü', \r\n              icon: 'success',\r\n              duration: 1500\r\n            });\r\n          } catch (error) {\r\n            console.error('‚ùå [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÊõøÊç¢ÁÖßÁâáÂ§±Ë¥•:', error);\r\n            uni.hideLoading();\r\n            uni.showToast({ \r\n              title: error.message || 'ÊõøÊç¢Â§±Ë¥•ÔºåËØ∑ÈáçËØï', \r\n              icon: 'none',\r\n              duration: 2000\r\n            });\r\n          }\r\n        } else {\r\n          // Êñ∞Ê∑ªÂä†ÁÖßÁâáÔºàÈ°πÁõÆÊú™ÂàõÂª∫ÊàñËØ•‰ΩçÁΩÆÊ≤°ÊúâÁÖßÁâáÔºâ\r\n          // ÊöÇÊó∂Âè™Êõ¥Êñ∞ÂâçÁ´ØÊòæÁ§∫Ôºå‰øùÂ≠òÈ°πÁõÆÊó∂‰ºöÁªü‰∏Ä‰∏ä‰º†\r\n          this.$set(this.images, idx, newImagePath);\r\n          this.persist();\r\n          \r\n          uni.showToast({ \r\n            title: 'Â∑≤Ê∑ªÂä†ÁÖßÁâá', \r\n            icon: 'success',\r\n            duration: 1000\r\n          });\r\n        }\r\n      } catch (e) {\r\n        console.error('‚ùå [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•:', e);\r\n        uni.showToast({ \r\n          title: 'ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•', \r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    onInvite() {\r\n      uni.showToast({ title: 'ÈÇÄËØ∑ÂäüËÉΩÂæÖÊé•ÂÖ•ÂêéÁ´Ø', icon: 'none' });\r\n    },\r\n    \r\n    // Âä†ËΩΩÈ°πÁõÆÊï∞ÊçÆÔºà‰ªéÂêéÁ´ØÔºâ\r\n    async loadProjectFromBackend(projectId) {\r\n      try {\r\n        console.log('üì° [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÂºÄÂßã‰ªéÂêéÁ´ØÂä†ËΩΩÈ°πÁõÆËØ¶ÊÉÖ ID:', projectId);\r\n        \r\n        // Ëé∑ÂèñÈ°πÁõÆËØ¶ÊÉÖ\r\n        const projectResponse = await getProjectDetail(projectId);\r\n        console.log('üì° [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] È°πÁõÆËØ¶ÊÉÖ:', projectResponse);\r\n        \r\n        // Ëé∑ÂèñÈ°πÁõÆÁÖßÁâáÂàóË°®\r\n        const photosResponse = await getProjectPhotos(projectId, { page: 1, pageSize: 100 });\r\n        console.log('üì° [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] È°πÁõÆÁÖßÁâá:', photosResponse);\r\n        \r\n        // Â§ÑÁêÜÁÖßÁâáÊï∞ÊçÆ\r\n        let photosData = [];\r\n        if (photosResponse && photosResponse.data) {\r\n          photosData = Array.isArray(photosResponse.data) ? photosResponse.data : (photosResponse.data.photos || []);\r\n        } else if (Array.isArray(photosResponse)) {\r\n          photosData = photosResponse;\r\n        } else if (photosResponse && photosResponse.photos) {\r\n          photosData = photosResponse.photos;\r\n        }\r\n        \r\n        // Â∞ÜÁÖßÁâáÊåâ‰ΩçÁΩÆÁ¥¢ÂºïÂ°´ÂÖÖÂà∞imagesÊï∞ÁªÑÔºåÂêåÊó∂‰øùÂ≠òphotoIdÊò†Â∞Ñ\r\n        this.images = [];\r\n        this.photoMap = {};\r\n        photosData.forEach(photo => {\r\n          const positionIndex = photo.positionIndex || photo.position_index || 0;\r\n          const photoId = photo.photoId || photo.photo_id || photo.id;\r\n          if (positionIndex >= 0 && positionIndex < this.heartMask.length) {\r\n            // ‰ºòÂÖà‰ΩøÁî®photoUrlÔºåÂ¶ÇÊûúÊ≤°ÊúâÂàô‰ΩøÁî®thumbnailUrl\r\n            const rawUrl = photo.photoUrl || photo.photo_url || photo.thumbnailUrl || photo.thumbnail_url || '';\r\n            // Â§ÑÁêÜURLÔºöÂ¶ÇÊûúÊòØÁõ∏ÂØπË∑ØÂæÑÔºåÊãºÊé•baseURL\r\n            const processedUrl = processImageUrl(rawUrl);\r\n            console.log(`üñºÔ∏è [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ‰ΩçÁΩÆ ${positionIndex} ÂéüÂßãURL: ${rawUrl}, Â§ÑÁêÜÂêéURL: ${processedUrl}`);\r\n            this.$set(this.images, positionIndex, processedUrl);\r\n            // ‰øùÂ≠òphotoIdÊò†Â∞Ñ\r\n            if (photoId) {\r\n              this.$set(this.photoMap, positionIndex, photoId);\r\n            }\r\n          }\r\n        });\r\n        \r\n        console.log(`‚úÖ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÊàêÂäüÂä†ËΩΩ ${photosData.length} Âº†ÁÖßÁâá`);\r\n        console.log('üì∑ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÁÖßÁâáIDÊò†Â∞Ñ:', this.photoMap);\r\n        console.log('üñºÔ∏è [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÁÖßÁâáURLÂàóË°®:', this.images.filter(url => url));\r\n      } catch (error) {\r\n        console.error('‚ùå [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] Âä†ËΩΩÈ°πÁõÆÊï∞ÊçÆÂ§±Ë¥•:', error);\r\n        uni.showToast({ \r\n          title: 'Âä†ËΩΩÈ°πÁõÆÂ§±Ë¥•', \r\n          icon: 'none',\r\n          duration: 2000\r\n        });\r\n      }\r\n    },\r\n    \r\n    // ÂéãÁº©ÂõæÁâá\r\n    compressImage(tempFilePath) {\r\n      return new Promise((resolve, reject) => {\r\n        uni.compressImage({\r\n          src: tempFilePath,\r\n          quality: 80,\r\n          success: (res) => {\r\n            console.log('‚úÖ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÂõæÁâáÂéãÁº©ÊàêÂäüÔºåÊñ∞Ë∑ØÂæÑ:', res.tempFilePath);\r\n            resolve(res.tempFilePath);\r\n          },\r\n          fail: (error) => {\r\n            console.warn('‚ö†Ô∏è [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÂõæÁâáÂéãÁº©Â§±Ë¥•Ôºå‰ΩøÁî®ÂéüÂõæ', error);\r\n            resolve(tempFilePath);\r\n          }\r\n        });\r\n      });\r\n    },\r\n    \r\n    // ‰øùÂ≠òÈ°πÁõÆÂà∞ÂàóË°®È°µ\r\n    onSaveProject() {\r\n      if (this.filledCount === 0) {\r\n        uni.showToast({ title: 'ËØ∑Ëá≥Â∞ëÊ∑ªÂä†‰∏ÄÂº†ÁÖßÁâá', icon: 'none' });\r\n        return;\r\n      }\r\n\r\n      if (this.saving) {\r\n        uni.showToast({ title: '‰øùÂ≠ò‰∏≠ÔºåËØ∑Á®çÂÄô...', icon: 'none' });\r\n        return;\r\n      }\r\n\r\n      // ÂºπÂá∫ËæìÂÖ•Ê°ÜÔºåËÆ©Áî®Êà∑ËæìÂÖ•È°πÁõÆÂêçÁß∞ÂíåÊèèËø∞\r\n      uni.showModal({\r\n        title: this.editingProjectId ? '‰øùÂ≠ò‰øÆÊîπ' : '‰øùÂ≠òÈ°πÁõÆ',\r\n        editable: true,\r\n        placeholderText: 'ËØ∑ËæìÂÖ•È°πÁõÆÂêçÁß∞',\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            const projectName = res.content || 'ÊàëÁöÑÁà±ÂøÉÂ¢ô';\r\n            await this.saveProjectData(projectName);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    \r\n    // ‰øùÂ≠òÈ°πÁõÆÊï∞ÊçÆÔºàË∞ÉÁî®ÂêéÁ´ØAPIÔºâ\r\n    async saveProjectData(projectName) {\r\n      this.saving = true;\r\n      \r\n      try {\r\n        uni.showLoading({ title: '‰øùÂ≠ò‰∏≠...', mask: true });\r\n        \r\n        console.log('üíæ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÂºÄÂßã‰øùÂ≠òÈ°πÁõÆÂà∞ÂêéÁ´Ø');\r\n\r\n      // ÊûÑÂª∫È°πÁõÆÊï∞ÊçÆ\r\n      const projectData = {\r\n          projectName: projectName,\r\n          description: `ÂÖ±${this.filledCount}Âº†ÁÖßÁâá`,\r\n          isPublic: false,\r\n          maxPhotos: this.totalSlots\r\n        };\r\n        \r\n        let projectId;\r\n        let createResponse = null; // Áî®‰∫éÈîôËØØË∞ÉËØï\r\n        \r\n        // ÂàõÂª∫ÊàñÊõ¥Êñ∞È°πÁõÆ\r\n        if (this.editingProjectId) {\r\n          // Êõ¥Êñ∞Áé∞ÊúâÈ°πÁõÆ\r\n          console.log('üîÑ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] Êõ¥Êñ∞È°πÁõÆ ID:', this.editingProjectId);\r\n          await updateProject(this.editingProjectId, projectData);\r\n          projectId = this.editingProjectId;\r\n        } else {\r\n          // ÂàõÂª∫Êñ∞È°πÁõÆ\r\n          console.log('‚ú® [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÂàõÂª∫Êñ∞È°πÁõÆ');\r\n          createResponse = await createProject(projectData);\r\n          console.log('‚úÖ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] È°πÁõÆÂàõÂª∫ÊàêÂäü:', createResponse);\r\n          \r\n          // Ëé∑ÂèñÈ°πÁõÆID - ÊîØÊåÅÂ§öÁßçÂìçÂ∫îÊ†ºÂºè\r\n          if (createResponse && createResponse.data) {\r\n            // Ê†ºÂºè: { data: { projectId: ..., id: ... } }\r\n            projectId = createResponse.data.projectId || createResponse.data.id;\r\n          } else if (createResponse && createResponse.project) {\r\n            // Ê†ºÂºè: { project: { projectId: ..., id: ... } }\r\n            projectId = createResponse.project.projectId || createResponse.project.id;\r\n          } else if (createResponse && (createResponse.projectId || createResponse.id)) {\r\n            // Ê†ºÂºè: { projectId: ..., id: ... }\r\n            projectId = createResponse.projectId || createResponse.id;\r\n          }\r\n          \r\n          console.log('üîç [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÊèêÂèñÁöÑÈ°πÁõÆID:', projectId);\r\n          \r\n          // Â¶ÇÊûúÂàõÂª∫È°πÁõÆÂêé‰ªçÊó†Ê≥ïËé∑ÂèñIDÔºåÊäõÂá∫ËØ¶ÁªÜÈîôËØØ\r\n          if (!projectId) {\r\n            console.error('‚ùå [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] Êó†Ê≥ïËé∑ÂèñÈ°πÁõÆID');\r\n            console.error('üì¶ [ÂìçÂ∫îÊï∞ÊçÆÁªìÊûÑ]:', JSON.stringify(createResponse, null, 2));\r\n            throw new Error('Êó†Ê≥ïËé∑ÂèñÈ°πÁõÆIDÔºåËØ∑Ê£ÄÊü•ÂêéÁ´ØËøîÂõûÁöÑÊï∞ÊçÆÊ†ºÂºè');\r\n          }\r\n        }\r\n        \r\n        console.log('üìù [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] È°πÁõÆID:', projectId);\r\n        \r\n        // Á¨¨‰∏ÄÊ≠•ÔºöÊî∂ÈõÜÊâÄÊúâÈúÄË¶Å‰∏ä‰º†ÁöÑÁÖßÁâá‰ø°ÊÅØ\r\n        const photoTasks = [];\r\n        for (let i = 0; i < this.heartMask.length; i++) {\r\n          if (this.heartMask[i] && this.images[i]) {\r\n            photoTasks.push({\r\n              positionIndex: i,\r\n              imagePath: this.images[i]\r\n            });\r\n          }\r\n        }\r\n        \r\n        console.log(`üìã [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÂáÜÂ§á‰∏ä‰º† ${photoTasks.length} Âº†ÁÖßÁâá`);\r\n        \r\n        // ‰ΩøÁî®Áõ¥Êé•‰∏ä‰º†ÊñπÂºèÔºàmultipart/form-dataÔºå‰∏ÄÊ≠•ÂÆåÊàêÔºåÊé®ËçêÔºâ\r\n        console.log('üì§ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ‰ΩøÁî®Áõ¥Êé•‰∏ä‰º†ÊñπÂºèÔºàmultipart/form-dataÔºâ');\r\n        \r\n        const savePromises = photoTasks.map(async (task) => {\r\n          const { positionIndex, imagePath } = task;\r\n          \r\n          // Âà§Êñ≠ÊòØÂê¶ÊòØÊú¨Âú∞‰∏¥Êó∂Ë∑ØÂæÑÔºàÈúÄË¶Å‰∏ä‰º†Ôºâ\r\n          const isTmpPath = imagePath && (imagePath.startsWith('http://tmp/') || imagePath.startsWith('https://tmp/'));\r\n          // Âà§Êñ≠ÊòØÂê¶ÊòØÁúüÊ≠£ÁöÑHTTP/HTTPS URLÔºàÊéíÈô§‰∏¥Êó∂Ë∑ØÂæÑÔºâ\r\n          const isRealUrl = imagePath && \r\n                           (imagePath.startsWith('http://') || imagePath.startsWith('https://')) &&\r\n                           !isTmpPath;\r\n          // Âà§Êñ≠ÊòØÂê¶ÊòØÊú¨Âú∞Ë∑ØÂæÑÔºàÈúÄË¶Å‰∏ä‰º†Ôºâ\r\n          const isLocalPath = !isRealUrl && !imagePath.startsWith('data:');\r\n          \r\n          // Ê£ÄÊü•ËØ•‰ΩçÁΩÆÊòØÂê¶Â∑≤ÊúâphotoIdÔºàÂ∑≤Â≠òÂú®ÁöÑÁÖßÁâáÔºâ\r\n          const existingPhotoId = this.photoMap[positionIndex];\r\n          \r\n          if (isLocalPath || isTmpPath) {\r\n            // Êú¨Âú∞Êñá‰ª∂Ôºå‰ΩøÁî®Áõ¥Êé•‰∏ä‰º†ÊñπÂºè\r\n            try {\r\n              if (existingPhotoId) {\r\n                // Â∑≤ÊúâÁÖßÁâáÔºå‰ΩøÁî®updatePhotoÊõ¥Êñ∞ÂÖ∂‰ªñ‰ø°ÊÅØ\r\n                console.log(`üîÑ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ‰ΩçÁΩÆ ${positionIndex} Â∑≤ÊúâÁÖßÁâá(photoId: ${existingPhotoId})Ôºå‰ΩøÁî®Êõ¥Êñ∞Êé•Âè£`);\r\n                // ÂØπ‰∫éÂ∑≤Â≠òÂú®ÁöÑÁÖßÁâáÔºåÊàë‰ª¨‰∏çÊîØÊåÅÁõ¥Êé•Êõ¥Êñ∞Êñá‰ª∂ÔºåÂè™ËÉΩÊõ¥Êñ∞ÂÖ∂‰ªñ‰ø°ÊÅØ\r\n                // Â¶ÇÊûúÈúÄË¶ÅÊõ¥Êñ∞Êñá‰ª∂ÔºåÁî®Êà∑Â∫îËØ•ÂÖàÂà†Èô§ÂÜçÈáçÊñ∞‰∏ä‰º†\r\n                const photoData = {\r\n                  positionIndex: positionIndex\r\n                };\r\n                return updatePhoto(existingPhotoId, photoData).catch(error => {\r\n                  console.error(`‚ùå [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÁÖßÁâá ${positionIndex} Êõ¥Êñ∞Â§±Ë¥•:`, error);\r\n                  return null;\r\n                });\r\n              } else {\r\n                // Êñ∞ÁÖßÁâáÔºåÁõ¥Êé•‰∏ä‰º†Êñá‰ª∂+ÂÖÉÊï∞ÊçÆ\r\n                console.log(`üì§ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] Áõ¥Êé•‰∏ä‰º†ÁÖßÁâá ${positionIndex}ÔºàÊñá‰ª∂+ÂÖÉÊï∞ÊçÆÔºâ...`);\r\n                const result = await uploadPhotoWithFile({\r\n                  filePath: imagePath,\r\n                  projectId: projectId,\r\n                  positionIndex: positionIndex\r\n                });\r\n                console.log(`‚úÖ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÁÖßÁâá ${positionIndex} ‰∏ä‰º†ÊàêÂäü`);\r\n                return result;\r\n              }\r\n            } catch (uploadError) {\r\n              console.error(`‚ùå [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÁÖßÁâá ${positionIndex} ‰∏ä‰º†Â§±Ë¥•:`, uploadError);\r\n              return null;\r\n            }\r\n          } else {\r\n            // Â∑≤ÁªèÊòØURLÔºå‰∏çÊîØÊåÅ‰∏ä‰º†ÔºåÂè™ËÉΩÊõ¥Êñ∞‰ΩçÁΩÆ‰ø°ÊÅØ\r\n            console.log(`üîÑ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ‰ΩçÁΩÆ ${positionIndex} Â∑≤ÁªèÊòØURLÔºå‰∏çÊîØÊåÅ‰∏ä‰º†ÔºåÂè™ËÉΩÊõ¥Êñ∞‰ΩçÁΩÆ‰ø°ÊÅØ`);\r\n            // ÂØπ‰∫éÂ∑≤Â≠òÂú®ÁöÑÁÖßÁâáÔºåÊàë‰ª¨‰∏çÊîØÊåÅÁõ¥Êé•Êõ¥Êñ∞Êñá‰ª∂ÔºåÂè™ËÉΩÊõ¥Êñ∞ÂÖ∂‰ªñ‰ø°ÊÅØ\r\n            // Â¶ÇÊûúÈúÄË¶ÅÊõ¥Êñ∞Êñá‰ª∂ÔºåÁî®Êà∑Â∫îËØ•ÂÖàÂà†Èô§ÂÜçÈáçÊñ∞‰∏ä‰º†\r\n            const photoData = {\r\n              positionIndex: positionIndex\r\n            };\r\n            \r\n            if (existingPhotoId) {\r\n              console.log(`üîÑ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ‰ΩçÁΩÆ ${positionIndex} Â∑≤ÊúâÁÖßÁâá(photoId: ${existingPhotoId})Ôºå‰ΩøÁî®Êõ¥Êñ∞Êé•Âè£`);\r\n              return updatePhoto(existingPhotoId, photoData).catch(error => {\r\n                console.error(`‚ùå [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÁÖßÁâá ${positionIndex} Êõ¥Êñ∞Â§±Ë¥•:`, error);\r\n                return null;\r\n              });\r\n            } else {\r\n              // ÂØπ‰∫éÊñ∞ÁÖßÁâáÔºåÂ¶ÇÊûúÂ∑≤ÁªèÊòØURLÂàô‰∏çÊîØÊåÅ‰∏ä‰º†\r\n              console.warn(`‚ö†Ô∏è [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ‰ΩçÁΩÆ ${positionIndex} ÊòØÊñ∞ÁÖßÁâá‰ΩÜÂ∑≤ÁªèÊòØURLÔºå‰∏çÊîØÊåÅ‰∏ä‰º†`);\r\n              uni.showToast({ \r\n                title: '‰∏çÊîØÊåÅ‰∏ä‰º†Â∑≤Â≠òÂú®ÁöÑÂõæÁâáURL', \r\n                icon: 'none',\r\n                duration: 2000\r\n              });\r\n              return null;\r\n            }\r\n          }\r\n        });\r\n        \r\n        // Á≠âÂæÖÊâÄÊúâÁÖßÁâá‰øùÂ≠òÂÆåÊàê\r\n        console.log(`üíæ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÂºÄÂßã‰øùÂ≠ò ${savePromises.length} Âº†ÁÖßÁâá‰ø°ÊÅØ`);\r\n        const saveResults = await Promise.all(savePromises);\r\n        const savedCount = saveResults.filter(r => r !== null).length;\r\n        \r\n        console.log(`‚úÖ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ÊàêÂäü‰øùÂ≠ò ${savedCount}/${photoTasks.length} Âº†ÁÖßÁâá`);\r\n        \r\n        // Êõ¥Êñ∞photoMapÔºå‰øùÂ≠òÊñ∞‰∏ä‰º†ÁÖßÁâáÁöÑphotoIdÊò†Â∞Ñ\r\n        saveResults.forEach((result, index) => {\r\n          if (result && result.data) {\r\n            const photoId = result.data.photoId || result.data.photo_id || result.data.id;\r\n            const photo = photoTasks[index];\r\n            \r\n            if (photoId && photo) {\r\n              const positionIndex = photo.positionIndex || photo.index;\r\n              // Âè™ÊúâÊñ∞Â¢ûÁöÑÁÖßÁâáÊâçÈúÄË¶ÅÊõ¥Êñ∞photoMapÔºàÂ∑≤ÊúâÁöÑÁÖßÁâáphotoMapÂ∑≤ÁªèÂ≠òÂú®Ôºâ\r\n              if (positionIndex !== undefined && !this.photoMap[positionIndex]) {\r\n                this.$set(this.photoMap, positionIndex, photoId);\r\n                console.log(`üì∑ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] Êõ¥Êñ∞ÁÖßÁâáÊò†Â∞Ñ: positionIndex=${positionIndex}, photoId=${photoId}`);\r\n              } else if (positionIndex !== undefined) {\r\n                console.log(`üì∑ [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ‰ΩçÁΩÆ ${positionIndex} ÁÖßÁâáÂ∑≤Â≠òÂú®(photoId: ${photoId})ÔºåÊó†ÈúÄÊõ¥Êñ∞Êò†Â∞Ñ`);\r\n              }\r\n            }\r\n          }\r\n        });\r\n        \r\n        // ‰øùÂ≠òÈ°πÁõÆIDÔºå‰ª•‰æøÂêéÁª≠ÂèØ‰ª•ÁªßÁª≠ÁºñËæë\r\n        this.editingProjectId = projectId;\r\n        uni.setStorageSync('heartwall_editing_projectId', projectId);\r\n        \r\n        uni.hideLoading();\r\n        uni.showToast({ \r\n          title: this.editingProjectId ? '‰øÆÊîπÊàêÂäü' : '‰øùÂ≠òÊàêÂäü', \r\n          icon: 'success',\r\n          duration: 1500\r\n        });\r\n        \r\n        // Âª∂ËøüË∑≥ËΩ¨Âà∞ÂàóË°®È°µ\r\n        setTimeout(() => {\r\n          uni.navigateBack();\r\n        }, 1500);\r\n      } catch (error) {\r\n        console.error('‚ùå [Áà±ÂøÉÂ¢ôÂàõÂª∫È°µ] ‰øùÂ≠òÈ°πÁõÆÂ§±Ë¥•:', error);\r\n        uni.hideLoading();\r\n        uni.showToast({ \r\n          title: error.message || '‰øùÂ≠òÂ§±Ë¥•ÔºåËØ∑ÈáçËØï', \r\n          icon: 'none',\r\n          duration: 2000\r\n        });\r\n      } finally {\r\n        this.saving = false;\r\n      }\r\n    },\r\n    persist() {\r\n      try { uni.setStorageSync('heartwall_grid_images', this.images); } catch (e) {}\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.create-page { min-height: 100vh; background: #FFFAF4; display: flex; flex-direction: column; overflow: hidden; }\r\n\r\n/* Ëá™ÂÆö‰πâÂØºËà™Ê†èÔºà‰∏éÈ¶ñÈ°µ‰∏ÄËá¥Ôºâ */\r\n.custom-navbar { position: fixed; top: 0; left: 0; right: 0; z-index: 9999; background-color: #FFFAF4; overflow: hidden; }\r\n.navbar-gradient-bg { position: absolute; top: 0; left: 0; right: 0; height: 200%; background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); }\r\n.status-bar { width: 100%; background: transparent; position: relative; z-index: 1; }\r\n.navbar-content { display: flex; align-items: center; justify-content: space-between; padding: 0 30rpx; box-sizing: border-box; position: relative; z-index: 1; }\r\n.navbar-left, .navbar-right { width: 80rpx; display: flex; align-items: center; justify-content: center; }\r\n.navbar-title { flex: 1; display: flex; align-items: center; justify-content: center; text-align: center; }\r\n.title-text { font-size: 36rpx; font-weight: 500; color: #4A4A4A; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif; }\r\n.back-icon { font-size: 50rpx; font-weight: 600; color: #4A4A4A; line-height: 1; }\r\n\r\n.center { display: flex; align-items: flex-start; justify-content: center; padding: 80rpx 0 0 60rpx; }\r\n.heart-grid { width: 640rpx; margin: 0 auto; display: grid; grid-template-columns: repeat(9, 1fr); grid-gap: 10rpx; }\r\n.cell { position: relative; width: 1fr; padding-bottom: 100%; background: rgba(255,255,255,0.7); border-radius: 12rpx; overflow: hidden; }\r\n.cell.hole { background: transparent; }\r\n.cell image { position: absolute; inset: 0; width: 100%; height: 100%; }\r\n.cell.filled { background: #ffffff; }\r\n\r\n.photo-count { \r\n  margin-top: 32rpx; \r\n  padding: 0 60rpx; \r\n  display: flex; \r\n  justify-content: space-between; \r\n  align-items: center; \r\n}\r\n.count-text { \r\n  font-size: 26rpx; \r\n  color: #666; \r\n  font-weight: 500; \r\n}\r\n.clear-btn { \r\n  font-size: 24rpx; \r\n  color: #D48806; \r\n  padding: 8rpx 20rpx; \r\n  background: rgba(255, 201, 77, 0.15); \r\n  border-radius: 20rpx; \r\n}\r\n\r\n.actions { margin-top: 24rpx; padding-bottom: 24rpx; display: flex; flex-direction: column; align-items: center; gap: 16rpx; }\r\n.btn { width: 70%; border-radius: 999rpx; padding: 18rpx 0; font-size: 26rpx; box-shadow: 0 8rpx 20rpx rgba(0,0,0,0.12); }\r\n.btn.yellow { background: linear-gradient(90deg, #FFB5C2 0%, #FFD4A3 100%); color: #3d2a00; }\r\n.btn.green { background: linear-gradient(90deg, #FFB5C2 0%, #FFD4A3 100%); color: #3d2a00; }\r\n.btn.pink { background: linear-gradient(90deg, #FFB5C2 0%, #FFD4A3 100%); color: #3d2a00; }\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/love_time - ÂâØÊú¨/subPackages/record/pages/heartwall/create.vue'\nwx.createPage(MiniProgramPage)"],"names":["baseUrl","config","uni","wx","clearProjectPhotos","updatePhoto","getProjectDetail","getProjectPhotos","updateProject","createProject","uploadPhotoWithFile"],"mappings":"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"}