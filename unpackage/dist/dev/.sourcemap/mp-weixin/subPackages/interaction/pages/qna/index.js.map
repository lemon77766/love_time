{"version":3,"file":"index.js","sources":["subPackages/interaction/pages/qna/index.vue","D:/softcaree/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNcaW50ZXJhY3Rpb25ccGFnZXNccW5hXGluZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"qna-page\" :style=\"{ paddingTop: containerPaddingTop }\">\r\n    <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->\r\n    <view class=\"custom-navbar\">\r\n      <!-- æ¸å˜èƒŒæ™¯ -->\r\n      <view class=\"navbar-gradient-bg\"></view>\r\n      <!-- çŠ¶æ€æ å ä½ -->\r\n      <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\r\n      <!-- å¯¼èˆªæ å†…å®¹ -->\r\n      <view class=\"navbar-content\" :style=\"{ height: navBarHeight + 'px' }\">\r\n        <view class=\"navbar-left\" @click=\"goBack\">\r\n          <text class=\"back-icon\">â†</text>\r\n        </view>\r\n        <view class=\"navbar-title\">\r\n          <text class=\"title-text\">æ‹ä¸é—®ç­”</text>\r\n        </view>\r\n        <view class=\"navbar-right\"></view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- é¡¶éƒ¨æ ‡é¢˜ -->\r\n    <view class=\"header\">\r\n      <text class=\"subtitle\">ç”¨é—®é¢˜å’Œç­”æ¡ˆæ›´äº†è§£å½¼æ­¤</text>\r\n    </view>\r\n\r\n    <!-- é—®é¢˜å¡ç‰‡ -->\r\n    <view class=\"question-card\">\r\n      <text class=\"q-text\">{{ currentQuestion.text }}</text>\r\n    </view>\r\n\r\n    <!-- æˆ‘çš„å›ç­”è¾“å…¥ -->\r\n    <view class=\"answer-card\">\r\n      <text class=\"a-label\">æˆ‘çš„å›ç­”</text>\r\n      <textarea class=\"a-input\" v-model=\"myAnswer\" placeholder=\"è¾“å…¥ä½ çš„ç­”æ¡ˆ...\" />\r\n      <view class=\"actions\">\r\n        <button class=\"btn primary\" @click=\"submitAnswer\">æäº¤ç­”æ¡ˆ</button>\r\n        <button class=\"btn secondary\" @click=\"nextQuestion\">ä¸‹ä¸€é¢˜</button>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- å¯¹æ–¹ç­”æ¡ˆæ˜¾ç¤ºï¼ˆæäº¤åå‡ºç°ï¼‰ -->\r\n    <view v-if=\"hasSubmitted\" class=\"partner-card\">\r\n      <text class=\"p-label\">TA çš„ç­”æ¡ˆ</text>\r\n      <text v-if=\"partnerAnswer\" class=\"p-text\">{{ partnerAnswer }}</text>\r\n      <text v-else class=\"p-text empty-hint-text\">å¯¹æ–¹æš‚æœªä½œç­”</text>\r\n    </view>\r\n\r\n    <!-- æ‚¬æµ®è‡ªå®šä¹‰é—®é¢˜æŒ‰é’® -->\r\n    <view class=\"floating custom-floating\" @click=\"showCustomModal = true\">\r\n      <text class=\"float-icon\">âœš</text>\r\n      <text class=\"float-text\">è‡ªå®šä¹‰é—®é¢˜</text>\r\n    </view>\r\n\r\n    <!-- æ‚¬æµ®å†å²æŒ‰é’® -->\r\n    <view class=\"floating\" @click=\"openHistory\">\r\n      <text class=\"float-icon\">ğŸ•˜</text>\r\n      <text class=\"float-text\">å†å²å›ç­”</text>\r\n    </view>\r\n\r\n    <!-- å†å²è®°å½•å¼¹çª— -->\r\n    <view v-if=\"showHistory\" class=\"modal-mask\" @click=\"closeHistory\">\r\n      <view class=\"modal\" @click.stop>\r\n        <text class=\"modal-title\">å†å²å›ç­”è®°å½•</text>\r\n        <scroll-view class=\"history-list\" scroll-y=\"true\">\r\n          <view v-for=\"(item, i) in history\" :key=\"i\" class=\"history-item\">\r\n            <text class=\"h-q\">Q: {{ item.question }}</text>\r\n            <text class=\"h-me\">æˆ‘: {{ item.myAnswer }}</text>\r\n            <text class=\"h-ta\">TA: {{ item.partnerAnswer }}</text>\r\n            <text class=\"h-time\">{{ item.time }}</text>\r\n          </view>\r\n        </scroll-view>\r\n        <view class=\"modal-actions\">\r\n          <button class=\"btn secondary\" @click=\"closeHistory\">å…³é—­</button>\r\n          <button class=\"btn\" @click=\"clearHistory\">æ¸…ç©ºè®°å½•</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- è‡ªå®šä¹‰é—®é¢˜å¼¹çª— -->\r\n    <view v-if=\"showCustomModal\" class=\"modal-mask\" @click=\"closeCustomModal\">\r\n      <view class=\"modal custom-modal\" @click.stop>\r\n        <text class=\"modal-title\">ç®¡ç†é—®é¢˜åº“</text>\r\n        \r\n        <!-- é—®é¢˜åˆ—è¡¨ -->\r\n        <scroll-view class=\"question-list\" scroll-y=\"true\">\r\n          <view class=\"section-title\">é¢„è®¾é—®é¢˜ ({{ defaultQuestions.length }})</view>\r\n          <view v-for=\"(q, i) in defaultQuestions\" :key=\"'default-'+i\" class=\"question-item\">\r\n            <text class=\"q-num\">{{ i + 1 }}.</text>\r\n            <text class=\"q-content\">{{ q.text }}</text>\r\n          </view>\r\n\r\n          <view class=\"section-title\" style=\"margin-top: 20rpx;\">è‡ªå®šä¹‰é—®é¢˜ ({{ customQuestions.length }})</view>\r\n          <view v-for=\"(q, i) in customQuestions\" :key=\"'custom-'+i\" class=\"question-item custom\">\r\n            <text class=\"q-num\">{{ defaultQuestions.length + i + 1 }}.</text>\r\n            <text class=\"q-content\">{{ q.text }}</text>\r\n            <text class=\"q-delete\" @click=\"deleteCustomQuestion(i)\">åˆ é™¤</text>\r\n          </view>\r\n          <view v-if=\"customQuestions.length === 0\" class=\"empty-hint\">\r\n            <text>æš‚æ— è‡ªå®šä¹‰é—®é¢˜</text>\r\n          </view>\r\n        </scroll-view>\r\n\r\n        <!-- æ·»åŠ æ–°é—®é¢˜ -->\r\n        <view class=\"add-question\">\r\n          <textarea \r\n            class=\"q-input\" \r\n            v-model=\"newQuestion\" \r\n            placeholder=\"è¾“å…¥ä½ æƒ³é—®çš„é—®é¢˜...\"\r\n            maxlength=\"100\"\r\n          />\r\n        </view>\r\n\r\n        <view class=\"modal-actions\">\r\n          <button class=\"btn primary small\" @click=\"addCustomQuestion\">æ·»åŠ é—®é¢˜</button>\r\n          <button class=\"btn secondary\" @click=\"closeCustomModal\">å…³é—­</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { \r\n  getQuestions, \r\n  submitAnswer, \r\n  getHistory, \r\n  getPartnerAnswer,\r\n  addCustomQuestion, \r\n  deleteCustomQuestion \r\n} from '@/api/qna.js';\r\n\r\nexport default {\r\n  async onLoad(options) {\r\n    this.getSystemInfo();\r\n    // æ£€æŸ¥ç™»å½•çŠ¶æ€å’Œtoken\r\n    const loginInfo = uni.getStorageSync('login_info');\r\n    if (!loginInfo || !loginInfo.token) {\r\n      uni.showModal({\r\n        title: 'éœ€è¦ç™»å½•',\r\n        content: 'æ‹ä¸é—®ç­”åŠŸèƒ½éœ€è¦ç™»å½•åæ‰èƒ½ä½¿ç”¨ï¼Œè¯·å…ˆç™»å½•',\r\n        showCancel: false,\r\n        success: () => {\r\n          uni.reLaunch({\r\n            url: '/pages/login/index'\r\n          });\r\n        }\r\n      });\r\n      return;\r\n    }\r\n    \r\n    // ä»åç«¯åŠ è½½é—®é¢˜åˆ—è¡¨å’Œå†å²è®°å½•\r\n    await this.loadQuestionsFromServer();\r\n    await this.loadHistoryFromServer();\r\n    \r\n    // å¤„ç†ä»å†å²è®°å½•è·³è½¬è¿‡æ¥çš„é—®é¢˜ID\r\n    const qid = options && options.qid ? Number(options.qid) : null;\r\n    const qTextParam = options && typeof options.qtext === 'string' ? options.qtext : '';\r\n    this.targetQuestionFallbackText = qTextParam ? decodeURIComponent(qTextParam) : '';\r\n    if (qid) {\r\n      console.log('ğŸ“Œ ä»å†å²è®°å½•è·³è½¬ï¼Œç›®æ ‡é—®é¢˜ID:', qid);\r\n      // ä¿å­˜ç›®æ ‡é—®é¢˜IDï¼Œç”¨äº currentQuestion è®¡ç®—å±æ€§\r\n      this.targetQuestionId = qid;\r\n      \r\n      // è®¾ç½®é˜²æ­¢è‡ªåŠ¨åˆ‡æ¢æ ‡å¿—ï¼Œé¿å…ä»å†å²è®°å½•æŸ¥çœ‹æ—¶è‡ªåŠ¨è·³è½¬\r\n      this.preventAutoSwitch = true;\r\n      \r\n      // å°è¯•åœ¨æœªå›ç­”é—®é¢˜ä¸­æ‰¾åˆ°ï¼ˆå¦‚æœé—®é¢˜è¿˜æœªå›ç­”ï¼‰\r\n      const idx = this.unansweredQuestions.findIndex(q => q.id === qid);\r\n      if (idx >= 0) {\r\n        this.qIndex = idx;\r\n        console.log('âœ… é—®é¢˜æœªå›ç­”ï¼Œè®¾ç½® qIndex:', idx);\r\n      } else {\r\n        // é—®é¢˜å·²å›ç­”ï¼Œä¸åœ¨ unansweredQuestions ä¸­\r\n        // æ£€æŸ¥é—®é¢˜æ˜¯å¦å­˜åœ¨äºæ‰€æœ‰é—®é¢˜åˆ—è¡¨ä¸­\r\n        const allQuestions = this.questions;\r\n        const questionExists = allQuestions.some(q => q.id === qid);\r\n        if (questionExists) {\r\n          console.log('âœ… é—®é¢˜å·²å›ç­”ï¼Œä½†å­˜åœ¨äºé—®é¢˜åˆ—è¡¨ä¸­ï¼Œå°†æ˜¾ç¤ºè¯¥é—®é¢˜');\r\n        } else {\r\n          console.warn('âš ï¸ é—®é¢˜IDä¸å­˜åœ¨äºé—®é¢˜åˆ—è¡¨ä¸­:', qid);\r\n          // é—®é¢˜å¯èƒ½å·²è¢«ä¸‹æ¶æˆ–æœªåŒ…å«åœ¨å½“å‰é—®é¢˜åˆ—è¡¨ä¸­\r\n          // ä¿ç•™ targetQuestionIdï¼Œåç»­åœ¨ currentQuestion ä¸­ä½¿ç”¨ qtext å›é€€æ˜¾ç¤º\r\n          this.qIndex = 0;\r\n        }\r\n      }\r\n    } else {\r\n      // é»˜è®¤æ˜¾ç¤ºç¬¬ä¸€ä¸ªæœªå›ç­”çš„é—®é¢˜\r\n      this.qIndex = 0;\r\n      this.targetQuestionId = null;\r\n    }\r\n    \r\n    // å¦‚æœæºå¸¦ timeï¼Œå›æ˜¾å½“å¤©ç­”æ¡ˆ\r\n    const time = options && options.time ? decodeURIComponent(options.time) : '';\r\n    const targetQuestionId = qid || (this.currentQuestion && this.currentQuestion.id);\r\n    \r\n    console.log('ğŸ“‹ åˆå§‹åŒ–ç­”æ¡ˆåŠ è½½:', {\r\n      targetQuestionId,\r\n      time,\r\n      currentQuestionId: this.currentQuestion?.id,\r\n      historyCount: this.history.length\r\n    });\r\n    \r\n    if (targetQuestionId) {\r\n      const rec = this.history.find(r => {\r\n        const rQuestionId = r.questionId || r.question_id;\r\n        return rQuestionId != null && Number(rQuestionId) === Number(targetQuestionId) && (!time || r.time === time);\r\n      });\r\n      if (rec) {\r\n        console.log('âœ… ä»å†å²è®°å½•åŠ è½½ç­”æ¡ˆ:', {\r\n          questionId: targetQuestionId,\r\n          hasMyAnswer: !!rec.myAnswer,\r\n          hasPartnerAnswer: !!rec.partnerAnswer,\r\n          partnerAnswer: rec.partnerAnswer ? rec.partnerAnswer.substring(0, 30) + '...' : 'ç©º',\r\n          recData: rec\r\n        });\r\n        this.myAnswer = rec.myAnswer || '';\r\n        this.partnerAnswer = rec.partnerAnswer || '';\r\n        this.hasSubmitted = true; // å¦‚æœæ˜¯ä»å†å²è®°å½•å›æ˜¾ï¼Œæ ‡è®°ä¸ºå·²æäº¤çŠ¶æ€\r\n        \r\n        // æ— è®ºå†å²è®°å½•ä¸­æ˜¯å¦æœ‰å¯¹æ–¹ç­”æ¡ˆï¼Œéƒ½ä»åç«¯è·å–æœ€æ–°çš„å¯¹æ–¹ç­”æ¡ˆ\r\n        console.log('ğŸ“¥ ä»åç«¯è·å–æœ€æ–°çš„å¯¹æ–¹ç­”æ¡ˆï¼Œé—®é¢˜ID:', targetQuestionId);\r\n        try {\r\n          const partnerRes = await getPartnerAnswer(targetQuestionId);\r\n          this.handlePartnerAnswerResponse(partnerRes, {\r\n            historyRecord: rec,\r\n            context: `onLoad questionId=${targetQuestionId}`\r\n          });\r\n        } catch (e) {\r\n          console.error('âŒ è·å–å¯¹æ–¹ç­”æ¡ˆå¤±è´¥:', e);\r\n          console.error('é”™è¯¯è¯¦æƒ…:', {\r\n            message: e.message,\r\n            statusCode: e.statusCode,\r\n            data: e.data\r\n          });\r\n          // è·å–å¤±è´¥ä¸å½±å“æ˜¾ç¤ºï¼Œä½¿ç”¨å†å²è®°å½•ä¸­çš„ç­”æ¡ˆ\r\n        }\r\n      } else {\r\n        // å³ä½¿å†å²è®°å½•ä¸­æ²¡æœ‰ï¼Œä¹Ÿå°è¯•åŠ è½½å½“å‰é—®é¢˜çš„ç­”æ¡ˆ\r\n        console.log('ğŸ“‹ å†å²è®°å½•ä¸­æœªæ‰¾åˆ°ï¼Œè°ƒç”¨ loadAnswerForCurrentQuestion');\r\n        this.loadAnswerForCurrentQuestion();\r\n      }\r\n    } else {\r\n      // å¦‚æœæ²¡æœ‰æŒ‡å®šé—®é¢˜IDï¼ŒåŠ è½½å½“å‰é—®é¢˜çš„ç­”æ¡ˆ\r\n      this.loadAnswerForCurrentQuestion();\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      statusBarHeight: 0,\r\n      navBarHeight: 44,\r\n      screenWidth: 375,\r\n      defaultQuestions: [],\r\n      customQuestions: [],\r\n      qIndex: 0,\r\n      myAnswer: '',\r\n      partnerAnswer: '',\r\n      hasSubmitted: false, // æ ‡è®°å½“å‰é—®é¢˜æ˜¯å¦å·²æäº¤\r\n      showHistory: false,\r\n      showCustomModal: false,\r\n      newQuestion: '',\r\n      history: [],\r\n      targetQuestionId: null, // ä»å†å²è®°å½•è·³è½¬è¿‡æ¥çš„ç›®æ ‡é—®é¢˜ID\r\n      targetQuestionFallbackText: '' // æ·»åŠ æ ‡å¿—é˜²æ­¢æäº¤åè‡ªåŠ¨åˆ‡æ¢é—®é¢˜\r\n    };\r\n  },\r\n  watch: {\r\n    // ç›‘å¬å½“å‰é—®é¢˜å˜åŒ–ï¼Œè‡ªåŠ¨åŠ è½½å¯¹åº”çš„ç­”æ¡ˆ\r\n    'currentQuestion.id': {\r\n      handler(newId, oldId) {\r\n        // å¦‚æœé—®é¢˜IDå‘ç”Ÿå˜åŒ–ï¼Œä¸”ä¸æ˜¯åˆå§‹åŒ–æ—¶ï¼ˆoldId å­˜åœ¨ï¼‰ï¼Œé‡æ–°åŠ è½½ç­”æ¡ˆ\r\n        if (newId && oldId && newId !== oldId) {\r\n          console.log('ğŸ”„ é—®é¢˜åˆ‡æ¢:', { from: oldId, to: newId });\r\n          this.loadAnswerForCurrentQuestion();\r\n        }\r\n      },\r\n      immediate: false\r\n    }\r\n  },\r\n  computed: {\r\n    containerPaddingTop() {\r\n      const totalHeightPx = this.statusBarHeight + this.navBarHeight;\r\n      const pxToRpx = 750 / this.screenWidth;\r\n      const totalHeightRpx = totalHeightPx * pxToRpx;\r\n      return totalHeightRpx + 20 + 'rpx';\r\n    },\r\n    questions() {\r\n      // è¿‡æ»¤æ‰æ— æ•ˆçš„é—®é¢˜å¯¹è±¡ï¼Œç¡®ä¿æ¯ä¸ªé—®é¢˜éƒ½æœ‰ id å’Œ text\r\n      const validCustomQuestions = (this.customQuestions || []).filter(q => q && q.id != null);\r\n      const validDefaultQuestions = (this.defaultQuestions || []).filter(q => q && q.id != null);\r\n      \r\n      // å§‹ç»ˆè¿”å›ç³»ç»Ÿé»˜è®¤é¢˜ + è‡ªå®šä¹‰é¢˜ï¼Œä¸¤ç±»é¢˜ç›®éƒ½åŒ…å«åœ¨é¢˜åº“ä¸­\r\n      // é»˜è®¤é¢˜åœ¨å‰ï¼Œè‡ªå®šä¹‰é¢˜åœ¨åï¼Œä¾¿äºç»´æŠ¤åŸæœ‰é¢˜ç›®é¡ºåº\r\n      return [...validDefaultQuestions, ...validCustomQuestions];\r\n    },\r\n    // è®¡ç®—æœªå›ç­”çš„é—®é¢˜åˆ—è¡¨\r\n    unansweredQuestions() {\r\n      const answeredIds = new Set(\r\n        this.history.map(h => {\r\n          const qid = h.questionId || h.question_id;\r\n          return qid != null ? Number(qid) : null;\r\n        }).filter(id => id != null)\r\n      );\r\n      \r\n      const unanswered = this.questions.filter(q => {\r\n        if (!q || q.id == null) return false;\r\n        return !answeredIds.has(Number(q.id)) && q.isActive !== false;\r\n      });\r\n      \r\n      if (process.env.NODE_ENV === 'development') {\r\n        console.log('ğŸ” æœªå›ç­”é—®é¢˜è®¡ç®—:', {\r\n          totalQuestions: this.questions.length,\r\n          answeredCount: answeredIds.size,\r\n          unansweredCount: unanswered.length,\r\n        });\r\n      }\r\n      \r\n      return unanswered;\r\n    },\r\n    currentQuestion() {\r\n      console.log('ğŸ” currentQuestion è®¡ç®—å¼€å§‹:', {\r\n        targetQuestionId: this.targetQuestionId,\r\n        targetQuestionFallbackText: this.targetQuestionFallbackText,\r\n        qIndex: this.qIndex,\r\n        unansweredQuestionsLength: this.unansweredQuestions.length\r\n      });\r\n      \r\n      // å¦‚æœæŒ‡å®šäº†ç›®æ ‡é—®é¢˜IDï¼ˆä»å†å²è®°å½•è·³è½¬ï¼‰ï¼Œä¼˜å…ˆæ˜¾ç¤ºè¯¥é—®é¢˜\r\n      if (this.targetQuestionId != null) {\r\n        const targetId = Number(this.targetQuestionId);\r\n        console.log('ğŸ“Œ æ£€æŸ¥ç›®æ ‡é—®é¢˜ID:', targetId);\r\n        \r\n        // ä»æ‰€æœ‰é—®é¢˜ä¸­æŸ¥æ‰¾ç›®æ ‡é—®é¢˜\r\n        const targetQuestion = this.questions.find(q => q && q.id != null && Number(q.id) === targetId);\r\n        if (targetQuestion) {\r\n          console.log('ğŸ¯ æ˜¾ç¤ºç›®æ ‡é—®é¢˜:', {\r\n            id: targetQuestion.id,\r\n            text: targetQuestion.text.substring(0, 20) + '...'\r\n          });\r\n          return targetQuestion;\r\n        } else {\r\n          console.log('â“ ç›®æ ‡é—®é¢˜åœ¨é—®é¢˜åˆ—è¡¨ä¸­æœªæ‰¾åˆ°');\r\n          if (this.targetQuestionFallbackText) {\r\n            console.warn('âš ï¸ ç›®æ ‡é—®é¢˜ä¸åœ¨é—®é¢˜åˆ—è¡¨ï¼Œä½¿ç”¨å†å²è®°å½•æºå¸¦çš„é¢˜å¹²');\r\n            return {\r\n              id: targetId,\r\n              text: this.targetQuestionFallbackText,\r\n              category: 'history',\r\n              isFallback: true\r\n            };\r\n          }\r\n          console.warn('âš ï¸ ç›®æ ‡é—®é¢˜ä¸å­˜åœ¨ï¼Œå›é€€åˆ°é»˜è®¤é€»è¾‘');\r\n          // å¦‚æœç›®æ ‡é—®é¢˜ä¸å­˜åœ¨ï¼Œæ¸…é™¤ targetQuestionId å¹¶å›é€€åˆ°é»˜è®¤é€»è¾‘\r\n          this.targetQuestionId = null;\r\n          this.targetQuestionFallbackText = '';\r\n        }\r\n      }\r\n      \r\n      // å¦‚æœå·²ç»æäº¤äº†å½“å‰é—®é¢˜çš„ç­”æ¡ˆï¼Œä¿æŒåœ¨å½“å‰é—®é¢˜è€Œä¸æ˜¯åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª\r\n      if (this.hasSubmitted && this.targetQuestionId == null) {\r\n        // å°è¯•ä»å†å²è®°å½•ä¸­æ‰¾åˆ°æœ€æ–°æäº¤çš„é—®é¢˜\r\n        if (this.history.length > 0 && this.history[0] && this.history[0].questionId) {\r\n          const lastSubmittedId = Number(this.history[0].questionId);\r\n          const currentQuestion = this.questions.find(q => \r\n            q && q.id != null && Number(q.id) === lastSubmittedId\r\n          );\r\n          \r\n          if (currentQuestion) {\r\n            console.log('ğŸ”’ ä¿æŒå·²æäº¤çš„é—®é¢˜:', {\r\n              id: currentQuestion.id,\r\n              text: currentQuestion.text.substring(0, 20) + '...'\r\n            });\r\n            return currentQuestion;\r\n          }\r\n        }\r\n      }\r\n      \r\n      // ä»æœªå›ç­”çš„é—®é¢˜ä¸­è·å–å½“å‰é—®é¢˜\r\n      if (this.unansweredQuestions.length === 0) {\r\n        console.log('ğŸ‰ æ‰€æœ‰é—®é¢˜å·²å›ç­”å®Œæ¯•');\r\n        return { id: 0, text: 'æ‰€æœ‰é—®é¢˜å·²å›ç­”å®Œæ¯•ï¼ğŸ‰' };\r\n      }\r\n      \r\n      const current = this.unansweredQuestions[this.qIndex] || this.unansweredQuestions[0];\r\n      console.log('â¡ï¸ è¿”å›å½“å‰é—®é¢˜:', {\r\n        index: this.qIndex,\r\n        question: current ? current.text.substring(0, 20) + '...' : 'null'\r\n      });\r\n      return current;\r\n    }\r\n  },\r\n  mounted() {\r\n    // onLoad ä¸­å·²ç»åŠ è½½ï¼Œæ— éœ€é‡å¤åŠ è½½\r\n  },\r\n  methods: {\r\n    normalizeApiResponse(response, defaultMessage = 'æ“ä½œæˆåŠŸ') {\r\n      if (response == null) {\r\n        return { success: false, message: 'å“åº”ä¸ºç©º', data: null, raw: response };\r\n      }\r\n      if (typeof response === 'string') {\r\n        return { success: false, message: response, data: null, raw: response };\r\n      }\r\n      if (typeof response.success === 'boolean') {\r\n        return {\r\n          success: !!response.success,\r\n          message: response.message || response.msg || defaultMessage,\r\n          data: response.data !== undefined ? response.data : null,\r\n          raw: response\r\n        };\r\n      }\r\n      if (response.code !== undefined) {\r\n        const success = Number(response.code) === 200;\r\n        return {\r\n          success,\r\n          message: response.msg || response.message || defaultMessage,\r\n          data: response.data !== undefined ? response.data : null,\r\n          raw: response\r\n        };\r\n      }\r\n      if (Array.isArray(response)) {\r\n        return { success: true, message: defaultMessage, data: response, raw: response };\r\n      }\r\n      return {\r\n        success: true,\r\n        message: response.message || response.msg || defaultMessage,\r\n        data: response.data !== undefined ? response.data : response,\r\n        raw: response\r\n      };\r\n    },\r\n    handlePartnerAnswerResponse(partnerRes, { historyRecord = null, context = '', updateState = true } = {}) {\r\n      const normalized = this.normalizeApiResponse(partnerRes, 'è·å–å¯¹æ–¹ç­”æ¡ˆæˆåŠŸ');\r\n      console.log('ğŸ“¥ å¯¹æ–¹ç­”æ¡ˆå“åº”ï¼ˆæ ‡å‡†åŒ–ï¼‰:', {\r\n        context,\r\n        success: normalized.success,\r\n        message: normalized.message,\r\n        data: normalized.data\r\n      });\r\n      \r\n      if (!normalized.success) {\r\n        console.warn('âš ï¸ è·å–å¯¹æ–¹ç­”æ¡ˆä¸šåŠ¡å¤±è´¥:', {\r\n          context,\r\n          message: normalized.message,\r\n          raw: normalized.raw\r\n        });\r\n        return { updated: false, answer: '', normalized };\r\n      }\r\n      \r\n      const pickPayload = candidate => {\r\n        if (candidate && typeof candidate === 'object') {\r\n          if (candidate.data && typeof candidate.data === 'object') {\r\n            return candidate.data;\r\n          }\r\n          return candidate;\r\n        }\r\n        return null;\r\n      };\r\n      \r\n      let payload =\r\n        pickPayload(normalized.data) ||\r\n        pickPayload(normalized.raw?.data) ||\r\n        pickPayload(normalized.raw) ||\r\n        null;\r\n      \r\n      if (!payload) {\r\n        console.warn('âš ï¸ å¯¹æ–¹ç­”æ¡ˆå“åº”ç¼ºå°‘æœ‰æ•ˆæ•°æ®å¯¹è±¡:', { context, normalized });\r\n        return { updated: false, answer: '', normalized };\r\n      }\r\n      \r\n      const answer =\r\n        payload.answer ??\r\n        payload.partnerAnswer ??\r\n        payload.partner_answer ??\r\n        payload.data?.answer ??\r\n        payload.data?.partnerAnswer ??\r\n        payload.data?.partner_answer ??\r\n        '';\r\n      \r\n      const answeredFlag =\r\n        payload.hasAnswered ??\r\n        payload.hasPartnerAnswered ??\r\n        payload.has_partner_answered ??\r\n        payload.has_answered ??\r\n        payload.data?.hasAnswered ??\r\n        payload.data?.hasPartnerAnswered;\r\n      \r\n      const hasAnswered = answeredFlag === undefined ? !!answer : answeredFlag !== false;\r\n      \r\n      if (hasAnswered && answer) {\r\n        console.log('âœ… è§£æåˆ°å¯¹æ–¹ç­”æ¡ˆ:', {\r\n          context,\r\n          preview: answer.substring(0, 30) + (answer.length > 30 ? '...' : '')\r\n        });\r\n        if (updateState) {\r\n          this.partnerAnswer = answer;\r\n          if (historyRecord) {\r\n            historyRecord.partnerAnswer = answer;\r\n            historyRecord.partnerAnsweredAt =\r\n              payload.answeredAt ||\r\n              payload.partnerAnsweredAt ||\r\n              payload.answered_at ||\r\n              historyRecord.partnerAnsweredAt;\r\n          }\r\n          // å¼ºåˆ¶è§¦å‘Vueå“åº”å¼æ›´æ–°\r\n          this.$forceUpdate();\r\n        }\r\n        return { updated: true, answer, normalized };\r\n      }\r\n      \r\n      console.log('âš ï¸ å¯¹æ–¹æš‚æœªä½œç­”æˆ–ç­”æ¡ˆä¸ºç©º:', { context, payload });\r\n      return { updated: false, answer: '', normalized };\r\n    },\r\n    formatQuestionList(list, categoryFallback = 'preset') {\r\n      console.log('ğŸ”§ formatQuestionList è°ƒç”¨:', { list, categoryFallback });\r\n      if (!Array.isArray(list)) {\r\n        console.log('âš ï¸ list ä¸æ˜¯æ•°ç»„');\r\n        return [];\r\n      }\r\n      const result = list\r\n        .filter(q => q && q.id != null)\r\n        .map(q => {\r\n          console.log('ğŸ”§ å¤„ç†é—®é¢˜é¡¹:', q);\r\n          const formatted = {\r\n            ...q,\r\n            id: q.id,\r\n            text: q.text || q.questionText || '',\r\n            category: q.category || categoryFallback,\r\n            isActive: q.isActive !== false,\r\n            orderIndex: q.orderIndex ?? 999\r\n          };\r\n          console.log('ğŸ”§ æ ¼å¼åŒ–åçš„é—®é¢˜é¡¹:', formatted);\r\n          if (formatted.questionText) {\r\n            delete formatted.questionText;\r\n          }\r\n          return formatted;\r\n        });\r\n      console.log('ğŸ”§ formatQuestionList ç»“æœ:', result);\r\n      return result;\r\n    },\r\n    goBack() {\r\n      uni.navigateBack();\r\n    },\r\n    getSystemInfo() {\r\n      const systemInfo = uni.getSystemInfoSync();\r\n      this.statusBarHeight = systemInfo.statusBarHeight || 0;\r\n      this.screenWidth = systemInfo.windowWidth || 375;\r\n      // #ifdef MP-WEIXIN\r\n      this.navBarHeight = 44;\r\n      // #endif\r\n      // #ifdef H5\r\n      this.navBarHeight = 44;\r\n      // #endif\r\n    },\r\n    // ä¿å­˜å†å²è®°å½•åˆ°æœ¬åœ°å­˜å‚¨\r\n    saveHistory() {\r\n      try {\r\n        uni.setStorageSync('qna_history', this.history);\r\n      } catch (e) {\r\n        console.error('ä¿å­˜å†å²è®°å½•å¤±è´¥', e);\r\n      }\r\n    },\r\n    async submitAnswer() {\r\n      if (!this.myAnswer) {\r\n        uni.showToast({ title: 'è¯·å¡«å†™ä½ çš„ç­”æ¡ˆ', icon: 'none' });\r\n        return;\r\n      }\r\n      if (this.currentQuestion.id === 0) {\r\n        uni.showToast({ title: 'æ‰€æœ‰é—®é¢˜å·²å›ç­”å®Œæ¯•', icon: 'none' });\r\n        return;\r\n      }\r\n      // æ£€æŸ¥æ˜¯å¦å·²ç»å›ç­”è¿‡è¿™ä¸ªé—®é¢˜\r\n      const alreadyAnswered = this.history.some(h => h.questionId === this.currentQuestion.id);\r\n      if (alreadyAnswered) {\r\n        uni.showToast({ title: 'è¯¥é—®é¢˜å·²ç»å›ç­”è¿‡äº†', icon: 'none' });\r\n        return;\r\n      }\r\n      \r\n      // è®¾ç½®é˜²æ­¢è‡ªåŠ¨åˆ‡æ¢æ ‡å¿—\r\n      this.preventAutoSwitch = true;\r\n      \r\n      try {\r\n        uni.showLoading({ title: 'æäº¤ä¸­...' });\r\n        \r\n        // è°ƒç”¨åç«¯APIæäº¤ç­”æ¡ˆ\r\n        const answerData = {\r\n          questionId: this.currentQuestion.id,\r\n          answer: this.myAnswer,\r\n          questionText: this.currentQuestion.text\r\n        };\r\n        \r\n        console.log('ğŸ“¤ å‡†å¤‡æäº¤ç­”æ¡ˆ:', {\r\n          questionId: answerData.questionId,\r\n          answer: answerData.answer,\r\n          questionText: answerData.questionText,\r\n          currentQuestion: this.currentQuestion,\r\n          allQuestions: this.questions.map(q => ({ id: q.id, text: q.text })),\r\n          customQuestions: this.customQuestions.map(q => ({ id: q.id, text: q.text })),\r\n          defaultQuestions: this.defaultQuestions.map(q => ({ id: q.id, text: q.text }))\r\n        });\r\n        \r\n        const res = await submitAnswer(answerData);\r\n        \r\n        console.log('ğŸ“¥ æäº¤ç­”æ¡ˆå“åº”:', res);\r\n        \r\n        if (res && res.success) {\r\n          // ä¿å­˜å½“å‰é—®é¢˜çš„IDï¼Œç¡®ä¿åç»­æ“ä½œä½¿ç”¨æ­£ç¡®çš„ID\r\n          const submittedQuestionId = Number(this.currentQuestion.id);\r\n          console.log('âœ… æäº¤ç­”æ¡ˆæˆåŠŸï¼Œé—®é¢˜ID:', submittedQuestionId);\r\n          \r\n          // æ ‡è®°å·²æäº¤ï¼Œæ˜¾ç¤ºå¯¹æ–¹ç­”æ¡ˆåŒºåŸŸ\r\n          this.hasSubmitted = true;\r\n          \r\n          // å…¼å®¹ä¸åŒçš„å“åº”æ ¼å¼\r\n          const responseData = res.data || res;\r\n          \r\n          // å…ˆå°è¯•ä»æäº¤æ¥å£è¿”å›çš„æ•°æ®ä¸­è·å–å¯¹æ–¹ç­”æ¡ˆ\r\n          let partnerAnswerFromSubmit = '';\r\n          if (responseData && (responseData.hasPartnerAnswered || responseData.hasPartnerAnswer)) {\r\n            partnerAnswerFromSubmit = responseData.partnerAnswer || '';\r\n            this.partnerAnswer = partnerAnswerFromSubmit;\r\n            console.log('ğŸ“¥ ä»æäº¤æ¥å£è·å–åˆ°å¯¹æ–¹ç­”æ¡ˆ:', partnerAnswerFromSubmit ? partnerAnswerFromSubmit.substring(0, 20) + '...' : 'ç©º');\r\n          }\r\n          \r\n          // æ— è®ºæäº¤æ¥å£æ˜¯å¦è¿”å›å¯¹æ–¹ç­”æ¡ˆï¼Œéƒ½ä¸»åŠ¨è°ƒç”¨æ¥å£è·å–å¯¹æ–¹ç­”æ¡ˆï¼ˆç¡®ä¿è·å–æœ€æ–°æ•°æ®ï¼‰\r\n          try {\r\n            console.log('ğŸ” å¼€å§‹è·å–å¯¹æ–¹ç­”æ¡ˆï¼Œé—®é¢˜ID:', submittedQuestionId);\r\n            const partnerRes = await getPartnerAnswer(submittedQuestionId);\r\n            console.log('ğŸ“¥ å¯¹æ–¹ç­”æ¡ˆæ¥å£åŸå§‹å“åº”:', partnerRes);\r\n            const partnerResult = this.handlePartnerAnswerResponse(partnerRes, {\r\n              context: `submit questionId=${submittedQuestionId}`\r\n            });\r\n            console.log('ğŸ”§ å¯¹æ–¹ç­”æ¡ˆå¤„ç†ç»“æœ:', {\r\n              updated: partnerResult.updated,\r\n              hasAnswer: !!partnerResult.answer,\r\n              answerPreview: partnerResult.answer ? partnerResult.answer.substring(0, 20) + '...' : 'ç©º',\r\n              currentPartnerAnswer: this.partnerAnswer\r\n            });\r\n            if (partnerResult.updated && partnerResult.answer) {\r\n              partnerAnswerFromSubmit = partnerResult.answer;\r\n            } else if (!partnerAnswerFromSubmit) {\r\n              // å¦‚æœæ¥å£æœªè¿”å›ç­”æ¡ˆä¸”æäº¤å“åº”ä¸­ä¹Ÿæ²¡æœ‰ï¼Œä¿æŒç©ºçŠ¶æ€\r\n              this.partnerAnswer = '';\r\n            }\r\n          } catch (partnerError) {\r\n            // è·å–å¯¹æ–¹ç­”æ¡ˆå¤±è´¥ä¸å½±å“ä¸»æµç¨‹ï¼Œåªè®°å½•æ—¥å¿—\r\n            console.error('âŒ è·å–å¯¹æ–¹ç­”æ¡ˆæ¥å£è°ƒç”¨å¤±è´¥:', partnerError);\r\n            console.error('âŒ é”™è¯¯è¯¦æƒ…:', {\r\n              message: partnerError.message,\r\n              statusCode: partnerError.statusCode,\r\n              data: partnerError.data\r\n            });\r\n            // å¦‚æœæäº¤æ¥å£è¿”å›äº†å¯¹æ–¹ç­”æ¡ˆï¼Œç»§ç»­ä½¿ç”¨å®ƒï¼›å¦åˆ™æ¸…ç©ºï¼ˆä¼šæ˜¾ç¤º\"å¯¹æ–¹æš‚æœªä½œç­”\"æç¤ºï¼‰\r\n            if (!partnerAnswerFromSubmit) {\r\n              this.partnerAnswer = '';\r\n            }\r\n          }\r\n          \r\n          // æ·»åŠ åˆ°æœ¬åœ°å†å²è®°å½•\r\n          const record = {\r\n            id: responseData?.answerId || res?.answerId || responseData?.id || Date.now(),\r\n            questionId: Number(submittedQuestionId), // ç¡®ä¿ä½¿ç”¨æ•°å­—ç±»å‹\r\n            question: this.currentQuestion.text,\r\n            myAnswer: this.myAnswer,\r\n            partnerAnswer: partnerAnswerFromSubmit || this.partnerAnswer || '',\r\n            time: new Date().toLocaleString(),\r\n            createdAt: new Date().toISOString()\r\n          };\r\n          \r\n          // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒé—®é¢˜çš„å†å²è®°å½•ï¼Œé¿å…é‡å¤\r\n          const existingIndex = this.history.findIndex(h => \r\n            h.questionId === record.questionId || \r\n            (h.questionId && record.questionId && Number(h.questionId) === Number(record.questionId))\r\n          );\r\n          \r\n          if (existingIndex >= 0) {\r\n            // æ›´æ–°ç°æœ‰è®°å½•è€Œä¸æ˜¯æ·»åŠ æ–°è®°å½•\r\n            console.log('ğŸ”„ æ›´æ–°ç°æœ‰å†å²è®°å½•:', record);\r\n            this.history[existingIndex] = record;\r\n          } else {\r\n            // æ·»åŠ æ–°è®°å½•\r\n            console.log('ğŸ’¾ æ·»åŠ æ–°çš„å†å²è®°å½•:', record);\r\n            this.history.unshift(record);\r\n          }\r\n          console.log('ğŸ’¾ ä¿å­˜å†å²è®°å½•:', {\r\n            questionId: record.questionId,\r\n            questionText: record.question.substring(0, 20) + '...',\r\n            hasPartnerAnswer: !!record.partnerAnswer\r\n          });\r\n          this.history.unshift(record);\r\n          this.saveHistory();\r\n          \r\n          // æ›´æ–°å½“å‰æ˜¾ç¤ºçš„ç­”æ¡ˆï¼ˆå…³é”®ä¿®å¤ç‚¹ï¼‰\r\n          this.myAnswer = this.myAnswer;\r\n          this.partnerAnswer = partnerAnswerFromSubmit || this.partnerAnswer || '';\r\n          \r\n          // å¼ºåˆ¶è§¦å‘Vueå“åº”å¼æ›´æ–°\r\n          this.$forceUpdate();\r\n          \r\n          uni.showToast({ title: 'æäº¤æˆåŠŸ', icon: 'success' });\r\n          \r\n          // ä¿ç•™åœ¨å½“å‰é¢˜ç›®ï¼Œç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»\"ä¸‹ä¸€é¢˜\"\r\n          // ä¸å†è‡ªåŠ¨æ›´æ–°å†å²è®°å½•å¯¼è‡´é—®é¢˜åˆ‡æ¢ï¼Œè€Œæ˜¯ä¿æŒå½“å‰é¢˜ç›®çŠ¶æ€\r\n        } else {\r\n          // å³ä½¿å“åº”æ ¼å¼ä¸ç¬¦åˆé¢„æœŸï¼Œä¹Ÿä¿å­˜åˆ°æœ¬åœ°\r\n          console.warn('âš ï¸ å“åº”æ ¼å¼ä¸ç¬¦åˆé¢„æœŸ:', res);\r\n          const record = {\r\n            id: Date.now(),\r\n            questionId: this.currentQuestion.id,\r\n            question: this.currentQuestion.text,\r\n            myAnswer: this.myAnswer,\r\n            partnerAnswer: '',\r\n            time: new Date().toLocaleString(),\r\n            createdAt: new Date().toISOString()\r\n          };\r\n          this.history.unshift(record);\r\n          this.saveHistory();\r\n          \r\n          // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒé—®é¢˜çš„å†å²è®°å½•ï¼Œé¿å…é‡å¤\r\n          const existingIndex = this.history.findIndex(h => \r\n            h.questionId === record.questionId || \r\n            (h.questionId && record.questionId && Number(h.questionId) === Number(record.questionId))\r\n          );\r\n          \r\n          if (existingIndex >= 0) {\r\n            // æ›´æ–°ç°æœ‰è®°å½•è€Œä¸æ˜¯æ·»åŠ æ–°è®°å½•\r\n            console.log('ğŸ”„ æ›´æ–°ç°æœ‰å†å²è®°å½•ï¼ˆå¼‚å¸¸æƒ…å†µï¼‰:', record);\r\n            this.history[existingIndex] = record;\r\n          } else {\r\n            // æ·»åŠ æ–°è®°å½•\r\n            console.log('ğŸ’¾ æ·»åŠ æ–°çš„å†å²è®°å½•ï¼ˆå¼‚å¸¸æƒ…å†µï¼‰:', record);\r\n            this.history.unshift(record);\r\n          }\r\n          \r\n          // æ›´æ–°å½“å‰æ˜¾ç¤ºçš„ç­”æ¡ˆï¼ˆå…³é”®ä¿®å¤ç‚¹ï¼‰\r\n          this.myAnswer = this.myAnswer;\r\n          this.partnerAnswer = '';\r\n          this.hasSubmitted = true;\r\n          \r\n          // å¼ºåˆ¶è§¦å‘Vueå“åº”å¼æ›´æ–°\r\n          this.$forceUpdate();\r\n          \r\n          uni.showToast({ title: 'æäº¤æˆåŠŸï¼ˆå·²ä¿å­˜åˆ°æœ¬åœ°ï¼‰', icon: 'success' });\r\n          \r\n          // ä¿ç•™åœ¨å½“å‰é¢˜ç›®ï¼Œç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»\"ä¸‹ä¸€é¢˜\"\r\n        }\r\n      } catch (e) {\r\n        console.error('æäº¤ç­”æ¡ˆå¤±è´¥', e);\r\n        console.error('é”™è¯¯è¯¦æƒ…:', {\r\n          statusCode: e.statusCode,\r\n          message: e.message,\r\n          data: e.data,\r\n          url: e.url || 'æœªçŸ¥'\r\n        });\r\n        \r\n        // 401é”™è¯¯ç‰¹æ®Šå¤„ç†\r\n        if (e.statusCode === 401) {\r\n          // ä¸éœ€è¦æ‰‹åŠ¨ hideLoadingï¼Œfinally å—ä¼šå¤„ç†\r\n          uni.showModal({\r\n            title: 'ç™»å½•å·²è¿‡æœŸ',\r\n            content: 'æ‚¨çš„ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',\r\n            showCancel: false,\r\n            success: () => {\r\n              uni.reLaunch({\r\n                url: '/pages/login/index'\r\n              });\r\n            }\r\n          });\r\n          return;\r\n        }\r\n        \r\n        // 404é”™è¯¯ï¼šåç«¯æ¥å£æœªå®ç°\r\n        if (e.statusCode === 404) {\r\n          // ä¸éœ€è¦æ‰‹åŠ¨ hideLoadingï¼Œfinally å—ä¼šå¤„ç†\r\n          console.warn('âš ï¸ åç«¯æ¥å£æœªå®ç°: POST /api/qna/answer/submit');\r\n          console.warn('ğŸ’¡ æç¤º: è¯·è”ç³»åç«¯å¼€å‘äººå‘˜å®ç°è¯¥æ¥å£ï¼Œæˆ–æ£€æŸ¥æ¥å£è·¯å¾„æ˜¯å¦æ­£ç¡®');\r\n          \r\n          // ä¸´æ—¶æ–¹æ¡ˆï¼šä¿å­˜åˆ°æœ¬åœ°ï¼Œç­‰åç«¯æ¥å£å°±ç»ªåå†åŒæ­¥\r\n          uni.showModal({\r\n            title: 'æ¥å£æœªå®ç°',\r\n            content: 'æäº¤ç­”æ¡ˆæ¥å£æš‚æœªå®ç°ï¼Œå·²ä¿å­˜åˆ°æœ¬åœ°ã€‚è¯·è”ç³»åç«¯å¼€å‘äººå‘˜å®ç°æ¥å£ï¼šPOST /api/qna/answer/submit',\r\n            showCancel: false,\r\n            confirmText: 'çŸ¥é“äº†',\r\n            success: () => {\r\n              // æœ¬åœ°ä¿å­˜ç­”æ¡ˆè®°å½•ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰\r\n              const record = {\r\n                id: Date.now(), // ä¸´æ—¶ID\r\n                questionId: this.currentQuestion.id,\r\n                question: this.currentQuestion.text,\r\n                myAnswer: this.myAnswer,\r\n                partnerAnswer: '',\r\n                time: new Date().toLocaleString(),\r\n                createdAt: new Date().toISOString(),\r\n                _pendingSync: true // æ ‡è®°ä¸ºå¾…åŒæ­¥\r\n              };\r\n              \r\n              // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒé—®é¢˜çš„å†å²è®°å½•ï¼Œé¿å…é‡å¤\r\n              const existingIndex = this.history.findIndex(h => \r\n                h.questionId === record.questionId || \r\n                (h.questionId && record.questionId && Number(h.questionId) === Number(record.questionId))\r\n              );\r\n              \r\n              if (existingIndex >= 0) {\r\n                // æ›´æ–°ç°æœ‰è®°å½•è€Œä¸æ˜¯æ·»åŠ æ–°è®°å½•\r\n                console.log('ğŸ”„ æ›´æ–°ç°æœ‰å†å²è®°å½•ï¼ˆ404æƒ…å†µï¼‰:', record);\r\n                this.history[existingIndex] = record;\r\n              } else {\r\n                // æ·»åŠ æ–°è®°å½•\r\n                console.log('ğŸ’¾ æ·»åŠ æ–°çš„å†å²è®°å½•ï¼ˆ404æƒ…å†µï¼‰:', record);\r\n                this.history.unshift(record);\r\n              }\r\n              // æ³¨æ„ï¼šä¸Šé¢å·²ç»æ·»åŠ äº†è®°å½•ï¼Œè¿™é‡Œä¸å†é‡å¤æ·»åŠ \r\n              this.saveHistory();\r\n              \r\n              // æ›´æ–°å½“å‰æ˜¾ç¤ºçš„ç­”æ¡ˆï¼ˆå…³é”®ä¿®å¤ç‚¹ï¼‰\r\n              this.myAnswer = this.myAnswer;\r\n              this.partnerAnswer = '';\r\n              this.hasSubmitted = true;\r\n              \r\n              // å¼ºåˆ¶è§¦å‘Vueå“åº”å¼æ›´æ–°\r\n              this.$forceUpdate();\r\n              \r\n              uni.showToast({ title: 'å·²ä¿å­˜åˆ°æœ¬åœ°', icon: 'none' });\r\n              \r\n              // ä¿ç•™åœ¨å½“å‰é¢˜ç›®ï¼Œç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»\"ä¸‹ä¸€é¢˜\"\r\n            }\r\n          });\r\n          return;\r\n        }\r\n        \r\n        // ä¸éœ€è¦æ‰‹åŠ¨ hideLoadingï¼Œfinally å—ä¼šå¤„ç†\r\n        uni.showToast({ \r\n          title: `æäº¤å¤±è´¥: ${e.statusCode || 'ç½‘ç»œé”™è¯¯'}`, \r\n          icon: 'none',\r\n          duration: 3000\r\n        });\r\n      } finally {\r\n        // ç¡®ä¿loadingå…³é—­ï¼ˆä½¿ç”¨ try-catch é¿å…é‡å¤éšè—å¯¼è‡´çš„é”™è¯¯ï¼‰\r\n        try {\r\n          uni.hideLoading();\r\n        } catch (e) {\r\n          // å¿½ç•¥ hideLoading é”™è¯¯ï¼ˆå¯èƒ½å·²ç»éšè—è¿‡äº†ï¼‰\r\n        }\r\n        \r\n        // å»¶è¿Ÿé‡ç½®é˜²æ­¢è‡ªåŠ¨åˆ‡æ¢æ ‡å¿—ï¼Œç¡®ä¿é¡µé¢æ›´æ–°å®Œæˆ\r\n        setTimeout(() => {\r\n          this.preventAutoSwitch = false;\r\n        }, 100);\r\n      }\r\n    },\r\n    nextQuestion() {\r\n      // è§£é™¤é—®é¢˜é”å®šï¼Œå…è®¸åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª\r\n      this.targetQuestionId = null;\r\n      this.targetQuestionFallbackText = '';\r\n      \r\n      // é‡ç½®æäº¤çŠ¶æ€ï¼Œå…è®¸åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªé—®é¢˜\r\n      this.hasSubmitted = false;\r\n      this.myAnswer = '';\r\n      this.partnerAnswer = '';\r\n\r\n      const unanswered = this.unansweredQuestions;\r\n      if (unanswered.length === 0) {\r\n        uni.showToast({ title: 'æ‰€æœ‰é—®é¢˜å·²å›ç­”å®Œæ¯•ï¼', icon: 'success' });\r\n        // åœç•™åœ¨æœ€åä¸€ä¸ªå·²å›ç­”çš„é—®é¢˜ä¸Š\r\n        return;\r\n      }\r\n\r\n      // ç›´æ¥ä»æœ€æ–°çš„æœªå›ç­”é—®é¢˜åˆ—è¡¨ä¸­é€‰æ‹©ç¬¬ä¸€ä¸ª\r\n      this.qIndex = 0;\r\n\r\n      // ä½¿ç”¨ $nextTick ç¡®ä¿ DOM æ›´æ–°åå†åŠ è½½ç­”æ¡ˆ\r\n      this.$nextTick(() => {\r\n        this.loadAnswerForCurrentQuestion();\r\n      });\r\n    },\r\n    // åŠ è½½å½“å‰é—®é¢˜çš„ç­”æ¡ˆï¼ˆä»å†å²è®°å½•æˆ–åç«¯ï¼‰\r\n    async loadAnswerForCurrentQuestion() {\r\n      if (!this.currentQuestion || !Number.isFinite(this.currentQuestion.id) || this.currentQuestion.id === 0) {\r\n        this.myAnswer = '';\r\n        this.partnerAnswer = '';\r\n        this.hasSubmitted = false;\r\n        return;\r\n      }\r\n\r\n      const questionId = Number(this.currentQuestion.id);\r\n      const historyRecord = this.history.find(h => Number(h.questionId) === questionId);\r\n\r\n      if (historyRecord) {\r\n        this.myAnswer = historyRecord.myAnswer || '';\r\n        this.partnerAnswer = historyRecord.partnerAnswer || '';\r\n        this.hasSubmitted = true;\r\n        \r\n        // å³ä½¿å†å²è®°å½•ä¸­æœ‰ï¼Œä¹Ÿä»åç«¯è·å–æœ€æ–°çš„å¯¹æ–¹ç­”æ¡ˆä»¥ä¿è¯æ•°æ®åŒæ­¥\r\n        try {\r\n          const partnerRes = await getPartnerAnswer(questionId);\r\n          this.handlePartnerAnswerResponse(partnerRes, {\r\n            historyRecord,\r\n            context: `loadAnswer questionId=${questionId}`\r\n          });\r\n        } catch (e) {\r\n          console.error(`âŒ è·å–å¯¹æ–¹ç­”æ¡ˆå¤±è´¥ (é—®é¢˜ID: ${questionId}):`, e);\r\n        }\r\n      } else {\r\n        this.myAnswer = '';\r\n        this.partnerAnswer = '';\r\n        this.hasSubmitted = false;\r\n      }\r\n      this.$forceUpdate();\r\n    },\r\n    openHistory() {\r\n      \r\n      uni.navigateTo({ url: '/subPackages/interaction/pages/qna/history' });\r\n    },\r\n    closeHistory() {\r\n      this.showHistory = false;\r\n    },\r\n    clearHistory() {\r\n      this.history = [];\r\n      this.saveHistory();\r\n      uni.showToast({ title: 'è®°å½•å·²æ¸…ç©º', icon: 'none' });\r\n    },\r\n    // æ ‡å‡†åŒ–å†å²è®°å½•é¡¹ï¼ˆä»åç«¯æˆ–æœ¬åœ°å­˜å‚¨ï¼‰\r\n    normalizeHistoryItem(item) {\r\n      if (!item) return null;\r\n\r\n      const id = item.id || item.answerId;\r\n      const questionId = item.questionId || item.question_id;\r\n\r\n      // ä¼˜å…ˆä½¿ç”¨åç«¯è¿”å›çš„é¢˜å¹²ï¼Œå…¶æ¬¡ä»é—®é¢˜åˆ—è¡¨ä¸­å›å¡«\r\n      let question = item.question || item.questionText || item.question_text;\r\n      if (!question && questionId != null) {\r\n        const allQuestions = [\r\n          ...(this.defaultQuestions || []),\r\n          ...(this.customQuestions || [])\r\n        ];\r\n        const foundQuestion = allQuestions.find(q => q && q.id != null && Number(q.id) === Number(questionId));\r\n        if (foundQuestion && foundQuestion.text) {\r\n          question = foundQuestion.text;\r\n        }\r\n      }\r\n\r\n      // æŠŠåç«¯çš„ answer å­—æ®µæ˜ å°„ä¸º myAnswerï¼Œä¿æŒä¸é¡µé¢å†…éƒ¨é€»è¾‘ä¸€è‡´\r\n      const myAnswer = item.myAnswer || item.answer || item.my_answer;\r\n      const partnerAnswer = item.partnerAnswer || item.partner_answer || '';\r\n      const time =\r\n        item.time ||\r\n        item.answeredAt ||\r\n        item.createdAt ||\r\n        item.created_at ||\r\n        item.updatedAt ||\r\n        new Date().toLocaleString();\r\n\r\n      return {\r\n        id,\r\n        questionId,\r\n        question: question || `é—®é¢˜ID: ${questionId}`,\r\n        myAnswer,\r\n        partnerAnswer,\r\n        time,\r\n        questionCategory: item.questionCategory || item.category,\r\n        answeredAt: item.answeredAt,\r\n        ...item\r\n      };\r\n    },\r\n    // ä»åç«¯åŠ è½½å†å²è®°å½•\r\n    async loadHistoryFromServer() {\r\n      try {\r\n        const res = await getHistory({ page: 1, pageSize: 100 });\r\n        const normalizedRes = this.normalizeApiResponse(res, 'è·å–å†å²è®°å½•æˆåŠŸ');\r\n        \r\n        if (!normalizedRes.success) {\r\n          console.warn(`âš ï¸ å†å²è®°å½•ä¸šåŠ¡çŠ¶æ€è¿”å›å¤±è´¥: ${normalizedRes.message}`);\r\n          const localHistory = uni.getStorageSync('qna_history');\r\n          this.history = Array.isArray(localHistory) ? localHistory : [];\r\n          return;\r\n        }\r\n\r\n        const historyList = normalizedRes.data?.list || normalizedRes.data?.history || normalizedRes.data?.answers || (Array.isArray(normalizedRes.data) ? normalizedRes.data : []);\r\n\r\n        this.history = historyList.map(item => this.normalizeHistoryItem(item));\r\n        \r\n        console.log('âœ… å†å²è®°å½•åŠ è½½å¹¶æ ‡å‡†åŒ–æˆåŠŸ:', {\r\n          count: this.history.length,\r\n          sample: this.history.slice(0, 2)\r\n        });\r\n\r\n      } catch (e) {\r\n        console.error('åŠ è½½å†å²è®°å½•å¤±è´¥', e);\r\n        if (e.statusCode === 401) return; // ç™»å½•é—®é¢˜å·²åœ¨å…¶ä»–åœ°æ–¹å¤„ç†\r\n        const localHistory = uni.getStorageSync('qna_history');\r\n        this.history = Array.isArray(localHistory) ? localHistory : [];\r\n      }\r\n    },\r\n    // ä»åç«¯åŠ è½½é—®é¢˜åˆ—è¡¨\r\n    async loadQuestionsFromServer() {\r\n      try {\r\n        uni.showLoading({ title: 'åŠ è½½ä¸­...' });\r\n        const res = await getQuestions();\r\n        console.log('ğŸ“¥ é—®é¢˜åˆ—è¡¨å“åº”:', res);\r\n        const normalizedRes = this.normalizeApiResponse(res, 'è·å–é—®é¢˜æˆåŠŸ');\r\n        \r\n        const rawData = normalizedRes.data ?? res?.data ?? {};\r\n        let topLevelQuestions = null;\r\n        if (Array.isArray(res?.questions)) {\r\n          topLevelQuestions = res.questions;\r\n        } else if (Array.isArray(rawData?.questions)) {\r\n          topLevelQuestions = rawData.questions;\r\n        } else if (Array.isArray(rawData)) {\r\n          topLevelQuestions = rawData;\r\n        }\r\n\r\n        let presetQuestions = null;\r\n        let customQuestions = null;\r\n        \r\n        if (Array.isArray(topLevelQuestions)) {\r\n          console.log('ğŸ“‹ ä½¿ç”¨ topLevelQuestions æ ¼å¼');\r\n          const formatted = this.formatQuestionList(topLevelQuestions);\r\n          presetQuestions = formatted.filter(q => (q.category || 'preset') === 'preset');\r\n          customQuestions = formatted.filter(q => (q.category || 'preset') === 'custom');\r\n        } else if (rawData && (Array.isArray(rawData.defaultQuestions) || Array.isArray(rawData.customQuestions))) {\r\n          console.log('ğŸ“‹ ä½¿ç”¨ rawData æ ¼å¼');\r\n          console.log(' rawData.defaultQuestions:', rawData.defaultQuestions);\r\n          console.log(' rawData.customQuestions:', rawData.customQuestions);\r\n          presetQuestions = this.formatQuestionList(rawData.defaultQuestions, 'preset');\r\n          customQuestions = this.formatQuestionList(rawData.customQuestions, 'custom');\r\n        } else if (res && res.code === 200 && res.data && (Array.isArray(res.data.defaultQuestions) || Array.isArray(res.data.customQuestions))) {\r\n          console.log('ğŸ“‹ ä½¿ç”¨ res.data æ ¼å¼');\r\n          console.log(' res.data.defaultQuestions:', res.data.defaultQuestions);\r\n          console.log(' res.data.customQuestions:', res.data.customQuestions);\r\n          presetQuestions = this.formatQuestionList(res.data.defaultQuestions, 'preset');\r\n          customQuestions = this.formatQuestionList(res.data.customQuestions, 'custom');\r\n        } else {\r\n          console.log('ğŸ“‹ æœªè¯†åˆ«çš„æ•°æ®æ ¼å¼:', { rawData, res });\r\n        }\r\n\r\n        if (presetQuestions !== null) {\r\n          presetQuestions.sort((a, b) => {\r\n            const orderA = a.orderIndex ?? 999;\r\n            const orderB = b.orderIndex ?? 999;\r\n            return orderA - orderB;\r\n          });\r\n          this.defaultQuestions = presetQuestions;\r\n        }\r\n\r\n        if (customQuestions !== null) {\r\n          this.customQuestions = customQuestions;\r\n        }\r\n\r\n        if (presetQuestions !== null || customQuestions !== null) {\r\n          console.log('âœ… é—®é¢˜åˆ—è¡¨åŠ è½½æˆåŠŸ:', {\r\n            preset: this.defaultQuestions.length,\r\n            custom: this.customQuestions.length,\r\n            total: this.defaultQuestions.length + this.customQuestions.length\r\n          });\r\n        } else {\r\n          console.warn('âš ï¸ é—®é¢˜åˆ—è¡¨å“åº”æ ¼å¼ä¸ç¬¦åˆé¢„æœŸ:', res);\r\n          console.warn('âš ï¸ ä¿ç•™æœ¬åœ°é¢„è®¾é—®é¢˜ï¼Œé¿å…é¡µé¢ç©ºç™½');\r\n        }\r\n      } catch (e) {\r\n        console.error('åŠ è½½é—®é¢˜å¤±è´¥', e);\r\n        console.error('é”™è¯¯è¯¦æƒ…:', {\r\n          message: e.message,\r\n          statusCode: e.statusCode,\r\n          data: e.data\r\n        });\r\n        \r\n        // 401é”™è¯¯ç‰¹æ®Šå¤„ç†\r\n        if (e.statusCode === 401) {\r\n          // ä¸éœ€è¦æ‰‹åŠ¨ hideLoadingï¼Œfinally å—ä¼šå¤„ç†\r\n          uni.showModal({\r\n            title: 'ç™»å½•å·²è¿‡æœŸ',\r\n            content: 'æ‚¨çš„ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',\r\n            showCancel: false,\r\n            success: () => {\r\n              uni.reLaunch({\r\n                url: '/pages/login/index'\r\n              });\r\n            }\r\n          });\r\n          return;\r\n        }\r\n        \r\n        // å¦‚æœåç«¯è¯·æ±‚å¤±è´¥ï¼Œä½¿ç”¨é¢„è®¾é—®é¢˜å’Œæœ¬åœ°è‡ªå®šä¹‰é—®é¢˜\r\n        uni.showToast({ title: 'åŠ è½½é—®é¢˜å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®', icon: 'none' });\r\n        try {\r\n          const data = uni.getStorageSync('qna_custom_questions');\r\n          this.customQuestions = Array.isArray(data) ? data : [];\r\n        } catch (e2) { \r\n          this.customQuestions = []; \r\n        }\r\n      } finally {\r\n        // ç¡®ä¿loadingå…³é—­ï¼ˆä½¿ç”¨ try-catch é¿å…é‡å¤éšè—å¯¼è‡´çš„é”™è¯¯ï¼‰\r\n        try {\r\n        uni.hideLoading();\r\n        } catch (e) {\r\n          // å¿½ç•¥ hideLoading é”™è¯¯ï¼ˆå¯èƒ½å·²ç»éšè—è¿‡äº†ï¼‰\r\n        }\r\n      }\r\n    },\r\n\r\n    // æ·»åŠ è‡ªå®šä¹‰é—®é¢˜\r\n    async addCustomQuestion() {\r\n      if (!this.newQuestion || !this.newQuestion.trim()) {\r\n        uni.showToast({ title: 'è¯·è¾“å…¥é—®é¢˜å†…å®¹', icon: 'none' });\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        uni.showLoading({ title: 'æ·»åŠ ä¸­...' });\r\n        \r\n        // è°ƒç”¨åç«¯APIæ·»åŠ é—®é¢˜\r\n        const res = await addCustomQuestion(this.newQuestion.trim());\r\n        const normalizedRes = this.normalizeApiResponse(res, 'æ·»åŠ é—®é¢˜æˆåŠŸ');\r\n        if (!normalizedRes.success) {\r\n          uni.showToast({ title: normalizedRes.message || 'æ·»åŠ å¤±è´¥ï¼Œè¯·é‡è¯•', icon: 'none' });\r\n          return;\r\n        }\r\n        \r\n        // æ ¼å¼åŒ–æ–°é—®é¢˜ï¼Œç¡®ä¿åŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ\r\n        const newQuestionData = normalizedRes.data || {};\r\n        const formattedQuestion = {\r\n          id: newQuestionData.id,\r\n          text: newQuestionData.text || newQuestionData.questionText || this.newQuestion.trim(),\r\n          category: 'custom',\r\n          isActive: true,\r\n          orderIndex: 999,\r\n          createdBy: newQuestionData.userId || newQuestionData.createdBy,\r\n          createdAt: newQuestionData.createdAt,\r\n          // ä¿ç•™å…¶ä»–å­—æ®µ\r\n          ...newQuestionData\r\n        };\r\n        \r\n        // å°†æ–°é—®é¢˜æ·»åŠ åˆ°åˆ—è¡¨\r\n        this.customQuestions.push(formattedQuestion);\r\n        this.newQuestion = '';\r\n        \r\n        // å…³é—­å¼¹çª—ï¼Œè®©ç”¨æˆ·çœ‹åˆ°ä¸»é¡µé¢\r\n        this.showCustomModal = false;\r\n        \r\n        // è‡ªåŠ¨åˆ‡æ¢åˆ°æ–°æ·»åŠ çš„é—®é¢˜ï¼ˆå¦‚æœå®ƒæ˜¯æœªå›ç­”çš„é—®é¢˜ï¼‰\r\n        // ä½¿ç”¨ setTimeout ç¡®ä¿å“åº”å¼æ›´æ–°å·²å®Œæˆï¼ˆuni-app ä¸­ä½¿ç”¨ setTimeout æ›´å¯é ï¼‰\r\n        setTimeout(() => {\r\n          const newQuestionIndex = this.unansweredQuestions.findIndex(\r\n            q => q.id === formattedQuestion.id\r\n          );\r\n          if (newQuestionIndex >= 0) {\r\n            // æ‰¾åˆ°æ–°é—®é¢˜åœ¨æœªå›ç­”åˆ—è¡¨ä¸­çš„ä½ç½®ï¼Œåˆ‡æ¢è¿‡å»\r\n            this.qIndex = newQuestionIndex;\r\n            // åŠ è½½æ–°é—®é¢˜çš„ç­”æ¡ˆï¼ˆä¼šè‡ªåŠ¨æ¸…ç©ºæˆ–ä»å†å²è®°å½•åŠ è½½ï¼‰\r\n            this.loadAnswerForCurrentQuestion();\r\n            \r\n            console.log('âœ… å·²åˆ‡æ¢åˆ°æ–°æ·»åŠ çš„é—®é¢˜:', formattedQuestion);\r\n          }\r\n        }, 100);\r\n        \r\n        uni.showToast({ title: normalizedRes.message || 'é—®é¢˜æ·»åŠ æˆåŠŸ', icon: 'success' });\r\n      } catch (e) {\r\n        console.error('æ·»åŠ é—®é¢˜å¤±è´¥', e);\r\n        \r\n        // 401é”™è¯¯ç‰¹æ®Šå¤„ç†\r\n        if (e.statusCode === 401) {\r\n          uni.showModal({\r\n            title: 'ç™»å½•å·²è¿‡æœŸ',\r\n            content: 'æ‚¨çš„ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',\r\n            showCancel: false,\r\n            success: () => {\r\n              uni.reLaunch({\r\n                url: '/pages/login/index'\r\n              });\r\n            }\r\n          });\r\n          return;\r\n        }\r\n        \r\n        uni.showToast({ title: 'æ·»åŠ å¤±è´¥ï¼Œè¯·é‡è¯•', icon: 'none' });\r\n      } finally {\r\n        // ç¡®ä¿loadingå…³é—­ï¼ˆä½¿ç”¨ try-catch é¿å…é‡å¤éšè—å¯¼è‡´çš„é”™è¯¯ï¼‰\r\n        try {\r\n        uni.hideLoading();\r\n        } catch (e) {\r\n          // å¿½ç•¥ hideLoading é”™è¯¯ï¼ˆå¯èƒ½å·²ç»éšè—è¿‡äº†ï¼‰\r\n        }\r\n      }\r\n    },\r\n\r\n    async deleteCustomQuestion(index) {\r\n      const question = this.customQuestions[index];\r\n      \r\n      uni.showModal({\r\n        title: 'ç¡®è®¤åˆ é™¤',\r\n        content: 'ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé—®é¢˜å—ï¼Ÿ',\r\n        success: async (modalRes) => {\r\n          if (modalRes.confirm) {\r\n            try {\r\n              uni.showLoading({ title: 'åˆ é™¤ä¸­...' });\r\n              \r\n              // è°ƒç”¨åç«¯APIåˆ é™¤é—®é¢˜\r\n              const res = await deleteCustomQuestion(question.id);\r\n              \r\n              if (res.success) {\r\n                // ä»åˆ—è¡¨ä¸­ç§»é™¤\r\n                this.customQuestions.splice(index, 1);\r\n                uni.showToast({ title: 'å·²åˆ é™¤', icon: 'success' });\r\n              }\r\n            } catch (e) {\r\n              console.error('åˆ é™¤é—®é¢˜å¤±è´¥', e);\r\n              \r\n              // 401é”™è¯¯ç‰¹æ®Šå¤„ç†\r\n              if (e.statusCode === 401) {\r\n                uni.showModal({\r\n                  title: 'ç™»å½•å·²è¿‡æœŸ',\r\n                  content: 'æ‚¨çš„ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',\r\n                  showCancel: false,\r\n                  success: () => {\r\n                    uni.reLaunch({\r\n                      url: '/pages/login/index'\r\n                    });\r\n                  }\r\n                });\r\n                return;\r\n              }\r\n              \r\n              uni.showToast({ title: 'åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•', icon: 'none' });\r\n            } finally {\r\n              // ç¡®ä¿loadingå…³é—­ï¼ˆä½¿ç”¨ try-catch é¿å…é‡å¤éšè—å¯¼è‡´çš„é”™è¯¯ï¼‰\r\n              try {\r\n              uni.hideLoading();\r\n              } catch (e) {\r\n                // å¿½ç•¥ hideLoading é”™è¯¯ï¼ˆå¯èƒ½å·²ç»éšè—è¿‡äº†ï¼‰\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    closeCustomModal() {\r\n      this.showCustomModal = false;\r\n      this.newQuestion = '';\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.qna-page { \r\n  min-height: 100vh; \r\n  background: #FFFAF4; \r\n  padding-bottom: 60rpx; \r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.header { padding: 32rpx 24rpx 12rpx 24rpx; }\r\n/* è‡ªå®šä¹‰å¯¼èˆªæ æ ·å¼ */\r\n.custom-navbar {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 9999;\r\n  background-color: #FFFAF4;\r\n  overflow: hidden;\r\n}\r\n\r\n.navbar-gradient-bg {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 200%;\r\n  background: rgba(255, 255, 255, 0.7);\r\n  backdrop-filter: blur(15px);\r\n  -webkit-backdrop-filter: blur(15px);\r\n}\r\n\r\n.status-bar {\r\n  width: 100%;\r\n  background: transparent;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.navbar-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 30rpx;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.navbar-title {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  text-align: center;\r\n}\r\n\r\n.title-text {\r\n  font-size: 36rpx;\r\n  font-weight: 500;\r\n  color: #4A4A4A;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n\r\n.navbar-left {\r\n  width: 80rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.back-icon {\r\n  font-size: 50rpx;\r\n  font-weight: 600;\r\n  color: #4A4A4A;\r\n  line-height: 1;\r\n  cursor: pointer;\r\n  transition: opacity 0.3s;\r\n}\r\n\r\n.back-icon:active {\r\n  opacity: 0.6;\r\n}\r\n\r\n.navbar-right {\r\n  width: 80rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.title { \r\n  font-size: 34rpx; \r\n  font-weight: 600; \r\n  color: #4A4A4A; \r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.subtitle { \r\n  margin-top: 6rpx; \r\n  font-size: 26rpx; \r\n  color: #9B8FB8; \r\n  display: block; \r\n  font-weight: 400;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.header-actions { margin-top: 16rpx; }\r\n.btn-custom { \r\n  background: linear-gradient(135deg, #FFB5C2 0%, #FFD4A3 100%);\r\n  color: #ffffff; \r\n  border-radius: 24rpx; \r\n  padding: 14rpx 28rpx; \r\n  font-size: 26rpx; \r\n  border: none; \r\n}\r\n\r\n.question-card { \r\n  margin: 24rpx; \r\n  background: rgba(255, 255, 255, 0.7);\r\n  backdrop-filter: blur(15px);\r\n  -webkit-backdrop-filter: blur(15px);\r\n  border-radius: 16rpx; \r\n  padding: 24rpx; \r\n  box-shadow: 0 8rpx 12rpx rgba(0, 0, 0, 0.04), inset 0 0 0 2rpx rgba(255,255,255,0.5);\r\n}\r\n.q-label { font-size: 24rpx; color: #9B8FB8; }\r\n.q-text { \r\n  margin-top: 8rpx; \r\n  font-size: 34rpx; \r\n  color: #4A4A4A; \r\n  font-weight: 600; \r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n\r\n.answer-card { \r\n  margin: 0 24rpx; \r\n  background: rgba(255, 255, 255, 0.7);\r\n  backdrop-filter: blur(15px);\r\n  -webkit-backdrop-filter: blur(15px);\r\n  border-radius: 16rpx; \r\n  padding: 24rpx; \r\n  box-shadow: 0 8rpx 12rpx rgba(0, 0, 0, 0.04), inset 0 0 0 2rpx rgba(255,255,255,0.5);\r\n}\r\n.a-label { \r\n  font-size: 28rpx; \r\n  color: #4A4A4A; \r\n  font-weight: 600;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.a-input { \r\n  margin-top: 12rpx; \r\n  min-height: 100rpx; \r\n  border: 1rpx solid #F3E8FF; \r\n  border-radius: 16rpx; \r\n  padding: 16rpx; \r\n  font-size: 26rpx; \r\n  color: #333;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.actions { margin-top: 16rpx; display: flex; gap: 12rpx; }\r\n.btn { \r\n  padding: 16rpx 26rpx; \r\n  border-radius: 14rpx; \r\n  font-size: 26rpx; \r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n  border: none;\r\n}\r\n.btn.primary { \r\n  background: linear-gradient(135deg, #FFB5C2 0%, #FFD4A3 100%);\r\n  color: #ffffff; \r\n}\r\n.btn.secondary { \r\n  background: rgba(255, 255, 255, 0.8);\r\n  color: #4A4A4A; \r\n  border: 1rpx solid rgba(255, 181, 194, 0.3);\r\n}\r\n\r\n.partner-card { \r\n  margin: 16rpx 24rpx; \r\n  background: rgba(255, 255, 255, 0.7);\r\n  backdrop-filter: blur(15px);\r\n  -webkit-backdrop-filter: blur(15px);\r\n  border-radius: 16rpx; \r\n  padding: 24rpx; \r\n  box-shadow: 0 8rpx 12rpx rgba(0, 0, 0, 0.04), inset 0 0 0 2rpx rgba(255,255,255,0.5);\r\n}\r\n.p-label { \r\n  font-size: 28rpx; \r\n  color: #4A4A4A; \r\n  font-weight: 600;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.p-text { \r\n  margin-top: 8rpx; \r\n  font-size: 26rpx; \r\n  color: #9B8FB8; \r\n  font-weight: 400;\r\n  line-height: 1.8;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.empty-hint-text {\r\n  color: #C8C8C8;\r\n  font-style: italic;\r\n}\r\n\r\n.floating { \r\n  position: fixed; \r\n  right: 24rpx; \r\n  bottom: 120rpx; \r\n  background: linear-gradient(135deg, #FFB5C2 0%, #FFD4A3 100%);\r\n  color: #ffffff; \r\n  border-radius: 999rpx; \r\n  padding: 16rpx 20rpx; \r\n  display: flex; \r\n  align-items: center; \r\n  gap: 10rpx; \r\n  box-shadow: 0 8rpx 24rpx rgba(255, 181, 194, 0.4); \r\n  z-index: 99; \r\n}\r\n.custom-floating { bottom: 200rpx; }\r\n.float-icon { font-size: 26rpx; }\r\n.float-text { font-size: 24rpx; }\r\n\r\n.modal-mask { \r\n  position: fixed; \r\n  inset: 0; \r\n  background: rgba(0,0,0,0.35); \r\n  display: flex; \r\n  align-items: center; \r\n  justify-content: center; \r\n  z-index: 100; \r\n}\r\n.modal { \r\n  width: 88%; \r\n  background: #ffffff; \r\n  border-radius: 24rpx; \r\n  padding: 24rpx; \r\n  max-height: 80vh; \r\n  display: flex; \r\n  flex-direction: column; \r\n}\r\n.modal.custom-modal { width: 92%; }\r\n.modal-title { \r\n  font-size: 34rpx; \r\n  font-weight: 600; \r\n  color: #4A4A4A; \r\n  margin-bottom: 16rpx; \r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.history-list { max-height: 520rpx; margin-top: 12rpx; }\r\n.history-item { padding: 16rpx 0; border-bottom: 1rpx solid #F3E8FF; }\r\n.h-q { \r\n  font-size: 26rpx; \r\n  color: #4A4A4A; \r\n  font-weight: 600;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.h-me, .h-ta { \r\n  font-size: 26rpx; \r\n  color: #9B8FB8; \r\n  margin-top: 6rpx; \r\n  font-weight: 400;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.h-time { \r\n  font-size: 24rpx; \r\n  color: #9B8FB8; \r\n  margin-top: 6rpx; \r\n  font-weight: 400;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.modal-actions { margin-top: 14rpx; display: flex; justify-content: flex-end; gap: 12rpx; align-items: center; }\r\n\r\n/* è‡ªå®šä¹‰é—®é¢˜å¼¹çª—æ ·å¼ */\r\n.add-question { display: flex; gap: 12rpx; align-items: flex-start; margin-top: 16rpx; margin-bottom: 12rpx; }\r\n.q-input { \r\n  flex: 1; \r\n  height: 60rpx; \r\n  line-height: 60rpx;\r\n  border: 1rpx solid #F3E8FF; \r\n  border-radius: 8rpx; \r\n  padding: 0 12rpx; \r\n  font-size: 24rpx; \r\n  color: #333;\r\n  resize: none;\r\n  overflow: hidden;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.btn.small { padding: 12rpx 20rpx; font-size: 24rpx; white-space: nowrap; }\r\n\r\n.question-list { flex: 1; overflow-y: auto; margin-top: 8rpx; }\r\n.section-title { \r\n  font-size: 26rpx; \r\n  color: #4A4A4A; \r\n  margin-bottom: 12rpx; \r\n  padding-left: 4rpx; \r\n  font-weight: 600;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.question-item { \r\n  display: flex; \r\n  align-items: flex-start; \r\n  padding: 14rpx 12rpx; \r\n  background: rgba(255, 255, 255, 0.5); \r\n  border-radius: 12rpx; \r\n  margin-bottom: 8rpx; \r\n  border: 1rpx solid rgba(255, 255, 255, 0.8);\r\n}\r\n.question-item.custom { \r\n  background: rgba(255, 255, 255, 0.7);\r\n  backdrop-filter: blur(10px);\r\n  -webkit-backdrop-filter: blur(10px);\r\n  border: 1rpx solid rgba(255, 255, 255, 0.8);\r\n}\r\n.q-num { \r\n  font-size: 24rpx; \r\n  color: #FFB5C2; \r\n  font-weight: 600; \r\n  margin-right: 8rpx; \r\n  flex-shrink: 0; \r\n}\r\n.q-content { \r\n  flex: 1; \r\n  font-size: 26rpx; \r\n  color: #4A4A4A; \r\n  word-break: break-all; \r\n  font-weight: 400;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.q-delete { \r\n  font-size: 24rpx; \r\n  color: #ff6b6b; \r\n  margin-left: 12rpx; \r\n  flex-shrink: 0; \r\n  padding: 4rpx 8rpx; \r\n}\r\n\r\n.empty-hint { \r\n  padding: 32rpx; \r\n  text-align: center; \r\n  color: #9B8FB8; \r\n  font-size: 26rpx; \r\n  font-weight: 400;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n</style>","import MiniProgramPage from 'C:/Users/Administrator/Desktop/love_time/subPackages/interaction/pages/qna/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getPartnerAnswer","submitAnswer","getHistory","getQuestions","addCustomQuestion","deleteCustomQuestion"],"mappings":"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"}