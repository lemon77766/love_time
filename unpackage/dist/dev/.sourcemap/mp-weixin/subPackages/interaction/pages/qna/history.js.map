{"version":3,"file":"history.js","sources":["subPackages/interaction/pages/qna/history.vue","D:/softcaree/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNcaW50ZXJhY3Rpb25ccGFnZXNccW5hXGhpc3RvcnkudnVl"],"sourcesContent":["<template>\n  <view class=\"history-page\" :style=\"{ paddingTop: containerPaddingTop }\">\n    <!-- Ëá™ÂÆö‰πâÂØºËà™Ê†è -->\n    <view class=\"custom-navbar\">\n      <!-- Ê∏êÂèòËÉåÊôØ -->\n      <view class=\"navbar-gradient-bg\"></view>\n      <!-- Áä∂ÊÄÅÊ†èÂç†‰Ωç -->\n      <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n      <!-- ÂØºËà™Ê†èÂÜÖÂÆπ -->\n      <view class=\"navbar-content\" :style=\"{ height: navBarHeight + 'px' }\">\n        <view class=\"navbar-left\" @click=\"goBack\">\n          <text class=\"back-icon\">‚Üê</text>\n        </view>\n        <view class=\"navbar-title\">\n          <text class=\"title-text\">ÈóÆÁ≠îËÆ∞ÂΩï</text>\n        </view>\n        <view class=\"navbar-right\"></view>\n      </view>\n    </view>\n\n    <!-- ÂàÜÈöî‰∏éÂæΩÊ†á -->\n    <view class=\"divider-row\">\n      <view class=\"divider\"></view>\n      <text class=\"heart\">üíõ</text>\n      <view class=\"divider\"></view>\n    </view>\n\n    <!-- ÂéÜÂè≤ÂàóË°® -->\n    <view class=\"list\">\n      <view v-for=\"(item, i) in history\" :key=\"i\" class=\"list-item\" @click=\"openItem(item)\">\n        <view class=\"left\">\n          <text class=\"index\">{{ pad2(i + 1) }}</text>\n        </view>\n        <view class=\"center\">\n          <text class=\"question\">{{ item.question }}</text>\n        </view>\n        <view class=\"right\">\n          <view class=\"status\" :class=\"item.myAnswer ? 'done' : 'todo'\"></view>\n        </view>\n      </view>\n      <view v-if=\"history.length === 0\" class=\"empty\">\n        <text class=\"empty-text\">ÊöÇÊó†ÂéÜÂè≤ËÆ∞ÂΩï</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { getHistory } from '@/api/qna.js';\nimport { getQuestions } from '@/api/qna.js';\n\nexport default {\n  data() {\n    return { \n      statusBarHeight: 0,\n      navBarHeight: 54,\n      screenWidth: 375,\n      history: [],\n      defaultQuestions: [],\n      customQuestions: []\n    };\n  },\n  computed: {\n    containerPaddingTop() {\n      const totalHeightPx = this.statusBarHeight + this.navBarHeight;\n      const pxToRpx = 750 / this.screenWidth;\n      const totalHeightRpx = totalHeightPx * pxToRpx;\n      return totalHeightRpx + 20 + 'rpx';\n    }\n  },\n  async onLoad() {\n    // Ëé∑ÂèñÁ≥ªÁªü‰ø°ÊÅØ\n    const systemInfo = uni.getSystemInfoSync();\n    this.statusBarHeight = systemInfo.statusBarHeight || 0;\n    this.screenWidth = systemInfo.screenWidth || 375;\n    \n    // Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ\n    const loginInfo = uni.getStorageSync('login_info');\n    if (!loginInfo || !loginInfo.token) {\n      uni.showModal({\n        title: 'ÈúÄË¶ÅÁôªÂΩï',\n        content: 'ËØ∑ÂÖàÁôªÂΩï',\n        showCancel: false,\n        success: () => {\n          uni.reLaunch({ url: '/pages/login/index' });\n        }\n      });\n      return;\n    }\n    \n    // ÂÖàÂä†ËΩΩÈóÆÈ¢òÂàóË°®ÔºåÂÜçÂä†ËΩΩÂéÜÂè≤ËÆ∞ÂΩïÔºåÁ°Æ‰øùÂéÜÂè≤ËÆ∞ÂΩïÂèØ‰ª•ÂåπÈÖçÂà∞ÈóÆÈ¢òÊñáÊú¨\n    await this.loadQuestions();\n    await this.loadHistory();\n  },\n  methods: {\n    goBack() {\n      uni.navigateBack();\n    },\n    normalizeApiResponse(response, defaultMessage = 'Êìç‰ΩúÊàêÂäü') {\n      if (response == null) {\n        return { success: false, message: 'ÂìçÂ∫î‰∏∫Á©∫', data: null, raw: response };\n      }\n      if (typeof response === 'string') {\n        return { success: false, message: response, data: null, raw: response };\n      }\n      if (typeof response.success === 'boolean') {\n        return {\n          success: !!response.success,\n          message: response.message || response.msg || defaultMessage,\n          data: response.data !== undefined ? response.data : null,\n          raw: response\n        };\n      }\n      if (response.code !== undefined) {\n        const success = Number(response.code) === 200;\n        return {\n          success,\n          message: response.msg || response.message || defaultMessage,\n          data: response.data !== undefined ? response.data : null,\n          raw: response\n        };\n      }\n      if (Array.isArray(response)) {\n        return { success: true, message: defaultMessage, data: response, raw: response };\n      }\n      return {\n        success: true,\n        message: response.message || response.msg || defaultMessage,\n        data: response.data !== undefined ? response.data : response,\n        raw: response\n      };\n    },\n    formatQuestionList(list, categoryFallback = 'preset') {\n      if (!Array.isArray(list)) {\n        return [];\n      }\n      return list\n        .filter(q => q && q.id != null)\n        .map(q => {\n          const formatted = {\n            ...q,\n            id: q.id,\n            text: q.text || q.questionText || '',\n            category: q.category || categoryFallback,\n            isActive: q.isActive !== false,\n            orderIndex: q.orderIndex ?? 999\n          };\n          if (formatted.questionText) {\n            delete formatted.questionText;\n          }\n          return formatted;\n        });\n    },\n    // ‰ªéÂêéÁ´ØÂä†ËΩΩÈóÆÈ¢òÂàóË°®\n    async loadQuestions() {\n      try {\n        const res = await getQuestions();\n        console.log('üì• ÈóÆÈ¢òÂàóË°®ÂìçÂ∫î:', res);\n        const normalizedRes = this.normalizeApiResponse(res, 'Ëé∑ÂèñÈóÆÈ¢òÊàêÂäü');\n        \n        const rawData = normalizedRes.data ?? res?.data ?? {};\n        let topLevelQuestions = null;\n        if (Array.isArray(res?.questions)) {\n          topLevelQuestions = res.questions;\n        } else if (Array.isArray(rawData?.questions)) {\n          topLevelQuestions = rawData.questions;\n        } else if (Array.isArray(rawData)) {\n          topLevelQuestions = rawData;\n        }\n\n        let presetQuestions = null;\n        let customQuestions = null;\n        \n        if (Array.isArray(topLevelQuestions)) {\n          const formatted = this.formatQuestionList(topLevelQuestions);\n          presetQuestions = formatted.filter(q => (q.category || 'preset') === 'preset');\n          customQuestions = formatted.filter(q => (q.category || 'preset') === 'custom');\n        } else if (rawData && (Array.isArray(rawData.defaultQuestions) || Array.isArray(rawData.customQuestions))) {\n          presetQuestions = this.formatQuestionList(rawData.defaultQuestions, 'preset');\n          customQuestions = this.formatQuestionList(rawData.customQuestions, 'custom');\n        } else if (res && res.code === 200 && res.data && (Array.isArray(res.data.defaultQuestions) || Array.isArray(res.data.customQuestions))) {\n          presetQuestions = this.formatQuestionList(res.data.defaultQuestions, 'preset');\n          customQuestions = this.formatQuestionList(res.data.customQuestions, 'custom');\n        }\n\n        if (presetQuestions !== null) {\n          presetQuestions.sort((a, b) => {\n            const orderA = a.orderIndex ?? 999;\n            const orderB = b.orderIndex ?? 999;\n            return orderA - orderB;\n          });\n          this.defaultQuestions = presetQuestions;\n        }\n\n        if (customQuestions !== null) {\n          this.customQuestions = customQuestions;\n        }\n\n        if (presetQuestions !== null || customQuestions !== null) {\n          console.log('‚úÖ ÈóÆÈ¢òÂàóË°®Âä†ËΩΩÊàêÂäü:', {\n            preset: this.defaultQuestions.length,\n            custom: this.customQuestions.length,\n            total: this.defaultQuestions.length + this.customQuestions.length\n          });\n        } else if (!normalizedRes.success) {\n          console.warn('‚ö†Ô∏è ÈóÆÈ¢òÂàóË°®‰∏öÂä°Áä∂ÊÄÅÂ§±Ë¥•:', {\n            message: normalizedRes.message,\n            raw: normalizedRes.raw\n          });\n        } else {\n          console.warn('‚ö†Ô∏è ÈóÆÈ¢òÂàóË°®ÂìçÂ∫îÊ†ºÂºè‰∏çÁ¨¶ÂêàÈ¢ÑÊúü:', res);\n        }\n      } catch (e) {\n        console.error('Âä†ËΩΩÈóÆÈ¢òÂàóË°®Â§±Ë¥•', e);\n      }\n    },\n    // ‰ªéÂêéÁ´ØÂä†ËΩΩÂéÜÂè≤ËÆ∞ÂΩï\n    async loadHistory() {\n      try {\n        uni.showLoading({ title: 'Âä†ËΩΩ‰∏≠...' });\n        const res = await getHistory({ page: 1, pageSize: 100 });\n        console.log('üì• ÂéÜÂè≤ËÆ∞ÂΩïÂìçÂ∫î:', res);\n        const normalizedRes = this.normalizeApiResponse(res, 'Ëé∑ÂèñÂéÜÂè≤ËÆ∞ÂΩïÊàêÂäü');\n        if (!normalizedRes.success) {\n          console.warn('‚ö†Ô∏è ÂéÜÂè≤ËÆ∞ÂΩï‰∏öÂä°Áä∂ÊÄÅËøîÂõûÂ§±Ë¥•:', {\n            message: normalizedRes.message,\n            raw: normalizedRes.raw\n          });\n        }\n        \n        const dataSources = [\n          normalizedRes.data?.list,\n          normalizedRes.data?.history,\n          normalizedRes.data?.answers,\n          Array.isArray(normalizedRes.data) ? normalizedRes.data : null,\n          normalizedRes.raw?.history,\n          normalizedRes.raw?.answers,\n          normalizedRes.raw?.data?.list,\n          normalizedRes.raw?.data?.history,\n          normalizedRes.raw?.data?.answers,\n          Array.isArray(normalizedRes.raw?.data) ? normalizedRes.raw.data : null,\n          res?.history,\n          res?.answers,\n          res?.data?.list,\n          res?.data?.history,\n          res?.data?.answers,\n          Array.isArray(res?.data) ? res.data : null,\n          res?.list,\n          Array.isArray(res) ? res : null\n        ];\n        \n        let historyList = [];\n        for (const candidate of dataSources) {\n          if (Array.isArray(candidate)) {\n            historyList = candidate;\n            break;\n          }\n        }\n        \n        if (!Array.isArray(historyList)) {\n          console.warn('‚ö†Ô∏è ÂéÜÂè≤ËÆ∞ÂΩïÂìçÂ∫îÊ†ºÂºè‰∏çÁ¨¶ÂêàÈ¢ÑÊúü:', res);\n          historyList = [];\n        }\n        \n        // Ê†áÂáÜÂåñÂéÜÂè≤ËÆ∞ÂΩïÊ†ºÂºèÔºåÁ°Æ‰øùÂ≠óÊÆµÂêç‰∏ÄËá¥\n        this.history = historyList.map(item => {\n          const id = item.id || item.answerId;\n          const questionId = item.questionId || item.question_id;\n          \n          // ‰ºòÂÖà‰ΩøÁî®ÂêéÁ´ØËøîÂõûÁöÑ questionÔºåÂ¶ÇÊûúÊ≤°ÊúâÂàô‰ªéÈóÆÈ¢òÂàóË°®‰∏≠Êü•Êâæ\n          let question = item.question || item.questionText || item.question_text;\n          if (!question && questionId != null) {\n            const allQuestions = [...(this.defaultQuestions || []), ...(this.customQuestions || [])];\n            const foundQuestion = allQuestions.find(q => q && q.id != null && Number(q.id) === Number(questionId));\n            if (foundQuestion && foundQuestion.text) {\n              question = foundQuestion.text;\n            }\n          }\n          \n          const myAnswer = item.myAnswer || item.answer || item.my_answer;\n          const partnerAnswer = item.partnerAnswer || item.partner_answer || '';\n          const time = item.time || item.answeredAt || item.createdAt || item.created_at || item.updatedAt || new Date().toLocaleString();\n          \n          return {\n            id,\n            questionId,\n            question: question || `ÈóÆÈ¢òID: ${questionId}`,\n            myAnswer,\n            partnerAnswer,\n            time,\n            questionCategory: item.questionCategory || item.category,\n            answeredAt: item.answeredAt,\n            ...item\n          };\n        });\n        \n        // ‰ªéÊñ∞Âà∞ÊóßÊéíÂ∫èÔºàÈ°∂ÈÉ®ÊúÄÊñ∞Ôºâ\n        this.history.sort((a, b) => {\n          const timeA = a.answeredAt || a.createdAt || a.time || '';\n          const timeB = b.answeredAt || b.createdAt || b.time || '';\n          return new Date(timeB) - new Date(timeA);\n        });\n        \n        console.log('‚úÖ ÂéÜÂè≤ËÆ∞ÂΩïÂä†ËΩΩÊàêÂäü:', {\n          count: this.history.length,\n          totalCount: normalizedRes.raw?.totalCount ?? normalizedRes.data?.totalCount ?? normalizedRes.data?.total\n        });\n      } catch (e) {\n        console.error('Âä†ËΩΩÂéÜÂè≤ËÆ∞ÂΩïÂ§±Ë¥•', e);\n        \n        // 401ÈîôËØØÁâπÊÆäÂ§ÑÁêÜ\n        if (e.statusCode === 401) {\n          uni.showModal({\n            title: 'ÈúÄË¶ÅÁôªÂΩï',\n            content: 'ËØ∑ÂÖàÁôªÂΩï',\n            showCancel: false,\n            success: () => {\n              uni.reLaunch({ url: '/pages/login/index' });\n            }\n          });\n          return;\n        }\n        \n        // Â¶ÇÊûúÂêéÁ´ØËØ∑Ê±ÇÂ§±Ë¥•ÔºåÂ∞ùËØï‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩ\n        try {\n          const data = uni.getStorageSync('qna_history');\n          this.history = Array.isArray(data) ? data : [];\n        } catch (e2) {\n          this.history = [];\n        }\n      } finally {\n        uni.hideLoading();\n      }\n    },\n    pad2(n) { return String(n).padStart(2, '0'); },\n    openItem(item) {\n      // Á°Æ‰øùËé∑ÂèñÊ≠£Á°ÆÁöÑ questionIdÔºàÂÖºÂÆπ‰∏çÂêåÁöÑÂ≠óÊÆµÂêçÔºâ\n      const questionId = item.questionId || item.question_id;\n      if (!questionId) {\n        console.error('‚ùå ÂéÜÂè≤ËÆ∞ÂΩïÈ°πÁº∫Â∞ë questionId:', item);\n        uni.showToast({ title: 'ÈóÆÈ¢òIDÁº∫Â§±ÔºåÊó†Ê≥ïË∑≥ËΩ¨', icon: 'none' });\n        return;\n      }\n      \n      const qid = encodeURIComponent(questionId);\n      const time = encodeURIComponent(item.time || '');\n      const questionText = encodeURIComponent(item.question || '');\n      \n      console.log('üîó Ë∑≥ËΩ¨Âà∞ÈóÆÈ¢òÈ°µÈù¢:', {\n        questionId: questionId,\n        question: item.question ? item.question.substring(0, 20) + '...' : '',\n        time: time\n      });\n      \n      let targetUrl = `/subPackages/interaction/pages/qna/index?qid=${qid}&time=${time}`;\n      if (questionText) {\n        targetUrl += `&qtext=${questionText}`;\n      }\n      uni.navigateTo({ url: targetUrl });\n    }\n  }\n};\n</script>\n\n<style>\n/* ÂØºËà™Ê†èÊ†∑Âºè */\n.custom-navbar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 9999;\n  background-color: #FFFAF4;\n  overflow: hidden;\n}\n\n.navbar-gradient-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 200%;\n  background: rgba(255, 255, 255, 0.7);\n  backdrop-filter: blur(15px);\n  -webkit-backdrop-filter: blur(15px);\n}\n\n.status-bar {\n  width: 100%;\n}\n\n.navbar-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 24rpx;\n  position: relative;\n  z-index: 10;\n}\n\n.navbar-left {\n  width: 80rpx;\n  height: 54rpx;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.back-icon {\n  font-size: 50rpx;\n  font-weight: 600;\n  color: #4A4A4A;\n  line-height: 1;\n  cursor: pointer;\n  transition: opacity 0.3s;\n}\n\n.navbar-title {\n  flex: 1;\n  height: 54rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.title-text {\n  font-size: 36rpx;\n  font-weight: 500;\n  color: #4A4A4A;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.navbar-right {\n  width: 80rpx;\n  height: 54rpx;\n}\n\n.history-page { \n  min-height: 100vh; \n  background: #FFFAF4; \n}\n.topbar { position: relative; height: 96rpx; display: flex; align-items: center; justify-content: center; background: #ffffff; }\n.topbar-title { font-size: 32rpx; color: #2b2b2b; font-weight: 600; }\n.topbar-actions { position: absolute; right: 24rpx; top: 50%; transform: translateY(-50%); display: flex; gap: 12rpx; }\n.icon-btn { width: 64rpx; height: 64rpx; border-radius: 32rpx; background: #f7f7f7; color: #2bad81; font-size: 28rpx; display: flex; align-items: center; justify-content: center; }\n\n.divider-row { \n  margin: 12rpx 24rpx; \n  display: flex; \n  align-items: center; \n  gap: 16rpx; \n}\n.divider { \n  flex: 1; \n  height: 2rpx; \n  background: linear-gradient(90deg, transparent 0%, #FFC94D 50%, transparent 100%);\n  opacity: 0.6;\n}\n.heart { \n  color: #FFC94D; \n  font-size: 32rpx;\n  text-shadow: 0 2rpx 4rpx rgba(255, 181, 194, 0.3);\n}\n\n.list { \n  padding: 24rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 16rpx;\n}\n.list-item { \n  display: flex; \n  align-items: center; \n  padding: 24rpx;\n  background: rgba(255, 255, 255, 0.7);\n  backdrop-filter: blur(15px);\n  -webkit-backdrop-filter: blur(15px);\n  border-radius: 16rpx;\n  box-shadow: 0 8rpx 12rpx rgba(0, 0, 0, 0.04), inset 0 0 0 2rpx rgba(255,255,255,0.5);\n  overflow: hidden;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n.left { width: 64rpx; }\n.index { \n  font-size: 30rpx; \n  color: #FFB5C2; \n  font-weight: 700; \n}\n.center { flex: 1; padding: 0 16rpx; }\n.question { \n  font-size: 28rpx; \n  color: #4A4A4A;\n  font-weight: 500;\n  line-height: 1.4;\n}\n.right { width: 60rpx; display: flex; justify-content: flex-end; }\n.status { \n  width: 32rpx; \n  height: 32rpx; \n  border-radius: 16rpx; \n  border: 3rpx solid #FFB5C2;\n  transition: all 0.3s ease;\n}\n.status.done { \n  background: linear-gradient(135deg, #FFB5C2 0%, #FFD4A3 100%);\n  border-color: #FFB5C2;\n  box-shadow: 0 2rpx 8rpx rgba(255, 181, 194, 0.3);\n}\n.status.todo { \n  background: #ffffff; \n  border-color: #FFB5C2;\n}\n\n.empty { \n  padding: 80rpx 40rpx; \n  display: flex; \n  justify-content: center; \n  align-items: center;\n  background: rgba(255, 255, 255, 0.7);\n  backdrop-filter: blur(15px);\n  -webkit-backdrop-filter: blur(15px);\n  border-radius: 16rpx;\n  margin: 24rpx;\n  box-shadow: 0 8rpx 12rpx rgba(0, 0, 0, 0.04), inset 0 0 0 2rpx rgba(255,255,255,0.5);\n}\n.empty-text { \n  color: #666; \n  font-size: 28rpx;\n  font-weight: 500;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/È°πÁõÆ/love_time_fu - ÂâØÊú¨(ÊâìÂåÖÂêéÂâØÊú¨)/subPackages/interaction/pages/qna/history.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getQuestions","getHistory"],"mappings":"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"}