{"version":3,"file":"history.js","sources":["subPackages/interaction/pages/qna/history.vue","D:/softcaree/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNcaW50ZXJhY3Rpb25ccGFnZXNccW5hXGhpc3RvcnkudnVl"],"sourcesContent":["<template>\r\n  <view class=\"history-page\" :style=\"{ paddingTop: containerPaddingTop }\">\r\n    <!-- Ëá™ÂÆö‰πâÂØºËà™Ê†è -->\r\n    <view class=\"custom-navbar\">\r\n      <!-- Ê∏êÂèòËÉåÊôØ -->\r\n      <view class=\"navbar-gradient-bg\"></view>\r\n      <!-- Áä∂ÊÄÅÊ†èÂç†‰Ωç -->\r\n      <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\r\n      <!-- ÂØºËà™Ê†èÂÜÖÂÆπ -->\r\n      <view class=\"navbar-content\" :style=\"{ height: navBarHeight + 'px' }\">\r\n        <view class=\"navbar-left\" @click=\"goBack\">\r\n          <text class=\"back-icon\">‚Üê</text>\r\n        </view>\r\n        <view class=\"navbar-title\">\r\n          <text class=\"title-text\">ÈóÆÁ≠îËÆ∞ÂΩï</text>\r\n        </view>\r\n        <view class=\"navbar-right\"></view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ÂàÜÈöî‰∏éÂæΩÊ†á -->\r\n    <view class=\"divider-row\">\r\n      <view class=\"divider\"></view>\r\n      <text class=\"heart\">üíõ</text>\r\n      <view class=\"divider\"></view>\r\n    </view>\r\n\r\n    <!-- ÂéÜÂè≤ÂàóË°® -->\r\n    <view class=\"list\">\r\n      <view v-for=\"(item, i) in history\" :key=\"i\" class=\"list-item\" @click=\"openItem(item)\">\r\n        <view class=\"left\">\r\n          <text class=\"index\">{{ pad2(i + 1) }}</text>\r\n        </view>\r\n        <view class=\"center\">\r\n          <text class=\"question\">{{ item.question }}</text>\r\n        </view>\r\n        <view class=\"right\">\r\n          <view class=\"status\" :class=\"item.myAnswer ? 'done' : 'todo'\"></view>\r\n        </view>\r\n      </view>\r\n      <view v-if=\"history.length === 0\" class=\"empty\">\r\n        <text class=\"empty-text\">ÊöÇÊó†ÂéÜÂè≤ËÆ∞ÂΩï</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { getHistory } from '@/api/qna.js';\r\nimport { getQuestions } from '@/api/qna.js';\r\n\r\nexport default {\r\n  data() {\r\n    return { \r\n      statusBarHeight: 0,\r\n      navBarHeight: 54,\r\n      screenWidth: 375,\r\n      history: [],\r\n      defaultQuestions: [],\r\n      customQuestions: []\r\n    };\r\n  },\r\n  computed: {\r\n    containerPaddingTop() {\r\n      const totalHeightPx = this.statusBarHeight + this.navBarHeight;\r\n      const pxToRpx = 750 / this.screenWidth;\r\n      const totalHeightRpx = totalHeightPx * pxToRpx;\r\n      return totalHeightRpx + 20 + 'rpx';\r\n    }\r\n  },\r\n  async onLoad() {\r\n    // Ëé∑ÂèñÁ≥ªÁªü‰ø°ÊÅØ\r\n    const systemInfo = uni.getSystemInfoSync();\r\n    this.statusBarHeight = systemInfo.statusBarHeight || 0;\r\n    this.screenWidth = systemInfo.screenWidth || 375;\r\n    \r\n    // Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ\r\n    const loginInfo = uni.getStorageSync('login_info');\r\n    if (!loginInfo || !loginInfo.token) {\r\n      uni.showModal({\r\n        title: 'ÈúÄË¶ÅÁôªÂΩï',\r\n        content: 'ËØ∑ÂÖàÁôªÂΩï',\r\n        showCancel: false,\r\n        success: () => {\r\n          uni.reLaunch({ url: '/pages/login/index' });\r\n        }\r\n      });\r\n      return;\r\n    }\r\n    \r\n    // ÂÖàÂä†ËΩΩÈóÆÈ¢òÂàóË°®ÔºåÂÜçÂä†ËΩΩÂéÜÂè≤ËÆ∞ÂΩïÔºåÁ°Æ‰øùÂéÜÂè≤ËÆ∞ÂΩïÂèØ‰ª•ÂåπÈÖçÂà∞ÈóÆÈ¢òÊñáÊú¨\r\n    await this.loadQuestions();\r\n    await this.loadHistory();\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      uni.navigateBack();\r\n    },\r\n    normalizeApiResponse(response, defaultMessage = 'Êìç‰ΩúÊàêÂäü') {\r\n      if (response == null) {\r\n        return { success: false, message: 'ÂìçÂ∫î‰∏∫Á©∫', data: null, raw: response };\r\n      }\r\n      if (typeof response === 'string') {\r\n        return { success: false, message: response, data: null, raw: response };\r\n      }\r\n      if (typeof response.success === 'boolean') {\r\n        return {\r\n          success: !!response.success,\r\n          message: response.message || response.msg || defaultMessage,\r\n          data: response.data !== undefined ? response.data : null,\r\n          raw: response\r\n        };\r\n      }\r\n      if (response.code !== undefined) {\r\n        const success = Number(response.code) === 200;\r\n        return {\r\n          success,\r\n          message: response.msg || response.message || defaultMessage,\r\n          data: response.data !== undefined ? response.data : null,\r\n          raw: response\r\n        };\r\n      }\r\n      if (Array.isArray(response)) {\r\n        return { success: true, message: defaultMessage, data: response, raw: response };\r\n      }\r\n      return {\r\n        success: true,\r\n        message: response.message || response.msg || defaultMessage,\r\n        data: response.data !== undefined ? response.data : response,\r\n        raw: response\r\n      };\r\n    },\r\n    formatQuestionList(list, categoryFallback = 'preset') {\r\n      if (!Array.isArray(list)) {\r\n        return [];\r\n      }\r\n      return list\r\n        .filter(q => q && q.id != null)\r\n        .map(q => {\r\n          const formatted = {\r\n            ...q,\r\n            id: q.id,\r\n            text: q.text || q.questionText || '',\r\n            category: q.category || categoryFallback,\r\n            isActive: q.isActive !== false,\r\n            orderIndex: q.orderIndex ?? 999\r\n          };\r\n          if (formatted.questionText) {\r\n            delete formatted.questionText;\r\n          }\r\n          return formatted;\r\n        });\r\n    },\r\n    // ‰ªéÂêéÁ´ØÂä†ËΩΩÈóÆÈ¢òÂàóË°®\r\n    async loadQuestions() {\r\n      try {\r\n        const res = await getQuestions();\r\n        console.log('üì• ÈóÆÈ¢òÂàóË°®ÂìçÂ∫î:', res);\r\n        const normalizedRes = this.normalizeApiResponse(res, 'Ëé∑ÂèñÈóÆÈ¢òÊàêÂäü');\r\n        \r\n        const rawData = normalizedRes.data ?? res?.data ?? {};\r\n        let topLevelQuestions = null;\r\n        if (Array.isArray(res?.questions)) {\r\n          topLevelQuestions = res.questions;\r\n        } else if (Array.isArray(rawData?.questions)) {\r\n          topLevelQuestions = rawData.questions;\r\n        } else if (Array.isArray(rawData)) {\r\n          topLevelQuestions = rawData;\r\n        }\r\n\r\n        let presetQuestions = null;\r\n        let customQuestions = null;\r\n        \r\n        if (Array.isArray(topLevelQuestions)) {\r\n          const formatted = this.formatQuestionList(topLevelQuestions);\r\n          presetQuestions = formatted.filter(q => (q.category || 'preset') === 'preset');\r\n          customQuestions = formatted.filter(q => (q.category || 'preset') === 'custom');\r\n        } else if (rawData && (Array.isArray(rawData.defaultQuestions) || Array.isArray(rawData.customQuestions))) {\r\n          presetQuestions = this.formatQuestionList(rawData.defaultQuestions, 'preset');\r\n          customQuestions = this.formatQuestionList(rawData.customQuestions, 'custom');\r\n        } else if (res && res.code === 200 && res.data && (Array.isArray(res.data.defaultQuestions) || Array.isArray(res.data.customQuestions))) {\r\n          presetQuestions = this.formatQuestionList(res.data.defaultQuestions, 'preset');\r\n          customQuestions = this.formatQuestionList(res.data.customQuestions, 'custom');\r\n        }\r\n\r\n        if (presetQuestions !== null) {\r\n          presetQuestions.sort((a, b) => {\r\n            const orderA = a.orderIndex ?? 999;\r\n            const orderB = b.orderIndex ?? 999;\r\n            return orderA - orderB;\r\n          });\r\n          this.defaultQuestions = presetQuestions;\r\n        }\r\n\r\n        if (customQuestions !== null) {\r\n          this.customQuestions = customQuestions;\r\n        }\r\n\r\n        if (presetQuestions !== null || customQuestions !== null) {\r\n          console.log('‚úÖ ÈóÆÈ¢òÂàóË°®Âä†ËΩΩÊàêÂäü:', {\r\n            preset: this.defaultQuestions.length,\r\n            custom: this.customQuestions.length,\r\n            total: this.defaultQuestions.length + this.customQuestions.length\r\n          });\r\n        } else if (!normalizedRes.success) {\r\n          console.warn('‚ö†Ô∏è ÈóÆÈ¢òÂàóË°®‰∏öÂä°Áä∂ÊÄÅÂ§±Ë¥•:', {\r\n            message: normalizedRes.message,\r\n            raw: normalizedRes.raw\r\n          });\r\n        } else {\r\n          console.warn('‚ö†Ô∏è ÈóÆÈ¢òÂàóË°®ÂìçÂ∫îÊ†ºÂºè‰∏çÁ¨¶ÂêàÈ¢ÑÊúü:', res);\r\n        }\r\n      } catch (e) {\r\n        console.error('Âä†ËΩΩÈóÆÈ¢òÂàóË°®Â§±Ë¥•', e);\r\n      }\r\n    },\r\n    // ‰ªéÂêéÁ´ØÂä†ËΩΩÂéÜÂè≤ËÆ∞ÂΩï\r\n    async loadHistory() {\r\n      try {\r\n        uni.showLoading({ title: 'Âä†ËΩΩ‰∏≠...' });\r\n        const res = await getHistory({ page: 1, pageSize: 100 });\r\n        console.log('üì• ÂéÜÂè≤ËÆ∞ÂΩïÂìçÂ∫î:', res);\r\n        const normalizedRes = this.normalizeApiResponse(res, 'Ëé∑ÂèñÂéÜÂè≤ËÆ∞ÂΩïÊàêÂäü');\r\n        if (!normalizedRes.success) {\r\n          console.warn('‚ö†Ô∏è ÂéÜÂè≤ËÆ∞ÂΩï‰∏öÂä°Áä∂ÊÄÅËøîÂõûÂ§±Ë¥•:', {\r\n            message: normalizedRes.message,\r\n            raw: normalizedRes.raw\r\n          });\r\n        }\r\n        \r\n        const dataSources = [\r\n          normalizedRes.data?.list,\r\n          normalizedRes.data?.history,\r\n          normalizedRes.data?.answers,\r\n          Array.isArray(normalizedRes.data) ? normalizedRes.data : null,\r\n          normalizedRes.raw?.history,\r\n          normalizedRes.raw?.answers,\r\n          normalizedRes.raw?.data?.list,\r\n          normalizedRes.raw?.data?.history,\r\n          normalizedRes.raw?.data?.answers,\r\n          Array.isArray(normalizedRes.raw?.data) ? normalizedRes.raw.data : null,\r\n          res?.history,\r\n          res?.answers,\r\n          res?.data?.list,\r\n          res?.data?.history,\r\n          res?.data?.answers,\r\n          Array.isArray(res?.data) ? res.data : null,\r\n          res?.list,\r\n          Array.isArray(res) ? res : null\r\n        ];\r\n        \r\n        let historyList = [];\r\n        for (const candidate of dataSources) {\r\n          if (Array.isArray(candidate)) {\r\n            historyList = candidate;\r\n            break;\r\n          }\r\n        }\r\n        \r\n        if (!Array.isArray(historyList)) {\r\n          console.warn('‚ö†Ô∏è ÂéÜÂè≤ËÆ∞ÂΩïÂìçÂ∫îÊ†ºÂºè‰∏çÁ¨¶ÂêàÈ¢ÑÊúü:', res);\r\n          historyList = [];\r\n        }\r\n        \r\n        // Ê†áÂáÜÂåñÂéÜÂè≤ËÆ∞ÂΩïÊ†ºÂºèÔºåÁ°Æ‰øùÂ≠óÊÆµÂêç‰∏ÄËá¥\r\n        this.history = historyList.map(item => {\r\n          const id = item.id || item.answerId;\r\n          const questionId = item.questionId || item.question_id;\r\n          \r\n          // ‰ºòÂÖà‰ΩøÁî®ÂêéÁ´ØËøîÂõûÁöÑ questionÔºåÂ¶ÇÊûúÊ≤°ÊúâÂàô‰ªéÈóÆÈ¢òÂàóË°®‰∏≠Êü•Êâæ\r\n          let question = item.question || item.questionText || item.question_text;\r\n          if (!question && questionId != null) {\r\n            const allQuestions = [...(this.defaultQuestions || []), ...(this.customQuestions || [])];\r\n            const foundQuestion = allQuestions.find(q => q && q.id != null && Number(q.id) === Number(questionId));\r\n            if (foundQuestion && foundQuestion.text) {\r\n              question = foundQuestion.text;\r\n            }\r\n          }\r\n          \r\n          const myAnswer = item.myAnswer || item.answer || item.my_answer;\r\n          const partnerAnswer = item.partnerAnswer || item.partner_answer || '';\r\n          const time = item.time || item.answeredAt || item.createdAt || item.created_at || item.updatedAt || new Date().toLocaleString();\r\n          \r\n          return {\r\n            id,\r\n            questionId,\r\n            question: question || `ÈóÆÈ¢òID: ${questionId}`,\r\n            myAnswer,\r\n            partnerAnswer,\r\n            time,\r\n            questionCategory: item.questionCategory || item.category,\r\n            answeredAt: item.answeredAt,\r\n            ...item\r\n          };\r\n        });\r\n        \r\n        // ‰ªéÊñ∞Âà∞ÊóßÊéíÂ∫èÔºàÈ°∂ÈÉ®ÊúÄÊñ∞Ôºâ\r\n        this.history.sort((a, b) => {\r\n          const timeA = a.answeredAt || a.createdAt || a.time || '';\r\n          const timeB = b.answeredAt || b.createdAt || b.time || '';\r\n          return new Date(timeB) - new Date(timeA);\r\n        });\r\n        \r\n        console.log('‚úÖ ÂéÜÂè≤ËÆ∞ÂΩïÂä†ËΩΩÊàêÂäü:', {\r\n          count: this.history.length,\r\n          totalCount: normalizedRes.raw?.totalCount ?? normalizedRes.data?.totalCount ?? normalizedRes.data?.total\r\n        });\r\n      } catch (e) {\r\n        console.error('Âä†ËΩΩÂéÜÂè≤ËÆ∞ÂΩïÂ§±Ë¥•', e);\r\n        \r\n        // 401ÈîôËØØÁâπÊÆäÂ§ÑÁêÜ\r\n        if (e.statusCode === 401) {\r\n          uni.showModal({\r\n            title: 'ÈúÄË¶ÅÁôªÂΩï',\r\n            content: 'ËØ∑ÂÖàÁôªÂΩï',\r\n            showCancel: false,\r\n            success: () => {\r\n              uni.reLaunch({ url: '/pages/login/index' });\r\n            }\r\n          });\r\n          return;\r\n        }\r\n        \r\n        // Â¶ÇÊûúÂêéÁ´ØËØ∑Ê±ÇÂ§±Ë¥•ÔºåÂ∞ùËØï‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩ\r\n        try {\r\n          const data = uni.getStorageSync('qna_history');\r\n          this.history = Array.isArray(data) ? data : [];\r\n        } catch (e2) {\r\n          this.history = [];\r\n        }\r\n      } finally {\r\n        uni.hideLoading();\r\n      }\r\n    },\r\n    pad2(n) { return String(n).padStart(2, '0'); },\r\n    openItem(item) {\r\n      // Á°Æ‰øùËé∑ÂèñÊ≠£Á°ÆÁöÑ questionIdÔºàÂÖºÂÆπ‰∏çÂêåÁöÑÂ≠óÊÆµÂêçÔºâ\r\n      const questionId = item.questionId || item.question_id;\r\n      if (!questionId) {\r\n        console.error('‚ùå ÂéÜÂè≤ËÆ∞ÂΩïÈ°πÁº∫Â∞ë questionId:', item);\r\n        uni.showToast({ title: 'ÈóÆÈ¢òIDÁº∫Â§±ÔºåÊó†Ê≥ïË∑≥ËΩ¨', icon: 'none' });\r\n        return;\r\n      }\r\n      \r\n      const qid = encodeURIComponent(questionId);\r\n      const time = encodeURIComponent(item.time || '');\r\n      const questionText = encodeURIComponent(item.question || '');\r\n      \r\n      console.log('üîó Ë∑≥ËΩ¨Âà∞ÈóÆÈ¢òÈ°µÈù¢:', {\r\n        questionId: questionId,\r\n        question: item.question ? item.question.substring(0, 20) + '...' : '',\r\n        time: time\r\n      });\r\n      \r\n      let targetUrl = `/subPackages/interaction/pages/qna/index?qid=${qid}&time=${time}`;\r\n      if (questionText) {\r\n        targetUrl += `&qtext=${questionText}`;\r\n      }\r\n      uni.navigateTo({ url: targetUrl });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* ÂØºËà™Ê†èÊ†∑Âºè */\r\n.custom-navbar {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 9999;\r\n  background-color: #FFFAF4;\r\n  overflow: hidden;\r\n}\r\n\r\n.navbar-gradient-bg {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 200%;\r\n  background: rgba(255, 255, 255, 0.7);\r\n  backdrop-filter: blur(15px);\r\n  -webkit-backdrop-filter: blur(15px);\r\n}\r\n\r\n.status-bar {\r\n  width: 100%;\r\n}\r\n\r\n.navbar-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 24rpx;\r\n  position: relative;\r\n  z-index: 10;\r\n}\r\n\r\n.navbar-left {\r\n  width: 80rpx;\r\n  height: 54rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n}\r\n\r\n.back-icon {\r\n  font-size: 50rpx;\r\n  font-weight: 600;\r\n  color: #4A4A4A;\r\n  line-height: 1;\r\n  cursor: pointer;\r\n  transition: opacity 0.3s;\r\n}\r\n\r\n.navbar-title {\r\n  flex: 1;\r\n  height: 54rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.title-text {\r\n  font-size: 36rpx;\r\n  font-weight: 500;\r\n  color: #4A4A4A;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n\r\n.navbar-right {\r\n  width: 80rpx;\r\n  height: 54rpx;\r\n}\r\n\r\n.history-page { \r\n  min-height: 100vh; \r\n  background: #FFFAF4; \r\n}\r\n.topbar { position: relative; height: 96rpx; display: flex; align-items: center; justify-content: center; background: #ffffff; }\r\n.topbar-title { font-size: 32rpx; color: #2b2b2b; font-weight: 600; }\r\n.topbar-actions { position: absolute; right: 24rpx; top: 50%; transform: translateY(-50%); display: flex; gap: 12rpx; }\r\n.icon-btn { width: 64rpx; height: 64rpx; border-radius: 32rpx; background: #f7f7f7; color: #2bad81; font-size: 28rpx; display: flex; align-items: center; justify-content: center; }\r\n\r\n.divider-row { \r\n  margin: 12rpx 24rpx; \r\n  display: flex; \r\n  align-items: center; \r\n  gap: 16rpx; \r\n}\r\n.divider { \r\n  flex: 1; \r\n  height: 2rpx; \r\n  background: linear-gradient(90deg, transparent 0%, #FFC94D 50%, transparent 100%);\r\n  opacity: 0.6;\r\n}\r\n.heart { \r\n  color: #FFC94D; \r\n  font-size: 32rpx;\r\n  text-shadow: 0 2rpx 4rpx rgba(255, 181, 194, 0.3);\r\n}\r\n\r\n.list { \r\n  padding: 24rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16rpx;\r\n}\r\n.list-item { \r\n  display: flex; \r\n  align-items: center; \r\n  padding: 24rpx;\r\n  background: rgba(255, 255, 255, 0.7);\r\n  backdrop-filter: blur(15px);\r\n  -webkit-backdrop-filter: blur(15px);\r\n  border-radius: 16rpx;\r\n  box-shadow: 0 8rpx 12rpx rgba(0, 0, 0, 0.04), inset 0 0 0 2rpx rgba(255,255,255,0.5);\r\n  overflow: hidden;\r\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\r\n}\r\n.left { width: 64rpx; }\r\n.index { \r\n  font-size: 30rpx; \r\n  color: #FFB5C2; \r\n  font-weight: 700; \r\n}\r\n.center { flex: 1; padding: 0 16rpx; }\r\n.question { \r\n  font-size: 28rpx; \r\n  color: #4A4A4A;\r\n  font-weight: 500;\r\n  line-height: 1.4;\r\n}\r\n.right { width: 60rpx; display: flex; justify-content: flex-end; }\r\n.status { \r\n  width: 32rpx; \r\n  height: 32rpx; \r\n  border-radius: 16rpx; \r\n  border: 3rpx solid #FFB5C2;\r\n  transition: all 0.3s ease;\r\n}\r\n.status.done { \r\n  background: linear-gradient(135deg, #FFB5C2 0%, #FFD4A3 100%);\r\n  border-color: #FFB5C2;\r\n  box-shadow: 0 2rpx 8rpx rgba(255, 181, 194, 0.3);\r\n}\r\n.status.todo { \r\n  background: #ffffff; \r\n  border-color: #FFB5C2;\r\n}\r\n\r\n.empty { \r\n  padding: 80rpx 40rpx; \r\n  display: flex; \r\n  justify-content: center; \r\n  align-items: center;\r\n  background: rgba(255, 255, 255, 0.7);\r\n  backdrop-filter: blur(15px);\r\n  -webkit-backdrop-filter: blur(15px);\r\n  border-radius: 16rpx;\r\n  margin: 24rpx;\r\n  box-shadow: 0 8rpx 12rpx rgba(0, 0, 0, 0.04), inset 0 0 0 2rpx rgba(255,255,255,0.5);\r\n}\r\n.empty-text { \r\n  color: #666; \r\n  font-size: 28rpx;\r\n  font-weight: 500;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/love_time - ÂâØÊú¨/subPackages/interaction/pages/qna/history.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getQuestions","getHistory"],"mappings":"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"}