{"version":3,"file":"qna.js","sources":["api/qna.js"],"sourcesContent":["/**\r\n * 问答相关 API\r\n */\r\n\r\nimport http from '../utils/http.js';\r\nimport config from '../utils/config.js';\r\n\r\n/**\r\n * 获取问题列表\r\n * @returns {Promise<Object>} 返回问题列表\r\n * \r\n * 后端接口要求：\r\n * - 请求方法：GET\r\n * - 请求地址：/api/qna/questions\r\n * - 请求头：需携带 Authorization token\r\n * - 返回数据：\r\n *   {\r\n *     success: true,\r\n *     data: {\r\n *       defaultQuestions: [  // 预设问题列表\r\n *         { id: 1, text: \"问题内容\", isDefault: true }\r\n *       ],\r\n *       customQuestions: [   // 用户自定义问题列表\r\n *         { id: 101, text: \"自定义问题\", isDefault: false, userId: \"xxx\" }\r\n *       ]\r\n *     }\r\n *   }\r\n */\r\nexport function getQuestions() {\r\n  return http.get(config.API.QNA.LIST);\r\n}\r\n\r\n/**\r\n * 提交答案\r\n * @param {Object} answerData - 答案数据\r\n * @returns {Promise<Object>} 返回提交结果\r\n * \r\n * 后端接口要求：\r\n * - 请求方法：POST\r\n * - 请求地址：/api/qna/answer/submit\r\n * - 请求头：需携带 Authorization token\r\n * - 请求参数：\r\n *   {\r\n *     questionId: number,    // 问题ID（必填）\r\n *     answer: string,        // 我的答案（必填）\r\n *     questionText: string   // 问题文本（可选，用于记录）\r\n *   }\r\n * - 返回数据：\r\n *   {\r\n *     success: true,\r\n *     message: \"提交成功\",\r\n *     data: {\r\n *       answerId: number,           // 答案记录ID\r\n *       partnerAnswer: string,      // 对方的答案（如果对方已回答）\r\n *       hasPartnerAnswered: boolean // 对方是否已回答\r\n *     }\r\n *   }\r\n */\r\nexport function submitAnswer(answerData) {\r\n  return http.post(config.API.QNA.SUBMIT, {\r\n    questionId: answerData.questionId,\r\n    answer: answerData.answer,\r\n    questionText: answerData.questionText\r\n  });\r\n}\r\n\r\n/**\r\n * 获取历史回答记录\r\n * @param {Object} params - 查询参数\r\n * @returns {Promise<Object>} 返回历史记录\r\n * \r\n * 后端接口要求：\r\n * - 请求方法：GET\r\n * - 请求地址：/api/qna/history\r\n * - 请求头：需携带 Authorization token\r\n * - 请求参数：\r\n *   {\r\n *     page: number,      // 页码（可选，默认1）\r\n *     pageSize: number   // 每页数量（可选，默认20）\r\n *   }\r\n * - 返回数据：\r\n *   {\r\n *     success: true,\r\n *     data: {\r\n *       total: number,     // 总记录数\r\n *       list: [\r\n *         {\r\n *           id: number,\r\n *           questionId: number,\r\n *           question: string,\r\n *           myAnswer: string,\r\n *           partnerAnswer: string,\r\n *           createdAt: string,  // ISO时间格式\r\n *           updatedAt: string\r\n *         }\r\n *       ]\r\n *     }\r\n *   }\r\n */\r\nexport function getHistory(params = {}) {\r\n  return http.get(config.API.QNA.HISTORY, params);\r\n}\r\n\r\n/**\r\n * 获取对方答案\r\n * @param {number} questionId - 问题ID\r\n * @returns {Promise<Object>} 返回对方答案\r\n * \r\n * 后端接口要求：\r\n * - 请求方法：GET\r\n * - 请求地址：/api/qna/partner\r\n * - 请求头：需携带 Authorization token\r\n * - 请求参数：\r\n *   {\r\n *     questionId: number  // 问题ID（必填）\r\n *   }\r\n * - 返回数据：\r\n *   {\r\n *     success: true,\r\n *     data: {\r\n *       hasAnswered: boolean,    // 对方是否已回答\r\n *       answer: string,          // 对方的答案（如果已回答）\r\n *       answeredAt: string       // 回答时间（如果已回答）\r\n *     }\r\n *   }\r\n */\r\nexport function getPartnerAnswer(questionId) {\r\n  return http.get(config.API.QNA.PARTNER_ANSWER, { questionId });\r\n}\r\n\r\n/**\r\n * 添加自定义问题\r\n * @param {string} questionText - 问题文本\r\n * @returns {Promise<Object>} 返回添加结果\r\n * \r\n * 后端接口要求：\r\n * - 请求方法：POST\r\n * - 请求地址：/api/qna/question/add\r\n * - 请求头：需携带 Authorization token\r\n * - 请求参数：\r\n *   {\r\n *     text: string  // 问题文本（必填）\r\n *   }\r\n * - 返回数据：\r\n *   {\r\n *     success: true,\r\n *     message: \"添加成功\",\r\n *     data: {\r\n *       id: number,          // 新问题的ID\r\n *       text: string,        // 问题文本\r\n *       isDefault: false,\r\n *       userId: string,\r\n *       createdAt: string\r\n *     }\r\n *   }\r\n */\r\nexport function addCustomQuestion(questionText) {\r\n  return http.post(config.API.QNA.ADD_QUESTION, {\r\n    text: questionText\r\n  });\r\n}\r\n\r\n/**\r\n * 删除自定义问题\r\n * @param {number} questionId - 问题ID\r\n * @returns {Promise<Object>} 返回删除结果\r\n * \r\n * 后端接口要求：\r\n * - 请求方法：POST 或 DELETE\r\n * - 请求地址：/api/qna/question/delete\r\n * - 请求头：需携带 Authorization token\r\n * - 请求参数：\r\n *   {\r\n *     questionId: number  // 问题ID（必填）\r\n *   }\r\n * - 返回数据：\r\n *   {\r\n *     success: true,\r\n *     message: \"删除成功\"\r\n *   }\r\n */\r\nexport function deleteCustomQuestion(questionId) {\r\n  return http.post(config.API.QNA.DELETE_QUESTION, {\r\n    questionId\r\n  });\r\n}\r\n"],"names":["http","config"],"mappings":";;;AA4BO,SAAS,eAAe;AAC7B,SAAOA,WAAAA,KAAK,IAAIC,aAAAA,OAAO,IAAI,IAAI,IAAI;AACrC;AA4BO,SAAS,aAAa,YAAY;AACvC,SAAOD,WAAAA,KAAK,KAAKC,aAAAA,OAAO,IAAI,IAAI,QAAQ;AAAA,IACtC,YAAY,WAAW;AAAA,IACvB,QAAQ,WAAW;AAAA,IACnB,cAAc,WAAW;AAAA,EAC7B,CAAG;AACH;AAmCO,SAAS,WAAW,SAAS,IAAI;AACtC,SAAOD,WAAAA,KAAK,IAAIC,aAAM,OAAC,IAAI,IAAI,SAAS,MAAM;AAChD;AAuDO,SAAS,kBAAkB,cAAc;AAC9C,SAAOD,WAAAA,KAAK,KAAKC,aAAAA,OAAO,IAAI,IAAI,cAAc;AAAA,IAC5C,MAAM;AAAA,EACV,CAAG;AACH;AAqBO,SAAS,qBAAqB,YAAY;AAC/C,SAAOD,WAAAA,KAAK,KAAKC,aAAAA,OAAO,IAAI,IAAI,iBAAiB;AAAA,IAC/C;AAAA,EACJ,CAAG;AACH;;;;;;"}