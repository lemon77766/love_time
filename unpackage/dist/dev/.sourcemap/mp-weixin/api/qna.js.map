{"version":3,"file":"qna.js","sources":["api/qna.js"],"sourcesContent":["/**\r\n * é—®ç­”ç›¸å…³ API\r\n */\r\n\r\nimport http from '../utils/http.js';\r\nimport config from '../utils/config.js';\r\n\r\n/**\r\n * è·å–é—®é¢˜åˆ—è¡¨\r\n * @returns {Promise<Object>} è¿”å›é—®é¢˜åˆ—è¡¨\r\n * \r\n * åç«¯æ¥å£è¦æ±‚ï¼š\r\n * - è¯·æ±‚æ–¹æ³•ï¼šGET\r\n * - è¯·æ±‚åœ°å€ï¼š/api/qna/questions\r\n * - è¯·æ±‚å¤´ï¼šéœ€æºå¸¦ Authorization token\r\n * - è¿”å›æ•°æ®ï¼š\r\n *   {\r\n *     success: true,\r\n *     data: {\r\n *       defaultQuestions: [  // é¢„è®¾é—®é¢˜åˆ—è¡¨\r\n *         { id: 1, text: \"é—®é¢˜å†…å®¹\", isDefault: true }\r\n *       ],\r\n *       customQuestions: [   // ç”¨æˆ·è‡ªå®šä¹‰é—®é¢˜åˆ—è¡¨\r\n *         { id: 101, text: \"è‡ªå®šä¹‰é—®é¢˜\", isDefault: false, userId: \"xxx\" }\r\n *       ]\r\n *     }\r\n *   }\r\n */\r\nexport function getQuestions() {\r\n  return http.get(config.API.QNA.LIST);\r\n}\r\n\r\n/**\r\n * æäº¤ç­”æ¡ˆ\r\n * @param {Object} answerData - ç­”æ¡ˆæ•°æ®\r\n * @returns {Promise<Object>} è¿”å›æäº¤ç»“æœ\r\n * \r\n * åç«¯æ¥å£è¦æ±‚ï¼š\r\n * - è¯·æ±‚æ–¹æ³•ï¼šPOST\r\n * - è¯·æ±‚åœ°å€ï¼š/api/qna/answer/submit\r\n * - è¯·æ±‚å¤´ï¼šéœ€æºå¸¦ Authorization token\r\n * - è¯·æ±‚å‚æ•°ï¼š\r\n *   {\r\n *     questionId: number,    // é—®é¢˜IDï¼ˆå¿…å¡«ï¼‰\r\n *     answer: string,        // æˆ‘çš„ç­”æ¡ˆï¼ˆå¿…å¡«ï¼‰\r\n *     questionText: string   // é—®é¢˜æ–‡æœ¬ï¼ˆå¯é€‰ï¼Œç”¨äºè®°å½•ï¼‰\r\n *   }\r\n * - è¿”å›æ•°æ®ï¼š\r\n *   {\r\n *     success: true,\r\n *     message: \"æäº¤æˆåŠŸ\",\r\n *     data: {\r\n *       answerId: number,           // ç­”æ¡ˆè®°å½•ID\r\n *       partnerAnswer: string,      // å¯¹æ–¹çš„ç­”æ¡ˆï¼ˆå¦‚æœå¯¹æ–¹å·²å›ç­”ï¼‰\r\n *       hasPartnerAnswered: boolean // å¯¹æ–¹æ˜¯å¦å·²å›ç­”\r\n *     }\r\n *   }\r\n */\r\nexport function submitAnswer(answerData) {\r\n  return http.post(config.API.QNA.SUBMIT, {\r\n    questionId: answerData.questionId,\r\n    answer: answerData.answer,\r\n    questionText: answerData.questionText\r\n  });\r\n}\r\n\r\n/**\r\n * è·å–å†å²å›ç­”è®°å½•\r\n * @param {Object} params - æŸ¥è¯¢å‚æ•°\r\n * @returns {Promise<Object>} è¿”å›å†å²è®°å½•\r\n * \r\n * åç«¯æ¥å£è¦æ±‚ï¼š\r\n * - è¯·æ±‚æ–¹æ³•ï¼šGET\r\n * - è¯·æ±‚åœ°å€ï¼š/api/qna/history\r\n * - è¯·æ±‚å¤´ï¼šéœ€æºå¸¦ Authorization token\r\n * - è¯·æ±‚å‚æ•°ï¼š\r\n *   {\r\n *     page: number,      // é¡µç ï¼ˆå¯é€‰ï¼Œé»˜è®¤1ï¼‰\r\n *     pageSize: number   // æ¯é¡µæ•°é‡ï¼ˆå¯é€‰ï¼Œé»˜è®¤20ï¼‰\r\n *   }\r\n * - è¿”å›æ•°æ®ï¼š\r\n *   {\r\n *     success: true,\r\n *     data: {\r\n *       total: number,     // æ€»è®°å½•æ•°\r\n *       list: [\r\n *         {\r\n *           id: number,\r\n *           questionId: number,\r\n *           question: string,\r\n *           myAnswer: string,\r\n *           partnerAnswer: string,\r\n *           createdAt: string,  // ISOæ—¶é—´æ ¼å¼\r\n *           updatedAt: string\r\n *         }\r\n *       ]\r\n *     }\r\n *   }\r\n */\r\nexport function getHistory(params = {}) {\r\n  return http.get(config.API.QNA.HISTORY, params);\r\n}\r\n\r\n/**\r\n * è·å–å¯¹æ–¹ç­”æ¡ˆ\r\n * @param {number} questionId - é—®é¢˜ID\r\n * @returns {Promise<Object>} è¿”å›å¯¹æ–¹ç­”æ¡ˆ\r\n * \r\n * åç«¯æ¥å£è¦æ±‚ï¼š\r\n * - è¯·æ±‚æ–¹æ³•ï¼šGET\r\n * - è¯·æ±‚åœ°å€ï¼š/api/qna/partner\r\n * - è¯·æ±‚å¤´ï¼šéœ€æºå¸¦ Authorization token\r\n * - è¯·æ±‚å‚æ•°ï¼š\r\n *   {\r\n *     questionId: number  // é—®é¢˜IDï¼ˆå¿…å¡«ï¼‰\r\n *   }\r\n * - è¿”å›æ•°æ®ï¼š\r\n *   {\r\n *     success: true,\r\n *     data: {\r\n *       hasAnswered: boolean,    // å¯¹æ–¹æ˜¯å¦å·²å›ç­”\r\n *       answer: string,          // å¯¹æ–¹çš„ç­”æ¡ˆï¼ˆå¦‚æœå·²å›ç­”ï¼‰\r\n *       answeredAt: string       // å›ç­”æ—¶é—´ï¼ˆå¦‚æœå·²å›ç­”ï¼‰\r\n *     }\r\n *   }\r\n */\r\nexport function getPartnerAnswer(questionId) {\r\n  console.log('ğŸ” è°ƒç”¨è·å–å¯¹æ–¹ç­”æ¡ˆAPI:', {\r\n    url: config.API.QNA.PARTNER_ANSWER,\r\n    questionId,\r\n    questionIdType: typeof questionId\r\n  });\r\n  return http.get(config.API.QNA.PARTNER_ANSWER, { questionId });\r\n}\r\n\r\n/**\r\n * æ·»åŠ è‡ªå®šä¹‰é—®é¢˜\r\n * @param {string} questionText - é—®é¢˜æ–‡æœ¬\r\n * @returns {Promise<Object>} è¿”å›æ·»åŠ ç»“æœ\r\n * \r\n * åç«¯æ¥å£è¦æ±‚ï¼š\r\n * - è¯·æ±‚æ–¹æ³•ï¼šPOST\r\n * - è¯·æ±‚åœ°å€ï¼š/api/qna/question/add\r\n * - è¯·æ±‚å¤´ï¼šéœ€æºå¸¦ Authorization token\r\n * - è¯·æ±‚å‚æ•°ï¼š\r\n *   {\r\n *     text: string  // é—®é¢˜æ–‡æœ¬ï¼ˆå¿…å¡«ï¼‰\r\n *   }\r\n * - è¿”å›æ•°æ®ï¼š\r\n *   {\r\n *     success: true,\r\n *     message: \"æ·»åŠ æˆåŠŸ\",\r\n *     data: {\r\n *       id: number,          // æ–°é—®é¢˜çš„ID\r\n *       text: string,        // é—®é¢˜æ–‡æœ¬\r\n *       isDefault: false,\r\n *       userId: string,\r\n *       createdAt: string\r\n *     }\r\n *   }\r\n */\r\nexport function addCustomQuestion(questionText) {\r\n  return http.post(config.API.QNA.ADD_QUESTION, {\r\n    text: questionText\r\n  });\r\n}\r\n\r\n/**\r\n * åˆ é™¤è‡ªå®šä¹‰é—®é¢˜\r\n * @param {number} questionId - é—®é¢˜ID\r\n * @returns {Promise<Object>} è¿”å›åˆ é™¤ç»“æœ\r\n * \r\n * åç«¯æ¥å£è¦æ±‚ï¼š\r\n * - è¯·æ±‚æ–¹æ³•ï¼šPOST æˆ– DELETE\r\n * - è¯·æ±‚åœ°å€ï¼š/api/qna/question/delete\r\n * - è¯·æ±‚å¤´ï¼šéœ€æºå¸¦ Authorization token\r\n * - è¯·æ±‚å‚æ•°ï¼š\r\n *   {\r\n *     questionId: number  // é—®é¢˜IDï¼ˆå¿…å¡«ï¼‰\r\n *   }\r\n * - è¿”å›æ•°æ®ï¼š\r\n *   {\r\n *     success: true,\r\n *     message: \"åˆ é™¤æˆåŠŸ\"\r\n *   }\r\n */\r\nexport function deleteCustomQuestion(questionId) {\r\n  return http.post(config.API.QNA.DELETE_QUESTION, {\r\n    questionId\r\n  });\r\n}\r\n"],"names":["http","config","uni"],"mappings":";;;;AA4BO,SAAS,eAAe;AAC7B,SAAOA,WAAAA,KAAK,IAAIC,aAAAA,OAAO,IAAI,IAAI,IAAI;AACrC;AA4BO,SAAS,aAAa,YAAY;AACvC,SAAOD,WAAAA,KAAK,KAAKC,aAAAA,OAAO,IAAI,IAAI,QAAQ;AAAA,IACtC,YAAY,WAAW;AAAA,IACvB,QAAQ,WAAW;AAAA,IACnB,cAAc,WAAW;AAAA,EAC7B,CAAG;AACH;AAmCO,SAAS,WAAW,SAAS,IAAI;AACtC,SAAOD,WAAAA,KAAK,IAAIC,aAAM,OAAC,IAAI,IAAI,SAAS,MAAM;AAChD;AAyBO,SAAS,iBAAiB,YAAY;AAC3CC,gBAAAA,wCAAY,mBAAmB;AAAA,IAC7B,KAAKD,aAAM,OAAC,IAAI,IAAI;AAAA,IACpB;AAAA,IACA,gBAAgB,OAAO;AAAA,EAC3B,CAAG;AACD,SAAOD,WAAI,KAAC,IAAIC,oBAAO,IAAI,IAAI,gBAAgB,EAAE,WAAU,CAAE;AAC/D;AA4BO,SAAS,kBAAkB,cAAc;AAC9C,SAAOD,WAAAA,KAAK,KAAKC,aAAAA,OAAO,IAAI,IAAI,cAAc;AAAA,IAC5C,MAAM;AAAA,EACV,CAAG;AACH;AAqBO,SAAS,qBAAqB,YAAY;AAC/C,SAAOD,WAAAA,KAAK,KAAKC,aAAAA,OAAO,IAAI,IAAI,iBAAiB;AAAA,IAC/C;AAAA,EACJ,CAAG;AACH;;;;;;;"}