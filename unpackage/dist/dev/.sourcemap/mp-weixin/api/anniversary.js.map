{"version":3,"file":"anniversary.js","sources":["api/anniversary.js"],"sourcesContent":["/**\r\n * 纪念日 API\r\n * 提供纪念日相关的增删改查接口\r\n */\r\n\r\nimport http from '../utils/http.js';\r\nimport config from '../utils/config.js';\r\n\r\n/**\r\n * 获取用户的纪念日列表\r\n * @returns {Promise<Object>} 返回纪念日列表\r\n * \r\n * 后端接口要求：\r\n * - 请求方法：GET\r\n * - 请求地址：/api/anniversary/list\r\n * - 请求头：需携带 Authorization token\r\n * - 返回数据格式：\r\n *   {\r\n *     success: true,\r\n *     message: \"获取纪念日列表成功\",\r\n *     data: {\r\n *       anniversaryList: [\r\n *         {\r\n *           id: 1,\r\n *           title: \"我们的第一次旅行\",\r\n *           date: \"2025-10-21\",\r\n *           icon: \"mdi:airplane\",\r\n *           color: \"#4A90E2\",\r\n *           remind: true\r\n *         }\r\n *       ]\r\n *     }\r\n *   }\r\n */\r\nexport function getAnniversaryList() {\r\n  const url = config.API.ANNIVERSARY.LIST;\r\n  const fullUrl = config.baseURL + url;\r\n  \r\n  console.log('🔗 [纪念日API] 开始获取纪念日列表');\r\n  console.log('📍 请求地址:', fullUrl);\r\n  console.log('📋 请求方法: GET');\r\n  console.log('⏰ 请求时间:', new Date().toLocaleString());\r\n  \r\n  return http.get(url).then(response => {\r\n    console.log('✅ [纪念日API] 获取纪念日列表成功');\r\n    console.log('📦 响应数据:', response);\r\n    \r\n    if (response && response.data) {\r\n      const anniversaryData = response.data;\r\n      console.log('📊 纪念日列表信息:');\r\n      console.log(`   - 纪念日数量: ${anniversaryData.anniversaryList?.length || 0}`);\r\n      return response;\r\n    } else if (response && Array.isArray(response)) {\r\n      // 兼容直接返回数组的情况\r\n      return { success: true, data: { anniversaryList: response } };\r\n    } else {\r\n      console.warn('⚠️ 响应数据格式异常:', response);\r\n      return response;\r\n    }\r\n  }).catch(error => {\r\n    console.error('❌ [纪念日API] 获取纪念日列表失败');\r\n    console.error('🔴 错误信息:', error);\r\n    throw error;\r\n  });\r\n}\r\n\r\n/**\r\n * 添加纪念日\r\n * @param {Object} anniversaryData - 纪念日数据\r\n * @returns {Promise<Object>} 返回添加结果\r\n * \r\n * 后端接口要求：\r\n * - 请求方法：POST\r\n * - 请求地址：/api/anniversary/create\r\n * - 请求头：需携带 Authorization token\r\n * - 请求参数：\r\n *   {\r\n *     title: \"纪念日标题\",\r\n *     date: \"2025-10-21\",\r\n *     icon: \"mdi:airplane\",\r\n *     color: \"#4A90E2\",\r\n *     remind: true\r\n *   }\r\n * - 返回数据格式：\r\n *   {\r\n *     success: true,\r\n *     message: \"添加纪念日成功\",\r\n *     data: {\r\n *       id: 1,\r\n *       title: \"纪念日标题\",\r\n *       date: \"2025-10-21\",\r\n *       icon: \"mdi:airplane\",\r\n *       color: \"#4A90E2\",\r\n *       remind: true\r\n *     }\r\n *   }\r\n */\r\nexport function addAnniversary(anniversaryData) {\r\n  const url = config.API.ANNIVERSARY.CREATE;\r\n  const fullUrl = config.baseURL + url;\r\n  \r\n  console.log('🔗 [纪念日API] 开始添加纪念日');\r\n  console.log('📍 请求地址:', fullUrl);\r\n  console.log('📋 请求方法: POST');\r\n  console.log('📥 请求参数:', anniversaryData);\r\n  console.log('⏰ 请求时间:', new Date().toLocaleString());\r\n  \r\n  return http.post(url, anniversaryData).then(response => {\r\n    console.log('✅ [纪念日API] 添加纪念日成功');\r\n    console.log('📦 响应数据:', response);\r\n    return response;\r\n  }).catch(error => {\r\n    console.error('❌ [纪念日API] 添加纪念日失败');\r\n    console.error('🔴 错误信息:', error);\r\n    throw error;\r\n  });\r\n}\r\n\r\n/**\r\n * 更新纪念日\r\n * @param {number} id - 纪念日ID\r\n * @param {Object} anniversaryData - 纪念日数据\r\n * @returns {Promise<Object>} 返回更新结果\r\n * \r\n * 后端接口要求：\r\n * - 请求方法：PUT\r\n * - 请求地址：/api/anniversary/update/{id}\r\n * - 请求头：需携带 Authorization token\r\n * - 请求参数：\r\n *   {\r\n *     title: \"纪念日标题\",\r\n *     date: \"2025-10-21\",\r\n *     icon: \"mdi:airplane\",\r\n *     color: \"#4A90E2\",\r\n *     remind: true\r\n *   }\r\n * - 返回数据格式：\r\n *   {\r\n *     success: true,\r\n *     message: \"更新纪念日成功\",\r\n *     data: {\r\n *       id: 1,\r\n *       title: \"纪念日标题\",\r\n *       date: \"2025-10-21\",\r\n *       icon: \"mdi:airplane\",\r\n *       color: \"#4A90E2\",\r\n *       remind: true\r\n *     }\r\n *   }\r\n */\r\nexport function updateAnniversary(id, anniversaryData) {\r\n  const url = `${config.API.ANNIVERSARY.UPDATE}/${id}`;\r\n  const fullUrl = config.baseURL + url;\r\n  \r\n  console.log('🔗 [纪念日API] 开始更新纪念日');\r\n  console.log('📍 请求地址:', fullUrl);\r\n  console.log('📋 请求方法: PUT');\r\n  console.log('📥 请求参数:', anniversaryData);\r\n  console.log('⏰ 请求时间:', new Date().toLocaleString());\r\n  \r\n  return http.put(url, anniversaryData).then(response => {\r\n    console.log('✅ [纪念日API] 更新纪念日成功');\r\n    console.log('📦 响应数据:', response);\r\n    return response;\r\n  }).catch(error => {\r\n    console.error('❌ [纪念日API] 更新纪念日失败');\r\n    console.error('🔴 错误信息:', error);\r\n    throw error;\r\n  });\r\n}\r\n\r\n/**\r\n * 删除纪念日\r\n * @param {number} id - 纪念日ID\r\n * @returns {Promise<Object>} 返回删除结果\r\n * \r\n * 后端接口要求：\r\n * - 请求方法：DELETE\r\n * - 请求地址：/api/anniversary/delete/{id}\r\n * - 请求头：需携带 Authorization token\r\n * - 返回数据格式：\r\n *   {\r\n *     success: true,\r\n *     message: \"删除纪念日成功\"\r\n *   }\r\n */\r\nexport function deleteAnniversary(id) {\r\n  const url = `${config.API.ANNIVERSARY.DELETE}/${id}`;\r\n  const fullUrl = config.baseURL + url;\r\n  \r\n  console.log('🔗 [纪念日API] 开始删除纪念日');\r\n  console.log('📍 请求地址:', fullUrl);\r\n  console.log('📋 请求方法: DELETE');\r\n  console.log('🆔 纪念日ID:', id);\r\n  console.log('⏰ 请求时间:', new Date().toLocaleString());\r\n  \r\n  return http.delete(url).then(response => {\r\n    console.log('✅ [纪念日API] 删除纪念日成功');\r\n    console.log('📦 响应数据:', response);\r\n    return response;\r\n  }).catch(error => {\r\n    console.error('❌ [纪念日API] 删除纪念日失败');\r\n    console.error('🔴 错误信息:', error);\r\n    throw error;\r\n  });\r\n}\r\n\r\n/**\r\n * 切换纪念日提醒状态\r\n * @param {number} id - 纪念日ID\r\n * @param {boolean} remind - 提醒状态\r\n * @returns {Promise<Object>} 返回更新结果\r\n * \r\n * 后端接口要求：\r\n * - 请求方法：PUT\r\n * - 请求地址：/api/anniversary/remind/{id}\r\n * - 请求头：需携带 Authorization token\r\n * - 请求参数：\r\n *   {\r\n *     remind: true\r\n *   }\r\n * - 返回数据格式：\r\n *   {\r\n *     success: true,\r\n *     message: \"更新提醒状态成功\"\r\n *   }\r\n */\r\nexport function toggleAnniversaryRemind(id, remind) {\r\n  const url = `${config.API.ANNIVERSARY.REMIND}/${id}`;\r\n  const fullUrl = config.baseURL + url;\r\n  \r\n  console.log('🔗 [纪念日API] 开始切换纪念日提醒状态');\r\n  console.log('📍 请求地址:', fullUrl);\r\n  console.log('📋 请求方法: PUT');\r\n  console.log('📥 请求参数:', { remind });\r\n  console.log('⏰ 请求时间:', new Date().toLocaleString());\r\n  \r\n  return http.put(url, { remind }).then(response => {\r\n    console.log('✅ [纪念日API] 切换纪念日提醒状态成功');\r\n    console.log('📦 响应数据:', response);\r\n    return response;\r\n  }).catch(error => {\r\n    console.error('❌ [纪念日API] 切换纪念日提醒状态失败');\r\n    console.error('🔴 错误信息:', error);\r\n    throw error;\r\n  });\r\n}"],"names":["config","uni","http"],"mappings":"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"}