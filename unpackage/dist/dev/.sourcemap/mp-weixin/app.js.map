{"version":3,"file":"app.js","sources":["App.vue","main.js"],"sourcesContent":["<script>\r\n\t// ⚡ 立即初始化错误处理（在 App 实例创建之前）\r\n\t(function() {\r\n\t\t// 保存原始的 console.error\r\n\t\tconst originalError = console.error;\r\n\t\t\r\n\t\t// 重写 console.error 以过滤已知的无害错误\r\n\t\tconsole.error = function(...args) {\r\n\t\t\tconst errorMsg = args.join(' ');\r\n\t\t\t\r\n\t\t\t// 过滤 WebSocket 连接错误（开发工具日志通道）\r\n\t\t\tif (\r\n\t\t\t\terrorMsg.includes('WebSocket connection') && \r\n\t\t\t\terrorMsg.includes('failed') &&\r\n\t\t\t\t(errorMsg.includes('mp-weixin') || errorMsg.includes('8090'))\r\n\t\t\t) {\r\n\t\t\t\treturn; // 静默处理\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 过滤文件系统错误（小程序环境不支持 Node.js 文件系统）\r\n\t\t\tif (\r\n\t\t\t\terrorMsg.includes('not node js file system') ||\r\n\t\t\t\terrorMsg.includes('saaa_config.json') ||\r\n\t\t\t\t(errorMsg.includes('readFile') && errorMsg.includes('worker')) ||\r\n\t\t\t\terrorMsg.includes('__invokeHandler__ readFile')\r\n\t\t\t) {\r\n\t\t\t\treturn; // 静默处理\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 其他错误正常显示\r\n\t\t\toriginalError.apply(console, args);\r\n\t\t};\r\n\t\t\r\n\t\t// 捕获全局错误（小程序环境）\r\n\t\tif (typeof uni !== 'undefined') {\r\n\t\t\tuni.onError && uni.onError((error) => {\r\n\t\t\t\tif (!error) return;\r\n\t\t\t\t\r\n\t\t\t\tconst errorStr = typeof error === 'string' ? error : JSON.stringify(error);\r\n\t\t\t\t\r\n\t\t\t\t// 过滤已知的无害错误\r\n\t\t\t\tif (\r\n\t\t\t\t\t(errorStr.includes('WebSocket') && errorStr.includes('mp-weixin')) ||\r\n\t\t\t\t\terrorStr.includes('not node js file system') ||\r\n\t\t\t\t\terrorStr.includes('saaa_config.json') ||\r\n\t\t\t\t\t(errorStr.includes('readFile') && errorStr.includes('worker')) ||\r\n\t\t\t\t\terrorStr.includes('__invokeHandler__ readFile')\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn; // 静默处理\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 其他错误正常处理\r\n\t\t\t\toriginalError('未捕获的错误:', error);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// 捕获全局错误（浏览器环境）\r\n\t\tif (typeof window !== 'undefined') {\r\n\t\t\tconst originalOnError = window.onerror;\r\n\t\t\twindow.onerror = function(message, source, lineno, colno, error) {\r\n\t\t\t\tconst errorMsg = message || '';\r\n\t\t\t\tif (\r\n\t\t\t\t\terrorMsg.includes('not node js file system') ||\r\n\t\t\t\t\terrorMsg.includes('saaa_config.json') ||\r\n\t\t\t\t\t(errorMsg.includes('readFile') && errorMsg.includes('worker')) ||\r\n\t\t\t\t\terrorMsg.includes('__invokeHandler__ readFile')\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn true; // 阻止默认错误处理\r\n\t\t\t\t}\r\n\t\t\t\t// 其他错误正常处理\r\n\t\t\t\tif (originalOnError) {\r\n\t\t\t\t\treturn originalOnError.call(this, message, source, lineno, colno, error);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t}\r\n\t})();\r\n\t\r\n\texport default {\r\n\t\tonLaunch: function() {\r\n\t\t\tconsole.log('App Launch');\r\n\t\t\t\r\n\t\t\t// 应用启动时设置游客状态\r\n\t\t\tthis.setGuestStatus();\r\n\t\t\t\r\n\t\t\t// 直接跳转到首页\r\n\t\t\tuni.reLaunch({\r\n\t\t\t\turl: '/pages/index/index'\r\n\t\t\t});\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\tconsole.log('App Show')\r\n\t\t},\r\n\t\tonHide: function() {\r\n\t\t\tconsole.log('App Hide')\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 设置游客状态\r\n\t\t\tsetGuestStatus() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 检查是否已有登录信息\r\n\t\t\t\t\tconst loginInfo = uni.getStorageSync('login_info');\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 如果没有登录信息，设置游客状态\r\n\t\t\t\t\tif (!loginInfo || !loginInfo.isLoggedIn) {\r\n\t\t\t\t\t\tconst guestUserInfo = {\r\n\t\t\t\t\t\t\tnickName: '游客用户',\r\n\t\t\t\t\t\t\tdisplayName: '游客用户',\r\n\t\t\t\t\t\t\tisGuest: true\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst guestLoginInfo = {\r\n\t\t\t\t\t\t\tisLoggedIn: true,\r\n\t\t\t\t\t\t\tuserInfo: guestUserInfo,\r\n\t\t\t\t\t\t\tisGuest: true,\r\n\t\t\t\t\t\t\tloginTime: new Date().toISOString()\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.setStorageSync('login_info', guestLoginInfo);\r\n\t\t\t\t\t\tconsole.log('已设置游客状态');\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error('设置游客状态失败', e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>","import App from './App'\r\n\r\n// #ifndef VUE3\r\nimport Vue from 'vue'\r\nimport './uni.promisify.adaptor'\r\nVue.config.productionTip = false\r\nApp.mpType = 'app'\r\nconst app = new Vue({\r\n  ...App\r\n})\r\napp.$mount()\r\n// #endif\r\n\r\n// #ifdef VUE3\r\nimport { createSSRApp } from 'vue'\r\nexport function createApp() {\r\n  const app = createSSRApp(App)\r\n  return {\r\n    app\r\n  }\r\n}\r\n// #endif"],"names":["uni","createSSRApp","App"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;CAEE,WAAW;AAEX,QAAM,gBAAgB,QAAQ;AAG9B,UAAQ,QAAQ,YAAY,MAAM;AACjC,UAAM,WAAW,KAAK,KAAK,GAAG;AAG9B,QACC,SAAS,SAAS,sBAAsB,KACxC,SAAS,SAAS,QAAQ,MACzB,SAAS,SAAS,WAAW,KAAK,SAAS,SAAS,MAAM,IAC1D;AACD;AAAA,IACD;AAGA,QACC,SAAS,SAAS,yBAAyB,KAC3C,SAAS,SAAS,kBAAkB,KACnC,SAAS,SAAS,UAAU,KAAK,SAAS,SAAS,QAAQ,KAC5D,SAAS,SAAS,4BAA4B,GAC7C;AACD;AAAA,IACD;AAGA,kBAAc,MAAM,SAAS,IAAI;AAAA;AAIlC,MAAI,OAAOA,cAAI,UAAI,aAAa;AAC/BA,kBAAAA,MAAI,WAAWA,cAAAA,MAAI,QAAQ,CAAC,UAAU;AACrC,UAAI,CAAC;AAAO;AAEZ,YAAM,WAAW,OAAO,UAAU,WAAW,QAAQ,KAAK,UAAU,KAAK;AAGzE,UACE,SAAS,SAAS,WAAW,KAAK,SAAS,SAAS,WAAW,KAChE,SAAS,SAAS,yBAAyB,KAC3C,SAAS,SAAS,kBAAkB,KACnC,SAAS,SAAS,UAAU,KAAK,SAAS,SAAS,QAAQ,KAC5D,SAAS,SAAS,4BAA4B,GAC7C;AACD;AAAA,MACD;AAGA,oBAAc,WAAW,KAAK;AAAA,IAC/B,CAAC;AAAA,EACF;AAGA,MAAI,OAAO,WAAW,aAAa;AAClC,UAAM,kBAAkB,OAAO;AAC/B,WAAO,UAAU,SAAS,SAAS,QAAQ,QAAQ,OAAO,OAAO;AAChE,YAAM,WAAW,WAAW;AAC5B,UACC,SAAS,SAAS,yBAAyB,KAC3C,SAAS,SAAS,kBAAkB,KACnC,SAAS,SAAS,UAAU,KAAK,SAAS,SAAS,QAAQ,KAC5D,SAAS,SAAS,4BAA4B,GAC7C;AACD,eAAO;AAAA,MACR;AAEA,UAAI,iBAAiB;AACpB,eAAO,gBAAgB,KAAK,MAAM,SAAS,QAAQ,QAAQ,OAAO,KAAK;AAAA,MACxE;AACA,aAAO;AAAA;EAET;;AAGD,MAAK,YAAU;AAAA,EACd,UAAU,WAAW;AACpBA,kBAAAA,MAAA,MAAA,OAAA,iBAAY,YAAY;AAGxB,SAAK,eAAc;AAGnBA,kBAAAA,MAAI,SAAS;AAAA,MACZ,KAAK;AAAA,IACN,CAAC;AAAA,EACD;AAAA,EACD,QAAQ,WAAW;AAClBA,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AAAA,EACtB;AAAA,EACD,QAAQ,WAAW;AAClBA,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AAAA,EACtB;AAAA,EACD,SAAS;AAAA;AAAA,IAER,iBAAiB;AAChB,UAAI;AAEH,cAAM,YAAYA,cAAAA,MAAI,eAAe,YAAY;AAGjD,YAAI,CAAC,aAAa,CAAC,UAAU,YAAY;AACxC,gBAAM,gBAAgB;AAAA,YACrB,UAAU;AAAA,YACV,aAAa;AAAA,YACb,SAAS;AAAA;AAGV,gBAAM,iBAAiB;AAAA,YACtB,YAAY;AAAA,YACZ,UAAU;AAAA,YACV,SAAS;AAAA,YACT,YAAW,oBAAI,KAAM,GAAC,YAAY;AAAA;AAGnCA,wBAAAA,MAAI,eAAe,cAAc,cAAc;AAC/CA,wBAAAA,qCAAY,SAAS;AAAA,QACtB;AAAA,MACD,SAAS,GAAG;AACXA,6DAAc,YAAY,CAAC;AAAA,MAC5B;AAAA,IACD;AAAA,EACD;AACD;AC/GM,SAAS,YAAY;AAC1B,QAAM,MAAMC,cAAY,aAACC,SAAG;AAC5B,SAAO;AAAA,IACL;AAAA,EACD;AACH;;;"}