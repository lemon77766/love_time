{"version":3,"file":"index.js","sources":["pages/login/index.vue","D:/softcaree/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <view class=\"login-page\">\r\n    <!-- èƒŒæ™¯å›¾ç‰‡ -->\r\n    <image class=\"bg-image\" src=\"/static/login/beijing.jpg\" mode=\"aspectFill\"></image>\r\n    \r\n    <!-- è£…é¥°æ€§åœ†å½¢ -->\r\n    <view class=\"decoration-circle circle-1\"></view>\r\n    <view class=\"decoration-circle circle-2\"></view>\r\n    <view class=\"decoration-circle circle-3\"></view>\r\n\r\n    <!-- å†…å®¹å±‚ -->\r\n    <view class=\"content-wrapper\">\r\n      <!-- Logo å’Œæ ‡é¢˜ -->\r\n      <view class=\"logo-section\">\r\n        <view class=\"logo-container\">\r\n          <image class=\"logo\" src=\"/static/login/logo.png\" mode=\"aspectFit\" />\r\n          <view class=\"logo-glow\"></view>\r\n        </view>\r\n        <text class=\"app-name\">æ‹ä¸æ—¶å…‰å†Œ</text>\r\n        <text class=\"app-slogan\">è®°å½•æ¯ä¸€ä¸ªçˆ±çš„ç¬é—´</text>\r\n      </view>\r\n\r\n      <!-- ç™»å½•å¡ç‰‡ -->\r\n      <view class=\"login-card\">\r\n        <!-- ç”¨æˆ·ä¿¡æ¯é¢„è§ˆï¼ˆæˆæƒåæ˜¾ç¤ºï¼‰ -->\r\n        <view v-if=\"userInfo.nickName\" class=\"user-preview\">\r\n          <image class=\"avatar\" :src=\"userInfo.avatarUrl\" mode=\"aspectFill\" />\r\n          <text class=\"nickname\">{{ userInfo.nickName }}</text>\r\n        </view>\r\n\r\n        <!-- ç™»å½•æŒ‰é’® -->\r\n        <button \r\n          v-if=\"!isLoggedIn\" \r\n          class=\"login-btn\" \r\n          @click=\"handleWxLogin\"\r\n          :loading=\"isLoading\"\r\n          :class=\"{ 'disabled': !agreedToPrivacy }\"\r\n        >\r\n          <view class=\"btn-content\">\r\n            <text class=\"btn-icon\">ğŸ’•</text>\r\n            <text class=\"btn-text\">å¾®ä¿¡æˆæƒç™»å½•</text>\r\n          </view>\r\n        </button>\r\n\r\n        <!-- æ¸¸å®¢ç™»å½•æŒ‰é’® -->\r\n        <button \r\n          v-if=\"!isLoggedIn\" \r\n          class=\"guest-btn\" \r\n          @click=\"handleGuestLogin\"\r\n          :class=\"{ 'disabled': !agreedToPrivacy }\"\r\n        >\r\n          <view class=\"btn-content\">\r\n            <text class=\"btn-icon\">âœ¨</text>\r\n            <text class=\"btn-text\">æ¸¸å®¢ç™»å½•</text>\r\n          </view>\r\n        </button>\r\n\r\n        <!-- æµè§ˆåŠŸèƒ½æç¤º -->\r\n        <view class=\"browse-tip\" @click=\"browseFeatures\">\r\n          <text class=\"tip-icon\">ğŸ‘€</text>\r\n          <text class=\"tip-text\">å…ˆæµè§ˆåŠŸèƒ½</text>\r\n        </view>\r\n\r\n        <!-- éšç§åè®®å¤é€‰æ¡† -->\r\n        <view class=\"privacy-section\">\r\n          <label class=\"checkbox-wrapper\" @click=\"togglePrivacyAgreement\">\r\n            <view class=\"custom-checkbox\" :class=\"{ checked: agreedToPrivacy }\">\r\n              <view class=\"checkmark\" v-if=\"agreedToPrivacy\"></view>\r\n            </view>\r\n            <text class=\"privacy-text\">æˆ‘å·²é˜…è¯»å¹¶åŒæ„</text>\r\n          </label>\r\n          <text class=\"link-text\" @click=\"showUserAgreement\">ã€Šç”¨æˆ·åè®®ã€‹</text>\r\n          <text class=\"privacy-text\">å’Œ</text>\r\n          <text class=\"link-text\" @click=\"showPrivacyPolicy\">ã€Šéšç§æ”¿ç­–ã€‹</text>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- åº•éƒ¨æç¤º -->\r\n      <view class=\"footer\">\r\n        <text class=\"footer-text\">ç™»å½•åå¯äº«å—å®Œæ•´åŠŸèƒ½å¹¶ä¿å­˜æ•°æ®</text>\r\n      </view>\r\n    </view>\r\n      <!-- ç”¨æˆ·åè®®å¼¹çª— -->\r\n    <view class=\"modal-overlay\" v-if=\"showUserAgreementModal\">\r\n      <view class=\"modal-content\">\r\n        <view class=\"modal-header\">\r\n          <text class=\"modal-title\">ç”¨æˆ·åè®®</text>\r\n          <text class=\"modal-close\" @click=\"closeUserAgreementModal\">âœ•</text>\r\n        </view>\r\n        <scroll-view class=\"modal-body\" scroll-y=\"true\">\r\n          <view class=\"agreement-content\">\r\n            <rich-text :nodes=\"userAgreementContent\"></rich-text>\r\n          </view>\r\n        </scroll-view>\r\n        <view class=\"modal-footer\">\r\n          <button class=\"btn-confirm\" @click=\"closeUserAgreementModal\">ç¡®å®š</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- éšç§æ”¿ç­–å¼¹çª— -->\r\n    <view class=\"modal-overlay\" v-if=\"showPrivacyPolicyModal\">\r\n      <view class=\"modal-content\">\r\n        <view class=\"modal-header\">\r\n          <text class=\"modal-title\">éšç§æ”¿ç­–</text>\r\n          <text class=\"modal-close\" @click=\"closePrivacyPolicyModal\">âœ•</text>\r\n        </view>\r\n        <scroll-view class=\"modal-body\" scroll-y=\"true\">\r\n          <view class=\"agreement-content\">\r\n            <rich-text :nodes=\"privacyPolicyContent\"></rich-text>\r\n          </view>\r\n        </scroll-view>\r\n        <view class=\"modal-footer\">\r\n          <button class=\"btn-confirm\" @click=\"closePrivacyPolicyModal\">ç¡®å®š</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport http from '@/utils/http.js';\r\nimport config from '@/utils/config.js';\r\nimport { isGuestUser } from '../../utils/auth.js';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isLoggedIn: false,\r\n      isLoading: false,\r\n      agreedToPrivacy: false, // æ˜¯å¦åŒæ„éšç§åè®®\r\n      showUserAgreementModal: false, // æ˜¾ç¤ºç”¨æˆ·åè®®å¼¹çª—\r\n      showPrivacyPolicyModal: false, // æ˜¾ç¤ºéšç§æ”¿ç­–å¼¹çª—\r\n      userInfo: {\r\n        nickName: '',\r\n        avatarUrl: ''\r\n      },\r\n      userAgreementContent: `\r\n        <h3>ç”¨æˆ·æœåŠ¡åè®®</h3>\r\n        <p>æ¬¢è¿ä½¿ç”¨\"æ‹ä¸æ—¶å…‰å†Œ\"å°ç¨‹åºï¼ˆä»¥ä¸‹ç®€ç§°\"æœ¬åº”ç”¨\"ï¼‰ã€‚åœ¨æ‚¨ä½¿ç”¨æœ¬åº”ç”¨ä¹‹å‰ï¼Œè¯·ä»”ç»†é˜…è¯»ä»¥ä¸‹æ¡æ¬¾ã€‚</p>\r\n        \r\n        <h4>ä¸€ã€æœåŠ¡æ¡æ¬¾çš„ç¡®è®¤å’Œæ¥çº³</h4>\r\n        <p>æœ¬åº”ç”¨å„é¡¹æœåŠ¡çš„æ‰€æœ‰æƒå’Œè¿ä½œæƒå½’å¼€å‘è€…æ‰€æœ‰ã€‚ç”¨æˆ·åœ¨ä½¿ç”¨æœ¬åº”ç”¨æ—¶ï¼Œå¿…é¡»éµå®ˆä»¥ä¸‹æœåŠ¡æ¡æ¬¾ã€‚</p>\r\n        \r\n        <h4>äºŒã€æœåŠ¡è¯´æ˜</h4>\r\n        <p>æœ¬åº”ç”¨ä¸ºæƒ…ä¾£ç”¨æˆ·æä¾›è®°å½•å’Œåˆ†äº«ç¾å¥½æ—¶å…‰çš„æœåŠ¡ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p>\r\n        <ul>\r\n          <li>è®°å½•æ‹çˆ±è½¨è¿¹</li>\r\n          <li>æ‹ä¸é—®ç­”äº’åŠ¨</li>\r\n          <li>æœªæ¥æƒ…ä¹¦åŠŸèƒ½</li>\r\n          <li>çˆ±å¿ƒç…§ç‰‡å¢™</li>\r\n          <li>ä¸€ç™¾ä»¶å°äº‹æŒ‘æˆ˜</li>\r\n        </ul>\r\n        \r\n        <h4>ä¸‰ã€ç”¨æˆ·è¡Œä¸ºè§„èŒƒ</h4>\r\n        <p>ç”¨æˆ·åœ¨ä½¿ç”¨æœ¬æœåŠ¡æ—¶ï¼Œåº”éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ï¼Œä¸å¾—ï¼š</p>\r\n        <ul>\r\n          <li>ä¸Šä¼ è¿æ³•å†…å®¹</li>\r\n          <li>ä¾µçŠ¯ä»–äººåˆæ³•æƒç›Š</li>\r\n          <li>è¿›è¡Œä»»ä½•å±å®³ç½‘ç»œå®‰å…¨çš„è¡Œä¸º</li>\r\n        </ul>\r\n        \r\n        <h4>å››ã€çŸ¥è¯†äº§æƒ</h4>\r\n        <p>æœ¬åº”ç”¨çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ï¼Œå‡å—çŸ¥è¯†äº§æƒæ³•å¾‹æ³•è§„ä¿æŠ¤ã€‚</p>\r\n        \r\n        <h4>äº”ã€å…è´£å£°æ˜</h4>\r\n        <p>æœ¬åº”ç”¨ä»…æä¾›å¹³å°æœåŠ¡ï¼Œä¸å¯¹ç”¨æˆ·é—´çš„è¡Œä¸ºæ‰¿æ‹…è´£ä»»ã€‚</p>\r\n        \r\n        <h4>å…­ã€åè®®ä¿®æ”¹</h4>\r\n        <p>å¼€å‘è€…æœ‰æƒåœ¨å¿…è¦æ—¶ä¿®æ”¹æœåŠ¡æ¡æ¬¾ï¼Œä¿®æ”¹åçš„æ¡æ¬¾ä¸€ç»å…¬å¸ƒå³ç”Ÿæ•ˆã€‚</p>\r\n        \r\n        <h4>ä¸ƒã€å…¶ä»–</h4>\r\n        <p>æœ¬åè®®çš„è§£é‡Šæƒå½’å¼€å‘è€…æ‰€æœ‰ã€‚</p>\r\n      `,\r\n      privacyPolicyContent: `\r\n        <h3>éšç§æ”¿ç­–</h3>\r\n        <p>æœ¬åº”ç”¨å°Šé‡å¹¶ä¿æŠ¤æ‰€æœ‰ä½¿ç”¨æœåŠ¡ç”¨æˆ·çš„ä¸ªäººéšç§æƒã€‚ä¸ºäº†ç»™æ‚¨æä¾›æ›´å‡†ç¡®ã€æ›´æœ‰ä¸ªæ€§åŒ–çš„æœåŠ¡ï¼Œ\"æ‹ä¸æ—¶å…‰å†Œ\"å°ç¨‹åºï¼ˆä»¥ä¸‹ç®€ç§°\"æœ¬åº”ç”¨\"ï¼‰ä¼šæŒ‰ç…§æœ¬éšç§æƒæ”¿ç­–çš„è§„å®šä½¿ç”¨å’ŒæŠ«éœ²æ‚¨çš„ä¸ªäººä¿¡æ¯ã€‚</p>\r\n        \r\n        <h4>ä¸€ã€æ”¶é›†çš„ä¿¡æ¯</h4>\r\n        <p>ä¸ºæä¾›æœåŠ¡ï¼Œæˆ‘ä»¬å¯èƒ½æ”¶é›†ä»¥ä¸‹ä¿¡æ¯ï¼š</p>\r\n        <ul>\r\n          <li>æ‚¨æä¾›çš„æ˜µç§°ã€å¤´åƒç­‰åŸºæœ¬ä¿¡æ¯</li>\r\n          <li>æ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä½ç½®ä¿¡æ¯</li>\r\n          <li>æ‚¨ä¸Šä¼ çš„ç…§ç‰‡ã€æ–‡å­—ç­‰å†…å®¹</li>\r\n          <li>è®¾å¤‡ä¿¡æ¯ï¼ˆå¦‚è®¾å¤‡å‹å·ã€æ“ä½œç³»ç»Ÿç‰ˆæœ¬ç­‰ï¼‰</li>\r\n        </ul>\r\n        \r\n        <h4>äºŒã€ä¿¡æ¯çš„ä½¿ç”¨</h4>\r\n        <p>æˆ‘ä»¬æ”¶é›†çš„ä¿¡æ¯å°†ç”¨äºï¼š</p>\r\n        <ul>\r\n          <li>æä¾›ã€ç»´æŠ¤å’Œæ”¹å–„æˆ‘ä»¬çš„æœåŠ¡</li>\r\n          <li>å¼€å‘æ–°çš„æœåŠ¡</li>\r\n          <li>å‘æ‚¨å‘é€ç›¸å…³é€šçŸ¥</li>\r\n        </ul>\r\n        \r\n        <h4>ä¸‰ã€ä¿¡æ¯çš„ä¿æŠ¤</h4>\r\n        <p>æˆ‘ä»¬é‡‡å–åˆç†çš„å®‰å…¨æªæ–½ä¿æŠ¤æ‚¨çš„ä¸ªäººä¿¡æ¯ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ã€è¯¯ç”¨ã€æœªç»æˆæƒçš„è®¿é—®ã€‚</p>\r\n        \r\n        <h4>å››ã€ä¿¡æ¯çš„å…±äº«</h4>\r\n        <p>æœªç»æ‚¨åŒæ„ï¼Œæˆ‘ä»¬ä¸ä¼šä¸ä»»ä½•æ— å…³ç¬¬ä¸‰æ–¹å…±äº«æ‚¨çš„ä¸ªäººä¿¡æ¯ï¼Œé™¤éï¼š</p>\r\n        <ul>\r\n          <li>è·å¾—æ‚¨çš„æ˜ç¡®åŒæ„</li>\r\n          <li>æ ¹æ®æ³•å¾‹æ³•è§„æˆ–æ”¿åºœä¸»ç®¡éƒ¨é—¨çš„è¦æ±‚</li>\r\n          <li>ä¸ºç»´æŠ¤ç¤¾ä¼šå…¬å…±åˆ©ç›Š</li>\r\n        </ul>\r\n        \r\n        <h4>äº”ã€Cookieçš„ä½¿ç”¨</h4>\r\n        <p>ä¸ºæä¾›æ›´å¥½çš„æœåŠ¡ï¼Œæˆ‘ä»¬å¯èƒ½ä½¿ç”¨Cookieæ¥è®°å½•æ‚¨çš„åå¥½è®¾ç½®ã€‚</p>\r\n        \r\n        <h4>å…­ã€æœªæˆå¹´äººéšç§ä¿æŠ¤</h4>\r\n        <p>æˆ‘ä»¬éå¸¸é‡è§†å¯¹æœªæˆå¹´äººä¸ªäººä¿¡æ¯çš„ä¿æŠ¤ã€‚è‹¥æ‚¨æ˜¯18å‘¨å²ä»¥ä¸‹çš„æœªæˆå¹´äººï¼Œåœ¨ä½¿ç”¨æˆ‘ä»¬çš„äº§å“å’ŒæœåŠ¡å‰ï¼Œåº”è¯·æ‚¨çš„ç›‘æŠ¤äººä»”ç»†é˜…è¯»æœ¬éšç§æ”¿ç­–ã€‚</p>\r\n        \r\n        <h4>ä¸ƒã€éšç§æ”¿ç­–çš„æ›´æ–°</h4>\r\n        <p>æˆ‘ä»¬å¯èƒ½ä¼šé€‚æ—¶å¯¹æœ¬éšç§æ”¿ç­–è¿›è¡Œæ›´æ–°ï¼Œæ›´æ–°åçš„éšç§æ”¿ç­–ä¸€æ—¦å…¬å¸ƒå³ç”Ÿæ•ˆã€‚</p>\r\n        \r\n        <h4>å…«ã€è”ç³»æˆ‘ä»¬</h4>\r\n        <p>å¦‚æœæ‚¨å¯¹æœ¬éšç§æ”¿ç­–æœ‰ä»»ä½•ç–‘é—®ï¼Œå¯é€šè¿‡å°ç¨‹åºå†…çš„åé¦ˆåŠŸèƒ½ä¸æˆ‘ä»¬è”ç³»ã€‚</p>\r\n      `\r\n    };\r\n  },\r\n  onLoad() {\r\n    // æ£€æŸ¥æ˜¯å¦å·²ç™»å½•\r\n    this.checkLoginStatus();\r\n    // åŠ è½½ç”¨æˆ·ä¿¡æ¯\r\n    this.loadUserInfo();\r\n  },\r\n  methods: {\r\n    // åŠ è½½ç”¨æˆ·ä¿¡æ¯\r\n    loadUserInfo() {\r\n      try {\r\n        const loginInfo = uni.getStorageSync('login_info');\r\n        if (loginInfo && loginInfo.userInfo) {\r\n          this.userInfo = { ...loginInfo.userInfo };\r\n        }\r\n      } catch (e) {\r\n        console.error('åŠ è½½ç”¨æˆ·ä¿¡æ¯å¤±è´¥', e);\r\n      }\r\n    },\r\n    \r\n    // åˆ‡æ¢éšç§åè®®åŒæ„çŠ¶æ€\r\n    togglePrivacyAgreement() {\r\n      this.agreedToPrivacy = !this.agreedToPrivacy;\r\n    },\r\n    \r\n    // æ˜¾ç¤ºç”¨æˆ·åè®®å¼¹çª—\r\n    showUserAgreement() {\r\n      this.showUserAgreementModal = true;\r\n    },\r\n    \r\n    // å…³é—­ç”¨æˆ·åè®®å¼¹çª—\r\n    closeUserAgreementModal() {\r\n      this.showUserAgreementModal = false;\r\n    },\r\n    \r\n    // æ˜¾ç¤ºéšç§æ”¿ç­–å¼¹çª—\r\n    showPrivacyPolicy() {\r\n      this.showPrivacyPolicyModal = true;\r\n    },\r\n    \r\n    // å…³é—­éšç§æ”¿ç­–å¼¹çª—\r\n    closePrivacyPolicyModal() {\r\n      this.showPrivacyPolicyModal = false;\r\n    },\r\n    \r\n    // æµè§ˆåŠŸèƒ½\r\n    browseFeatures() {\r\n      // ç›´æ¥è·³è½¬åˆ°é¦–é¡µï¼Œå…è®¸ç”¨æˆ·å…ˆæµè§ˆåŠŸèƒ½\r\n      uni.reLaunch({\r\n        url: '/pages/index/index'\r\n      });\r\n    },\r\n    \r\n    // æ£€æŸ¥ç™»å½•çŠ¶æ€\r\n    checkLoginStatus() {\r\n      try {\r\n        const loginInfo = uni.getStorageSync('login_info');\r\n        // æ£€æŸ¥ç™»å½•ä¿¡æ¯æ˜¯å¦å­˜åœ¨ï¼Œä¸”åŒ…å«æœ‰æ•ˆçš„token\r\n        const hasToken = loginInfo && (\r\n          (loginInfo.token && loginInfo.token.trim()) ||\r\n          (loginInfo.data?.token && loginInfo.data.token.trim()) ||\r\n          (loginInfo.accessToken && loginInfo.accessToken.trim())\r\n        );\r\n        \r\n        if (loginInfo && loginInfo.isLoggedIn && hasToken && !loginInfo.isGuest) {\r\n          // æ³¨æ„ï¼šè¿™é‡Œåªæ£€æŸ¥æœ¬åœ°æ˜¯å¦æœ‰tokenï¼Œä¸éªŒè¯tokenæ˜¯å¦æœ‰æ•ˆ\r\n          // å¦‚æœtokenå·²è¿‡æœŸï¼Œä¼šåœ¨åç»­APIè¯·æ±‚æ—¶è¢«åç«¯è¿”å›401ï¼Œç„¶åç”±handleUnauthorizedå¤„ç†\r\n          console.log('æ£€æµ‹åˆ°æœ¬åœ°ç™»å½•ä¿¡æ¯ï¼Œè‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µ');\r\n          console.log('âš ï¸ æç¤ºï¼šå¦‚æœtokenå·²è¿‡æœŸï¼Œå°†åœ¨åç»­è¯·æ±‚æ—¶è‡ªåŠ¨å¤„ç†');\r\n          this.isLoggedIn = true;\r\n          this.userInfo = loginInfo.userInfo || {};\r\n          // âœ… ç«‹å³è·³è½¬åˆ°é¦–é¡µï¼Œä¸æ˜¾ç¤ºç™»å½•é¡µé¢\r\n          // å¦‚æœtokenå·²è¿‡æœŸï¼Œä¼šåœ¨é¦–é¡µçš„APIè¯·æ±‚æ—¶è¢«æ£€æµ‹åˆ°å¹¶å¤„ç†\r\n          setTimeout(() => {\r\n            uni.reLaunch({\r\n              url: '/pages/index/index'\r\n            });\r\n          }, 300);\r\n        } else if (loginInfo && loginInfo.isLoggedIn && !hasToken) {\r\n          // ç™»å½•çŠ¶æ€ä¸ºtrueä½†tokenç¼ºå¤±ï¼Œæ¸…é™¤æ— æ•ˆçš„ç™»å½•ä¿¡æ¯\r\n          console.warn('âš ï¸ æ£€æµ‹åˆ°æ— æ•ˆçš„ç™»å½•ä¿¡æ¯ï¼ˆç¼ºå°‘tokenï¼‰ï¼Œæ­£åœ¨æ¸…é™¤...');\r\n          uni.removeStorageSync('login_info');\r\n          this.isLoggedIn = false;\r\n          this.userInfo = {};\r\n          console.warn('âœ… å·²æ¸…é™¤æ— æ•ˆçš„ç™»å½•ä¿¡æ¯ï¼Œè¯·é‡æ–°ç™»å½•');\r\n        }\r\n      } catch (e) {\r\n        console.error('æ£€æŸ¥ç™»å½•çŠ¶æ€å¤±è´¥', e);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * æ¸¸å®¢ç™»å½•å¤„ç†\r\n     * æ— éœ€æˆæƒï¼Œç›´æ¥ä½¿ç”¨é»˜è®¤ç”¨æˆ·ä¿¡æ¯è¿›å…¥åº”ç”¨\r\n     */\r\n    handleGuestLogin() {\r\n      // æ£€æŸ¥æ˜¯å¦åŒæ„éšç§åè®®\r\n      if (!this.agreedToPrivacy) {\r\n        uni.showToast({\r\n          title: 'è¯·å…ˆé˜…è¯»å¹¶åŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–',\r\n          icon: 'none',\r\n          duration: 2000\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // åˆ›å»ºæ¸¸å®¢ç”¨æˆ·ä¿¡æ¯\r\n      const guestUserInfo = {\r\n        nickName: 'æ¸¸å®¢ç”¨æˆ·',\r\n        avatarUrl: '/static/zhuye/smile.png',\r\n        displayName: 'æ¸¸å®¢ç”¨æˆ·',\r\n        isGuest: true\r\n      };\r\n\r\n      // ä¿å­˜æ¸¸å®¢ç™»å½•ä¿¡æ¯\r\n      const loginInfo = {\r\n        isLoggedIn: true,\r\n        userInfo: guestUserInfo,\r\n        isGuest: true, // æ ‡è®°ä¸ºæ¸¸å®¢ç™»å½•\r\n        loginTime: new Date().toISOString()\r\n      };\r\n      \r\n      try {\r\n        uni.setStorageSync('login_info', loginInfo);\r\n        \r\n        // æç¤ºç™»å½•æˆåŠŸ\r\n        uni.showToast({\r\n          title: 'æ¸¸å®¢ç™»å½•æˆåŠŸ',\r\n          icon: 'success',\r\n          duration: 1500\r\n        });\r\n\r\n        // å»¶è¿Ÿè·³è½¬åˆ°é¦–é¡µ\r\n        setTimeout(() => {\r\n          this.enterApp();\r\n        }, 1500);\r\n        \r\n      } catch (error) {\r\n        console.error('æ¸¸å®¢ç™»å½•å¤±è´¥', error);\r\n        uni.showToast({\r\n          title: 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n\r\n    /**\r\n     * å¾®ä¿¡æˆæƒç™»å½•ä¸»æµç¨‹\r\n     * æµç¨‹è¯´æ˜ï¼š\r\n     * 1. è°ƒç”¨ uni.getUserProfile è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆæ˜µç§°ã€å¤´åƒï¼‰- å¿…é¡»ç”±ç”¨æˆ·ç‚¹å‡»ç›´æ¥è§¦å‘\r\n     * 2. è°ƒç”¨ wx.login è·å–ä¸´æ—¶ç™»å½•å‡­è¯ code\r\n     * 3. å°è¯•è°ƒç”¨åç«¯ç™»å½•APIï¼Œå¦‚æœå¤±è´¥åˆ™ä½¿ç”¨æ¨¡æ‹Ÿç™»å½•\r\n     * 4. å‰ç«¯ä¿å­˜ç™»å½•çŠ¶æ€å’Œç”¨æˆ·ä¿¡æ¯\r\n     * 5. ç›´æ¥è·³è½¬åˆ°é¦–é¡µ\r\n     */\r\n    async handleWxLogin() {\r\n      // æ£€æŸ¥æ˜¯å¦åŒæ„éšç§åè®®\r\n      if (!this.agreedToPrivacy) {\r\n        uni.showToast({\r\n          title: 'è¯·å…ˆé˜…è¯»å¹¶åŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–',\r\n          icon: 'none',\r\n          duration: 2000\r\n        });\r\n        return;\r\n      }\r\n      \r\n      this.isLoading = true;\r\n      try {\r\n        // 1. è·å–å¾®ä¿¡ç”¨æˆ·åŸºç¡€èµ„æ–™\r\n        const userProfile = await uni.getUserProfile({\r\n          desc: 'ç”¨äºå®Œå–„ç”¨æˆ·èµ„æ–™'\r\n        });\r\n        \r\n        // 2. è·å–å¾®ä¿¡ç™»å½•code\r\n        const code = await this.getWxLoginCode();\r\n\r\n        // 3. å°è¯•è°ƒç”¨åç«¯ç™»å½•APIï¼Œå¦‚æœè¶…æ—¶åˆ™é‡è¯•\r\n        let loginResult;\r\n        let retryCount = 0;\r\n        const maxRetries = 3;\r\n        \r\n        while (retryCount < maxRetries) {\r\n          try {\r\n            loginResult = await http.post(config.API.LOGIN.WECHAT, {\r\n              code: code,\r\n              userInfo: userProfile.userInfo\r\n            });\r\n            // æˆåŠŸåˆ™è·³å‡ºå¾ªç¯\r\n            break;\r\n          } catch (apiError) {\r\n            console.error(`ç™»å½•APIè°ƒç”¨å¤±è´¥ (ç¬¬${retryCount + 1}æ¬¡)`, apiError);\r\n            retryCount++;\r\n            \r\n            if (retryCount >= maxRetries) {\r\n              // æœ€åä¸€æ¬¡é‡è¯•å¤±è´¥ï¼Œä½¿ç”¨æ¨¡æ‹Ÿç™»å½•\r\n              console.warn('æ‰€æœ‰é‡è¯•éƒ½å¤±è´¥ï¼Œä½¿ç”¨æ¨¡æ‹Ÿç™»å½•');\r\n              loginResult = this.createMockLoginResult(code, userProfile.userInfo);\r\n              \r\n              // æç¤ºç”¨æˆ·åç«¯è¿æ¥é—®é¢˜\r\n              uni.showToast({\r\n                title: 'åç«¯æœåŠ¡è¿æ¥å¤±è´¥ï¼Œä½¿ç”¨ç¦»çº¿æ¨¡å¼',\r\n                icon: 'none',\r\n                duration: 3000\r\n              });\r\n            } else {\r\n              // ç­‰å¾…1ç§’åé‡è¯•\r\n              await new Promise(resolve => setTimeout(resolve, 1000));\r\n            }\r\n          }\r\n        }\r\n\r\n        // 4. å¤„ç†ç™»å½•ç»“æœ\r\n        if (loginResult && (loginResult.code === 200 || loginResult.success)) {\r\n          // ç™»å½•æˆåŠŸ\r\n          const userData = loginResult.data || loginResult.result || {};\r\n          \r\n          // æ„é€ ç”¨æˆ·ä¿¡æ¯å¯¹è±¡\r\n          const userInfo = {\r\n            nickName: userProfile.userInfo.nickName,\r\n            avatarUrl: userProfile.userInfo.avatarUrl,\r\n            displayName: userData.displayName || userProfile.userInfo.nickName,\r\n            displayAvatar: userData.displayAvatar || userProfile.userInfo.avatarUrl,\r\n            ...userData\r\n          };\r\n          \r\n          // ä¿å­˜ç™»å½•ä¿¡æ¯\r\n          const loginInfo = {\r\n            isLoggedIn: true,\r\n            userInfo: userInfo,\r\n            token: userData.token || userData.accessToken || '',\r\n            loginTime: new Date().toISOString(),\r\n            isGuest: false\r\n          };\r\n          \r\n          uni.setStorageSync('login_info', loginInfo);\r\n          \r\n          // æç¤ºç™»å½•æˆåŠŸ\r\n          uni.showToast({\r\n            title: 'ç™»å½•æˆåŠŸ',\r\n            icon: 'success',\r\n            duration: 1500\r\n          });\r\n          \r\n          // å»¶è¿Ÿè·³è½¬åˆ°é¦–é¡µ\r\n          setTimeout(() => {\r\n            this.enterApp();\r\n          }, 1500);\r\n        } else {\r\n          // ç™»å½•å¤±è´¥\r\n          console.error('ç™»å½•å¤±è´¥', loginResult);\r\n          uni.showToast({\r\n            title: loginResult?.message || 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n            icon: 'none',\r\n            duration: 2000\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('å¾®ä¿¡ç™»å½•å¤±è´¥', error);\r\n        uni.showToast({\r\n          title: 'ç™»å½•å¼‚å¸¸ï¼Œè¯·é‡è¯•',\r\n          icon: 'none',\r\n          duration: 2000\r\n        });\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    \r\n    // è·å–å¾®ä¿¡ç™»å½•code\r\n    getWxLoginCode() {\r\n      return new Promise((resolve, reject) => {\r\n        wx.login({\r\n          success: (res) => {\r\n            if (res.code) {\r\n              resolve(res.code);\r\n            } else {\r\n              reject(new Error('è·å–å¾®ä¿¡ç™»å½•codeå¤±è´¥'));\r\n            }\r\n          },\r\n          fail: (err) => {\r\n            reject(err);\r\n          }\r\n        });\r\n      });\r\n    },\r\n    \r\n    // åˆ›å»ºæ¨¡æ‹Ÿç™»å½•ç»“æœï¼ˆç”¨äºAPIè°ƒç”¨å¤±è´¥æ—¶ï¼‰\r\n    createMockLoginResult(code, userInfo) {\r\n      return {\r\n        code: 200,\r\n        success: true,\r\n        message: 'ç™»å½•æˆåŠŸ',\r\n        data: {\r\n          userId: 'mock_' + Date.now(),\r\n          token: 'mock_token_' + Date.now(),\r\n          nickName: userInfo.nickName,\r\n          avatarUrl: userInfo.avatarUrl,\r\n          displayName: userInfo.nickName,\r\n          displayAvatar: userInfo.avatarUrl\r\n        }\r\n      };\r\n    },\r\n    \r\n    // è¿›å…¥åº”ç”¨ï¼ˆè·³è½¬åˆ°é¦–é¡µï¼‰\r\n    enterApp() {\r\n      // å†æ¬¡ç¡®è®¤tokenå·²ä¿å­˜\r\n      const savedInfo = uni.getStorageSync('login_info');\r\n      if (savedInfo && savedInfo.token) {\r\n        uni.reLaunch({\r\n          url: '/pages/index/index'\r\n        });\r\n      } else {\r\n        console.error('Tokenä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•');\r\n        uni.showToast({\r\n          title: 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n          icon: 'error'\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.login-page {\r\n  min-height: 100vh;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n/* èƒŒæ™¯å›¾ç‰‡å±‚ */\r\n.bg-image {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 0;\r\n}\r\n\r\n/* è£…é¥°æ€§åœ†å½¢ */\r\n.decoration-circle {\r\n  position: absolute;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  backdrop-filter: blur(10px);\r\n  z-index: 1;\r\n  animation: float 6s ease-in-out infinite;\r\n}\r\n\r\n.circle-1 {\r\n  width: 300rpx;\r\n  height: 300rpx;\r\n  top: -100rpx;\r\n  right: -50rpx;\r\n  animation-delay: 0s;\r\n}\r\n\r\n.circle-2 {\r\n  width: 200rpx;\r\n  height: 200rpx;\r\n  bottom: 100rpx;\r\n  left: -50rpx;\r\n  animation-delay: 2s;\r\n}\r\n\r\n.circle-3 {\r\n  width: 150rpx;\r\n  height: 150rpx;\r\n  top: 50%;\r\n  right: 10%;\r\n  animation-delay: 4s;\r\n}\r\n\r\n@keyframes float {\r\n  0%, 100% {\r\n    transform: translateY(0) scale(1);\r\n    opacity: 0.6;\r\n  }\r\n  50% {\r\n    transform: translateY(-30rpx) scale(1.1);\r\n    opacity: 0.8;\r\n  }\r\n}\r\n\r\n/* å†…å®¹å±‚ */\r\n.content-wrapper {\r\n  position: relative;\r\n  z-index: 2;\r\n  min-height: 100vh;\r\n  padding: 60rpx 40rpx 40rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n/* Logo åŒºåŸŸ */\r\n.logo-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-bottom: 100rpx;\r\n  animation: fadeInDown 0.8s ease-out;\r\n}\r\n\r\n.logo-container {\r\n  position: relative;\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.logo {\r\n  width: 200rpx;\r\n  height: 200rpx;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  position: relative;\r\n  z-index: 2;\r\n  box-shadow: 0 20rpx 60rpx rgba(255, 224, 179, 0.4);\r\n  animation: pulse 2s ease-in-out infinite;\r\n}\r\n\r\n.logo-glow {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 220rpx;\r\n  height: 220rpx;\r\n  border-radius: 50%;\r\n  background: radial-gradient(circle, rgba(255, 224, 179, 0.3) 0%, transparent 70%);\r\n  animation: glow 2s ease-in-out infinite;\r\n  z-index: 1;\r\n}\r\n\r\n@keyframes pulse {\r\n  0%, 100% {\r\n    transform: scale(1);\r\n  }\r\n  50% {\r\n    transform: scale(1.05);\r\n  }\r\n}\r\n\r\n@keyframes glow {\r\n  0%, 100% {\r\n    opacity: 0.5;\r\n    transform: translate(-50%, -50%) scale(1);\r\n  }\r\n  50% {\r\n    opacity: 0.8;\r\n    transform: translate(-50%, -50%) scale(1.1);\r\n  }\r\n}\r\n\r\n@keyframes fadeInDown {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(-30rpx);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n.app-name {\r\n  font-size: 56rpx;\r\n  font-weight: 700;\r\n  color: #FFFFFF;\r\n  margin-bottom: 20rpx;\r\n  text-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.2);\r\n  letter-spacing: 2rpx;\r\n}\r\n\r\n.app-slogan {\r\n  font-size: 28rpx;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  text-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.15);\r\n  font-weight: 400;\r\n}\r\n\r\n/* ç™»å½•å¡ç‰‡ */\r\n.login-card {\r\n  width: 100%;\r\n  max-width: 600rpx;\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: 32rpx;\r\n  padding: 48rpx 40rpx;\r\n  box-shadow: 0 16rpx 48rpx rgba(0, 0, 0, 0.12);\r\n  backdrop-filter: blur(20px);\r\n  animation: fadeInUp 0.8s ease-out 0.2s both;\r\n  border: 1.5rpx solid rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n@keyframes fadeInUp {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(30rpx);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n/* ç”¨æˆ·ä¿¡æ¯é¢„è§ˆ */\r\n.user-preview {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-bottom: 50rpx;\r\n}\r\n\r\n.avatar {\r\n  width: 140rpx;\r\n  height: 140rpx;\r\n  border-radius: 70rpx;\r\n  border: 4rpx solid #FFD699;\r\n  margin-bottom: 24rpx;\r\n  box-shadow: 0 8rpx 20rpx rgba(255, 224, 179, 0.3);\r\n}\r\n\r\n.nickname {\r\n  font-size: 32rpx;\r\n  color: #333;\r\n  font-weight: 600;\r\n}\r\n\r\n/* ç™»å½•æŒ‰é’® */\r\n.login-btn, .guest-btn {\r\n  width: 100%;\r\n  border-radius: 24rpx;\r\n  padding: 0;\r\n  margin-bottom: 20rpx;\r\n  border: none;\r\n  overflow: hidden;\r\n  position: relative;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.login-btn::after, .guest-btn::after {\r\n  border: none;\r\n}\r\n\r\n.btn-content {\r\n  width: 100%;\r\n  padding: 24rpx 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 12rpx;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.login-btn {\r\n  background: linear-gradient(135deg, #FFE0B3 0%, #FFD699 100%);\r\n  box-shadow: 0 8rpx 24rpx rgba(255, 224, 179, 0.35);\r\n}\r\n\r\n.login-btn:active {\r\n  transform: scale(0.97);\r\n  box-shadow: 0 4rpx 16rpx rgba(255, 224, 179, 0.3);\r\n}\r\n\r\n.login-btn.disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* æ¸¸å®¢ç™»å½•æŒ‰é’®æ ·å¼ */\r\n.guest-btn {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border: 1.5rpx solid rgba(255, 224, 179, 0.5);\r\n  box-shadow: 0 4rpx 16rpx rgba(255, 224, 179, 0.15);\r\n}\r\n\r\n.guest-btn:active {\r\n  transform: scale(0.97);\r\n  background: rgba(255, 255, 255, 0.9);\r\n  border-color: rgba(255, 224, 179, 0.6);\r\n}\r\n\r\n.guest-btn.disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-icon {\r\n  font-size: 28rpx;\r\n  line-height: 1;\r\n}\r\n\r\n.btn-text {\r\n  font-size: 28rpx;\r\n  font-weight: 500;\r\n  color: #FFFFFF;\r\n  letter-spacing: 0.5rpx;\r\n}\r\n\r\n.guest-btn .btn-text {\r\n  color: #FFD699;\r\n  font-weight: 500;\r\n}\r\n\r\n/* æµè§ˆåŠŸèƒ½æç¤º */\r\n.browse-tip {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 12rpx;\r\n  padding: 24rpx 0;\r\n  margin-bottom: 20rpx;\r\n  background: rgba(255, 255, 255, 0.6);\r\n  border-radius: 24rpx;\r\n  backdrop-filter: blur(10px);\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.browse-tip:active {\r\n  background: rgba(255, 255, 255, 0.8);\r\n  transform: scale(0.98);\r\n}\r\n\r\n.tip-icon {\r\n  font-size: 28rpx;\r\n}\r\n\r\n.tip-text {\r\n  font-size: 28rpx;\r\n  color: #FFD699;\r\n  font-weight: 500;\r\n}\r\n\r\n/* éšç§åè®®åŒºåŸŸ */\r\n.privacy-section {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 8rpx;\r\n  padding: 24rpx 32rpx;\r\n  margin-top: 20rpx;\r\n  background: rgba(255, 255, 255, 0.6);\r\n  border-radius: 24rpx;\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n.checkbox-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.custom-checkbox {\r\n  width: 28rpx;\r\n  height: 28rpx;\r\n  border: 2rpx solid #d0d0d0;\r\n  border-radius: 6rpx;\r\n  margin-right: 12rpx;\r\n  flex-shrink: 0;\r\n  position: relative;\r\n  background: #fff;\r\n}\r\n\r\n.custom-checkbox.checked {\r\n  background: #FFD699;\r\n  border-color: #FFD699;\r\n}\r\n\r\n.checkmark {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 12rpx;\r\n  height: 20rpx;\r\n  border: solid #fff;\r\n  border-width: 0 2rpx 2rpx 0;\r\n  transform: translate(-50%, -50%) rotate(45deg);\r\n}\r\n\r\n.privacy-text {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n}\r\n\r\n.link-text {\r\n  font-size: 24rpx;\r\n  color: #FFD699;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n}\r\n\r\n/* å¼¹çª—æ ·å¼ */\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  width: 90%;\r\n  max-width: 600rpx;\r\n  max-height: 80vh;\r\n  background: #ffffff;\r\n  border-radius: 24rpx;\r\n  padding: 0;\r\n  box-shadow: 0 16rpx 48rpx rgba(0, 0, 0, 0.2);\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.modal-header {\r\n  padding: 30rpx;\r\n  border-bottom: 1rpx solid #eee;\r\n  position: relative;\r\n}\r\n\r\n.modal-title {\r\n  display: block;\r\n  font-size: 32rpx;\r\n  font-weight: 700;\r\n  color: #333;\r\n  text-align: center;\r\n}\r\n\r\n.modal-close {\r\n  position: absolute;\r\n  top: 30rpx;\r\n  right: 30rpx;\r\n  font-size: 32rpx;\r\n  color: #999;\r\n  padding: 8rpx;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n}\r\n\r\n.modal-body {\r\n  padding: 30rpx;\r\n  max-height: 60vh;\r\n}\r\n\r\n.agreement-content {\r\n  font-size: 26rpx;\r\n  color: #333;\r\n  line-height: 1.6;\r\n}\r\n\r\n.agreement-content h3 {\r\n  font-size: 30rpx;\r\n  font-weight: 700;\r\n  margin: 20rpx 0;\r\n  text-align: center;\r\n}\r\n\r\n.agreement-content h4 {\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  margin: 16rpx 0 8rpx;\r\n}\r\n\r\n.agreement-content p {\r\n  margin: 12rpx 0;\r\n}\r\n\r\n.agreement-content ul {\r\n  margin: 12rpx 0 12rpx 30rpx;\r\n  padding-left: 0;\r\n}\r\n\r\n.agreement-content li {\r\n  margin: 8rpx 0;\r\n}\r\n\r\n.modal-footer {\r\n  padding: 30rpx;\r\n  border-top: 1rpx solid #eee;\r\n  text-align: center;\r\n}\r\n\r\n.btn-confirm {\r\n  width: 100%;\r\n  padding: 20rpx;\r\n  background: #FFD699;\r\n  border-radius: 24rpx;\r\n  border: none;\r\n  font-size: 28rpx;\r\n  color: #fff;\r\n  font-weight: 600;\r\n  box-shadow: 0 4rpx 12rpx rgba(255, 224, 179, 0.3);\r\n}\r\n\r\n.btn-confirm:active {\r\n  opacity: 0.9;\r\n}\r\n\r\n/* èµ„æ–™ç¡®è®¤ä¼¹åª— */\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: flex-end;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  width: 100%;\r\n  background: #ffffff;\r\n  border-radius: 32rpx 32rpx 0 0;\r\n  padding: 40rpx 30rpx 60rpx 30rpx;\r\n  box-shadow: 0 -8rpx 24rpx rgba(0, 0, 0, 0.1);\r\n  position: relative;\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.modal-close {\r\n  position: absolute;\r\n  top: 20rpx;\r\n  right: 20rpx;\r\n  font-size: 32rpx;\r\n  color: #999;\r\n  padding: 8rpx 16rpx;\r\n  border-radius: 50%;\r\n}\r\n\r\n.modal-title {\r\n  display: block;\r\n  font-size: 32rpx;\r\n  font-weight: 700;\r\n  color: #333;\r\n  margin-bottom: 12rpx;\r\n  text-align: center;\r\n}\r\n\r\n.modal-subtitle {\r\n  display: block;\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  text-align: center;\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n/* å¤´åƒé€‰æ‹©åŒº */\r\n.avatar-section {\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.section-label {\r\n  display: block;\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.option-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20rpx;\r\n  background: #f8f8f8;\r\n  border-radius: 16rpx;\r\n  margin-bottom: 16rpx;\r\n  border: 2rpx solid transparent;\r\n}\r\n\r\n.option-item:active {\r\n  background: #f0f0f0;\r\n}\r\n\r\n.option-avatar {\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n  border-radius: 16rpx;\r\n  overflow: hidden;\r\n  margin-right: 20rpx;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.option-avatar image {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.option-avatar.placeholder {\r\n  background: #e5e5e5;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 40rpx;\r\n  color: #999;\r\n}\r\n\r\n.option-info {\r\n  flex: 1;\r\n}\r\n\r\n.option-title {\r\n  display: block;\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  font-weight: 600;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.option-desc {\r\n  display: block;\r\n  font-size: 22rpx;\r\n  color: #999;\r\n}\r\n\r\n.option-radio {\r\n  width: 28rpx;\r\n  height: 28rpx;\r\n  border: 3rpx solid #d0d0d0;\r\n  border-radius: 50%;\r\n  margin-left: 20rpx;\r\n  flex-shrink: 0;\r\n  background: #fff;\r\n  position: relative;\r\n}\r\n\r\n.option-radio.active {\r\n  border-color: #FFD699;\r\n  background: #FFD699;\r\n}\r\n\r\n.option-radio.active::after {\r\n  content: '';\r\n  position: absolute;\r\n  width: 14rpx;\r\n  height: 24rpx;\r\n  border: solid #fff;\r\n  border-width: 0 3rpx 3rpx 0;\r\n  transform: rotate(45deg);\r\n  top: 50%;\r\n  left: 50%;\r\n  margin-top: -14rpx;\r\n  margin-left: -10rpx;\r\n}\r\n\r\n/* æ˜µç§°è®¾ç½® */\r\n.nickname-section {\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.checkbox-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20rpx;\r\n  background: #f8f8f8;\r\n  border-radius: 16rpx;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.checkbox {\r\n  width: 28rpx;\r\n  height: 28rpx;\r\n  border: 2rpx solid #d0d0d0;\r\n  border-radius: 6rpx;\r\n  margin-right: 12rpx;\r\n  flex-shrink: 0;\r\n  position: relative;\r\n}\r\n\r\n.checkbox.checked {\r\n  background: #FFD699;\r\n  border-color: #FFD699;\r\n}\r\n\r\n.checkbox.checked::after {\r\n  content: '';\r\n  position: absolute;\r\n  width: 12rpx;\r\n  height: 20rpx;\r\n  border: solid #fff;\r\n  border-width: 0 2rpx 2rpx 0;\r\n  transform: rotate(45deg);\r\n  top: 50%;\r\n  left: 50%;\r\n  margin-top: -10rpx;\r\n  margin-left: -8rpx;\r\n}\r\n\r\n.checkbox-text {\r\n  flex: 1;\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  font-weight: 500;\r\n}\r\n\r\n.nickname-display {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n.custom-nickname-box {\r\n  background: #f8f8f8;\r\n  border-radius: 16rpx;\r\n  padding: 20rpx;\r\n  margin-top: 16rpx;\r\n}\r\n\r\n.input-label {\r\n  display: block;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.nickname-input {\r\n  width: 100%;\r\n  padding: 16rpx;\r\n  border: 1rpx solid #e5e5e5;\r\n  border-radius: 12rpx;\r\n  font-size: 26rpx;\r\n  background: #fff;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.char-count {\r\n  display: block;\r\n  font-size: 20rpx;\r\n  color: #999;\r\n  text-align: right;\r\n}\r\n\r\n/* æ“ä½œæŒ‰é’® */\r\n.modal-actions {\r\n  display: flex;\r\n  gap: 16rpx;\r\n  margin-top: 40rpx;\r\n}\r\n\r\n.btn-cancel {\r\n  flex: 1;\r\n  padding: 16rpx;\r\n  background: #f0f0f0;\r\n  border-radius: 24rpx;\r\n  border: none;\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  font-weight: 600;\r\n}\r\n\r\n.btn-cancel:active {\r\n  background: #e0e0e0;\r\n}\r\n\r\n.btn-confirm {\r\n  flex: 1;\r\n  padding: 16rpx;\r\n  background: #FFD699;\r\n  border-radius: 24rpx;\r\n  border: none;\r\n  font-size: 28rpx;\r\n  color: #fff;\r\n  font-weight: 600;\r\n  box-shadow: 0 4rpx 12rpx rgba(255, 224, 179, 0.3);\r\n}\r\n\r\n.btn-confirm:active {\r\n  opacity: 0.9;\r\n}\r\n\r\n/* åº•éƒ¨ */\r\n.footer {\r\n  position: relative;\r\n  margin-top: 40rpx;\r\n  text-align: center;\r\n}\r\n\r\n.footer-text {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  text-shadow: 0 2rpx 4rpx rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n/* å¤´åƒé€‰æ‹©æŒ‰é’®æ ·å¼ */\r\n.avatar-btn {\r\n  margin-top: 20rpx;\r\n  width: 80%;\r\n  height: 88rpx;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  border-radius: 44rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 32rpx;\r\n  color: #333;\r\n  border: 2rpx solid #e5e5e5;\r\n  \r\n  &::after {\r\n    border: none;\r\n  }\r\n  \r\n  &:active {\r\n    background: rgba(255, 255, 255, 0.7);\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/love_time/pages/login/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","http","config","wx"],"mappings":"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"}