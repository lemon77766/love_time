{"version":3,"file":"index.js","sources":["pages/qna/index.vue","D:/softcaree/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcW5hL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"qna-page\" :style=\"{ paddingTop: containerPaddingTop }\">\n    <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->\n    <view class=\"custom-navbar\">\n      <!-- æ¸å˜èƒŒæ™¯ -->\n      <view class=\"navbar-gradient-bg\"></view>\n      <!-- çŠ¶æ€æ å ä½ -->\n      <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n      <!-- å¯¼èˆªæ å†…å®¹ -->\n      <view class=\"navbar-content\" :style=\"{ height: navBarHeight + 'px' }\">\n        <view class=\"navbar-left\" @click=\"goBack\">\n          <text class=\"back-icon\">â†</text>\n        </view>\n        <view class=\"navbar-title\">\n          <text class=\"title-text\">ç”œèœœé—®ç­”</text>\n        </view>\n        <view class=\"navbar-right\"></view>\n      </view>\n    </view>\n\n    <!-- é¡¶éƒ¨æ ‡é¢˜ -->\n    <view class=\"header\">\n      <text class=\"subtitle\">ç”¨é—®é¢˜å’Œç­”æ¡ˆæ›´äº†è§£å½¼æ­¤</text>\n    </view>\n\n    <!-- é—®é¢˜å¡ç‰‡ -->\n    <view class=\"question-card\">\n      <text class=\"q-text\">{{ currentQuestion.text }}</text>\n    </view>\n\n    <!-- æˆ‘çš„å›ç­”è¾“å…¥ -->\n    <view class=\"answer-card\">\n      <text class=\"a-label\">æˆ‘çš„å›ç­”</text>\n      <textarea class=\"a-input\" v-model=\"myAnswer\" placeholder=\"è¾“å…¥ä½ çš„ç­”æ¡ˆ...\" />\n      <view class=\"actions\">\n        <button class=\"btn primary\" @click=\"submitAnswer\">æäº¤ç­”æ¡ˆ</button>\n        <button class=\"btn secondary\" @click=\"nextQuestion\">ä¸‹ä¸€é¢˜</button>\n      </view>\n    </view>\n\n    <!-- å¯¹æ–¹ç­”æ¡ˆæ˜¾ç¤ºï¼ˆæäº¤åå‡ºç°ï¼‰ -->\n    <view v-if=\"hasSubmitted\" class=\"partner-card\">\n      <text class=\"p-label\">TA çš„ç­”æ¡ˆ</text>\n      <text v-if=\"partnerAnswer\" class=\"p-text\">{{ partnerAnswer }}</text>\n      <text v-else class=\"p-text empty-hint-text\">å¯¹æ–¹æš‚æœªä½œç­”</text>\n    </view>\n\n    <!-- æ‚¬æµ®è‡ªå®šä¹‰é—®é¢˜æŒ‰é’® -->\n    <view class=\"floating custom-floating\" @click=\"showCustomModal = true\">\n      <text class=\"float-icon\">âœš</text>\n      <text class=\"float-text\">è‡ªå®šä¹‰é—®é¢˜</text>\n    </view>\n\n    <!-- æ‚¬æµ®å†å²æŒ‰é’® -->\n    <view class=\"floating\" @click=\"openHistory\">\n      <text class=\"float-icon\">ğŸ•˜</text>\n      <text class=\"float-text\">å†å²å›ç­”</text>\n    </view>\n\n    <!-- å†å²è®°å½•å¼¹çª— -->\n    <view v-if=\"showHistory\" class=\"modal-mask\" @click=\"closeHistory\">\n      <view class=\"modal\" @click.stop>\n        <text class=\"modal-title\">å†å²å›ç­”è®°å½•</text>\n        <scroll-view class=\"history-list\" scroll-y=\"true\">\n          <view v-for=\"(item, i) in history\" :key=\"i\" class=\"history-item\">\n            <text class=\"h-q\">Q: {{ item.question }}</text>\n            <text class=\"h-me\">æˆ‘: {{ item.myAnswer }}</text>\n            <text class=\"h-ta\">TA: {{ item.partnerAnswer }}</text>\n            <text class=\"h-time\">{{ item.time }}</text>\n          </view>\n        </scroll-view>\n        <view class=\"modal-actions\">\n          <button class=\"btn secondary\" @click=\"closeHistory\">å…³é—­</button>\n          <button class=\"btn\" @click=\"clearHistory\">æ¸…ç©ºè®°å½•</button>\n        </view>\n      </view>\n    </view>\n\n    <!-- è‡ªå®šä¹‰é—®é¢˜å¼¹çª— -->\n    <view v-if=\"showCustomModal\" class=\"modal-mask\" @click=\"closeCustomModal\">\n      <view class=\"modal custom-modal\" @click.stop>\n        <text class=\"modal-title\">ç®¡ç†é—®é¢˜åº“</text>\n        \n        <!-- é—®é¢˜åˆ—è¡¨ -->\n        <scroll-view class=\"question-list\" scroll-y=\"true\">\n          <view class=\"section-title\">é¢„è®¾é—®é¢˜ ({{ defaultQuestions.length }})</view>\n          <view v-for=\"(q, i) in defaultQuestions\" :key=\"'default-'+i\" class=\"question-item\">\n            <text class=\"q-num\">{{ i + 1 }}.</text>\n            <text class=\"q-content\">{{ q.text }}</text>\n          </view>\n\n          <view class=\"section-title\" style=\"margin-top: 20rpx;\">è‡ªå®šä¹‰é—®é¢˜ ({{ customQuestions.length }})</view>\n          <view v-for=\"(q, i) in customQuestions\" :key=\"'custom-'+i\" class=\"question-item custom\">\n            <text class=\"q-num\">{{ defaultQuestions.length + i + 1 }}.</text>\n            <text class=\"q-content\">{{ q.text }}</text>\n            <text class=\"q-delete\" @click=\"deleteCustomQuestion(i)\">åˆ é™¤</text>\n          </view>\n          <view v-if=\"customQuestions.length === 0\" class=\"empty-hint\">\n            <text>æš‚æ— è‡ªå®šä¹‰é—®é¢˜</text>\n          </view>\n        </scroll-view>\n\n        <!-- æ·»åŠ æ–°é—®é¢˜ -->\n        <view class=\"add-question\">\n          <textarea \n            class=\"q-input\" \n            v-model=\"newQuestion\" \n            placeholder=\"è¾“å…¥ä½ æƒ³é—®çš„é—®é¢˜...\"\n            maxlength=\"100\"\n          />\n        </view>\n\n        <view class=\"modal-actions\">\n          <button class=\"btn primary small\" @click=\"addCustomQuestion\">æ·»åŠ é—®é¢˜</button>\n          <button class=\"btn secondary\" @click=\"closeCustomModal\">å…³é—­</button>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { \n  getQuestions, \n  submitAnswer, \n  getHistory, \n  getPartnerAnswer,\n  addCustomQuestion, \n  deleteCustomQuestion \n} from '@/api/qna.js';\n\nexport default {\n  async onLoad(options) {\n    this.getSystemInfo();\n    // æ£€æŸ¥ç™»å½•çŠ¶æ€å’Œtoken\n    const loginInfo = uni.getStorageSync('login_info');\n    if (!loginInfo || !loginInfo.token) {\n      uni.showModal({\n        title: 'éœ€è¦ç™»å½•',\n        content: 'ç”œèœœé—®ç­”åŠŸèƒ½éœ€è¦ç™»å½•åæ‰èƒ½ä½¿ç”¨ï¼Œè¯·å…ˆç™»å½•',\n        showCancel: false,\n        success: () => {\n          uni.reLaunch({\n            url: '/pages/login/index'\n          });\n        }\n      });\n      return;\n    }\n    \n    // ä»åç«¯åŠ è½½é—®é¢˜åˆ—è¡¨å’Œå†å²è®°å½•\n    await this.loadQuestionsFromServer();\n    await this.loadHistoryFromServer();\n    \n    // å¤„ç†ä»å†å²è®°å½•è·³è½¬è¿‡æ¥çš„é—®é¢˜ID\n    const qid = options && options.qid ? Number(options.qid) : null;\n    if (qid) {\n      console.log('ğŸ“Œ ä»å†å²è®°å½•è·³è½¬ï¼Œç›®æ ‡é—®é¢˜ID:', qid);\n      // ä¿å­˜ç›®æ ‡é—®é¢˜IDï¼Œç”¨äº currentQuestion è®¡ç®—å±æ€§\n      this.targetQuestionId = qid;\n      \n      // å°è¯•åœ¨æœªå›ç­”é—®é¢˜ä¸­æ‰¾åˆ°ï¼ˆå¦‚æœé—®é¢˜è¿˜æœªå›ç­”ï¼‰\n      const idx = this.unansweredQuestions.findIndex(q => q.id === qid);\n      if (idx >= 0) {\n        this.qIndex = idx;\n        console.log('âœ… é—®é¢˜æœªå›ç­”ï¼Œè®¾ç½® qIndex:', idx);\n      } else {\n        // é—®é¢˜å·²å›ç­”ï¼Œä¸åœ¨ unansweredQuestions ä¸­\n        // æ£€æŸ¥é—®é¢˜æ˜¯å¦å­˜åœ¨äºæ‰€æœ‰é—®é¢˜åˆ—è¡¨ä¸­\n        const allQuestions = this.questions;\n        const questionExists = allQuestions.some(q => q.id === qid);\n        if (questionExists) {\n          console.log('âœ… é—®é¢˜å·²å›ç­”ï¼Œä½†å­˜åœ¨äºé—®é¢˜åˆ—è¡¨ä¸­ï¼Œå°†æ˜¾ç¤ºè¯¥é—®é¢˜');\n        } else {\n          console.warn('âš ï¸ é—®é¢˜IDä¸å­˜åœ¨äºé—®é¢˜åˆ—è¡¨ä¸­:', qid);\n          // å¦‚æœé—®é¢˜ä¸å­˜åœ¨ï¼Œé‡ç½®ä¸ºé»˜è®¤æ˜¾ç¤º\n          this.targetQuestionId = null;\n          this.qIndex = 0;\n        }\n      }\n    } else {\n      // é»˜è®¤æ˜¾ç¤ºç¬¬ä¸€ä¸ªæœªå›ç­”çš„é—®é¢˜\n      this.qIndex = 0;\n      this.targetQuestionId = null;\n    }\n    \n    // å¦‚æœæºå¸¦ timeï¼Œå›æ˜¾å½“å¤©ç­”æ¡ˆ\n    const time = options && options.time ? decodeURIComponent(options.time) : '';\n    const targetQuestionId = qid || (this.currentQuestion && this.currentQuestion.id);\n    \n    console.log('ğŸ“‹ åˆå§‹åŒ–ç­”æ¡ˆåŠ è½½:', {\n      targetQuestionId,\n      time,\n      currentQuestionId: this.currentQuestion?.id,\n      historyCount: this.history.length\n    });\n    \n    if (targetQuestionId) {\n      const rec = this.history.find(r => {\n        const rQuestionId = r.questionId || r.question_id;\n        return rQuestionId != null && Number(rQuestionId) === Number(targetQuestionId) && (!time || r.time === time);\n      });\n      if (rec) {\n        console.log('âœ… ä»å†å²è®°å½•åŠ è½½ç­”æ¡ˆ:', {\n          questionId: targetQuestionId,\n          hasMyAnswer: !!rec.myAnswer,\n          hasPartnerAnswer: !!rec.partnerAnswer,\n          partnerAnswer: rec.partnerAnswer ? rec.partnerAnswer.substring(0, 30) + '...' : 'ç©º',\n          recData: rec\n        });\n        this.myAnswer = rec.myAnswer || '';\n        this.partnerAnswer = rec.partnerAnswer || '';\n        this.hasSubmitted = true; // å¦‚æœæ˜¯ä»å†å²è®°å½•å›æ˜¾ï¼Œæ ‡è®°ä¸ºå·²æäº¤çŠ¶æ€\n        \n        // æ— è®ºå†å²è®°å½•ä¸­æ˜¯å¦æœ‰å¯¹æ–¹ç­”æ¡ˆï¼Œéƒ½ä»åç«¯è·å–æœ€æ–°çš„å¯¹æ–¹ç­”æ¡ˆ\n        console.log('ğŸ“¥ ä»åç«¯è·å–æœ€æ–°çš„å¯¹æ–¹ç­”æ¡ˆï¼Œé—®é¢˜ID:', targetQuestionId);\n        try {\n          const partnerRes = await getPartnerAnswer(targetQuestionId);\n          console.log('ğŸ“¥ åç«¯è¿”å›çš„å¯¹æ–¹ç­”æ¡ˆå“åº”:', {\n            success: partnerRes?.success,\n            data: partnerRes?.data,\n            fullResponse: partnerRes\n          });\n          \n          if (partnerRes && partnerRes.success) {\n            // å¤„ç†ä¸åŒçš„å“åº”æ ¼å¼\n            const partnerData = partnerRes.data || partnerRes;\n            const hasAnswered = partnerData.hasAnswered !== false; // é»˜è®¤ä¸º trueï¼Œé™¤éæ˜ç¡®ä¸º false\n            const answer = partnerData.answer || partnerData.partnerAnswer || partnerData.partner_answer || '';\n            \n            console.log('ğŸ“¥ è§£æåçš„å¯¹æ–¹ç­”æ¡ˆæ•°æ®:', {\n              hasAnswered,\n              answer: answer ? answer.substring(0, 30) + '...' : 'ç©º',\n              partnerData\n            });\n            \n            if (hasAnswered && answer) {\n              console.log('âœ… æ›´æ–°å¯¹æ–¹ç­”æ¡ˆ:', answer.substring(0, 30) + '...');\n              this.partnerAnswer = answer;\n              // åŒæ—¶æ›´æ–°å†å²è®°å½•ä¸­çš„å¯¹æ–¹ç­”æ¡ˆ\n              if (rec) {\n                rec.partnerAnswer = answer;\n              }\n            } else {\n              console.log('âš ï¸ å¯¹æ–¹æš‚æœªä½œç­”æˆ–ç­”æ¡ˆä¸ºç©º');\n              // å¦‚æœåç«¯è¿”å›å¯¹æ–¹æœªä½œç­”ï¼Œä½†å†å²è®°å½•ä¸­æœ‰ï¼Œä¿ç•™å†å²è®°å½•ä¸­çš„ç­”æ¡ˆ\n              // å¦‚æœå†å²è®°å½•ä¸­ä¹Ÿæ²¡æœ‰ï¼Œåˆ™æ˜¾ç¤º\"å¯¹æ–¹æš‚æœªä½œç­”\"\n            }\n          } else {\n            console.warn('âš ï¸ åç«¯è¿”å›å¤±è´¥ï¼Œä½¿ç”¨å†å²è®°å½•ä¸­çš„ç­”æ¡ˆ');\n          }\n        } catch (e) {\n          console.error('âŒ è·å–å¯¹æ–¹ç­”æ¡ˆå¤±è´¥:', e);\n          console.error('é”™è¯¯è¯¦æƒ…:', {\n            message: e.message,\n            statusCode: e.statusCode,\n            data: e.data\n          });\n          // è·å–å¤±è´¥ä¸å½±å“æ˜¾ç¤ºï¼Œä½¿ç”¨å†å²è®°å½•ä¸­çš„ç­”æ¡ˆ\n        }\n      } else {\n        // å³ä½¿å†å²è®°å½•ä¸­æ²¡æœ‰ï¼Œä¹Ÿå°è¯•åŠ è½½å½“å‰é—®é¢˜çš„ç­”æ¡ˆ\n        console.log('ğŸ“‹ å†å²è®°å½•ä¸­æœªæ‰¾åˆ°ï¼Œè°ƒç”¨ loadAnswerForCurrentQuestion');\n        this.loadAnswerForCurrentQuestion();\n      }\n    } else {\n      // å¦‚æœæ²¡æœ‰æŒ‡å®šé—®é¢˜IDï¼ŒåŠ è½½å½“å‰é—®é¢˜çš„ç­”æ¡ˆ\n      this.loadAnswerForCurrentQuestion();\n    }\n  },\n  data() {\n    return {\n      statusBarHeight: 0,\n      navBarHeight: 44,\n      screenWidth: 375,\n      defaultQuestions: [\n        { id: 1, text: 'æˆ‘ä»¬ç¬¬ä¸€æ¬¡çº¦ä¼šçš„åœ°ç‚¹æ˜¯å“ªé‡Œï¼Ÿ', isDefault: true },\n        { id: 2, text: 'ä½ æœ€å–œæ¬¢æˆ‘åšçš„å“ªé“èœï¼Ÿ', isDefault: true },\n        { id: 3, text: 'å¦‚æœå‘¨æœ«åªåšä¸€ä»¶äº‹ï¼Œä½ å¸Œæœ›æ˜¯ä»€ä¹ˆï¼Ÿ', isDefault: true },\n        { id: 4, text: 'ä½ å¿ƒä¸­çš„å®Œç¾æ—…è¡Œæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ', isDefault: true },\n        { id: 5, text: 'è¿™ä¸€å¹´é‡Œï¼Œä½ æœ€æ„ŸåŠ¨çš„ä¸€åˆ»æ˜¯ä»€ä¹ˆï¼Ÿ', isDefault: true }\n      ],\n      customQuestions: [],\n      qIndex: 0,\n      myAnswer: '',\n      partnerAnswer: '',\n      hasSubmitted: false, // æ ‡è®°å½“å‰é—®é¢˜æ˜¯å¦å·²æäº¤\n      showHistory: false,\n      showCustomModal: false,\n      newQuestion: '',\n      history: [],\n      targetQuestionId: null // ä»å†å²è®°å½•è·³è½¬è¿‡æ¥çš„ç›®æ ‡é—®é¢˜ID\n    };\n  },\n  watch: {\n    // ç›‘å¬å½“å‰é—®é¢˜å˜åŒ–ï¼Œè‡ªåŠ¨åŠ è½½å¯¹åº”çš„ç­”æ¡ˆ\n    'currentQuestion.id': {\n      handler(newId, oldId) {\n        // å¦‚æœé—®é¢˜IDå‘ç”Ÿå˜åŒ–ï¼Œä¸”ä¸æ˜¯åˆå§‹åŒ–æ—¶ï¼ˆoldId å­˜åœ¨ï¼‰ï¼Œé‡æ–°åŠ è½½ç­”æ¡ˆ\n        if (newId && oldId && newId !== oldId) {\n          console.log('ğŸ”„ é—®é¢˜åˆ‡æ¢:', { from: oldId, to: newId });\n          this.loadAnswerForCurrentQuestion();\n        }\n      },\n      immediate: false\n    }\n  },\n  computed: {\n    containerPaddingTop() {\n      const totalHeightPx = this.statusBarHeight + this.navBarHeight;\n      const pxToRpx = 750 / this.screenWidth;\n      const totalHeightRpx = totalHeightPx * pxToRpx;\n      return totalHeightRpx + 20 + 'rpx';\n    },\n    questions() {\n      // è¿‡æ»¤æ‰æ— æ•ˆçš„é—®é¢˜å¯¹è±¡ï¼Œç¡®ä¿æ¯ä¸ªé—®é¢˜éƒ½æœ‰ id å’Œ text\n      const validDefaultQuestions = (this.defaultQuestions || []).filter(q => q && q.id != null);\n      const validCustomQuestions = (this.customQuestions || []).filter(q => q && q.id != null);\n      return [...validDefaultQuestions, ...validCustomQuestions];\n    },\n    // è®¡ç®—æœªå›ç­”çš„é—®é¢˜åˆ—è¡¨\n    unansweredQuestions() {\n      // è·å–å·²å›ç­”çš„é—®é¢˜IDåˆ—è¡¨ï¼ˆç¡®ä¿ç±»å‹ä¸€è‡´ï¼‰\n      const answeredIds = this.history\n        .map(h => {\n          // å…¼å®¹ä¸åŒçš„å­—æ®µå\n          const qid = h.questionId || h.question_id || h.id;\n          // ç»Ÿä¸€è½¬æ¢ä¸ºæ•°å­—ç±»å‹è¿›è¡Œæ¯”è¾ƒ\n          return qid != null ? Number(qid) : null;\n        })\n        .filter(id => id != null);\n      \n      // è¿‡æ»¤å‡ºæœªå›ç­”çš„é—®é¢˜ï¼ˆæ·»åŠ å®‰å…¨æ£€æŸ¥ï¼‰\n      const unanswered = this.questions.filter(q => {\n        // å®‰å…¨æ£€æŸ¥ï¼šç¡®ä¿ q å­˜åœ¨ä¸”æœ‰ id å±æ€§\n        if (!q || q.id === undefined || q.id === null) {\n          console.warn('âš ï¸ å‘ç°æ— æ•ˆçš„é—®é¢˜å¯¹è±¡:', q);\n          return false;\n        }\n        const questionId = Number(q.id);\n        // æ£€æŸ¥è½¬æ¢åçš„IDæ˜¯å¦æœ‰æ•ˆ\n        if (isNaN(questionId)) {\n          console.warn('âš ï¸ é—®é¢˜IDæ— æ•ˆ:', q.id);\n          return false;\n        }\n        const isAnswered = answeredIds.includes(questionId);\n        return !isAnswered && q.isActive !== false; // è¿‡æ»¤æ‰å·²ç¦ç”¨çš„é—®é¢˜\n      });\n      \n      // å¼€å‘ç¯å¢ƒä¸‹è¾“å‡ºè°ƒè¯•ä¿¡æ¯\n      if (process.env.NODE_ENV === 'development') {\n        console.log('ğŸ” æœªå›ç­”é—®é¢˜è®¡ç®—:', {\n          totalQuestions: this.questions.length,\n          answeredIds: answeredIds,\n          unansweredCount: unanswered.length,\n          answeredCount: answeredIds.length,\n          historyCount: this.history.length,\n          questions: this.questions.map(q => ({ id: q.id, text: q.text })),\n          history: this.history.map(h => ({ \n            questionId: h.questionId || h.question_id,\n            question: h.question || h.questionText\n          }))\n        });\n      }\n      \n      return unanswered;\n    },\n    currentQuestion() {\n      // å¦‚æœæŒ‡å®šäº†ç›®æ ‡é—®é¢˜IDï¼ˆä»å†å²è®°å½•è·³è½¬ï¼‰ï¼Œä¼˜å…ˆæ˜¾ç¤ºè¯¥é—®é¢˜\n      if (this.targetQuestionId != null) {\n        const targetId = Number(this.targetQuestionId);\n        // ä»æ‰€æœ‰é—®é¢˜ä¸­æŸ¥æ‰¾ç›®æ ‡é—®é¢˜\n        const targetQuestion = this.questions.find(q => q && q.id != null && Number(q.id) === targetId);\n        if (targetQuestion) {\n          console.log('ğŸ¯ æ˜¾ç¤ºç›®æ ‡é—®é¢˜:', {\n            id: targetQuestion.id,\n            text: targetQuestion.text.substring(0, 20) + '...'\n          });\n          return targetQuestion;\n        } else {\n          console.warn('âš ï¸ ç›®æ ‡é—®é¢˜ä¸å­˜åœ¨ï¼Œå›é€€åˆ°é»˜è®¤é€»è¾‘');\n          // å¦‚æœç›®æ ‡é—®é¢˜ä¸å­˜åœ¨ï¼Œæ¸…é™¤ targetQuestionId å¹¶å›é€€åˆ°é»˜è®¤é€»è¾‘\n          this.targetQuestionId = null;\n        }\n      }\n      \n      // ä»æœªå›ç­”çš„é—®é¢˜ä¸­è·å–å½“å‰é—®é¢˜\n      if (this.unansweredQuestions.length === 0) {\n        return { id: 0, text: 'æ‰€æœ‰é—®é¢˜å·²å›ç­”å®Œæ¯•ï¼ğŸ‰' };\n      }\n      return this.unansweredQuestions[this.qIndex] || this.unansweredQuestions[0];\n    }\n  },\n  mounted() {\n    // onLoad ä¸­å·²ç»åŠ è½½ï¼Œæ— éœ€é‡å¤åŠ è½½\n  },\n  methods: {\n    goBack() {\n      uni.navigateBack();\n    },\n    getSystemInfo() {\n      const systemInfo = uni.getSystemInfoSync();\n      this.statusBarHeight = systemInfo.statusBarHeight || 0;\n      this.screenWidth = systemInfo.windowWidth || 375;\n      // #ifdef MP-WEIXIN\n      this.navBarHeight = 44;\n      // #endif\n      // #ifdef H5\n      this.navBarHeight = 44;\n      // #endif\n    },\n    // ä¿å­˜å†å²è®°å½•åˆ°æœ¬åœ°å­˜å‚¨\n    saveHistory() {\n      try {\n        uni.setStorageSync('qna_history', this.history);\n      } catch (e) {\n        console.error('ä¿å­˜å†å²è®°å½•å¤±è´¥', e);\n      }\n    },\n    async submitAnswer() {\n      if (!this.myAnswer) {\n        uni.showToast({ title: 'è¯·å¡«å†™ä½ çš„ç­”æ¡ˆ', icon: 'none' });\n        return;\n      }\n      if (this.currentQuestion.id === 0) {\n        uni.showToast({ title: 'æ‰€æœ‰é—®é¢˜å·²å›ç­”å®Œæ¯•', icon: 'none' });\n        return;\n      }\n      // æ£€æŸ¥æ˜¯å¦å·²ç»å›ç­”è¿‡è¿™ä¸ªé—®é¢˜\n      const alreadyAnswered = this.history.some(h => h.questionId === this.currentQuestion.id);\n      if (alreadyAnswered) {\n        uni.showToast({ title: 'è¯¥é—®é¢˜å·²ç»å›ç­”è¿‡äº†', icon: 'none' });\n        return;\n      }\n      \n      try {\n        uni.showLoading({ title: 'æäº¤ä¸­...' });\n        \n        // è°ƒç”¨åç«¯APIæäº¤ç­”æ¡ˆ\n        const res = await submitAnswer({\n          questionId: this.currentQuestion.id,\n          answer: this.myAnswer,\n          questionText: this.currentQuestion.text\n        });\n        \n        console.log('ğŸ“¥ æäº¤ç­”æ¡ˆå“åº”:', res);\n        \n        if (res && res.success) {\n          // ä¿å­˜å½“å‰é—®é¢˜çš„IDï¼Œç¡®ä¿åç»­æ“ä½œä½¿ç”¨æ­£ç¡®çš„ID\n          const submittedQuestionId = Number(this.currentQuestion.id);\n          console.log('âœ… æäº¤ç­”æ¡ˆæˆåŠŸï¼Œé—®é¢˜ID:', submittedQuestionId);\n          \n          // æ ‡è®°å·²æäº¤ï¼Œæ˜¾ç¤ºå¯¹æ–¹ç­”æ¡ˆåŒºåŸŸ\n          this.hasSubmitted = true;\n          \n          // å…¼å®¹ä¸åŒçš„å“åº”æ ¼å¼\n          const responseData = res.data || res;\n          \n          // å…ˆå°è¯•ä»æäº¤æ¥å£è¿”å›çš„æ•°æ®ä¸­è·å–å¯¹æ–¹ç­”æ¡ˆ\n          let partnerAnswerFromSubmit = '';\n          if (responseData && (responseData.hasPartnerAnswered || responseData.hasPartnerAnswer)) {\n            partnerAnswerFromSubmit = responseData.partnerAnswer || '';\n            this.partnerAnswer = partnerAnswerFromSubmit;\n            console.log('ğŸ“¥ ä»æäº¤æ¥å£è·å–åˆ°å¯¹æ–¹ç­”æ¡ˆ:', partnerAnswerFromSubmit ? partnerAnswerFromSubmit.substring(0, 20) + '...' : 'ç©º');\n          }\n          \n          // æ— è®ºæäº¤æ¥å£æ˜¯å¦è¿”å›å¯¹æ–¹ç­”æ¡ˆï¼Œéƒ½ä¸»åŠ¨è°ƒç”¨æ¥å£è·å–å¯¹æ–¹ç­”æ¡ˆï¼ˆç¡®ä¿è·å–æœ€æ–°æ•°æ®ï¼‰\n          try {\n            const partnerRes = await getPartnerAnswer(submittedQuestionId);\n            console.log('ğŸ“¥ è·å–å¯¹æ–¹ç­”æ¡ˆå“åº”:', {\n              questionId: submittedQuestionId,\n              response: partnerRes\n            });\n            \n            if (partnerRes && partnerRes.success && partnerRes.data) {\n              const partnerData = partnerRes.data;\n              // å¦‚æœå¯¹æ–¹å·²å›ç­”ï¼Œæ›´æ–°å¯¹æ–¹ç­”æ¡ˆ\n              if (partnerData.hasAnswered && partnerData.answer) {\n                this.partnerAnswer = partnerData.answer;\n                partnerAnswerFromSubmit = partnerData.answer; // æ›´æ–°ç”¨äºä¿å­˜å†å²è®°å½•çš„ç­”æ¡ˆ\n              } else {\n                // å¦‚æœå¯¹æ–¹è¿˜æ²¡å›ç­”ï¼Œæ¸…ç©ºæ˜¾ç¤ºï¼ˆä¼šæ˜¾ç¤º\"å¯¹æ–¹æš‚æœªä½œç­”\"æç¤ºï¼‰\n                this.partnerAnswer = '';\n              }\n            }\n          } catch (partnerError) {\n            // è·å–å¯¹æ–¹ç­”æ¡ˆå¤±è´¥ä¸å½±å“ä¸»æµç¨‹ï¼Œåªè®°å½•æ—¥å¿—\n            console.warn('âš ï¸ è·å–å¯¹æ–¹ç­”æ¡ˆå¤±è´¥ï¼ˆä¸å½±å“æäº¤ï¼‰:', partnerError);\n            // å¦‚æœæäº¤æ¥å£è¿”å›äº†å¯¹æ–¹ç­”æ¡ˆï¼Œç»§ç»­ä½¿ç”¨å®ƒï¼›å¦åˆ™æ¸…ç©ºï¼ˆä¼šæ˜¾ç¤º\"å¯¹æ–¹æš‚æœªä½œç­”\"æç¤ºï¼‰\n            if (!partnerAnswerFromSubmit) {\n              this.partnerAnswer = '';\n            }\n          }\n          \n          // æ·»åŠ åˆ°æœ¬åœ°å†å²è®°å½•\n          const record = {\n            id: responseData?.answerId || res?.answerId || responseData?.id || Date.now(),\n            questionId: submittedQuestionId, // ä½¿ç”¨ä¿å­˜çš„IDï¼Œç¡®ä¿ä¸€è‡´æ€§\n            question: this.currentQuestion.text,\n            myAnswer: this.myAnswer,\n            partnerAnswer: partnerAnswerFromSubmit || this.partnerAnswer || '',\n            time: new Date().toLocaleString(),\n            createdAt: new Date().toISOString()\n          };\n          console.log('ğŸ’¾ ä¿å­˜å†å²è®°å½•:', {\n            questionId: record.questionId,\n            questionText: record.question.substring(0, 20) + '...',\n            hasPartnerAnswer: !!record.partnerAnswer\n          });\n          this.history.unshift(record);\n          this.saveHistory();\n          \n          uni.showToast({ title: 'æäº¤æˆåŠŸ', icon: 'success' });\n          \n          // ä¿ç•™åœ¨å½“å‰é¢˜ç›®ï¼Œç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»â€œä¸‹ä¸€é¢˜â€\n        } else {\n          // å³ä½¿å“åº”æ ¼å¼ä¸ç¬¦åˆé¢„æœŸï¼Œä¹Ÿä¿å­˜åˆ°æœ¬åœ°\n          console.warn('âš ï¸ å“åº”æ ¼å¼ä¸ç¬¦åˆé¢„æœŸ:', res);\n          const record = {\n            id: Date.now(),\n            questionId: this.currentQuestion.id,\n            question: this.currentQuestion.text,\n            myAnswer: this.myAnswer,\n            partnerAnswer: '',\n            time: new Date().toLocaleString(),\n            createdAt: new Date().toISOString()\n          };\n          this.history.unshift(record);\n          this.saveHistory();\n          uni.showToast({ title: 'æäº¤æˆåŠŸï¼ˆå·²ä¿å­˜åˆ°æœ¬åœ°ï¼‰', icon: 'success' });\n          \n          // ä¿ç•™åœ¨å½“å‰é¢˜ç›®ï¼Œç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»â€œä¸‹ä¸€é¢˜â€\n        }\n      } catch (e) {\n        console.error('æäº¤ç­”æ¡ˆå¤±è´¥', e);\n        console.error('é”™è¯¯è¯¦æƒ…:', {\n          statusCode: e.statusCode,\n          message: e.message,\n          data: e.data,\n          url: e.url || 'æœªçŸ¥'\n        });\n        \n        // 401é”™è¯¯ç‰¹æ®Šå¤„ç†\n        if (e.statusCode === 401) {\n          // ä¸éœ€è¦æ‰‹åŠ¨ hideLoadingï¼Œfinally å—ä¼šå¤„ç†\n          uni.showModal({\n            title: 'ç™»å½•å·²è¿‡æœŸ',\n            content: 'æ‚¨çš„ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',\n            showCancel: false,\n            success: () => {\n              uni.reLaunch({\n                url: '/pages/login/index'\n              });\n            }\n          });\n          return;\n        }\n        \n        // 404é”™è¯¯ï¼šåç«¯æ¥å£æœªå®ç°\n        if (e.statusCode === 404) {\n          // ä¸éœ€è¦æ‰‹åŠ¨ hideLoadingï¼Œfinally å—ä¼šå¤„ç†\n          console.warn('âš ï¸ åç«¯æ¥å£æœªå®ç°: POST /api/qna/answer/submit');\n          console.warn('ğŸ’¡ æç¤º: è¯·è”ç³»åç«¯å¼€å‘äººå‘˜å®ç°è¯¥æ¥å£ï¼Œæˆ–æ£€æŸ¥æ¥å£è·¯å¾„æ˜¯å¦æ­£ç¡®');\n          \n          // ä¸´æ—¶æ–¹æ¡ˆï¼šä¿å­˜åˆ°æœ¬åœ°ï¼Œç­‰åç«¯æ¥å£å°±ç»ªåå†åŒæ­¥\n          uni.showModal({\n            title: 'æ¥å£æœªå®ç°',\n            content: 'æäº¤ç­”æ¡ˆæ¥å£æš‚æœªå®ç°ï¼Œå·²ä¿å­˜åˆ°æœ¬åœ°ã€‚è¯·è”ç³»åç«¯å¼€å‘äººå‘˜å®ç°æ¥å£ï¼šPOST /api/qna/answer/submit',\n            showCancel: false,\n            confirmText: 'çŸ¥é“äº†',\n            success: () => {\n              // æœ¬åœ°ä¿å­˜ç­”æ¡ˆè®°å½•ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰\n              const record = {\n                id: Date.now(), // ä¸´æ—¶ID\n                questionId: this.currentQuestion.id,\n                question: this.currentQuestion.text,\n                myAnswer: this.myAnswer,\n                partnerAnswer: '',\n                time: new Date().toLocaleString(),\n                createdAt: new Date().toISOString(),\n                _pendingSync: true // æ ‡è®°ä¸ºå¾…åŒæ­¥\n              };\n              this.history.unshift(record);\n              this.saveHistory();\n              uni.showToast({ title: 'å·²ä¿å­˜åˆ°æœ¬åœ°', icon: 'none' });\n              \n              // ä¿ç•™åœ¨å½“å‰é¢˜ç›®ï¼Œç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»â€œä¸‹ä¸€é¢˜â€\n            }\n          });\n          return;\n        }\n        \n        // ä¸éœ€è¦æ‰‹åŠ¨ hideLoadingï¼Œfinally å—ä¼šå¤„ç†\n        uni.showToast({ \n          title: `æäº¤å¤±è´¥: ${e.statusCode || 'ç½‘ç»œé”™è¯¯'}`, \n          icon: 'none',\n          duration: 3000\n        });\n      } finally {\n        // ç¡®ä¿loadingå…³é—­ï¼ˆä½¿ç”¨ try-catch é¿å…é‡å¤éšè—å¯¼è‡´çš„é”™è¯¯ï¼‰\n        try {\n        uni.hideLoading();\n        } catch (e) {\n          // å¿½ç•¥ hideLoading é”™è¯¯ï¼ˆå¯èƒ½å·²ç»éšè—è¿‡äº†ï¼‰\n        }\n      }\n    },\n    nextQuestion() {\n      // æ¸…é™¤ç›®æ ‡é—®é¢˜IDï¼Œæ¢å¤æ­£å¸¸çš„é—®é¢˜åˆ‡æ¢é€»è¾‘\n      if (this.targetQuestionId != null) {\n        console.log('ğŸ”„ æ¸…é™¤ç›®æ ‡é—®é¢˜IDï¼Œæ¢å¤æ­£å¸¸åˆ‡æ¢é€»è¾‘');\n        this.targetQuestionId = null;\n      }\n      \n      // ä¿å­˜å½“å‰é—®é¢˜IDï¼Œç”¨äºè°ƒè¯•\n      const currentId = this.currentQuestion && this.currentQuestion.id;\n      console.log('â¡ï¸ åˆ‡æ¢åˆ°ä¸‹ä¸€é¢˜ï¼Œå½“å‰é—®é¢˜ID:', currentId);\n      \n      // é‡æ–°è®¡ç®—æœªå›ç­”é—®é¢˜åˆ—è¡¨ï¼Œæ˜¾ç¤ºä¸‹ä¸€ä¸ª\n      // æ³¨æ„ï¼šç”±äºå†å²è®°å½•å¯èƒ½å·²æ›´æ–°ï¼ŒunansweredQuestions ä¼šé‡æ–°è®¡ç®—\n      const unansweredCount = this.unansweredQuestions.length;\n      \n      if (unansweredCount === 0) {\n        uni.showToast({ title: 'æ‰€æœ‰é—®é¢˜å·²å›ç­”å®Œæ¯•ï¼', icon: 'success' });\n        return;\n      }\n      \n      // è®¡ç®—ä¸‹ä¸€ä¸ªé—®é¢˜çš„ç´¢å¼•\n      if (this.qIndex < unansweredCount - 1) {\n        this.qIndex += 1;\n      } else {\n        this.qIndex = 0; // å›åˆ°ç¬¬ä¸€ä¸ªæœªå›ç­”çš„\n      }\n      \n      // æ³¨æ„ï¼šæ¸…ç©ºç­”æ¡ˆå’Œé‡ç½®çŠ¶æ€ä¼šåœ¨ loadAnswerForCurrentQuestion ä¸­å¤„ç†\n      // watch ä¼šç›‘å¬åˆ° currentQuestion.id çš„å˜åŒ–ï¼Œè‡ªåŠ¨è°ƒç”¨ loadAnswerForCurrentQuestion\n      // ä½†ä¸ºäº†ç¡®ä¿ç«‹å³æ‰§è¡Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨è°ƒç”¨\n      const nextId = this.currentQuestion && this.currentQuestion.id;\n      console.log('â¡ï¸ ä¸‹ä¸€é¢˜ID:', nextId);\n    },\n    // åŠ è½½å½“å‰é—®é¢˜çš„ç­”æ¡ˆï¼ˆä»å†å²è®°å½•æˆ–åç«¯ï¼‰\n    async loadAnswerForCurrentQuestion() {\n      if (!this.currentQuestion || !this.currentQuestion.id) {\n        console.warn('âš ï¸ loadAnswerForCurrentQuestion: å½“å‰é—®é¢˜æ— æ•ˆ', this.currentQuestion);\n        return;\n      }\n      \n      const questionId = Number(this.currentQuestion.id);\n      console.log('ğŸ“‹ åŠ è½½é—®é¢˜ç­”æ¡ˆ:', {\n        questionId,\n        questionText: this.currentQuestion.text,\n        historyCount: this.history.length\n      });\n      \n      // å…ˆæ¸…ç©ºå½“å‰ç­”æ¡ˆ\n      this.myAnswer = '';\n      this.partnerAnswer = '';\n      this.hasSubmitted = false;\n      \n      // æ£€æŸ¥å†å²è®°å½•ä¸­æ˜¯å¦æœ‰è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆ\n      const historyRecord = this.history.find(h => {\n        const hQuestionId = h.questionId || h.question_id;\n        const hIdNum = hQuestionId != null ? Number(hQuestionId) : null;\n        const match = hIdNum !== null && hIdNum === questionId;\n        if (match) {\n          console.log('âœ… æ‰¾åˆ°å†å²è®°å½•:', {\n            questionId: hIdNum,\n            myAnswer: h.myAnswer ? h.myAnswer.substring(0, 20) + '...' : '',\n            partnerAnswer: h.partnerAnswer ? h.partnerAnswer.substring(0, 20) + '...' : ''\n          });\n        }\n        return match;\n      });\n      \n      if (historyRecord) {\n        // å¦‚æœå†å²è®°å½•ä¸­æœ‰ï¼Œä»å†å²è®°å½•åŠ è½½\n        this.myAnswer = historyRecord.myAnswer || '';\n        this.partnerAnswer = historyRecord.partnerAnswer || '';\n        this.hasSubmitted = true; // æ ‡è®°ä¸ºå·²æäº¤çŠ¶æ€\n        \n        console.log('ğŸ“‹ ä»å†å²è®°å½•åŠ è½½ç­”æ¡ˆ:', {\n          questionId,\n          hasMyAnswer: !!this.myAnswer,\n          hasPartnerAnswer: !!this.partnerAnswer,\n          partnerAnswer: this.partnerAnswer ? this.partnerAnswer.substring(0, 30) + '...' : 'ç©º'\n        });\n        \n        // æ— è®ºå†å²è®°å½•ä¸­æ˜¯å¦æœ‰å¯¹æ–¹ç­”æ¡ˆï¼Œéƒ½ä»åç«¯è·å–æœ€æ–°çš„å¯¹æ–¹ç­”æ¡ˆ\n        console.log('ğŸ“¥ ä»åç«¯è·å–æœ€æ–°çš„å¯¹æ–¹ç­”æ¡ˆï¼Œé—®é¢˜ID:', questionId);\n        try {\n          const partnerRes = await getPartnerAnswer(questionId);\n          console.log('ğŸ“¥ åç«¯è¿”å›çš„å¯¹æ–¹ç­”æ¡ˆå“åº”:', {\n            success: partnerRes?.success,\n            data: partnerRes?.data,\n            fullResponse: partnerRes\n          });\n          \n          if (partnerRes && partnerRes.success) {\n            // å¤„ç†ä¸åŒçš„å“åº”æ ¼å¼\n            const partnerData = partnerRes.data || partnerRes;\n            const hasAnswered = partnerData.hasAnswered !== false; // é»˜è®¤ä¸º trueï¼Œé™¤éæ˜ç¡®ä¸º false\n            const answer = partnerData.answer || partnerData.partnerAnswer || partnerData.partner_answer || '';\n            \n            console.log('ğŸ“¥ è§£æåçš„å¯¹æ–¹ç­”æ¡ˆæ•°æ®:', {\n              hasAnswered,\n              answer: answer ? answer.substring(0, 30) + '...' : 'ç©º',\n              partnerData\n            });\n            \n            if (hasAnswered && answer) {\n              console.log('âœ… æ›´æ–°å¯¹æ–¹ç­”æ¡ˆ:', answer.substring(0, 30) + '...');\n              this.partnerAnswer = answer;\n              // åŒæ—¶æ›´æ–°å†å²è®°å½•ä¸­çš„å¯¹æ–¹ç­”æ¡ˆ\n              if (historyRecord) {\n                historyRecord.partnerAnswer = answer;\n              }\n            } else {\n              console.log('âš ï¸ å¯¹æ–¹æš‚æœªä½œç­”æˆ–ç­”æ¡ˆä¸ºç©º');\n              // å¦‚æœåç«¯è¿”å›å¯¹æ–¹æœªä½œç­”ï¼Œä½†å†å²è®°å½•ä¸­æœ‰ï¼Œä¿ç•™å†å²è®°å½•ä¸­çš„ç­”æ¡ˆ\n              // å¦‚æœå†å²è®°å½•ä¸­ä¹Ÿæ²¡æœ‰ï¼Œåˆ™æ˜¾ç¤º\"å¯¹æ–¹æš‚æœªä½œç­”\"\n            }\n          } else {\n            console.warn('âš ï¸ åç«¯è¿”å›å¤±è´¥ï¼Œä½¿ç”¨å†å²è®°å½•ä¸­çš„ç­”æ¡ˆ');\n          }\n        } catch (e) {\n          console.error('âŒ è·å–å¯¹æ–¹ç­”æ¡ˆå¤±è´¥:', e);\n          console.error('é”™è¯¯è¯¦æƒ…:', {\n            message: e.message,\n            statusCode: e.statusCode,\n            data: e.data\n          });\n          // è·å–å¤±è´¥ä¸å½±å“æ˜¾ç¤ºï¼Œä½¿ç”¨å†å²è®°å½•ä¸­çš„ç­”æ¡ˆ\n        }\n      } else {\n        // å¦‚æœå†å²è®°å½•ä¸­æ²¡æœ‰ï¼Œæ£€æŸ¥åç«¯æ˜¯å¦æœ‰å¯¹æ–¹ç­”æ¡ˆï¼ˆå¯èƒ½å¯¹æ–¹å›ç­”äº†ä½†è‡ªå·±è¿˜æ²¡å›ç­”ï¼‰\n        try {\n          const partnerRes = await getPartnerAnswer(questionId);\n          console.log('ğŸ“¥ æ£€æŸ¥å¯¹æ–¹æ˜¯å¦å·²å›ç­”:', partnerRes);\n          \n          if (partnerRes && partnerRes.success && partnerRes.data) {\n            const partnerData = partnerRes.data;\n            // å¦‚æœå¯¹æ–¹å·²å›ç­”ï¼Œæ˜¾ç¤ºå¯¹æ–¹ç­”æ¡ˆï¼ˆä½†æ ‡è®°ä¸ºæœªæäº¤çŠ¶æ€ï¼Œå› ä¸ºè‡ªå·±è¿˜æ²¡å›ç­”ï¼‰\n            if (partnerData.hasAnswered && partnerData.answer) {\n              // æ³¨æ„ï¼šè¿™ç§æƒ…å†µä¸‹ä¸æ˜¾ç¤ºå¯¹æ–¹ç­”æ¡ˆï¼Œå› ä¸ºè‡ªå·±è¿˜æ²¡å›ç­”\n              // åªæœ‰åœ¨æäº¤åæˆ–ä»å†å²è®°å½•å›æ˜¾æ—¶æ‰æ˜¾ç¤º\n            }\n          }\n        } catch (e) {\n          // å¿½ç•¥é”™è¯¯\n          console.warn('âš ï¸ æ£€æŸ¥å¯¹æ–¹ç­”æ¡ˆå¤±è´¥:', e);\n        }\n      }\n    },\n    openHistory() {\n      \n      uni.navigateTo({ url: '/pages/qna/history' });\n    },\n    closeHistory() {\n      this.showHistory = false;\n    },\n    clearHistory() {\n      this.history = [];\n      this.saveHistory();\n      uni.showToast({ title: 'è®°å½•å·²æ¸…ç©º', icon: 'none' });\n    },\n    // ä»åç«¯åŠ è½½å†å²è®°å½•\n    async loadHistoryFromServer() {\n      try {\n        const res = await getHistory({ page: 1, pageSize: 100 });\n        console.log('ğŸ“¥ å†å²è®°å½•å“åº”:', res);\n        \n        let historyList = [];\n        \n        // å¤„ç†ä¸åŒçš„å“åº”æ ¼å¼ï¼ˆæŒ‰ä¼˜å…ˆçº§é¡ºåºï¼‰\n        if (res && res.success && Array.isArray(res.history)) {\n          // æ ¼å¼: { success: true, history: [...], message: \"è·å–æˆåŠŸ\", totalCount: 5 }\n          historyList = res.history;\n        } else if (res && res.success && Array.isArray(res.answers)) {\n          // æ ¼å¼: { success: true, answers: [...], message: \"è·å–æˆåŠŸ\", totalCount: 0 }\n          historyList = res.answers;\n        } else if (res && res.success && res.data && res.data.list) {\n          // æ ¼å¼: { success: true, data: { list: [...] } }\n          historyList = Array.isArray(res.data.list) ? res.data.list : [];\n        } else if (res && res.success && res.data && Array.isArray(res.data)) {\n          // æ ¼å¼: { success: true, data: [...] } ï¼ˆç›´æ¥æ˜¯æ•°ç»„ï¼‰\n          historyList = res.data;\n        } else if (res && res.list) {\n          // æ ¼å¼: { list: [...] } ï¼ˆç›´æ¥è¿”å›æ•°æ®ï¼‰\n          historyList = Array.isArray(res.list) ? res.list : [];\n        } else if (Array.isArray(res)) {\n          // æ ¼å¼: [...] ï¼ˆç›´æ¥è¿”å›æ•°ç»„ï¼‰\n          historyList = res;\n        } else {\n          console.warn('âš ï¸ å†å²è®°å½•å“åº”æ ¼å¼ä¸ç¬¦åˆé¢„æœŸ:', res);\n          historyList = [];\n        }\n        \n        // æ ‡å‡†åŒ–å†å²è®°å½•æ ¼å¼ï¼Œç¡®ä¿å­—æ®µåä¸€è‡´\n        this.history = historyList.map(item => {\n          // å…¼å®¹å¤šç§å­—æ®µåå’Œæ ¼å¼\n          const id = item.id || item.answerId;\n          const questionId = item.questionId || item.question_id;\n          \n          // ä¼˜å…ˆä½¿ç”¨åç«¯è¿”å›çš„ questionï¼Œå¦‚æœæ²¡æœ‰åˆ™ä»é—®é¢˜åˆ—è¡¨ä¸­æŸ¥æ‰¾\n          let question = item.question || item.questionText || item.question_text;\n          if (!question && questionId != null) {\n            // ä»é—®é¢˜åˆ—è¡¨ä¸­æ ¹æ® questionId æŸ¥æ‰¾å¯¹åº”çš„ question æ–‡æœ¬\n            const allQuestions = [...(this.defaultQuestions || []), ...(this.customQuestions || [])];\n            const foundQuestion = allQuestions.find(q => q && q.id != null && Number(q.id) === Number(questionId));\n            if (foundQuestion && foundQuestion.text) {\n              question = foundQuestion.text;\n            }\n          }\n          \n          // å…¼å®¹ answerã€myAnswerã€my_answer ç­‰å¤šç§å­—æ®µå\n          const myAnswer = item.myAnswer || item.answer || item.my_answer;\n          const partnerAnswer = item.partnerAnswer || item.partner_answer || '';\n          // å…¼å®¹å¤šç§æ—¶é—´å­—æ®µï¼šansweredAtã€createdAtã€created_atã€timeã€updatedAt\n          const time = item.time || item.answeredAt || item.createdAt || item.created_at || item.updatedAt || new Date().toLocaleString();\n          const createdAt = item.createdAt || item.created_at || item.answeredAt || item.updatedAt || new Date().toISOString();\n          \n          return {\n            id,\n            questionId,\n            question: question || `é—®é¢˜ID: ${questionId}`, // å¦‚æœä»ç„¶æ‰¾ä¸åˆ°ï¼Œæ˜¾ç¤ºIDä½œä¸ºå¤‡ç”¨\n            myAnswer,\n            partnerAnswer,\n            time,\n            createdAt,\n            // ä¿ç•™åŸå§‹æ•°æ®ä¸­çš„å…¶ä»–å­—æ®µï¼ˆå¦‚ questionCategoryã€answeredAt ç­‰ï¼‰\n            questionCategory: item.questionCategory || item.category,\n            answeredAt: item.answeredAt,\n            updatedAt: item.updatedAt,\n            ...item\n          };\n        });\n        \n        console.log('âœ… å†å²è®°å½•åŠ è½½æˆåŠŸ:', {\n          count: this.history.length,\n          totalCount: res?.totalCount,\n          sample: this.history.slice(0, 3)\n        });\n      } catch (e) {\n        console.error('åŠ è½½å†å²è®°å½•å¤±è´¥', e);\n        console.error('é”™è¯¯è¯¦æƒ…:', {\n          message: e.message,\n          statusCode: e.statusCode,\n          data: e.data\n        });\n        \n        // 401é”™è¯¯ç‰¹æ®Šå¤„ç†ï¼ˆä½†ä¸å¼¹å‡ºæç¤ºï¼Œå› ä¸ºå·²ç»åœ¨ä¸Šé¢çš„åŠ è½½é—®é¢˜ä¸­å¤„ç†äº†ï¼‰\n        if (e.statusCode === 401) {\n          return;\n        }\n        \n        // å¦‚æœåç«¯è¯·æ±‚å¤±è´¥ï¼Œå°è¯•ä»æœ¬åœ°å­˜å‚¨åŠ è½½\n        try {\n          const data = uni.getStorageSync('qna_history');\n          this.history = Array.isArray(data) ? data : [];\n        } catch (e2) { \n          this.history = []; \n        }\n      }\n    },\n    // ä»åç«¯åŠ è½½é—®é¢˜åˆ—è¡¨\n    async loadQuestionsFromServer() {\n      try {\n        uni.showLoading({ title: 'åŠ è½½ä¸­...' });\n        const res = await getQuestions();\n        console.log('ğŸ“¥ é—®é¢˜åˆ—è¡¨å“åº”:', res);\n        \n        // å¤„ç†åç«¯è¿”å›çš„æ ¼å¼: { success: true, questions: Array, message: \"è·å–æˆåŠŸ\" }\n        if (res && res.success && Array.isArray(res.questions)) {\n          // å°†é—®é¢˜æŒ‰ category åˆ†ç±»ï¼Œå¹¶è½¬æ¢å­—æ®µå\n          const presetQuestions = [];\n          const customQuestions = [];\n          \n          res.questions.forEach(q => {\n            // è·³è¿‡æ— æ•ˆçš„é—®é¢˜å¯¹è±¡\n            if (!q || q.id === undefined || q.id === null) {\n              console.warn('âš ï¸ è·³è¿‡æ— æ•ˆçš„é—®é¢˜å¯¹è±¡:', q);\n              return;\n            }\n            \n            // è½¬æ¢å­—æ®µï¼šquestionText -> textï¼Œä¿ç•™å…¶ä»–å­—æ®µ\n            const question = {\n              id: q.id,\n              text: q.questionText || q.text || '', // å…¼å®¹ä¸¤ç§å­—æ®µåï¼Œç¡®ä¿æœ‰é»˜è®¤å€¼\n              category: q.category || 'preset',\n              isActive: q.isActive !== false, // é»˜è®¤ä¸º true\n              orderIndex: q.orderIndex ?? 999,\n              createdBy: q.createdBy,\n              // ä¿ç•™å…¶ä»–å¯èƒ½å­˜åœ¨çš„å­—æ®µ\n              ...q\n            };\n            \n            // ç§»é™¤åŸå§‹çš„ questionTextï¼Œé¿å…æ··ä¹±\n            if (question.questionText) {\n              delete question.questionText;\n            }\n            \n            // æŒ‰ category åˆ†ç±»\n            if (q.category === 'preset') {\n              presetQuestions.push(question);\n            } else if (q.category === 'custom') {\n              customQuestions.push(question);\n            }\n          });\n          \n          // é¢„è®¾é—®é¢˜æŒ‰ orderIndex æ’åº\n          presetQuestions.sort((a, b) => {\n            const orderA = a.orderIndex ?? 999;\n            const orderB = b.orderIndex ?? 999;\n            return orderA - orderB;\n          });\n          \n          this.defaultQuestions = presetQuestions;\n          this.customQuestions = customQuestions;\n          \n          console.log('âœ… é—®é¢˜åˆ—è¡¨åŠ è½½æˆåŠŸ:', {\n            preset: presetQuestions.length,\n            custom: customQuestions.length,\n            total: presetQuestions.length + customQuestions.length\n          });\n        } else if (res && res.success && res.data) {\n          // å…¼å®¹æ—§æ ¼å¼: { success: true, data: { defaultQuestions: [...], customQuestions: [...] } }\n          this.defaultQuestions = Array.isArray(res.data.defaultQuestions) \n            ? res.data.defaultQuestions\n                .filter(q => q && q.id != null) // è¿‡æ»¤æ— æ•ˆæ•°æ®\n                .map(q => ({\n                  id: q.id,\n                  text: q.questionText || q.text || '',\n                  ...q\n                }))\n            : [];\n          this.customQuestions = Array.isArray(res.data.customQuestions) \n            ? res.data.customQuestions\n                .filter(q => q && q.id != null) // è¿‡æ»¤æ— æ•ˆæ•°æ®\n                .map(q => ({\n                  id: q.id,\n                  text: q.questionText || q.text || '',\n                  ...q\n                }))\n            : [];\n        } else {\n          console.warn('âš ï¸ é—®é¢˜åˆ—è¡¨å“åº”æ ¼å¼ä¸ç¬¦åˆé¢„æœŸ:', res);\n          this.defaultQuestions = [];\n          this.customQuestions = [];\n        }\n      } catch (e) {\n        console.error('åŠ è½½é—®é¢˜å¤±è´¥', e);\n        console.error('é”™è¯¯è¯¦æƒ…:', {\n          message: e.message,\n          statusCode: e.statusCode,\n          data: e.data\n        });\n        \n        // 401é”™è¯¯ç‰¹æ®Šå¤„ç†\n        if (e.statusCode === 401) {\n          // ä¸éœ€è¦æ‰‹åŠ¨ hideLoadingï¼Œfinally å—ä¼šå¤„ç†\n          uni.showModal({\n            title: 'ç™»å½•å·²è¿‡æœŸ',\n            content: 'æ‚¨çš„ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',\n            showCancel: false,\n            success: () => {\n              uni.reLaunch({\n                url: '/pages/login/index'\n              });\n            }\n          });\n          return;\n        }\n        \n        // å¦‚æœåç«¯è¯·æ±‚å¤±è´¥ï¼Œä½¿ç”¨é¢„è®¾é—®é¢˜å’Œæœ¬åœ°è‡ªå®šä¹‰é—®é¢˜\n        uni.showToast({ title: 'åŠ è½½é—®é¢˜å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®', icon: 'none' });\n        try {\n          const data = uni.getStorageSync('qna_custom_questions');\n          this.customQuestions = Array.isArray(data) ? data : [];\n        } catch (e2) { \n          this.customQuestions = []; \n        }\n      } finally {\n        // ç¡®ä¿loadingå…³é—­ï¼ˆä½¿ç”¨ try-catch é¿å…é‡å¤éšè—å¯¼è‡´çš„é”™è¯¯ï¼‰\n        try {\n        uni.hideLoading();\n        } catch (e) {\n          // å¿½ç•¥ hideLoading é”™è¯¯ï¼ˆå¯èƒ½å·²ç»éšè—è¿‡äº†ï¼‰\n        }\n      }\n    },\n\n    // æ·»åŠ è‡ªå®šä¹‰é—®é¢˜\n    async addCustomQuestion() {\n      if (!this.newQuestion || !this.newQuestion.trim()) {\n        uni.showToast({ title: 'è¯·è¾“å…¥é—®é¢˜å†…å®¹', icon: 'none' });\n        return;\n      }\n      \n      try {\n        uni.showLoading({ title: 'æ·»åŠ ä¸­...' });\n        \n        // è°ƒç”¨åç«¯APIæ·»åŠ é—®é¢˜\n        const res = await addCustomQuestion(this.newQuestion.trim());\n        \n        if (res.success) {\n          // æ ¼å¼åŒ–æ–°é—®é¢˜ï¼Œç¡®ä¿åŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ\n          const newQuestionData = res.data || {};\n          const formattedQuestion = {\n            id: newQuestionData.id,\n            text: newQuestionData.text || newQuestionData.questionText || this.newQuestion.trim(),\n            category: 'custom',\n            isActive: true,\n            orderIndex: 999,\n            createdBy: newQuestionData.userId || newQuestionData.createdBy,\n            createdAt: newQuestionData.createdAt,\n            // ä¿ç•™å…¶ä»–å­—æ®µ\n            ...newQuestionData\n          };\n          \n          // å°†æ–°é—®é¢˜æ·»åŠ åˆ°åˆ—è¡¨\n          this.customQuestions.push(formattedQuestion);\n          this.newQuestion = '';\n          \n          // å…³é—­å¼¹çª—ï¼Œè®©ç”¨æˆ·çœ‹åˆ°ä¸»é¡µé¢\n          this.showCustomModal = false;\n          \n          // è‡ªåŠ¨åˆ‡æ¢åˆ°æ–°æ·»åŠ çš„é—®é¢˜ï¼ˆå¦‚æœå®ƒæ˜¯æœªå›ç­”çš„é—®é¢˜ï¼‰\n          // ä½¿ç”¨ setTimeout ç¡®ä¿å“åº”å¼æ›´æ–°å·²å®Œæˆï¼ˆuni-app ä¸­ä½¿ç”¨ setTimeout æ›´å¯é ï¼‰\n          setTimeout(() => {\n            const newQuestionIndex = this.unansweredQuestions.findIndex(\n              q => q.id === formattedQuestion.id\n            );\n            if (newQuestionIndex >= 0) {\n              // æ‰¾åˆ°æ–°é—®é¢˜åœ¨æœªå›ç­”åˆ—è¡¨ä¸­çš„ä½ç½®ï¼Œåˆ‡æ¢è¿‡å»\n              this.qIndex = newQuestionIndex;\n              // åŠ è½½æ–°é—®é¢˜çš„ç­”æ¡ˆï¼ˆä¼šè‡ªåŠ¨æ¸…ç©ºæˆ–ä»å†å²è®°å½•åŠ è½½ï¼‰\n              this.loadAnswerForCurrentQuestion();\n              \n              console.log('âœ… å·²åˆ‡æ¢åˆ°æ–°æ·»åŠ çš„é—®é¢˜:', formattedQuestion);\n            }\n          }, 100);\n          \n          uni.showToast({ title: 'é—®é¢˜æ·»åŠ æˆåŠŸ', icon: 'success' });\n        }\n      } catch (e) {\n        console.error('æ·»åŠ é—®é¢˜å¤±è´¥', e);\n        \n        // 401é”™è¯¯ç‰¹æ®Šå¤„ç†\n        if (e.statusCode === 401) {\n          uni.showModal({\n            title: 'ç™»å½•å·²è¿‡æœŸ',\n            content: 'æ‚¨çš„ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',\n            showCancel: false,\n            success: () => {\n              uni.reLaunch({\n                url: '/pages/login/index'\n              });\n            }\n          });\n          return;\n        }\n        \n        uni.showToast({ title: 'æ·»åŠ å¤±è´¥ï¼Œè¯·é‡è¯•', icon: 'none' });\n      } finally {\n        // ç¡®ä¿loadingå…³é—­ï¼ˆä½¿ç”¨ try-catch é¿å…é‡å¤éšè—å¯¼è‡´çš„é”™è¯¯ï¼‰\n        try {\n        uni.hideLoading();\n        } catch (e) {\n          // å¿½ç•¥ hideLoading é”™è¯¯ï¼ˆå¯èƒ½å·²ç»éšè—è¿‡äº†ï¼‰\n        }\n      }\n    },\n\n    async deleteCustomQuestion(index) {\n      const question = this.customQuestions[index];\n      \n      uni.showModal({\n        title: 'ç¡®è®¤åˆ é™¤',\n        content: 'ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé—®é¢˜å—ï¼Ÿ',\n        success: async (modalRes) => {\n          if (modalRes.confirm) {\n            try {\n              uni.showLoading({ title: 'åˆ é™¤ä¸­...' });\n              \n              // è°ƒç”¨åç«¯APIåˆ é™¤é—®é¢˜\n              const res = await deleteCustomQuestion(question.id);\n              \n              if (res.success) {\n                // ä»åˆ—è¡¨ä¸­ç§»é™¤\n                this.customQuestions.splice(index, 1);\n                uni.showToast({ title: 'å·²åˆ é™¤', icon: 'success' });\n              }\n            } catch (e) {\n              console.error('åˆ é™¤é—®é¢˜å¤±è´¥', e);\n              \n              // 401é”™è¯¯ç‰¹æ®Šå¤„ç†\n              if (e.statusCode === 401) {\n                uni.showModal({\n                  title: 'ç™»å½•å·²è¿‡æœŸ',\n                  content: 'æ‚¨çš„ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',\n                  showCancel: false,\n                  success: () => {\n                    uni.reLaunch({\n                      url: '/pages/login/index'\n                    });\n                  }\n                });\n                return;\n              }\n              \n              uni.showToast({ title: 'åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•', icon: 'none' });\n            } finally {\n              // ç¡®ä¿loadingå…³é—­ï¼ˆä½¿ç”¨ try-catch é¿å…é‡å¤éšè—å¯¼è‡´çš„é”™è¯¯ï¼‰\n              try {\n              uni.hideLoading();\n              } catch (e) {\n                // å¿½ç•¥ hideLoading é”™è¯¯ï¼ˆå¯èƒ½å·²ç»éšè—è¿‡äº†ï¼‰\n              }\n            }\n          }\n        }\n      });\n    },\n\n    closeCustomModal() {\n      this.showCustomModal = false;\n      this.newQuestion = '';\n    }\n  }\n};\n</script>\n\n<style>\n.qna-page { \n  min-height: 100vh; \n  background: #FFFAF4; \n  padding-bottom: 60rpx; \n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.header { padding: 32rpx 24rpx 12rpx 24rpx; }\n/* è‡ªå®šä¹‰å¯¼èˆªæ æ ·å¼ */\n.custom-navbar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 9999;\n  background-color: #FFFAF4;\n  overflow: hidden;\n}\n\n.navbar-gradient-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 200%;\n  background: rgba(255, 255, 255, 0.7);\n  backdrop-filter: blur(15px);\n  -webkit-backdrop-filter: blur(15px);\n}\n\n.status-bar {\n  width: 100%;\n  background: transparent;\n  position: relative;\n  z-index: 1;\n}\n\n.navbar-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 30rpx;\n  box-sizing: border-box;\n  position: relative;\n  z-index: 1;\n}\n\n.navbar-title {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.title-text {\n  font-size: 36rpx;\n  font-weight: 500;\n  color: #4A4A4A;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.navbar-left {\n  width: 80rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.back-icon {\n  font-size: 50rpx;\n  font-weight: 600;\n  color: #4A4A4A;\n  line-height: 1;\n  cursor: pointer;\n  transition: opacity 0.3s;\n}\n\n.back-icon:active {\n  opacity: 0.6;\n}\n\n.navbar-right {\n  width: 80rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.title { \n  font-size: 34rpx; \n  font-weight: 600; \n  color: #4A4A4A; \n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.subtitle { \n  margin-top: 6rpx; \n  font-size: 26rpx; \n  color: #9B8FB8; \n  display: block; \n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.header-actions { margin-top: 16rpx; }\n.btn-custom { \n  background: linear-gradient(135deg, #FFB5C2 0%, #FFD4A3 100%);\n  color: #ffffff; \n  border-radius: 24rpx; \n  padding: 14rpx 28rpx; \n  font-size: 26rpx; \n  border: none; \n}\n\n.question-card { \n  margin: 24rpx; \n  background: rgba(255, 255, 255, 0.7);\n  backdrop-filter: blur(15px);\n  -webkit-backdrop-filter: blur(15px);\n  border-radius: 16rpx; \n  padding: 24rpx; \n  box-shadow: 0 8rpx 12rpx rgba(0, 0, 0, 0.04), inset 0 0 0 2rpx rgba(255,255,255,0.5);\n}\n.q-label { font-size: 24rpx; color: #9B8FB8; }\n.q-text { \n  margin-top: 8rpx; \n  font-size: 34rpx; \n  color: #4A4A4A; \n  font-weight: 600; \n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.answer-card { \n  margin: 0 24rpx; \n  background: rgba(255, 255, 255, 0.7);\n  backdrop-filter: blur(15px);\n  -webkit-backdrop-filter: blur(15px);\n  border-radius: 16rpx; \n  padding: 24rpx; \n  box-shadow: 0 8rpx 12rpx rgba(0, 0, 0, 0.04), inset 0 0 0 2rpx rgba(255,255,255,0.5);\n}\n.a-label { \n  font-size: 28rpx; \n  color: #4A4A4A; \n  font-weight: 600;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.a-input { \n  margin-top: 12rpx; \n  min-height: 100rpx; \n  border: 1rpx solid #F3E8FF; \n  border-radius: 16rpx; \n  padding: 16rpx; \n  font-size: 26rpx; \n  color: #333;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.actions { margin-top: 16rpx; display: flex; gap: 12rpx; }\n.btn { \n  padding: 16rpx 26rpx; \n  border-radius: 14rpx; \n  font-size: 26rpx; \n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n  border: none;\n}\n.btn.primary { \n  background: linear-gradient(135deg, #FFB5C2 0%, #FFD4A3 100%);\n  color: #ffffff; \n}\n.btn.secondary { \n  background: rgba(255, 255, 255, 0.8);\n  color: #4A4A4A; \n  border: 1rpx solid rgba(255, 181, 194, 0.3);\n}\n\n.partner-card { \n  margin: 16rpx 24rpx; \n  background: rgba(255, 255, 255, 0.7);\n  backdrop-filter: blur(15px);\n  -webkit-backdrop-filter: blur(15px);\n  border-radius: 16rpx; \n  padding: 24rpx; \n  box-shadow: 0 8rpx 12rpx rgba(0, 0, 0, 0.04), inset 0 0 0 2rpx rgba(255,255,255,0.5);\n}\n.p-label { \n  font-size: 28rpx; \n  color: #4A4A4A; \n  font-weight: 600;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.p-text { \n  margin-top: 8rpx; \n  font-size: 26rpx; \n  color: #9B8FB8; \n  font-weight: 400;\n  line-height: 1.8;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.empty-hint-text {\n  color: #C8C8C8;\n  font-style: italic;\n}\n\n.floating { \n  position: fixed; \n  right: 24rpx; \n  bottom: 120rpx; \n  background: linear-gradient(135deg, #FFB5C2 0%, #FFD4A3 100%);\n  color: #ffffff; \n  border-radius: 999rpx; \n  padding: 16rpx 20rpx; \n  display: flex; \n  align-items: center; \n  gap: 10rpx; \n  box-shadow: 0 8rpx 24rpx rgba(255, 181, 194, 0.4); \n  z-index: 99; \n}\n.custom-floating { bottom: 200rpx; }\n.float-icon { font-size: 26rpx; }\n.float-text { font-size: 24rpx; }\n\n.modal-mask { \n  position: fixed; \n  inset: 0; \n  background: rgba(0,0,0,0.35); \n  display: flex; \n  align-items: center; \n  justify-content: center; \n  z-index: 100; \n}\n.modal { \n  width: 88%; \n  background: #ffffff; \n  border-radius: 24rpx; \n  padding: 24rpx; \n  max-height: 80vh; \n  display: flex; \n  flex-direction: column; \n}\n.modal.custom-modal { width: 92%; }\n.modal-title { \n  font-size: 34rpx; \n  font-weight: 600; \n  color: #4A4A4A; \n  margin-bottom: 16rpx; \n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.history-list { max-height: 520rpx; margin-top: 12rpx; }\n.history-item { padding: 16rpx 0; border-bottom: 1rpx solid #F3E8FF; }\n.h-q { \n  font-size: 26rpx; \n  color: #4A4A4A; \n  font-weight: 600;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.h-me, .h-ta { \n  font-size: 26rpx; \n  color: #9B8FB8; \n  margin-top: 6rpx; \n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.h-time { \n  font-size: 24rpx; \n  color: #9B8FB8; \n  margin-top: 6rpx; \n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.modal-actions { margin-top: 14rpx; display: flex; justify-content: flex-end; gap: 12rpx; align-items: center; }\n\n/* è‡ªå®šä¹‰é—®é¢˜å¼¹çª—æ ·å¼ */\n.add-question { display: flex; gap: 12rpx; align-items: flex-start; margin-top: 16rpx; margin-bottom: 12rpx; }\n.q-input { \n  flex: 1; \n  height: 60rpx; \n  line-height: 60rpx;\n  border: 1rpx solid #F3E8FF; \n  border-radius: 8rpx; \n  padding: 0 12rpx; \n  font-size: 24rpx; \n  color: #333;\n  resize: none;\n  overflow: hidden;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.btn.small { padding: 12rpx 20rpx; font-size: 24rpx; white-space: nowrap; }\n\n.question-list { flex: 1; overflow-y: auto; margin-top: 8rpx; }\n.section-title { \n  font-size: 26rpx; \n  color: #4A4A4A; \n  margin-bottom: 12rpx; \n  padding-left: 4rpx; \n  font-weight: 600;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.question-item { \n  display: flex; \n  align-items: flex-start; \n  padding: 14rpx 12rpx; \n  background: rgba(255, 255, 255, 0.5); \n  border-radius: 12rpx; \n  margin-bottom: 8rpx; \n  border: 1rpx solid rgba(255, 255, 255, 0.8);\n}\n.question-item.custom { \n  background: rgba(255, 255, 255, 0.7);\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n  border: 1rpx solid rgba(255, 255, 255, 0.8);\n}\n.q-num { \n  font-size: 24rpx; \n  color: #FFB5C2; \n  font-weight: 600; \n  margin-right: 8rpx; \n  flex-shrink: 0; \n}\n.q-content { \n  flex: 1; \n  font-size: 26rpx; \n  color: #4A4A4A; \n  word-break: break-all; \n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.q-delete { \n  font-size: 24rpx; \n  color: #ff6b6b; \n  margin-left: 12rpx; \n  flex-shrink: 0; \n  padding: 4rpx 8rpx; \n}\n\n.empty-hint { \n  padding: 32rpx; \n  text-align: center; \n  color: #9B8FB8; \n  font-size: 26rpx; \n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/é¡¹ç›®/love_time_fu/pages/qna/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getPartnerAnswer","submitAnswer","getHistory","getQuestions","addCustomQuestion","deleteCustomQuestion"],"mappings":"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"}