{"version":3,"file":"index.js","sources":["pages/trajectory/index.vue","D:/softcaree/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdHJhamVjdG9yeS9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"trajectory-page\" :style=\"{ paddingTop: containerPaddingTop }\">\n    <!-- Ëá™ÂÆö‰πâÂØºËà™Ê†è -->\n    <view class=\"custom-navbar\">\n      <!-- Ê∏êÂèòËÉåÊôØ -->\n      <view class=\"navbar-gradient-bg\"></view>\n      <!-- Áä∂ÊÄÅÊ†èÂç†‰Ωç -->\n      <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n      <!-- ÂØºËà™Ê†èÂÜÖÂÆπ -->\n      <view class=\"navbar-content\" :style=\"{ height: navBarHeight + 'px' }\">\n        <view class=\"navbar-title\">\n          <text class=\"title-text\">ÊÅãÁà±ËΩ®Ëøπ</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- ÂÜÖÂÆπÂå∫Âüü -->\n    <view class=\"content-area\">\n      <view class=\"header\">\n        <text class=\"subtitle\">ËÆ∞ÂΩï‰Ω†‰ª¨‰∏ÄËµ∑Ëµ∞ËøáÁöÑÁÇπÁÇπÊª¥Êª¥</text>\n      </view>\n\n      <!-- ÂéÜÂè≤ËΩ®ËøπÊü•ËØ¢Âç°Áâá -->\n      <view class=\"history-card\">\n        <view class=\"history-card-header\">\n          <text class=\"history-title\">ÂéÜÂè≤ËΩ®Ëøπ</text>\n        </view>\n        <view class=\"date-range-selector\">\n          <picker mode=\"date\" :value=\"startDate\" :start=\"startDateMin\" :end=\"startDateMax\" @change=\"onStartDateChange\">\n            <view class=\"date-item\">\n              <text class=\"date-label\">ÂºÄÂßãÊó•Êúü</text>\n              <text class=\"date-value\" :class=\"{ placeholder: !startDate }\">{{ startDate || 'ËØ∑ÈÄâÊã©' }}</text>\n            </view>\n          </picker>\n          <text class=\"date-separator\">Ëá≥</text>\n          <picker mode=\"date\" :value=\"endDate\" :start=\"endDateMin\" :end=\"endDateMax\" @change=\"onEndDateChange\">\n            <view class=\"date-item\">\n              <text class=\"date-label\">ÁªìÊùüÊó•Êúü</text>\n              <text class=\"date-value\" :class=\"{ placeholder: !endDate }\">{{ endDate || 'ËØ∑ÈÄâÊã©' }}</text>\n            </view>\n          </picker>\n        </view>\n        <view class=\"history-actions\">\n          <button class=\"btn-query\" @click=\"loadHistoryTrajectory\" :disabled=\"!startDate || !endDate || isLoadingHistory\">\n            {{ isLoadingHistory ? 'Âä†ËΩΩ‰∏≠...' : 'Êü•ËØ¢ËΩ®Ëøπ' }}\n          </button>\n          <button class=\"btn-clear\" @click=\"clearHistory\" v-if=\"historyPoints.length > 0\">Ê∏ÖÈô§</button>\n        </view>\n        <view class=\"history-summary\" v-if=\"historySummary\">\n          <text class=\"summary-text\">\n            ÂÖ±ÊâæÂà∞ {{ historySummary.total_points || 0 }} ‰∏™ËΩ®ËøπÁÇπÔºå\n            ÊÄªË°åÁ®ã {{ formatDistance(historySummary.total_distance || 0) }}\n          </text>\n        </view>\n      </view>\n\n      <!-- ÂÆûÊó∂‰ΩçÁΩÆÂç°Áâá -->\n      <view class=\"location-card\" v-if=\"myLocation || partnerLocation\">\n        <view class=\"location-card-header\">\n          <text class=\"location-title\">ÂÆûÊó∂‰ΩçÁΩÆ</text>\n          <view class=\"location-actions\">\n            <view class=\"refresh-btn\" @click=\"refreshLocation\">\n              <text class=\"refresh-icon\">üîÑ</text>\n            </view>\n            <view class=\"toggle-btn\" :class=\"{ active: isLocationTracking }\" @click=\"toggleLocationTracking\">\n              <text class=\"toggle-text\">{{ isLocationTracking ? 'ËøΩË∏™‰∏≠' : 'ÂºÄÂêØËøΩË∏™' }}</text>\n            </view>\n          </view>\n        </view>\n        \n        <!-- ÊàëÁöÑ‰ΩçÁΩÆ -->\n        <view class=\"location-item\" v-if=\"myLocation\">\n          <view class=\"location-label\">\n            <text class=\"location-icon\">üìç</text>\n            <text class=\"location-name\">ÊàëÁöÑ‰ΩçÁΩÆ</text>\n          </view>\n          <view class=\"location-info\">\n            <text class=\"location-address\">{{ myLocation.address || myLocation.location_name || 'ÂÆö‰Ωç‰∏≠...' }}</text>\n            <text class=\"location-time\" v-if=\"myLocation.updateTime\">\n              {{ formatTime(myLocation.updateTime) }}\n            </text>\n          </view>\n        </view>\n\n        <!-- ÂØπÊñπ‰ΩçÁΩÆ -->\n        <view class=\"location-item\" v-if=\"partnerLocation\">\n          <view class=\"location-label\">\n            <text class=\"location-icon\">üíï</text>\n            <text class=\"location-name\">ÂØπÊñπ‰ΩçÁΩÆ</text>\n          </view>\n          <view class=\"location-info\">\n            <text class=\"location-address\">{{ partnerLocation.address || partnerLocation.location_name || 'ÂÆö‰Ωç‰∏≠...' }}</text>\n            <text class=\"location-time\" v-if=\"partnerLocation.updateTime\">\n              {{ formatTime(partnerLocation.updateTime) }}\n            </text>\n          </view>\n        </view>\n\n        <!-- Ë∑ùÁ¶ªÊòæÁ§∫ -->\n        <view class=\"distance-info\" v-if=\"distance !== null\">\n          <text class=\"distance-label\">ÂèåÊñπË∑ùÁ¶ª</text>\n          <text class=\"distance-value\">{{ formatDistance(distance) }}</text>\n        </view>\n\n        <!-- ÈîôËØØÊèêÁ§∫ -->\n        <view class=\"location-error\" v-if=\"locationError\">\n          <text class=\"error-text\">{{ locationError }}</text>\n        </view>\n      </view>\n\n      <!-- Âú∞ÂõæÂÆπÂô® -->\n      <view class=\"map-container\">\n        <!-- ÁúüÂÆûÂú∞ÂõæÁªÑ‰ª∂ -->\n        <map\n          class=\"map\"\n          :latitude=\"mapCenter.latitude\"\n          :longitude=\"mapCenter.longitude\"\n          :scale=\"mapScale\"\n          :markers=\"mapMarkers\"\n          :polyline=\"mapPolyline\"\n          :show-location=\"true\"\n          :enable-zoom=\"true\"\n          :enable-scroll=\"true\"\n          @tap=\"onMapTap\"\n        />\n        \n        <!-- Â§áÁî®ÔºöÂ¶ÇÊûúÊ≤°Êúâ‰ΩçÁΩÆ‰ø°ÊÅØÔºåÊòæÁ§∫ÈùôÊÄÅÂú∞ÂõæÂíåËΩ®ËøπÁÇπ -->\n        <view v-if=\"!myLocation && !partnerLocation\" class=\"map-placeholder\">\n          <image class=\"map-bg\" src=\"/static/trajectory/map.jpg\" mode=\"aspectFill\" />\n          \n          <!-- ËΩ®ËøπÁÇπ -->\n          <view\n            v-for=\"(point, index) in trajectoryPoints\"\n            :key=\"index\"\n            class=\"trajectory-point\"\n            :style=\"{ top: point.top + '%', left: point.left + '%' }\"\n            @click=\"showPointDetail(point)\"\n          >\n            <view class=\"point-marker\">\n              <text class=\"point-icon\">üìç</text>\n            </view>\n            <view class=\"point-label\">{{ point.title }}</view>\n          </view>\n          \n          <!-- ËΩ®ËøπËøûÁ∫ø -->\n          <view v-if=\"trajectoryPoints.length > 1\" class=\"trajectory-line\"></view>\n        </view>\n      </view>\n    </view>\n\n    <!-- ËΩ®ËøπÁÇπËØ¶ÊÉÖÂºπÁ™ó -->\n    <view v-if=\"showDetail\" class=\"modal-mask\" @click=\"hidePointDetail\">\n      <view class=\"modal\" @click.stop>\n        <view class=\"modal-header\">\n          <text class=\"modal-title\">{{ currentPoint.location_name || currentPoint.locationName || currentPoint.title || 'Êú™Áü•Âú∞ÁÇπ' }}</text>\n          <text class=\"modal-date\">{{ formatPointDate(currentPoint) }}</text>\n        </view>\n        <view class=\"modal-content\">\n          <view v-if=\"currentPoint.address\" class=\"point-address\">\n            <text class=\"address-label\">üìç</text>\n            <text class=\"address-text\">{{ currentPoint.address }}</text>\n          </view>\n          <image v-if=\"currentPoint.photos && currentPoint.photos.length > 0\" :src=\"currentPoint.photos[0]\" class=\"point-image\" mode=\"aspectFill\" />\n          <image v-else-if=\"currentPoint.image\" :src=\"currentPoint.image\" class=\"point-image\" mode=\"aspectFill\" />\n          <text class=\"point-description\">{{ currentPoint.description || \"ÊöÇÊó†ÊèèËø∞\" }}</text>\n          <view v-if=\"currentPoint.visit_count\" class=\"point-meta\">\n            <text class=\"meta-text\">Âà∞ËÆøÊ¨°Êï∞Ôºö{{ currentPoint.visit_count }}</text>\n            <text v-if=\"currentPoint.stay_duration\" class=\"meta-text\">ÂÅúÁïôÊó∂ÈïøÔºö{{ formatDuration(currentPoint.stay_duration) }}</text>\n          </view>\n        </view>\n        <view class=\"modal-actions\">\n          <button class=\"btn secondary\" @click=\"hidePointDetail\">ÂÖ≥Èó≠</button>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { updateLocation, getCurrentLocations, getTrajectoryPoints } from '@/api/trajectory.js';\n\nexport default {\n  data() {\n    return {\n      statusBarHeight: 0,\n      navBarHeight: 54,\n      screenWidth: 375,\n      trajectoryPoints: [],  // ÈùôÊÄÅËΩ®ËøπÁÇπÔºàÂ∑≤Â∫üÂºÉÔºå‰øùÁïôÂÖºÂÆπÊÄßÔºâ\n      showDetail: false,\n      currentPoint: {},\n      // ÂéÜÂè≤ËΩ®ËøπÁõ∏ÂÖ≥\n      startDate: '',  // ÂºÄÂßãÊó•Êúü\n      endDate: '',    // ÁªìÊùüÊó•Êúü\n      historyPoints: [],  // ÂéÜÂè≤ËΩ®ËøπÁÇπÂàóË°®\n      historySummary: null,  // ÂéÜÂè≤ËΩ®ËøπÁªüËÆ°‰ø°ÊÅØ\n      isLoadingHistory: false,  // ÊòØÂê¶Ê≠£Âú®Âä†ËΩΩÂéÜÂè≤ËΩ®Ëøπ\n      // ÂÆö‰ΩçÁõ∏ÂÖ≥\n      isLocationTracking: false,  // ÊòØÂê¶ÂºÄÂêØÂÆö‰ΩçËøΩË∏™\n      locationTimer: null,         // ÂÆöÊó∂Âô®ID\n      myLocation: null,            // ÊàëÁöÑ‰ΩçÁΩÆ\n      partnerLocation: null,        // ÂØπÊñπ‰ΩçÁΩÆ\n      distance: null,               // ÂèåÊñπË∑ùÁ¶ªÔºàÂÖ¨ÈáåÔºâ\n      isRequestingLocation: false,  // ÊòØÂê¶Ê≠£Âú®ËØ∑Ê±Ç‰ΩçÁΩÆ\n      locationError: null,           // ÂÆö‰ΩçÈîôËØØ‰ø°ÊÅØ\n      // Âú∞ÂõæÁõ∏ÂÖ≥\n      mapCenter: {\n        latitude: 39.9042,  // ÈªòËÆ§Âåó‰∫¨\n        longitude: 116.4074\n      },\n      mapScale: 13,  // Âú∞ÂõæÁº©ÊîæÁ∫ßÂà´\n      mapMarkers: [],  // Âú∞ÂõæÊ†áËÆ∞ÁÇπ\n      mapPolyline: [],  // Âú∞ÂõæË∑ØÁ∫ø\n      showHistoryMode: false  // ÊòØÂê¶ÊòæÁ§∫ÂéÜÂè≤ËΩ®ËøπÊ®°Âºè\n    };\n  },\n  computed: {\n    containerPaddingTop() {\n      // Â∞ÜpxËΩ¨Êç¢‰∏∫rpx: rpx = px * 750 / screenWidth\n      // Ê∑ªÂä†20rpxÈ¢ùÂ§ñÈó¥Ë∑ù\n      const totalHeightPx = this.statusBarHeight + this.navBarHeight;\n      const pxToRpx = 750 / this.screenWidth;\n      const totalHeightRpx = totalHeightPx * pxToRpx;\n      return totalHeightRpx + 20 + 'rpx';\n    },\n    // ÂºÄÂßãÊó•ÊúüÈÄâÊã©Âô®ÁöÑÊúÄÂ∞èÊó•Êúü\n    startDateMin() {\n      return '2020-01-01';\n    },\n    // ÂºÄÂßãÊó•ÊúüÈÄâÊã©Âô®ÁöÑÊúÄÂ§ßÊó•Êúü\n    startDateMax() {\n      return this.endDate || this.formatDate(new Date());\n    },\n    // ÁªìÊùüÊó•ÊúüÈÄâÊã©Âô®ÁöÑÊúÄÂ∞èÊó•Êúü\n    endDateMin() {\n      return this.startDate || '2020-01-01';\n    },\n    // ÁªìÊùüÊó•ÊúüÈÄâÊã©Âô®ÁöÑÊúÄÂ§ßÊó•Êúü\n    endDateMax() {\n      return this.formatDate(new Date());\n    }\n  },\n  watch: {\n    // ÁõëÂê¨‰ΩçÁΩÆÂèòÂåñÔºåÊõ¥Êñ∞Âú∞Âõæ\n    myLocation: {\n      handler() {\n        if (!this.showHistoryMode) {\n          this.updateMap();\n        }\n      },\n      deep: true\n    },\n    partnerLocation: {\n      handler() {\n        if (!this.showHistoryMode) {\n          this.updateMap();\n        }\n      },\n      deep: true\n    },\n    // ÁõëÂê¨ÂéÜÂè≤ËΩ®ËøπÁÇπÂèòÂåñÔºåÊõ¥Êñ∞Âú∞Âõæ\n    historyPoints: {\n      handler() {\n        if (this.showHistoryMode && this.historyPoints.length > 0) {\n          this.updateHistoryMap();\n        }\n      },\n      deep: true\n    }\n  },\n  onLoad() {\n    this.getSystemInfo();\n    // Ê£ÄÊü•ÂÆö‰ΩçÊùÉÈôêÂπ∂ÂàùÂßãÂåñ\n    this.initLocation();\n  },\n  onUnload() {\n    // È°µÈù¢Âç∏ËΩΩÊó∂ÂÅúÊ≠¢ÂÆö‰ΩçËøΩË∏™\n    this.stopLocationTracking();\n  },\n  methods: {\n    getSystemInfo() {\n      const systemInfo = uni.getSystemInfoSync();\n      this.statusBarHeight = systemInfo.statusBarHeight || 0;\n      this.screenWidth = systemInfo.windowWidth || 375;\n      this.navBarHeight = 54;\n    },\n    showPointDetail(point) {\n      this.currentPoint = point;\n      this.showDetail = true;\n    },\n    hidePointDetail() {\n      this.showDetail = false;\n      this.currentPoint = {};\n    },\n    \n    // ========== ÂÆö‰ΩçÁõ∏ÂÖ≥ÊñπÊ≥ï ==========\n    \n    /**\n     * ÂàùÂßãÂåñÂÆö‰ΩçÂäüËÉΩ\n     */\n    async initLocation() {\n      try {\n        // Ê£ÄÊü•ÂÆö‰ΩçÊùÉÈôê\n        const setting = await this.checkLocationPermission();\n        if (setting) {\n          // È¶ñÊ¨°Ëé∑Âèñ‰ΩçÁΩÆ\n          await this.getCurrentLocation();\n          // Âä†ËΩΩÂèåÊñπ‰ΩçÁΩÆ\n          await this.loadCurrentLocations();\n        }\n      } catch (error) {\n        console.error('ÂàùÂßãÂåñÂÆö‰ΩçÂ§±Ë¥•:', error);\n      }\n    },\n    \n    /**\n     * Ê£ÄÊü•ÂÆö‰ΩçÊùÉÈôê\n     */\n    checkLocationPermission() {\n      return new Promise((resolve) => {\n        uni.getSetting({\n          success: (res) => {\n            if (res.authSetting['scope.userLocation']) {\n              // Â∑≤ÊéàÊùÉ\n              resolve(true);\n            } else if (res.authSetting['scope.userLocation'] === false) {\n              // Â∑≤ÊãíÁªùÔºåÊèêÁ§∫Áî®Êà∑ÊâãÂä®ÂºÄÂêØ\n              uni.showModal({\n                title: 'ÈúÄË¶ÅÂÆö‰ΩçÊùÉÈôê',\n                content: '‰∏∫‰∫ÜÂ±ïÁ§∫ÂèåÊñπ‰ΩçÁΩÆÔºåÈúÄË¶ÅËé∑ÂèñÊÇ®ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇËØ∑Âú®ËÆæÁΩÆ‰∏≠ÂºÄÂêØÂÆö‰ΩçÊùÉÈôê„ÄÇ',\n                showCancel: true,\n                confirmText: 'ÂéªËÆæÁΩÆ',\n                cancelText: 'ÂèñÊ∂à',\n                success: (modalRes) => {\n                  if (modalRes.confirm) {\n                    uni.openSetting({\n                      success: (settingRes) => {\n                        if (settingRes.authSetting['scope.userLocation']) {\n                          resolve(true);\n                        } else {\n                          resolve(false);\n                        }\n                      }\n                    });\n                  } else {\n                    resolve(false);\n                  }\n                }\n              });\n            } else {\n              // Êú™ÊéàÊùÉÔºåËØ∑Ê±ÇÊéàÊùÉ\n              uni.authorize({\n                scope: 'scope.userLocation',\n                success: () => {\n                  resolve(true);\n                },\n                fail: () => {\n                  uni.showToast({\n                    title: 'ÈúÄË¶ÅÂÆö‰ΩçÊùÉÈôêÊâçËÉΩ‰ΩøÁî®Ê≠§ÂäüËÉΩ',\n                    icon: 'none',\n                    duration: 2000\n                  });\n                  resolve(false);\n                }\n              });\n            }\n          },\n          fail: () => {\n            resolve(false);\n          }\n        });\n      });\n    },\n    \n    /**\n     * Ëé∑ÂèñÂΩìÂâç‰ΩçÁΩÆÂπ∂‰∏ä‰º†\n     */\n    async getCurrentLocation() {\n      if (this.isRequestingLocation) {\n        return;\n      }\n      \n      this.isRequestingLocation = true;\n      this.locationError = null;\n      \n      try {\n        // Ëé∑ÂèñÂΩìÂâç‰ΩçÁΩÆ\n        const locationRes = await new Promise((resolve, reject) => {\n          uni.getLocation({\n            type: 'gcj02',  // ËÖæËÆØÂú∞ÂõæÂùêÊ†áÁ≥ª\n            altitude: false,\n            success: resolve,\n            fail: reject\n          });\n        });\n        \n        const { latitude, longitude } = locationRes;\n        \n        // ‰øùÂ≠òÊàëÁöÑ‰ΩçÁΩÆ\n        this.myLocation = {\n          latitude,\n          longitude,\n          updateTime: new Date()\n        };\n        \n        // ‰∏ä‰º†Âà∞ÂêéÁ´Ø\n        try {\n          await updateLocation({\n            latitude,\n            longitude\n          });\n          \n          console.log('‰ΩçÁΩÆ‰∏ä‰º†ÊàêÂäü');\n        } catch (error) {\n          console.error('‰ΩçÁΩÆ‰∏ä‰º†Â§±Ë¥•:', error);\n          // Â¶ÇÊûúÊòØ\"Áî®Êà∑‰∏çÂ≠òÂú®\"ÈîôËØØÔºåÊèêÁ§∫Áî®Êà∑‰ΩÜ‰∏çË¶ÅË∑≥ËΩ¨ÁôªÂΩï\n          if (error.message && error.message.includes('Áî®Êà∑‰∏çÂ≠òÂú®')) {\n            console.warn('‚ö†Ô∏è ‰ΩçÁΩÆ‰∏ä‰º†Â§±Ë¥•ÔºöÁî®Êà∑‰ø°ÊÅØÂ∑≤Â§±ÊïàÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï');\n            // ‰∏çÊòæÁ§∫ÈîôËØØÊèêÁ§∫ÔºåÈÅøÂÖçÊâìÊâ∞Áî®Êà∑\n            // ‰ΩçÁΩÆ‰∏ä‰º†Â§±Ë¥•‰∏çÂΩ±ÂìçÊú¨Âú∞ÊòæÁ§∫ÂíåÈ°µÈù¢‰ΩøÁî®\n          }\n          // ‰∏ä‰º†Â§±Ë¥•‰∏çÂΩ±ÂìçÊú¨Âú∞ÊòæÁ§∫\n        }\n        \n        // ÈáçÊñ∞Âä†ËΩΩÂèåÊñπ‰ΩçÁΩÆ\n        try {\n          await this.loadCurrentLocations();\n        } catch (error) {\n          // Âä†ËΩΩÂ§±Ë¥•‰∏çÂΩ±ÂìçÂÖ∂‰ªñÂäüËÉΩ\n          if (error.message && error.message.includes('Áî®Êà∑‰∏çÂ≠òÂú®')) {\n            console.warn('‚ö†Ô∏è Âä†ËΩΩÂèåÊñπ‰ΩçÁΩÆÂ§±Ë¥•ÔºöÁî®Êà∑‰ø°ÊÅØÂ∑≤Â§±Êïà');\n          }\n        }\n        \n      } catch (error) {\n        console.error('Ëé∑Âèñ‰ΩçÁΩÆÂ§±Ë¥•:', error);\n        this.locationError = error.errMsg || 'Ëé∑Âèñ‰ΩçÁΩÆÂ§±Ë¥•';\n        \n        if (error.errMsg && error.errMsg.includes('auth deny')) {\n          uni.showToast({\n            title: 'ÂÆö‰ΩçÊùÉÈôêË¢´ÊãíÁªù',\n            icon: 'none',\n            duration: 2000\n          });\n        }\n      } finally {\n        this.isRequestingLocation = false;\n      }\n    },\n    \n    /**\n     * Âä†ËΩΩÂèåÊñπÂÆûÊó∂‰ΩçÁΩÆ\n     */\n    async loadCurrentLocations() {\n      try {\n        const res = await getCurrentLocations();\n        \n        if (res.success && res.data) {\n          // ÂÖºÂÆπÂêéÁ´ØËøîÂõûÁöÑ‰∏§ÁßçÂëΩÂêçÊ†ºÂºèÔºöÈ©ºÂ≥∞ÂëΩÂêçÔºàmyLocationÔºâÂíå‰∏ãÂàíÁ∫øÂëΩÂêçÔºàmy_locationÔºâ\n          const myLocationData = res.data.myLocation || res.data.my_location;\n          const partnerLocationData = res.data.partnerLocation || res.data.partner_location;\n          const distance = res.data.distance;\n          const distanceText = res.data.distance_text || res.data.distanceText;\n          \n          // Êõ¥Êñ∞ÊàëÁöÑ‰ΩçÁΩÆ\n          if (myLocationData) {\n            this.myLocation = {\n              latitude: myLocationData.latitude,\n              longitude: myLocationData.longitude,\n              address: myLocationData.address || myLocationData.description || null,\n              location_name: myLocationData.location_name || myLocationData.locationName || null,\n              updateTime: myLocationData.update_time || myLocationData.updatedAt || myLocationData.createdAt || new Date()\n            };\n            \n            // Â¶ÇÊûúÊ≤°ÊúâÂú∞ÂùÄ‰ø°ÊÅØÔºåÊ†πÊçÆÁªèÁ∫¨Â∫¶ÂèçËß£ÊûêÂú∞ÂùÄ\n            if (!this.myLocation.address && !this.myLocation.location_name) {\n              await this.reverseGeocode(this.myLocation.latitude, this.myLocation.longitude, 'my');\n            }\n          }\n          \n          // Êõ¥Êñ∞ÂØπÊñπ‰ΩçÁΩÆ\n          if (partnerLocationData) {\n            this.partnerLocation = {\n              latitude: partnerLocationData.latitude,\n              longitude: partnerLocationData.longitude,\n              address: partnerLocationData.address || partnerLocationData.description || null,\n              location_name: partnerLocationData.location_name || partnerLocationData.locationName || null,\n              updateTime: partnerLocationData.update_time || partnerLocationData.updatedAt || partnerLocationData.createdAt || new Date()\n            };\n            \n            // Â¶ÇÊûúÊ≤°ÊúâÂú∞ÂùÄ‰ø°ÊÅØÔºåÊ†πÊçÆÁªèÁ∫¨Â∫¶ÂèçËß£ÊûêÂú∞ÂùÄ\n            if (!this.partnerLocation.address && !this.partnerLocation.location_name) {\n              await this.reverseGeocode(this.partnerLocation.latitude, this.partnerLocation.longitude, 'partner');\n            }\n          } else {\n            this.partnerLocation = null;\n          }\n          \n          // Êõ¥Êñ∞Ë∑ùÁ¶ª\n          this.distance = distance;\n          \n          // Â¶ÇÊûúÂèåÊñπÈÉΩÊúâ‰ΩçÁΩÆÔºå‰ΩÜÂêéÁ´ØÊ≤°ÊúâËøîÂõûË∑ùÁ¶ªÔºåÂâçÁ´ØËÆ°ÁÆóË∑ùÁ¶ª\n          if (this.distance === null || this.distance === undefined) {\n            if (this.myLocation && this.partnerLocation) {\n              this.distance = this.calculateDistance(\n                this.myLocation.latitude, this.myLocation.longitude,\n                this.partnerLocation.latitude, this.partnerLocation.longitude\n              );\n            }\n          }\n          \n          console.log('ÂèåÊñπ‰ΩçÁΩÆÂä†ËΩΩÊàêÂäü', {\n            myLocation: this.myLocation,\n            partnerLocation: this.partnerLocation,\n            distance: distanceText || this.distance,\n            rawData: res.data\n          });\n          \n          // Êõ¥Êñ∞Âú∞ÂõæÊòæÁ§∫\n          this.updateMap();\n        }\n      } catch (error) {\n        console.error('Âä†ËΩΩÂèåÊñπ‰ΩçÁΩÆÂ§±Ë¥•:', error);\n        // Â¶ÇÊûúÊòØ\"Áî®Êà∑‰∏çÂ≠òÂú®\"ÈîôËØØÔºå‰ºòÈõÖÂ§ÑÁêÜÔºå‰∏çËß¶ÂèëÂÖ®Â±ÄÁôªÂΩïË∑≥ËΩ¨\n        if (error.message && error.message.includes('Áî®Êà∑‰∏çÂ≠òÂú®')) {\n          console.warn('‚ö†Ô∏è Âä†ËΩΩÂèåÊñπ‰ΩçÁΩÆÂ§±Ë¥•ÔºöÁî®Êà∑‰ø°ÊÅØÂ∑≤Â§±Êïà');\n          // ‰∏çÊòæÁ§∫ÈîôËØØÊèêÁ§∫ÔºåÈÅøÂÖçÊâìÊâ∞Áî®Êà∑\n          // ‰ΩçÁΩÆÂä†ËΩΩÂ§±Ë¥•‰∏çÂΩ±ÂìçÈ°µÈù¢ÂÖ∂‰ªñÂäüËÉΩ\n          return;\n        }\n        // Â¶ÇÊûúÂêéÁ´ØÊé•Âè£Êú™ÂÆûÁé∞Ôºå‰∏çÊòæÁ§∫ÈîôËØØÔºàÂºÄÂèëÈò∂ÊÆµÔºâ\n        if (process.env.NODE_ENV === 'development') {\n          console.warn('‚ö†Ô∏è ÂêéÁ´ØÊé•Âè£ÂèØËÉΩÊú™ÂÆûÁé∞ÔºåË∑≥ËøáÂä†ËΩΩÂèåÊñπ‰ΩçÁΩÆ');\n        }\n      }\n    },\n    \n    /**\n     * ÂºÄÂêØÂÆö‰ΩçËøΩË∏™ÔºàÂÆöÊó∂‰∏ä‰º†‰ΩçÁΩÆÔºâ\n     */\n    startLocationTracking() {\n      if (this.isLocationTracking) {\n        return;\n      }\n      \n      // Ê£ÄÊü•ÊùÉÈôê\n      this.checkLocationPermission().then((hasPermission) => {\n        if (!hasPermission) {\n          return;\n        }\n        \n        this.isLocationTracking = true;\n        \n        // Á´ãÂç≥Ëé∑Âèñ‰∏ÄÊ¨°‰ΩçÁΩÆ\n        this.getCurrentLocation();\n        \n        // ÊØè5ÂàÜÈíü‰∏ä‰º†‰∏ÄÊ¨°‰ΩçÁΩÆ\n        this.locationTimer = setInterval(() => {\n          this.getCurrentLocation();\n        }, 5 * 60 * 1000);  // 5ÂàÜÈíü\n        \n        uni.showToast({\n          title: 'ÂÆö‰ΩçËøΩË∏™Â∑≤ÂºÄÂêØ',\n          icon: 'success',\n          duration: 2000\n        });\n      });\n    },\n    \n    /**\n     * ÂÅúÊ≠¢ÂÆö‰ΩçËøΩË∏™\n     */\n    stopLocationTracking() {\n      if (this.locationTimer) {\n        clearInterval(this.locationTimer);\n        this.locationTimer = null;\n      }\n      this.isLocationTracking = false;\n      \n      uni.showToast({\n        title: 'ÂÆö‰ΩçËøΩË∏™Â∑≤ÂÖ≥Èó≠',\n        icon: 'none',\n        duration: 2000\n      });\n    },\n    \n    /**\n     * ÂàáÊç¢ÂÆö‰ΩçËøΩË∏™Áä∂ÊÄÅ\n     */\n    toggleLocationTracking() {\n      if (this.isLocationTracking) {\n        this.stopLocationTracking();\n      } else {\n        this.startLocationTracking();\n      }\n    },\n    \n    /**\n     * ÊâãÂä®Âà∑Êñ∞‰ΩçÁΩÆ\n     */\n    async refreshLocation() {\n      uni.showLoading({ title: 'Ëé∑Âèñ‰ΩçÁΩÆ‰∏≠...' });\n      try {\n        await this.getCurrentLocation();\n        uni.showToast({\n          title: '‰ΩçÁΩÆÂ∑≤Êõ¥Êñ∞',\n          icon: 'success',\n          duration: 1500\n        });\n      } catch (error) {\n        uni.showToast({\n          title: 'Ëé∑Âèñ‰ΩçÁΩÆÂ§±Ë¥•',\n          icon: 'none',\n          duration: 2000\n        });\n      } finally {\n        uni.hideLoading();\n      }\n    },\n    \n    /**\n     * Ê†ºÂºèÂåñÊó∂Èó¥\n     */\n    formatTime(time) {\n      if (!time) return '';\n      \n      const date = new Date(time);\n      const now = new Date();\n      const diff = now - date;\n      const minutes = Math.floor(diff / 60000);\n      \n      if (minutes < 1) {\n        return 'ÂàöÂàö';\n      } else if (minutes < 60) {\n        return `${minutes}ÂàÜÈíüÂâç`;\n      } else if (minutes < 1440) {\n        const hours = Math.floor(minutes / 60);\n        return `${hours}Â∞èÊó∂Ââç`;\n      } else {\n        const month = date.getMonth() + 1;\n        const day = date.getDate();\n        const hour = date.getHours();\n        const minute = date.getMinutes();\n        return `${month}-${day} ${hour}:${minute.toString().padStart(2, '0')}`;\n      }\n    },\n    \n    /**\n     * Ê†ºÂºèÂåñË∑ùÁ¶ª\n     */\n    formatDistance(distance) {\n      if (distance === null || distance === undefined) {\n        return '--';\n      }\n      \n      if (distance < 1) {\n        // Â∞è‰∫é1ÂÖ¨ÈáåÔºåÊòæÁ§∫Á±≥\n        const meters = Math.round(distance * 1000);\n        return `${meters}Á±≥`;\n      } else if (distance < 100) {\n        // 1-100ÂÖ¨ÈáåÔºåÊòæÁ§∫ÂÖ¨ÈáåÔºà‰øùÁïô1‰ΩçÂ∞èÊï∞Ôºâ\n        return `${distance.toFixed(1)}ÂÖ¨Èáå`;\n      } else {\n        // Â§ß‰∫é100ÂÖ¨ÈáåÔºåÊòæÁ§∫ÂÖ¨ÈáåÔºàÊï¥Êï∞Ôºâ\n        return `${Math.round(distance)}ÂÖ¨Èáå`;\n      }\n    },\n    \n    /**\n     * Ê†πÊçÆÁªèÁ∫¨Â∫¶ÂèçËß£ÊûêÂú∞ÂùÄÔºà‰ΩøÁî®ËÖæËÆØÂú∞ÂõæAPIÔºâ\n     */\n    async reverseGeocode(latitude, longitude, type = 'my') {\n      try {\n        // ‰ΩøÁî®uni.getLocationÁöÑÂèçÂêëÂú∞ÁêÜÁºñÁ†ÅÂäüËÉΩ\n        // Ê≥®ÊÑèÔºöuni.getLocationÂú®ÂæÆ‰ø°Â∞èÁ®ãÂ∫è‰∏≠‰∏çÊîØÊåÅÈÄÜÂú∞ÂùÄËß£Êûê\n        // ËøôÈáå‰ΩøÁî®ËÖæËÆØÂú∞ÂõæAPIÔºàÈúÄË¶ÅÈÖçÁΩÆkeyÔºâ\n        // ÊàñËÄÖ‰ΩøÁî®ÂêéÁ´ØÊé•Âè£ËøõË°åÂú∞ÂùÄËß£Êûê\n        \n        // ‰∏¥Êó∂ÊñπÊ°àÔºö‰ΩøÁî®ÁÆÄÂçïÁöÑÊèèËø∞\n        const location = {\n          latitude,\n          longitude,\n          address: `${latitude.toFixed(4)}, ${longitude.toFixed(4)}`,\n          location_name: 'ÂΩìÂâç‰ΩçÁΩÆ'\n        };\n        \n        // Êõ¥Êñ∞‰ΩçÁΩÆ‰ø°ÊÅØ\n        if (type === 'my' && this.myLocation) {\n          this.myLocation.address = this.myLocation.address || location.address;\n          this.myLocation.location_name = this.myLocation.location_name || location.location_name;\n        } else if (type === 'partner' && this.partnerLocation) {\n          this.partnerLocation.address = this.partnerLocation.address || location.address;\n          this.partnerLocation.location_name = this.partnerLocation.location_name || location.location_name;\n        }\n        \n        // TODO: ÈõÜÊàêËÖæËÆØÂú∞ÂõæAPIÊàñÂêéÁ´ØÂú∞ÂùÄËß£ÊûêÊé•Âè£\n        // Â¶ÇÊûúÈúÄË¶ÅËØ¶ÁªÜÂú∞ÂùÄÔºåÂèØ‰ª•Ë∞ÉÁî®ÂêéÁ´ØÊé•Âè£ÊàñÁ¨¨‰∏âÊñπÂú∞ÂõæAPI\n      } catch (error) {\n        console.error('Âú∞ÂùÄÂèçËß£ÊûêÂ§±Ë¥•:', error);\n      }\n    },\n    \n    /**\n     * ËÆ°ÁÆó‰∏§ÁÇπÈó¥Ë∑ùÁ¶ªÔºà‰ΩøÁî®HaversineÂÖ¨ÂºèÔºåÂçï‰ΩçÔºöÂÖ¨ÈáåÔºâ\n     */\n    calculateDistance(lat1, lon1, lat2, lon2) {\n      const R = 6371; // Âú∞ÁêÉÂçäÂæÑÔºàÂÖ¨ÈáåÔºâ\n      const dLat = (lat2 - lat1) * Math.PI / 180;\n      const dLon = (lon2 - lon1) * Math.PI / 180;\n      const a = \n        Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\n      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      const distance = R * c;\n      return distance;\n    },\n    \n    /**\n     * Êõ¥Êñ∞Âú∞ÂõæÊòæÁ§∫\n     */\n    updateMap() {\n      const markers = [];\n      \n      // Ê∑ªÂä†ÊàëÁöÑ‰ΩçÁΩÆÊ†áËÆ∞\n      if (this.myLocation && this.myLocation.latitude && this.myLocation.longitude) {\n        const marker = {\n          id: 1,\n          latitude: this.myLocation.latitude,\n          longitude: this.myLocation.longitude,\n          width: 30,\n          height: 30,\n          title: 'ÊàëÁöÑ‰ΩçÁΩÆ',\n          callout: {\n            content: this.myLocation.address || this.myLocation.location_name || 'ÊàëÁöÑ‰ΩçÁΩÆ',\n            color: '#333',\n            fontSize: 12,\n            borderRadius: 4,\n            bgColor: '#fff',\n            padding: 8,\n            display: 'BYCLICK'\n          }\n        };\n        // Â¶ÇÊûúÊúâËá™ÂÆö‰πâÂõæÊ†áÔºå‰ΩøÁî®Ëá™ÂÆö‰πâÂõæÊ†áÔºõÂê¶Âàô‰ΩøÁî®ÈªòËÆ§Ê†∑Âºè\n        // marker.iconPath = '/static/trajectory/my-location.png';\n        markers.push(marker);\n      }\n      \n      // Ê∑ªÂä†ÂØπÊñπ‰ΩçÁΩÆÊ†áËÆ∞\n      if (this.partnerLocation && this.partnerLocation.latitude && this.partnerLocation.longitude) {\n        const marker = {\n          id: 2,\n          latitude: this.partnerLocation.latitude,\n          longitude: this.partnerLocation.longitude,\n          width: 30,\n          height: 30,\n          title: 'ÂØπÊñπ‰ΩçÁΩÆ',\n          callout: {\n            content: this.partnerLocation.address || this.partnerLocation.location_name || 'ÂØπÊñπ‰ΩçÁΩÆ',\n            color: '#333',\n            fontSize: 12,\n            borderRadius: 4,\n            bgColor: '#fff',\n            padding: 8,\n            display: 'BYCLICK'\n          }\n        };\n        // Â¶ÇÊûúÊúâËá™ÂÆö‰πâÂõæÊ†áÔºå‰ΩøÁî®Ëá™ÂÆö‰πâÂõæÊ†áÔºõÂê¶Âàô‰ΩøÁî®ÈªòËÆ§Ê†∑Âºè\n        // marker.iconPath = '/static/trajectory/partner-location.png';\n        markers.push(marker);\n      }\n      \n      this.mapMarkers = markers;\n      \n      // ËÆ°ÁÆóÂú∞Âõæ‰∏≠ÂøÉÁÇπ\n      if (markers.length > 0) {\n        if (markers.length === 1) {\n          // Âè™Êúâ‰∏Ä‰∏™‰ΩçÁΩÆÔºå‰ª•ËØ•‰ΩçÁΩÆ‰∏∫‰∏≠ÂøÉ\n          this.mapCenter = {\n            latitude: markers[0].latitude,\n            longitude: markers[0].longitude\n          };\n          this.mapScale = 15;\n        } else {\n          // ‰∏§‰∏™‰ΩçÁΩÆÔºåËÆ°ÁÆó‰∏≠ÂøÉÁÇπ\n          const avgLat = (markers[0].latitude + markers[1].latitude) / 2;\n          const avgLon = (markers[0].longitude + markers[1].longitude) / 2;\n          this.mapCenter = {\n            latitude: avgLat,\n            longitude: avgLon\n          };\n          \n          // Ê†πÊçÆË∑ùÁ¶ªË∞ÉÊï¥Áº©ÊîæÁ∫ßÂà´\n          const dist = this.calculateDistance(\n            markers[0].latitude, markers[0].longitude,\n            markers[1].latitude, markers[1].longitude\n          );\n          if (dist < 1) {\n            this.mapScale = 16; // 1ÂÖ¨ÈáåÂÜÖÔºåÊîæÂ§ß\n          } else if (dist < 10) {\n            this.mapScale = 14; // 10ÂÖ¨ÈáåÂÜÖ\n          } else if (dist < 100) {\n            this.mapScale = 12; // 100ÂÖ¨ÈáåÂÜÖ\n          } else {\n            this.mapScale = 10; // Êõ¥ËøúË∑ùÁ¶ª\n          }\n          \n          // Ê∑ªÂä†ËøûÁ∫ø\n          this.mapPolyline = [{\n            points: [\n              { latitude: markers[0].latitude, longitude: markers[0].longitude },\n              { latitude: markers[1].latitude, longitude: markers[1].longitude }\n            ],\n            color: '#FF69B4',\n            width: 3,\n            borderColor: '#fff',\n            borderWidth: 1,\n            arrowLine: true\n          }];\n        }\n      } else {\n        // Ê≤°Êúâ‰ΩçÁΩÆ‰ø°ÊÅØÔºå‰ΩøÁî®ÈªòËÆ§‰∏≠ÂøÉÁÇπ\n        this.mapCenter = {\n          latitude: 39.9042,\n          longitude: 116.4074\n        };\n        this.mapScale = 13;\n        this.mapPolyline = [];\n      }\n    },\n    \n    /**\n     * Âú∞ÂõæÁÇπÂáª‰∫ã‰ª∂\n     */\n    onMapTap(e) {\n      console.log('Âú∞ÂõæÁÇπÂáª:', e);\n      // Â¶ÇÊûúÊòØÂéÜÂè≤ËΩ®ËøπÊ®°ÂºèÔºåÊ£ÄÊü•ÊòØÂê¶ÁÇπÂáª‰∫ÜÊ†áËÆ∞ÁÇπ\n      if (this.showHistoryMode && e.detail && e.detail.markerId) {\n        const markerId = e.detail.markerId;\n        // ÊâæÂà∞ÂØπÂ∫îÁöÑËΩ®ËøπÁÇπ\n        const marker = this.mapMarkers.find(m => m.id === markerId);\n        if (marker && marker.pointData) {\n          this.showPointDetail(marker.pointData);\n        }\n      }\n    },\n    \n    // ========== ÂéÜÂè≤ËΩ®ËøπÁõ∏ÂÖ≥ÊñπÊ≥ï ==========\n    \n    /**\n     * ÂºÄÂßãÊó•ÊúüÊîπÂèò\n     */\n    onStartDateChange(e) {\n      const selectedDate = e.detail.value;\n      if (this.endDate && selectedDate > this.endDate) {\n        uni.showToast({\n          title: 'ÂºÄÂßãÊó•Êúü‰∏çËÉΩÊôö‰∫éÁªìÊùüÊó•Êúü',\n          icon: 'none'\n        });\n        return;\n      }\n      this.startDate = selectedDate;\n    },\n    \n    /**\n     * ÁªìÊùüÊó•ÊúüÊîπÂèò\n     */\n    onEndDateChange(e) {\n      const selectedDate = e.detail.value;\n      if (this.startDate && selectedDate < this.startDate) {\n        uni.showToast({\n          title: 'ÁªìÊùüÊó•Êúü‰∏çËÉΩÊó©‰∫éÂºÄÂßãÊó•Êúü',\n          icon: 'none'\n        });\n        return;\n      }\n      this.endDate = selectedDate;\n    },\n    \n    /**\n     * Ê†ºÂºèÂåñÊó•Êúü‰∏∫ YYYY-MM-DD\n     */\n    formatDate(date) {\n      if (typeof date === 'string') {\n        return date;\n      }\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const day = String(date.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    \n    /**\n     * Âä†ËΩΩÂéÜÂè≤ËΩ®ËøπÁÇπ\n     */\n    async loadHistoryTrajectory() {\n      if (!this.startDate || !this.endDate) {\n        uni.showToast({\n          title: 'ËØ∑ÈÄâÊã©Êó∂Èó¥Âå∫Èó¥',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      if (this.startDate > this.endDate) {\n        uni.showToast({\n          title: 'ÂºÄÂßãÊó•Êúü‰∏çËÉΩÊôö‰∫éÁªìÊùüÊó•Êúü',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      this.isLoadingHistory = true;\n      \n      try {\n        const res = await getTrajectoryPoints({\n          start_date: this.startDate,\n          end_date: this.endDate,\n          limit: 1000  // Ëé∑ÂèñÊõ¥Â§öËΩ®ËøπÁÇπ\n        });\n        \n        if (res.success && res.data) {\n          this.historyPoints = res.data.points || [];\n          this.historySummary = res.data.summary || null;\n          this.showHistoryMode = true;\n          \n          // Êõ¥Êñ∞Âú∞ÂõæÊòæÁ§∫\n          if (this.historyPoints.length > 0) {\n            this.updateHistoryMap();\n            uni.showToast({\n              title: `Âä†ËΩΩ‰∫Ü ${this.historyPoints.length} ‰∏™ËΩ®ËøπÁÇπ`,\n              icon: 'success',\n              duration: 2000\n            });\n          } else {\n            uni.showToast({\n              title: 'ËØ•Êó∂Èó¥ÊÆµÂÜÖÊ≤°ÊúâËΩ®ËøπÁÇπ',\n              icon: 'none'\n            });\n            this.showHistoryMode = false;\n          }\n        } else {\n          throw new Error(res.message || 'Âä†ËΩΩÂ§±Ë¥•');\n        }\n      } catch (error) {\n        console.error('Âä†ËΩΩÂéÜÂè≤ËΩ®ËøπÂ§±Ë¥•:', error);\n        uni.showToast({\n          title: error.message || 'Âä†ËΩΩÂéÜÂè≤ËΩ®ËøπÂ§±Ë¥•',\n          icon: 'none',\n          duration: 2000\n        });\n        this.showHistoryMode = false;\n      } finally {\n        this.isLoadingHistory = false;\n      }\n    },\n    \n    /**\n     * Ê∏ÖÈô§ÂéÜÂè≤ËΩ®Ëøπ\n     */\n    clearHistory() {\n      this.historyPoints = [];\n      this.historySummary = null;\n      this.showHistoryMode = false;\n      this.startDate = '';\n      this.endDate = '';\n      // ÊÅ¢Â§çÂÆûÊó∂‰ΩçÁΩÆÂú∞ÂõæÊòæÁ§∫\n      this.updateMap();\n    },\n    \n    /**\n     * Êõ¥Êñ∞ÂéÜÂè≤ËΩ®ËøπÂú∞ÂõæÊòæÁ§∫\n     */\n    updateHistoryMap() {\n      if (this.historyPoints.length === 0) {\n        return;\n      }\n      \n      // ÊåâÊó∂Èó¥ÊéíÂ∫èËΩ®ËøπÁÇπ\n      const sortedPoints = [...this.historyPoints].sort((a, b) => {\n        const timeA = new Date(a.visit_time || a.visitTime || 0).getTime();\n        const timeB = new Date(b.visit_time || b.visitTime || 0).getTime();\n        return timeA - timeB;\n      });\n      \n      // ÂàõÂª∫Âú∞ÂõæÊ†áËÆ∞ÁÇπ\n      const markers = sortedPoints.map((point, index) => {\n        const latitude = point.latitude;\n        const longitude = point.longitude;\n        const locationName = point.location_name || point.locationName || point.address || 'Êú™Áü•Âú∞ÁÇπ';\n        const visitTime = point.visit_time || point.visitTime;\n        \n        return {\n          id: index + 100,  // ‰ΩøÁî®100+ÈÅøÂÖç‰∏éÂÆûÊó∂‰ΩçÁΩÆÊ†áËÆ∞ÂÜ≤Á™Å\n          latitude: latitude,\n          longitude: longitude,\n          width: 30,\n          height: 30,\n          title: locationName,\n          callout: {\n            content: `${locationName}\\n${this.formatVisitTime(visitTime)}`,\n            color: '#333',\n            fontSize: 12,\n            borderRadius: 4,\n            bgColor: '#fff',\n            padding: 8,\n            display: 'BYCLICK'\n          },\n          // Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂Êï∞ÊçÆ\n          pointData: point\n        };\n      });\n      \n      this.mapMarkers = markers;\n      \n      // ËÆ°ÁÆóÂú∞Âõæ‰∏≠ÂøÉÁÇπÂíåÁº©ÊîæÁ∫ßÂà´\n      if (markers.length > 0) {\n        // ËÆ°ÁÆóÊâÄÊúâÁÇπÁöÑËæπÁïå\n        const latitudes = markers.map(m => m.latitude);\n        const longitudes = markers.map(m => m.longitude);\n        const minLat = Math.min(...latitudes);\n        const maxLat = Math.max(...latitudes);\n        const minLon = Math.min(...longitudes);\n        const maxLon = Math.max(...longitudes);\n        \n        // ‰∏≠ÂøÉÁÇπ\n        this.mapCenter = {\n          latitude: (minLat + maxLat) / 2,\n          longitude: (minLon + maxLon) / 2\n        };\n        \n        // Ê†πÊçÆË¶ÜÁõñËåÉÂõ¥Ë∞ÉÊï¥Áº©ÊîæÁ∫ßÂà´\n        const latDiff = maxLat - minLat;\n        const lonDiff = maxLon - minLon;\n        const maxDiff = Math.max(latDiff, lonDiff);\n        \n        if (maxDiff < 0.01) {\n          this.mapScale = 16;  // ÂæàÂ∞èËåÉÂõ¥ÔºåÊîæÂ§ß\n        } else if (maxDiff < 0.1) {\n          this.mapScale = 14;  // Â∞èËåÉÂõ¥\n        } else if (maxDiff < 1) {\n          this.mapScale = 12;  // ‰∏≠Á≠âËåÉÂõ¥\n        } else {\n          this.mapScale = 10;  // Â§ßËåÉÂõ¥\n        }\n        \n        // ÂàõÂª∫ËΩ®ËøπËøûÁ∫øÔºàÊåâÊó∂Èó¥È°∫Â∫èÔºâ\n        if (sortedPoints.length > 1) {\n          const points = sortedPoints.map(point => ({\n            latitude: point.latitude,\n            longitude: point.longitude\n          }));\n          \n          this.mapPolyline = [{\n            points: points,\n            color: '#2bad81',\n            width: 4,\n            borderColor: '#fff',\n            borderWidth: 1,\n            arrowLine: true,\n            dottedLine: false\n          }];\n        } else {\n          this.mapPolyline = [];\n        }\n      }\n    },\n    \n    /**\n     * Ê†ºÂºèÂåñËÆøÈóÆÊó∂Èó¥\n     */\n    formatVisitTime(timeStr) {\n      if (!timeStr) return '';\n      const date = new Date(timeStr);\n      const month = date.getMonth() + 1;\n      const day = date.getDate();\n      const hour = date.getHours();\n      const minute = date.getMinutes();\n      return `${month}-${day} ${hour}:${minute.toString().padStart(2, '0')}`;\n    },\n    \n    /**\n     * Ê†ºÂºèÂåñËΩ®ËøπÁÇπÊó•Êúü\n     */\n    formatPointDate(point) {\n      if (point.visit_time || point.visitTime) {\n        const date = new Date(point.visit_time || point.visitTime);\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const day = String(date.getDate()).padStart(2, '0');\n        const hour = String(date.getHours()).padStart(2, '0');\n        const minute = String(date.getMinutes()).padStart(2, '0');\n        return `${year}-${month}-${day} ${hour}:${minute}`;\n      }\n      return point.date || 'Êú™Áü•Êó•Êúü';\n    },\n    \n    /**\n     * Ê†ºÂºèÂåñÂÅúÁïôÊó∂Èïø\n     */\n    formatDuration(minutes) {\n      if (!minutes) return '';\n      if (minutes < 60) {\n        return `${minutes}ÂàÜÈíü`;\n      } else if (minutes < 1440) {\n        const hours = Math.floor(minutes / 60);\n        const mins = minutes % 60;\n        return mins > 0 ? `${hours}Â∞èÊó∂${mins}ÂàÜÈíü` : `${hours}Â∞èÊó∂`;\n      } else {\n        const days = Math.floor(minutes / 1440);\n        const hours = Math.floor((minutes % 1440) / 60);\n        return hours > 0 ? `${days}Â§©${hours}Â∞èÊó∂` : `${days}Â§©`;\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.trajectory-page {\n  min-height: 100vh;\n  background-color: #F8F0FC;\n  padding-bottom: 40rpx;\n}\n\n/* Ëá™ÂÆö‰πâÂØºËà™Ê†èÊ†∑Âºè */\n.custom-navbar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 9999;\n  background-color: #F8F0FC;\n  overflow: hidden;\n}\n.navbar-gradient-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 200%;\n  background: linear-gradient(180deg, #F8F0FC 0%, #F3E8FF 30%, #F0E0FF 60%, #F8F0FC 100%);\n  background: -webkit-linear-gradient(top, #F8F0FC 0%, #F3E8FF 30%, #F0E0FF 60%, #F8F0FC 100%);\n}\n.status-bar {\n  width: 100%;\n  background: transparent;\n  position: relative;\n  z-index: 1;\n}\n.navbar-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 30rpx;\n  box-sizing: border-box;\n  position: relative;\n  z-index: 1;\n}\n.navbar-title {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n.title-text {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #6B5B95;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.content-area {\n  padding: 30rpx 24rpx;\n}\n.header {\n  padding: 0 0 20rpx 0;\n}\n.subtitle {\n  font-size: 26rpx;\n  color: #9B8FB8;\n  display: block;\n}\n\n/* ÂéÜÂè≤ËΩ®ËøπÊü•ËØ¢Âç°Áâá */\n.history-card {\n  background: #ffffff;\n  border-radius: 24rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.06);\n}\n.history-card-header {\n  margin-bottom: 24rpx;\n}\n.history-title {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #2b2b2b;\n}\n.date-range-selector {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n  margin-bottom: 24rpx;\n}\n.date-item {\n  flex: 1;\n  padding: 20rpx;\n  background: #f8f8f8;\n  border-radius: 12rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 8rpx;\n}\n.date-label {\n  font-size: 24rpx;\n  color: #999;\n}\n.date-value {\n  font-size: 28rpx;\n  color: #333;\n  font-weight: 500;\n}\n.date-value.placeholder {\n  color: #999;\n}\n.date-separator {\n  font-size: 26rpx;\n  color: #666;\n  padding: 0 8rpx;\n}\n.history-actions {\n  display: flex;\n  gap: 16rpx;\n  margin-bottom: 16rpx;\n}\n.btn-query {\n  flex: 1;\n  padding: 20rpx;\n  background: #2bad81;\n  color: #ffffff;\n  border-radius: 12rpx;\n  font-size: 28rpx;\n  font-weight: 500;\n  border: none;\n}\n.btn-query:disabled {\n  background: #cccccc;\n  color: #999;\n}\n.btn-clear {\n  padding: 20rpx 32rpx;\n  background: #f5f5f5;\n  color: #666;\n  border-radius: 12rpx;\n  font-size: 28rpx;\n  border: none;\n}\n.history-summary {\n  padding-top: 16rpx;\n  border-top: 1rpx solid #f0f0f0;\n}\n.summary-text {\n  font-size: 26rpx;\n  color: #666;\n  line-height: 1.6;\n}\n\n/* ÂÆûÊó∂‰ΩçÁΩÆÂç°Áâá */\n.location-card {\n  background: #ffffff;\n  border-radius: 24rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.06);\n}\n.location-card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24rpx;\n}\n.location-title {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #2b2b2b;\n}\n.location-actions {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n}\n.refresh-btn {\n  width: 60rpx;\n  height: 60rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #f5f5f5;\n  border-radius: 30rpx;\n}\n.refresh-icon {\n  font-size: 28rpx;\n}\n.toggle-btn {\n  padding: 12rpx 24rpx;\n  background: #f5f5f5;\n  border-radius: 20rpx;\n  font-size: 24rpx;\n  color: #666;\n}\n.toggle-btn.active {\n  background: #2bad81;\n  color: #ffffff;\n}\n.toggle-text {\n  font-size: 24rpx;\n}\n.location-item {\n  margin-bottom: 20rpx;\n  padding-bottom: 20rpx;\n  border-bottom: 1rpx solid #f0f0f0;\n}\n.location-item:last-child {\n  margin-bottom: 0;\n  padding-bottom: 0;\n  border-bottom: none;\n}\n.location-label {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n  margin-bottom: 12rpx;\n}\n.location-icon {\n  font-size: 28rpx;\n}\n.location-name {\n  font-size: 28rpx;\n  font-weight: 500;\n  color: #333;\n}\n.location-info {\n  margin-left: 40rpx;\n}\n.location-address {\n  display: block;\n  font-size: 26rpx;\n  color: #666;\n  margin-bottom: 8rpx;\n}\n.location-time {\n  display: block;\n  font-size: 24rpx;\n  color: #999;\n}\n.distance-info {\n  margin-top: 24rpx;\n  padding-top: 24rpx;\n  border-top: 1rpx solid #f0f0f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.distance-label {\n  font-size: 28rpx;\n  color: #666;\n}\n.distance-value {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #2bad81;\n}\n.location-error {\n  margin-top: 16rpx;\n  padding: 16rpx;\n  background: #fff3cd;\n  border-radius: 12rpx;\n}\n.error-text {\n  font-size: 24rpx;\n  color: #856404;\n}\n\n/* Âú∞ÂõæÂÆπÂô® */\n.map-container {\n  position: relative;\n  margin: 20rpx;\n  height: 600rpx;\n  border-radius: 24rpx;\n  overflow: hidden;\n  box-shadow: 0 8rpx 24rpx rgba(0,0,0,0.06);\n}\n.map {\n  width: 100%;\n  height: 100%;\n}\n.map-placeholder {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.map-bg {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n/* ËΩ®ËøπÁÇπ */\n.trajectory-point {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  z-index: 2;\n}\n.point-marker {\n  width: 60rpx;\n  height: 60rpx;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 30rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.15);\n}\n.point-icon {\n  font-size: 32rpx;\n}\n.point-label {\n  margin-top: 8rpx;\n  font-size: 24rpx;\n  color: #2b2b2b;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 4rpx 12rpx;\n  border-radius: 12rpx;\n  white-space: nowrap;\n}\n\n/* ËΩ®ËøπËøûÁ∫ø */\n.trajectory-line {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n\n/* ÂºπÁ™óÊ†∑Âºè */\n.modal-mask {\n  position: fixed;\n  inset: 0;\n  background: rgba(0,0,0,0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 99;\n}\n.modal {\n  width: 86%;\n  max-width: 600rpx;\n  background: #ffffff;\n  border-radius: 24rpx;\n  padding: 40rpx 32rpx;\n  box-shadow: 0 12rpx 40rpx rgba(0,0,0,0.15);\n}\n.modal-header {\n  margin-bottom: 24rpx;\n}\n.modal-title {\n  font-size: 34rpx;\n  font-weight: 700;\n  color: #2b2b2b;\n  display: block;\n}\n.modal-date {\n  margin-top: 8rpx;\n  font-size: 26rpx;\n  color: #7a7a7a;\n  display: block;\n}\n.modal-content {\n  margin-bottom: 24rpx;\n}\n.point-image {\n  width: 100%;\n  height: 200rpx;\n  border-radius: 12rpx;\n  margin-bottom: 16rpx;\n}\n.point-description {\n  font-size: 26rpx;\n  color: #555;\n  line-height: 1.6;\n  margin-top: 16rpx;\n}\n.point-address {\n  display: flex;\n  align-items: center;\n  gap: 8rpx;\n  margin-bottom: 16rpx;\n  padding: 12rpx;\n  background: #f8f8f8;\n  border-radius: 8rpx;\n}\n.address-label {\n  font-size: 24rpx;\n}\n.address-text {\n  font-size: 26rpx;\n  color: #666;\n  flex: 1;\n}\n.point-meta {\n  margin-top: 16rpx;\n  padding-top: 16rpx;\n  border-top: 1rpx solid #f0f0f0;\n  display: flex;\n  flex-direction: column;\n  gap: 8rpx;\n}\n.meta-text {\n  font-size: 24rpx;\n  color: #999;\n}\n\n/* Ë°®ÂçïÊ†∑Âºè */\n.form {\n  margin-top: 24rpx;\n}\n.form-item {\n  margin-bottom: 24rpx;\n}\n.label {\n  font-size: 26rpx;\n  color: #4a4a4a;\n  display: block;\n  margin-bottom: 8rpx;\n}\n.input {\n  width: 100%;\n  border: 1rpx solid #e6e6e6;\n  border-radius: 12rpx;\n  padding: 14rpx;\n  font-size: 26rpx;\n}\n.textarea {\n  width: 100%;\n  border: 1rpx solid #e6e6e6;\n  border-radius: 12rpx;\n  padding: 14rpx;\n  font-size: 26rpx;\n  min-height: 120rpx;\n}\n.position-info {\n  margin-top: 8rpx;\n  font-size: 24rpx;\n  color: #2bad81;\n}\n.modal-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 16rpx;\n}\n.btn {\n  padding: 16rpx 26rpx;\n  border-radius: 12rpx;\n  font-size: 26rpx;\n  border: none;\n}\n.btn.primary {\n  background: #2bad81;\n  color: #ffffff;\n}\n.btn.secondary {\n  background: #f0f0f0;\n  color: #333;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/È°πÁõÆ/love_time_fu/pages/trajectory/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","updateLocation","getCurrentLocations","getTrajectoryPoints"],"mappings":"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"}