{"version":3,"file":"index.js","sources":["pages/trajectory/index.vue","D:/softcaree/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdHJhamVjdG9yeS9pbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"trajectory-page\" :style=\"{ paddingTop: containerPaddingTop }\">\r\n    <!-- Ëá™ÂÆö‰πâÂØºËà™Ê†è -->\r\n    <view class=\"custom-navbar\">\r\n      <!-- Ê∏êÂèòËÉåÊôØ -->\r\n      <view class=\"navbar-gradient-bg\"></view>\r\n      <!-- Áä∂ÊÄÅÊ†èÂç†‰Ωç -->\r\n      <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\r\n      <!-- ÂØºËà™Ê†èÂÜÖÂÆπ -->\r\n      <view class=\"navbar-content\" :style=\"{ height: navBarHeight + 'px' }\">\r\n        <view class=\"navbar-title\">\r\n          <text class=\"title-text\">ÊÅãÁà±ËΩ®Ëøπ</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ÂÜÖÂÆπÂå∫Âüü -->\r\n    <view class=\"content-area\">\r\n    <view class=\"header\">\r\n      <text class=\"subtitle\">ËÆ∞ÂΩï‰Ω†‰ª¨‰∏ÄËµ∑Ëµ∞ËøáÁöÑÁÇπÁÇπÊª¥Êª¥</text>\r\n    </view>\r\n\r\n      <!-- ÂÆûÊó∂‰ΩçÁΩÆÂç°Áâá -->\r\n      <view class=\"location-card\" v-if=\"myLocation || partnerLocation\">\r\n        <view class=\"location-card-header\">\r\n          <text class=\"location-title\">ÂÆûÊó∂‰ΩçÁΩÆ</text>\r\n          <view class=\"location-actions\">\r\n            <view class=\"refresh-btn\" @click=\"refreshLocation\">\r\n              <text class=\"refresh-icon\">üîÑ</text>\r\n            </view>\r\n            <view class=\"toggle-btn\" :class=\"{ active: isLocationTracking }\" @click=\"toggleLocationTracking\">\r\n              <text class=\"toggle-text\">{{ isLocationTracking ? 'ËøΩË∏™‰∏≠' : 'ÂºÄÂêØËøΩË∏™' }}</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- ÊàëÁöÑ‰ΩçÁΩÆ -->\r\n        <view class=\"location-item\" v-if=\"myLocation\">\r\n          <view class=\"location-label\">\r\n            <text class=\"location-icon\">üìç</text>\r\n            <text class=\"location-name\">ÊàëÁöÑ‰ΩçÁΩÆ</text>\r\n          </view>\r\n          <view class=\"location-info\">\r\n            <text class=\"location-address\">{{ myLocation.address || myLocation.location_name || 'ÂÆö‰Ωç‰∏≠...' }}</text>\r\n            <text class=\"location-time\" v-if=\"myLocation.updateTime\">\r\n              {{ formatTime(myLocation.updateTime) }}\r\n            </text>\r\n          </view>\r\n        </view>\r\n\r\n        <!-- ÂØπÊñπ‰ΩçÁΩÆ -->\r\n        <view class=\"location-item\" v-if=\"partnerLocation\">\r\n          <view class=\"location-label\">\r\n            <text class=\"location-icon\">üíï</text>\r\n            <text class=\"location-name\">ÂØπÊñπ‰ΩçÁΩÆ</text>\r\n          </view>\r\n          <view class=\"location-info\">\r\n            <text class=\"location-address\">{{ partnerLocation.address || partnerLocation.location_name || 'ÂÆö‰Ωç‰∏≠...' }}</text>\r\n            <text class=\"location-time\" v-if=\"partnerLocation.updateTime\">\r\n              {{ formatTime(partnerLocation.updateTime) }}\r\n            </text>\r\n          </view>\r\n        </view>\r\n\r\n        <!-- Ë∑ùÁ¶ªÊòæÁ§∫ -->\r\n        <view class=\"distance-info\" v-if=\"distance !== null\">\r\n          <text class=\"distance-label\">ÂèåÊñπË∑ùÁ¶ª</text>\r\n          <text class=\"distance-value\">{{ formatDistance(distance) }}</text>\r\n        </view>\r\n\r\n        <!-- ÈîôËØØÊèêÁ§∫ -->\r\n        <view class=\"location-error\" v-if=\"locationError\">\r\n          <text class=\"error-text\">{{ locationError }}</text>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- Âú∞ÂõæÂÆπÂô® -->\r\n    <view class=\"map-container\">\r\n        <!-- ÁúüÂÆûÂú∞ÂõæÁªÑ‰ª∂ -->\r\n        <map\r\n          class=\"map\"\r\n          :latitude=\"mapCenter.latitude\"\r\n          :longitude=\"mapCenter.longitude\"\r\n          :scale=\"mapScale\"\r\n          :markers=\"mapMarkers\"\r\n          :polyline=\"mapPolyline\"\r\n          :show-location=\"true\"\r\n          :enable-zoom=\"true\"\r\n          :enable-scroll=\"true\"\r\n          @tap=\"onMapTap\"\r\n          @markertap=\"onMarkerTap\"\r\n        />\r\n        \r\n        <!-- Â§áÁî®ÔºöÂ¶ÇÊûúÊ≤°Êúâ‰ΩçÁΩÆ‰ø°ÊÅØÔºåÊòæÁ§∫ÈùôÊÄÅÂú∞ÂõæÂíåËΩ®ËøπÁÇπ -->\r\n        <view v-if=\"!myLocation && !partnerLocation\" class=\"map-placeholder\">\r\n          <image class=\"map-bg\" src=\"/static/trajectory/map.jpg\" mode=\"aspectFill\" />\r\n      \r\n      <!-- ËΩ®ËøπÁÇπ -->\r\n      <view \r\n        v-for=\"(point, index) in trajectoryPoints\" \r\n        :key=\"index\"\r\n        class=\"trajectory-point\"\r\n        :style=\"{ top: point.top + '%', left: point.left + '%' }\"\r\n        @click=\"showPointDetail(point)\"\r\n      >\r\n        <view class=\"point-marker\">\r\n          <text class=\"point-icon\">üìç</text>\r\n        </view>\r\n        <view class=\"point-label\">{{ point.title }}</view>\r\n      </view>\r\n\r\n      <!-- ËΩ®ËøπËøûÁ∫ø -->\r\n          <view v-if=\"trajectoryPoints.length > 1\" class=\"trajectory-line\"></view>\r\n    </view>\r\n    </view>\r\n    </view>\r\n\r\n    <!-- ËΩ®ËøπÁÇπËØ¶ÊÉÖÂºπÁ™ó -->\r\n    <view v-if=\"showDetail\" class=\"modal-mask\" @click=\"hidePointDetail\">\r\n      <view class=\"modal\" @click.stop>\r\n        <view class=\"modal-header\">\r\n          <text class=\"modal-title\">{{ currentPoint.location_name || currentPoint.locationName || currentPoint.title || 'Êú™Áü•Âú∞ÁÇπ' }}</text>\r\n          <text class=\"modal-date\">{{ formatPointDate(currentPoint) }}</text>\r\n        </view>\r\n        <view class=\"modal-content\">\r\n          <view v-if=\"currentPoint.address\" class=\"point-address\">\r\n            <text class=\"address-label\">üìç</text>\r\n            <text class=\"address-text\">{{ currentPoint.address }}</text>\r\n        </view>\r\n          <image v-if=\"currentPoint.photos && currentPoint.photos.length > 0\" :src=\"currentPoint.photos[0]\" class=\"point-image\" mode=\"aspectFill\" />\r\n          <image v-else-if=\"currentPoint.image\" :src=\"currentPoint.image\" class=\"point-image\" mode=\"aspectFill\" />\r\n          <text class=\"point-description\">{{ currentPoint.description || \"ÊöÇÊó†ÊèèËø∞\" }}</text>\r\n          <view v-if=\"currentPoint.visit_count\" class=\"point-meta\">\r\n            <text class=\"meta-text\">Âà∞ËÆøÊ¨°Êï∞Ôºö{{ currentPoint.visit_count }}</text>\r\n            <text v-if=\"currentPoint.stay_duration\" class=\"meta-text\">ÂÅúÁïôÊó∂ÈïøÔºö{{ formatDuration(currentPoint.stay_duration) }}</text>\r\n          </view>\r\n        </view>\r\n        <view class=\"modal-actions\">\r\n          <button class=\"btn secondary\" @click=\"hidePointDetail\">ÂÖ≥Èó≠</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ÂéÜÂè≤ËΩ®ËøπÊµÆÂä®ÊåâÈíÆ -->\r\n    <view class=\"history-float-btn\" @click=\"goToHistoryPage\">\r\n      <text class=\"history-btn-icon\">üìú</text>\r\n      <text class=\"history-btn-text\">ÂéÜÂè≤ËΩ®Ëøπ</text>\r\n    </view>\r\n    \r\n    <!-- Ëá™ÂÆö‰πâ TabBar -->\r\n    <custom-tabbar :current=\"1\"></custom-tabbar>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { updateLocation, getCurrentLocations } from '@/api/trajectory.js';\r\nimport CustomTabbar from '@/components/custom-tabbar/index.vue';\r\n\r\nexport default {\r\n  components: {\r\n    CustomTabbar\r\n  },\r\n  data() {\r\n    return {\r\n      statusBarHeight: 0,\r\n      navBarHeight: 54,\r\n      screenWidth: 375,\r\n      trajectoryPoints: [],  // ÈùôÊÄÅËΩ®ËøπÁÇπÔºàÂ∑≤Â∫üÂºÉÔºå‰øùÁïôÂÖºÂÆπÊÄßÔºâ\r\n      showDetail: false,\r\n      currentPoint: {},\r\n      // ÂÆö‰ΩçÁõ∏ÂÖ≥\r\n      isLocationTracking: false,  // ÊòØÂê¶ÂºÄÂêØÂÆö‰ΩçËøΩË∏™\r\n      locationTimer: null,         // ÂÆöÊó∂Âô®ID\r\n      myLocation: null,            // ÊàëÁöÑ‰ΩçÁΩÆ\r\n      partnerLocation: null,        // ÂØπÊñπ‰ΩçÁΩÆ\r\n      distance: null,               // ÂèåÊñπË∑ùÁ¶ªÔºàÂÖ¨ÈáåÔºâ\r\n      isRequestingLocation: false,  // ÊòØÂê¶Ê≠£Âú®ËØ∑Ê±Ç‰ΩçÁΩÆ\r\n      locationError: null,           // ÂÆö‰ΩçÈîôËØØ‰ø°ÊÅØ\r\n      // Âú∞ÂõæÁõ∏ÂÖ≥\r\n      mapCenter: {\r\n        latitude: 39.9042,  // ÈªòËÆ§Âåó‰∫¨\r\n        longitude: 116.4074\r\n      },\r\n      mapScale: 13,  // Âú∞ÂõæÁº©ÊîæÁ∫ßÂà´\r\n      mapMarkers: [],  // Âú∞ÂõæÊ†áËÆ∞ÁÇπ\r\n      mapPolyline: []  // Âú∞ÂõæË∑ØÁ∫ø\r\n    };\r\n  },\r\n  computed: {\r\n    containerPaddingTop() {\r\n      // Â∞ÜpxËΩ¨Êç¢‰∏∫rpx: rpx = px * 750 / screenWidth\r\n      // Ê∑ªÂä†20rpxÈ¢ùÂ§ñÈó¥Ë∑ù\r\n      const totalHeightPx = this.statusBarHeight + this.navBarHeight;\r\n      const pxToRpx = 750 / this.screenWidth;\r\n      const totalHeightRpx = totalHeightPx * pxToRpx;\r\n      return totalHeightRpx + 20 + 'rpx';\r\n    }\r\n  },\r\n  watch: {\r\n    // ÁõëÂê¨‰ΩçÁΩÆÂèòÂåñÔºåÊõ¥Êñ∞Âú∞Âõæ\r\n    myLocation: {\r\n      handler() {\r\n        this.updateMap();\r\n      },\r\n      deep: true\r\n    },\r\n    partnerLocation: {\r\n      handler() {\r\n        this.updateMap();\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  onLoad() {\r\n    this.getSystemInfo();\r\n    // Ê£ÄÊü•ÂÆö‰ΩçÊùÉÈôêÂπ∂ÂàùÂßãÂåñ\r\n    this.initLocation();\r\n  },\r\n  onUnload() {\r\n    // È°µÈù¢Âç∏ËΩΩÊó∂ÂÅúÊ≠¢ÂÆö‰ΩçËøΩË∏™\r\n    this.stopLocationTracking();\r\n  },\r\n  methods: {\r\n    getSystemInfo() {\r\n      const systemInfo = uni.getSystemInfoSync();\r\n      this.statusBarHeight = systemInfo.statusBarHeight || 0;\r\n      this.screenWidth = systemInfo.windowWidth || 375;\r\n      this.navBarHeight = 54;\r\n    },\r\n    showPointDetail(point) {\r\n      this.currentPoint = point;\r\n      this.showDetail = true;\r\n    },\r\n    hidePointDetail() {\r\n      this.showDetail = false;\r\n      this.currentPoint = {};\r\n    },\r\n    \r\n    /**\r\n     * Ë∑≥ËΩ¨Âà∞ÂéÜÂè≤ËΩ®ËøπÈ°µÈù¢\r\n     */\r\n    goToHistoryPage() {\r\n      uni.navigateTo({\r\n        url: '/subPackages/record/pages/trajectory/history'\r\n      });\r\n    },\r\n    \r\n    // ========== ÂÆö‰ΩçÁõ∏ÂÖ≥ÊñπÊ≥ï ==========\r\n    \r\n    /**\r\n     * ÂàùÂßãÂåñÂÆö‰ΩçÂäüËÉΩ\r\n     */\r\n    async initLocation() {\r\n      try {\r\n        // Ê£ÄÊü•ÂÆö‰ΩçÊùÉÈôê\r\n        const setting = await this.checkLocationPermission();\r\n        if (setting) {\r\n          // È¶ñÊ¨°Ëé∑Âèñ‰ΩçÁΩÆ\r\n          await this.getCurrentLocation();\r\n          // Âä†ËΩΩÂèåÊñπ‰ΩçÁΩÆ\r\n          await this.loadCurrentLocations();\r\n        }\r\n      } catch (error) {\r\n        console.error('ÂàùÂßãÂåñÂÆö‰ΩçÂ§±Ë¥•:', error);\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * Ê£ÄÊü•ÂÆö‰ΩçÊùÉÈôê\r\n     */\r\n    checkLocationPermission() {\r\n      return new Promise((resolve) => {\r\n        uni.getSetting({\r\n          success: (res) => {\r\n            if (res.authSetting['scope.userLocation']) {\r\n              // Â∑≤ÊéàÊùÉ\r\n              resolve(true);\r\n            } else if (res.authSetting['scope.userLocation'] === false) {\r\n              // Â∑≤ÊãíÁªùÔºåÊèêÁ§∫Áî®Êà∑ÊâãÂä®ÂºÄÂêØ\r\n              uni.showModal({\r\n                title: 'ÈúÄË¶ÅÂÆö‰ΩçÊùÉÈôê',\r\n                content: '‰∏∫‰∫ÜÂ±ïÁ§∫ÂèåÊñπ‰ΩçÁΩÆÔºåÈúÄË¶ÅËé∑ÂèñÊÇ®ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇËØ∑Âú®ËÆæÁΩÆ‰∏≠ÂºÄÂêØÂÆö‰ΩçÊùÉÈôê„ÄÇ',\r\n                showCancel: true,\r\n                confirmText: 'ÂéªËÆæÁΩÆ',\r\n                cancelText: 'ÂèñÊ∂à',\r\n                success: (modalRes) => {\r\n                  if (modalRes.confirm) {\r\n                    uni.openSetting({\r\n                      success: (settingRes) => {\r\n                        if (settingRes.authSetting['scope.userLocation']) {\r\n                          resolve(true);\r\n                        } else {\r\n                          resolve(false);\r\n                        }\r\n                      }\r\n                    });\r\n                  } else {\r\n                    resolve(false);\r\n                  }\r\n                }\r\n              });\r\n            } else {\r\n              // Êú™ÊéàÊùÉÔºåËØ∑Ê±ÇÊéàÊùÉ\r\n              uni.authorize({\r\n                scope: 'scope.userLocation',\r\n                success: () => {\r\n                  resolve(true);\r\n                },\r\n                fail: () => {\r\n                  uni.showToast({\r\n                    title: 'ÈúÄË¶ÅÂÆö‰ΩçÊùÉÈôêÊâçËÉΩ‰ΩøÁî®Ê≠§ÂäüËÉΩ',\r\n                    icon: 'none',\r\n                    duration: 2000\r\n                  });\r\n                  resolve(false);\r\n                }\r\n              });\r\n            }\r\n          },\r\n          fail: () => {\r\n            resolve(false);\r\n          }\r\n        });\r\n      });\r\n    },\r\n    \r\n    /**\r\n     * Ëé∑ÂèñÂΩìÂâç‰ΩçÁΩÆÂπ∂‰∏ä‰º†\r\n     */\r\n    async getCurrentLocation() {\r\n      if (this.isRequestingLocation) {\r\n        return;\r\n      }\r\n      \r\n      this.isRequestingLocation = true;\r\n      this.locationError = null;\r\n      \r\n      try {\r\n        // Ëé∑ÂèñÂΩìÂâç‰ΩçÁΩÆ\r\n        const locationRes = await new Promise((resolve, reject) => {\r\n          uni.getLocation({\r\n            type: 'gcj02',  // ËÖæËÆØÂú∞ÂõæÂùêÊ†áÁ≥ª\r\n            altitude: false,\r\n            success: resolve,\r\n            fail: reject\r\n          });\r\n        });\r\n        \r\n        const { latitude, longitude } = locationRes;\r\n        \r\n        // ‰øùÂ≠òÊàëÁöÑ‰ΩçÁΩÆ\r\n        this.myLocation = {\r\n          latitude,\r\n          longitude,\r\n          updateTime: new Date()\r\n        };\r\n        \r\n        // ‰∏ä‰º†Âà∞ÂêéÁ´Ø\r\n        try {\r\n          await updateLocation({\r\n            latitude,\r\n            longitude\r\n          });\r\n          \r\n          console.log('‰ΩçÁΩÆ‰∏ä‰º†ÊàêÂäü');\r\n        } catch (error) {\r\n          console.error('‰ΩçÁΩÆ‰∏ä‰º†Â§±Ë¥•:', error);\r\n          // Â¶ÇÊûúÊòØ\"Áî®Êà∑‰∏çÂ≠òÂú®\"ÈîôËØØÔºåÊèêÁ§∫Áî®Êà∑‰ΩÜ‰∏çË¶ÅË∑≥ËΩ¨ÁôªÂΩï\r\n          if (error.message && error.message.includes('Áî®Êà∑‰∏çÂ≠òÂú®')) {\r\n            console.warn('‚ö†Ô∏è ‰ΩçÁΩÆ‰∏ä‰º†Â§±Ë¥•ÔºöÁî®Êà∑‰ø°ÊÅØÂ∑≤Â§±ÊïàÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï');\r\n            // ‰∏çÊòæÁ§∫ÈîôËØØÊèêÁ§∫ÔºåÈÅøÂÖçÊâìÊâ∞Áî®Êà∑\r\n            // ‰ΩçÁΩÆ‰∏ä‰º†Â§±Ë¥•‰∏çÂΩ±ÂìçÊú¨Âú∞ÊòæÁ§∫ÂíåÈ°µÈù¢‰ΩøÁî®\r\n          }\r\n          // ‰∏ä‰º†Â§±Ë¥•‰∏çÂΩ±ÂìçÊú¨Âú∞ÊòæÁ§∫\r\n        }\r\n        \r\n        // ÈáçÊñ∞Âä†ËΩΩÂèåÊñπ‰ΩçÁΩÆ\r\n        try {\r\n          await this.loadCurrentLocations();\r\n        } catch (error) {\r\n          // Âä†ËΩΩÂ§±Ë¥•‰∏çÂΩ±ÂìçÂÖ∂‰ªñÂäüËÉΩ\r\n          if (error.message && error.message.includes('Áî®Êà∑‰∏çÂ≠òÂú®')) {\r\n            console.warn('‚ö†Ô∏è Âä†ËΩΩÂèåÊñπ‰ΩçÁΩÆÂ§±Ë¥•ÔºöÁî®Êà∑‰ø°ÊÅØÂ∑≤Â§±Êïà');\r\n          }\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error('Ëé∑Âèñ‰ΩçÁΩÆÂ§±Ë¥•:', error); \r\n        this.locationError = error.errMsg || 'Ëé∑Âèñ‰ΩçÁΩÆÂ§±Ë¥•';\r\n        \r\n        if (error.errMsg && error.errMsg.includes('auth deny')) {\r\n          uni.showToast({\r\n            title: 'ÂÆö‰ΩçÊùÉÈôêË¢´ÊãíÁªù',\r\n            icon: 'none',\r\n            duration: 2000\r\n          });\r\n        }\r\n      } finally {\r\n        this.isRequestingLocation = false;\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * Âä†ËΩΩÂèåÊñπÂÆûÊó∂‰ΩçÁΩÆ\r\n     */\r\n    async loadCurrentLocations() {\r\n      try {\r\n        const res = await getCurrentLocations();\r\n        const isSuccess = res?.success === true || res?.code === 200 || res?.status === 0;\r\n        const responseData = res?.data || res?.result || null;\r\n\r\n        if (!isSuccess || !responseData) {\r\n          console.warn('‚ö†Ô∏è ÂèåÊñπ‰ΩçÁΩÆÊé•Âè£ËøîÂõûÊï∞ÊçÆÊ†ºÂºè‰∏çÁ¨¶ÂêàÈ¢ÑÊúü', res);\r\n          return;\r\n        }\r\n\r\n        const normalizeLocation = (locationData = {}) => {\r\n          if (!locationData || (!locationData.latitude && !locationData.longitude)) {\r\n            return null;\r\n          }\r\n          const latitude = Number(locationData.latitude || locationData.lat || locationData.latitudeDecimal);\r\n          const longitude = Number(locationData.longitude || locationData.lng || locationData.longitudeDecimal);\r\n          if (Number.isNaN(latitude) || Number.isNaN(longitude)) {\r\n            return null;\r\n          }\r\n          return {\r\n            latitude,\r\n            longitude,\r\n            address: locationData.address || locationData.description || locationData.detail || null,\r\n            location_name: locationData.location_name || locationData.locationName || locationData.name || null,\r\n            updateTime: locationData.update_time || locationData.updatedAt || locationData.updateTime || locationData.createdAt || locationData.timestamp || new Date()\r\n          };\r\n        };\r\n\r\n        // ÂÖºÂÆπ‰∏çÂêåÂ≠óÊÆµÂëΩÂêç\r\n        const myLocationData = responseData.myLocation || responseData.my_location || responseData.self || responseData.mine;\r\n        const partnerLocationData = responseData.partnerLocation || responseData.partner_location || responseData.partner || responseData.lover;\r\n        const distanceText = responseData.distance_text || responseData.distanceText || responseData.distanceFormatted;\r\n\r\n        // Êõ¥Êñ∞ÊàëÁöÑ‰ΩçÁΩÆ\r\n        const normalizedMyLocation = normalizeLocation(myLocationData);\r\n        if (normalizedMyLocation) {\r\n          this.myLocation = normalizedMyLocation;\r\n          if (!this.myLocation.address && !this.myLocation.location_name) {\r\n            await this.reverseGeocode(this.myLocation.latitude, this.myLocation.longitude, 'my');\r\n          }\r\n        }\r\n\r\n        // Êõ¥Êñ∞ÂØπÊñπ‰ΩçÁΩÆ\r\n        const normalizedPartnerLocation = normalizeLocation(partnerLocationData);\r\n        if (normalizedPartnerLocation) {\r\n          this.partnerLocation = normalizedPartnerLocation;\r\n          if (!this.partnerLocation.address && !this.partnerLocation.location_name) {\r\n            await this.reverseGeocode(this.partnerLocation.latitude, this.partnerLocation.longitude, 'partner');\r\n          }\r\n        } else {\r\n          this.partnerLocation = null;\r\n        }\r\n\r\n        // Êõ¥Êñ∞Ë∑ùÁ¶ªÔºàÈªòËÆ§Êé•Âè£ËøîÂõûÂÖ¨ÈáåÔºõÂ¶ÇÊûúÊèê‰æõÁöÑÊòØÁ±≥ÔºåËΩ¨Êç¢ÊàêÂÖ¨ÈáåÔºâ\r\n        let distance = responseData.distance;\r\n        if ((distance === null || distance === undefined) && typeof responseData.distanceMeters === 'number') {\r\n          distance = responseData.distanceMeters / 1000;\r\n        }\r\n        this.distance = distance;\r\n\r\n        // Â¶ÇÊûúÂèåÊñπÈÉΩÊúâ‰ΩçÁΩÆÔºå‰ΩÜÂêéÁ´ØÊ≤°ÊúâËøîÂõûË∑ùÁ¶ªÔºåÂâçÁ´ØËÆ°ÁÆóË∑ùÁ¶ª\r\n        if ((this.distance === null || this.distance === undefined) && this.myLocation && this.partnerLocation) {\r\n          this.distance = this.calculateDistance(\r\n            this.myLocation.latitude, this.myLocation.longitude,\r\n            this.partnerLocation.latitude, this.partnerLocation.longitude\r\n          );\r\n        }\r\n\r\n        console.log('ÂèåÊñπ‰ΩçÁΩÆÂä†ËΩΩÊàêÂäü', {\r\n          myLocation: this.myLocation,\r\n          partnerLocation: this.partnerLocation,\r\n          distance: distanceText || this.formatDistance(this.distance),\r\n          rawData: responseData\r\n        });\r\n\r\n        // Êõ¥Êñ∞Âú∞ÂõæÊòæÁ§∫\r\n        this.updateMap();\r\n      } catch (error) {\r\n        console.error('Âä†ËΩΩÂèåÊñπ‰ΩçÁΩÆÂ§±Ë¥•:', error);\r\n        // Â¶ÇÊûúÊòØ\"Áî®Êà∑‰∏çÂ≠òÂú®\"ÈîôËØØÔºå‰ºòÈõÖÂ§ÑÁêÜÔºå‰∏çËß¶ÂèëÂÖ®Â±ÄÁôªÂΩïË∑≥ËΩ¨\r\n        if (error.message && error.message.includes('Áî®Êà∑‰∏çÂ≠òÂú®')) {\r\n          console.warn('‚ö†Ô∏è Âä†ËΩΩÂèåÊñπ‰ΩçÁΩÆÂ§±Ë¥•ÔºöÁî®Êà∑‰ø°ÊÅØÂ∑≤Â§±Êïà');\r\n          // ‰∏çÊòæÁ§∫ÈîôËØØÊèêÁ§∫ÔºåÈÅøÂÖçÊâìÊâ∞Áî®Êà∑\r\n          // ‰ΩçÁΩÆÂä†ËΩΩÂ§±Ë¥•‰∏çÂΩ±ÂìçÈ°µÈù¢ÂÖ∂‰ªñÂäüËÉΩ\r\n          return;\r\n        }\r\n        // Â¶ÇÊûúÂêéÁ´ØÊé•Âè£Êú™ÂÆûÁé∞Ôºå‰∏çÊòæÁ§∫ÈîôËØØÔºàÂºÄÂèëÈò∂ÊÆµÔºâ\r\n        if (process.env.NODE_ENV === 'development') {\r\n          console.warn('‚ö†Ô∏è ÂêéÁ´ØÊé•Âè£ÂèØËÉΩÊú™ÂÆûÁé∞ÔºåË∑≥ËøáÂä†ËΩΩÂèåÊñπ‰ΩçÁΩÆ');\r\n        }\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * ÂºÄÂêØÂÆö‰ΩçËøΩË∏™ÔºàÂÆöÊó∂‰∏ä‰º†‰ΩçÁΩÆÔºâ\r\n     */\r\n    startLocationTracking() {\r\n      if (this.isLocationTracking) {\r\n        return;\r\n      }\r\n      \r\n      // Ê£ÄÊü•ÊùÉÈôê\r\n      this.checkLocationPermission().then((hasPermission) => {\r\n        if (!hasPermission) {\r\n        return;\r\n      }\r\n      \r\n        this.isLocationTracking = true;\r\n        \r\n        // Á´ãÂç≥Ëé∑Âèñ‰∏ÄÊ¨°‰ΩçÁΩÆ\r\n        this.getCurrentLocation();\r\n        \r\n        // ÊØè5ÂàÜÈíü‰∏ä‰º†‰∏ÄÊ¨°‰ΩçÁΩÆ\r\n        this.locationTimer = setInterval(() => {\r\n          this.getCurrentLocation();\r\n        }, 5 * 60 * 1000);  // 5ÂàÜÈíü\r\n        \r\n        uni.showToast({\r\n          title: 'ÂÆö‰ΩçËøΩË∏™Â∑≤ÂºÄÂêØ',\r\n          icon: 'success',\r\n          duration: 2000\r\n        });\r\n      });\r\n    },\r\n    \r\n    /**\r\n     * ÂÅúÊ≠¢ÂÆö‰ΩçËøΩË∏™\r\n     */\r\n    stopLocationTracking() {\r\n      if (this.locationTimer) {\r\n        clearInterval(this.locationTimer);\r\n        this.locationTimer = null;\r\n      }\r\n      this.isLocationTracking = false;\r\n      \r\n      uni.showToast({\r\n        title: 'ÂÆö‰ΩçËøΩË∏™Â∑≤ÂÖ≥Èó≠',\r\n        icon: 'none',\r\n        duration: 2000\r\n      });\r\n    },\r\n    \r\n    /**\r\n     * ÂàáÊç¢ÂÆö‰ΩçËøΩË∏™Áä∂ÊÄÅ\r\n     */\r\n    toggleLocationTracking() {\r\n      if (this.isLocationTracking) {\r\n        this.stopLocationTracking();\r\n      } else {\r\n        this.startLocationTracking();\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * ÊâãÂä®Âà∑Êñ∞‰ΩçÁΩÆ\r\n     */\r\n    async refreshLocation() {\r\n      uni.showLoading({ title: 'Ëé∑Âèñ‰ΩçÁΩÆ‰∏≠...' });\r\n      try {\r\n        await this.getCurrentLocation();\r\n        uni.showToast({\r\n          title: '‰ΩçÁΩÆÂ∑≤Êõ¥Êñ∞',\r\n          icon: 'success',\r\n          duration: 1500\r\n        });\r\n      } catch (error) {\r\n        uni.showToast({\r\n          title: 'Ëé∑Âèñ‰ΩçÁΩÆÂ§±Ë¥•',\r\n          icon: 'none',\r\n          duration: 2000\r\n        });\r\n      } finally {\r\n        uni.hideLoading();\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * Ê†ºÂºèÂåñÊó∂Èó¥\r\n     */\r\n    formatTime(time) {\r\n      if (!time) return '';\r\n      \r\n      const date = new Date(time);\r\n      const now = new Date();\r\n      const diff = now - date;\r\n      const minutes = Math.floor(diff / 60000);\r\n      \r\n      if (minutes < 1) {\r\n        return 'ÂàöÂàö';\r\n      } else if (minutes < 60) {\r\n        return `${minutes}ÂàÜÈíüÂâç`;\r\n      } else if (minutes < 1440) {\r\n        const hours = Math.floor(minutes / 60);\r\n        return `${hours}Â∞èÊó∂Ââç`;\r\n      } else {\r\n        const month = date.getMonth() + 1;\r\n        const day = date.getDate();\r\n        const hour = date.getHours();\r\n        const minute = date.getMinutes();\r\n        return `${month}-${day} ${hour}:${minute.toString().padStart(2, '0')}`;\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * Ê†ºÂºèÂåñË∑ùÁ¶ª\r\n     */\r\n    formatDistance(distance) {\r\n      if (distance === null || distance === undefined) {\r\n        return '--';\r\n      }\r\n      \r\n      if (distance < 1) {\r\n        // Â∞è‰∫é1ÂÖ¨ÈáåÔºåÊòæÁ§∫Á±≥\r\n        const meters = Math.round(distance * 1000);\r\n        return `${meters}Á±≥`;\r\n      } else if (distance < 100) {\r\n        // 1-100ÂÖ¨ÈáåÔºåÊòæÁ§∫ÂÖ¨ÈáåÔºà‰øùÁïô1‰ΩçÂ∞èÊï∞Ôºâ\r\n        return `${distance.toFixed(1)}ÂÖ¨Èáå`;\r\n      } else {\r\n        // Â§ß‰∫é100ÂÖ¨ÈáåÔºåÊòæÁ§∫ÂÖ¨ÈáåÔºàÊï¥Êï∞Ôºâ\r\n        return `${Math.round(distance)}ÂÖ¨Èáå`;\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * Ê†πÊçÆÁªèÁ∫¨Â∫¶ÂèçËß£ÊûêÂú∞ÂùÄÔºà‰ΩøÁî®ËÖæËÆØÂú∞ÂõæAPIÔºâ\r\n     */\r\n    async reverseGeocode(latitude, longitude, type = 'my') {\r\n      try {\r\n        // ‰ΩøÁî®uni.getLocationÁöÑÂèçÂêëÂú∞ÁêÜÁºñÁ†ÅÂäüËÉΩ\r\n        // Ê≥®ÊÑèÔºöuni.getLocationÂú®ÂæÆ‰ø°Â∞èÁ®ãÂ∫è‰∏≠‰∏çÊîØÊåÅÈÄÜÂú∞ÂùÄËß£Êûê\r\n        // ËøôÈáå‰ΩøÁî®ËÖæËÆØÂú∞ÂõæAPIÔºàÈúÄË¶ÅÈÖçÁΩÆkeyÔºâ\r\n        // ÊàñËÄÖ‰ΩøÁî®ÂêéÁ´ØÊé•Âè£ËøõË°åÂú∞ÂùÄËß£Êûê\r\n        \r\n        // ‰∏¥Êó∂ÊñπÊ°àÔºö‰ΩøÁî®ÁÆÄÂçïÁöÑÊèèËø∞\r\n        const location = {\r\n          latitude,\r\n          longitude,\r\n          address: 'ÂÆö‰Ωç‰∏≠‚Ä¶',\r\n          location_name: 'ÂΩìÂâç‰ΩçÁΩÆ'\r\n        };\r\n        \r\n        // Êõ¥Êñ∞‰ΩçÁΩÆ‰ø°ÊÅØ\r\n        if (type === 'my' && this.myLocation) {\r\n          this.myLocation.address = this.myLocation.address || location.address;\r\n          this.myLocation.location_name = this.myLocation.location_name || location.location_name;\r\n        } else if (type === 'partner' && this.partnerLocation) {\r\n          this.partnerLocation.address = this.partnerLocation.address || location.address;\r\n          this.partnerLocation.location_name = this.partnerLocation.location_name || location.location_name;\r\n        }\r\n        \r\n        // TODO: ÈõÜÊàêËÖæËÆØÂú∞ÂõæAPIÊàñÂêéÁ´ØÂú∞ÂùÄËß£ÊûêÊé•Âè£\r\n        // Â¶ÇÊûúÈúÄË¶ÅËØ¶ÁªÜÂú∞ÂùÄÔºåÂèØ‰ª•Ë∞ÉÁî®ÂêéÁ´ØÊé•Âè£ÊàñÁ¨¨‰∏âÊñπÂú∞ÂõæAPI\r\n      } catch (error) {\r\n        console.error('Âú∞ÂùÄÂèçËß£ÊûêÂ§±Ë¥•:', error);\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * ËÆ°ÁÆó‰∏§ÁÇπÈó¥Ë∑ùÁ¶ªÔºà‰ΩøÁî®HaversineÂÖ¨ÂºèÔºåÂçï‰ΩçÔºöÂÖ¨ÈáåÔºâ\r\n     */\r\n    calculateDistance(lat1, lon1, lat2, lon2) {\r\n      const R = 6371; // Âú∞ÁêÉÂçäÂæÑÔºàÂÖ¨ÈáåÔºâ\r\n      const dLat = (lat2 - lat1) * Math.PI / 180;\r\n      const dLon = (lon2 - lon1) * Math.PI / 180;\r\n      const a = \r\n        Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n        Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\r\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n      const distance = R * c;\r\n      return distance;\r\n    },\r\n    \r\n    /**\r\n     * Êõ¥Êñ∞Âú∞ÂõæÊòæÁ§∫\r\n     */\r\n    updateMap() {\r\n      const markers = [];\r\n      \r\n      // Ê∑ªÂä†ÊàëÁöÑ‰ΩçÁΩÆÊ†áËÆ∞\r\n      if (this.myLocation && this.myLocation.latitude && this.myLocation.longitude) {\r\n        const marker = {\r\n          id: 1,\r\n          latitude: this.myLocation.latitude,\r\n          longitude: this.myLocation.longitude,\r\n          width: 30,\r\n          height: 30,\r\n          title: 'ÊàëÁöÑ‰ΩçÁΩÆ',\r\n          callout: {\r\n            content: this.myLocation.address || this.myLocation.location_name || 'ÊàëÁöÑ‰ΩçÁΩÆ',\r\n            color: '#333',\r\n            fontSize: 12,\r\n            borderRadius: 4,\r\n            bgColor: '#fff',\r\n            padding: 8,\r\n            display: 'BYCLICK'\r\n          }\r\n        };\r\n        // Â¶ÇÊûúÊúâËá™ÂÆö‰πâÂõæÊ†áÔºå‰ΩøÁî®Ëá™ÂÆö‰πâÂõæÊ†áÔºõÂê¶Âàô‰ΩøÁî®ÈªòËÆ§Ê†∑Âºè\r\n        // marker.iconPath = '/static/trajectory/my-location.png';\r\n        markers.push(marker);\r\n      }\r\n      \r\n      // Ê∑ªÂä†ÂØπÊñπ‰ΩçÁΩÆÊ†áËÆ∞\r\n      if (this.partnerLocation && this.partnerLocation.latitude && this.partnerLocation.longitude) {\r\n        const marker = {\r\n          id: 2,\r\n          latitude: this.partnerLocation.latitude,\r\n          longitude: this.partnerLocation.longitude,\r\n          width: 30,\r\n          height: 30,\r\n          title: 'ÂØπÊñπ‰ΩçÁΩÆ',\r\n          callout: {\r\n            content: this.partnerLocation.address || this.partnerLocation.location_name || 'ÂØπÊñπ‰ΩçÁΩÆ',\r\n            color: '#333',\r\n            fontSize: 12,\r\n            borderRadius: 4,\r\n            bgColor: '#fff',\r\n            padding: 8,\r\n            display: 'BYCLICK'\r\n          }\r\n        };\r\n        // Â¶ÇÊûúÊúâËá™ÂÆö‰πâÂõæÊ†áÔºå‰ΩøÁî®Ëá™ÂÆö‰πâÂõæÊ†áÔºõÂê¶Âàô‰ΩøÁî®ÈªòËÆ§Ê†∑Âºè\r\n        // marker.iconPath = '/static/trajectory/partner-location.png';\r\n        markers.push(marker);\r\n      }\r\n      \r\n      this.mapMarkers = markers;\r\n      \r\n      // ËÆ°ÁÆóÂú∞Âõæ‰∏≠ÂøÉÁÇπ\r\n      if (markers.length > 0) {\r\n        if (markers.length === 1) {\r\n          // Âè™Êúâ‰∏Ä‰∏™‰ΩçÁΩÆÔºå‰ª•ËØ•‰ΩçÁΩÆ‰∏∫‰∏≠ÂøÉ\r\n          this.mapCenter = {\r\n            latitude: markers[0].latitude,\r\n            longitude: markers[0].longitude\r\n          };\r\n          this.mapScale = 15;\r\n        } else {\r\n          // ‰∏§‰∏™‰ΩçÁΩÆÔºåËÆ°ÁÆó‰∏≠ÂøÉÁÇπ\r\n          const avgLat = (markers[0].latitude + markers[1].latitude) / 2;\r\n          const avgLon = (markers[0].longitude + markers[1].longitude) / 2;\r\n          this.mapCenter = {\r\n            latitude: avgLat,\r\n            longitude: avgLon\r\n          };\r\n          \r\n          // Ê†πÊçÆË∑ùÁ¶ªË∞ÉÊï¥Áº©ÊîæÁ∫ßÂà´\r\n          const dist = this.calculateDistance(\r\n            markers[0].latitude, markers[0].longitude,\r\n            markers[1].latitude, markers[1].longitude\r\n          );\r\n          if (dist < 1) {\r\n            this.mapScale = 16; // 1ÂÖ¨ÈáåÂÜÖÔºåÊîæÂ§ß\r\n          } else if (dist < 10) {\r\n            this.mapScale = 14; // 10ÂÖ¨ÈáåÂÜÖ\r\n          } else if (dist < 100) {\r\n            this.mapScale = 12; // 100ÂÖ¨ÈáåÂÜÖ\r\n          } else {\r\n            this.mapScale = 10; // Êõ¥ËøúË∑ùÁ¶ª\r\n          }\r\n          \r\n          // Ê∑ªÂä†ËøûÁ∫ø\r\n          this.mapPolyline = [{\r\n            points: [\r\n              { latitude: markers[0].latitude, longitude: markers[0].longitude },\r\n              { latitude: markers[1].latitude, longitude: markers[1].longitude }\r\n            ],\r\n            color: '#FF69B4',\r\n            width: 3,\r\n            borderColor: '#fff',\r\n            borderWidth: 1,\r\n            arrowLine: true\r\n          }];\r\n        }\r\n      } else {\r\n        // Ê≤°Êúâ‰ΩçÁΩÆ‰ø°ÊÅØÔºå‰ΩøÁî®ÈªòËÆ§‰∏≠ÂøÉÁÇπ\r\n        this.mapCenter = {\r\n          latitude: 39.9042,\r\n          longitude: 116.4074\r\n        };\r\n        this.mapScale = 13;\r\n        this.mapPolyline = [];\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * Âú∞ÂõæÁÇπÂáª‰∫ã‰ª∂\r\n     */\r\n    onMapTap(e) {\r\n      console.log('Âú∞ÂõæÁÇπÂáª:', e);\r\n    },\r\n    \r\n    /**\r\n     * Âú∞ÂõæÊ†áËÆ∞ÁÇπÁÇπÂáª‰∫ã‰ª∂\r\n     */\r\n    onMarkerTap(e) {\r\n      console.log('Ê†áËÆ∞ÁÇπÁÇπÂáª:', e);\r\n    },\r\n    \r\n    /**\r\n     * Ê†ºÂºèÂåñËΩ®ËøπÁÇπÊó•Êúü\r\n     */\r\n    formatPointDate(point) {\r\n      if (point.visit_time || point.visitTime) {\r\n        const date = new Date(point.visit_time || point.visitTime);\r\n        if (isNaN(date.getTime())) return '';\r\n        \r\n        const year = date.getFullYear();\r\n        const month = String(date.getMonth() + 1).padStart(2, '0');\r\n        const day = String(date.getDate()).padStart(2, '0');\r\n        const hour = String(date.getHours()).padStart(2, '0');\r\n        const minute = String(date.getMinutes()).padStart(2, '0');\r\n        return `${year}-${month}-${day} ${hour}:${minute}`;\r\n      }\r\n      return point.date || 'Êú™Áü•Êó•Êúü';\r\n    },\r\n    \r\n    /**\r\n     * Ê†ºÂºèÂåñÂÅúÁïôÊó∂Èïø\r\n     */\r\n    formatDuration(minutes) {\r\n      if (!minutes) return '';\r\n      if (minutes < 60) {\r\n        return `${minutes}ÂàÜÈíü`;\r\n      } else if (minutes < 1440) {\r\n        const hours = Math.floor(minutes / 60);\r\n        const mins = minutes % 60;\r\n        return mins > 0 ? `${hours}Â∞èÊó∂${mins}ÂàÜÈíü` : `${hours}Â∞èÊó∂`;\r\n      } else {\r\n        const days = Math.floor(minutes / 1440);\r\n        const hours = Math.floor((minutes % 1440) / 60);\r\n        return hours > 0 ? `${days}Â§©${hours}Â∞èÊó∂` : `${days}Â§©`;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.trajectory-page {\r\n  min-height: 100vh;\r\n  background-color: #FFFAF4;\r\n  padding-bottom: 120rpx; /* ‰∏∫Ëá™ÂÆö‰πâ TabBar È¢ÑÁïôÁ©∫Èó¥ */\r\n}\r\n\r\n/* Ëá™ÂÆö‰πâÂØºËà™Ê†èÊ†∑Âºè */\r\n.custom-navbar {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 9999;\r\n  background-color: #FFFAF4;\r\n  overflow: hidden;\r\n}\r\n.navbar-gradient-bg {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 200%;\r\n  background: rgba(255, 255, 255, 0.7);\r\n  backdrop-filter: blur(15px);\r\n  -webkit-backdrop-filter: blur(15px);\r\n}\r\n.status-bar {\r\n  width: 100%;\r\n  background: transparent;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n.navbar-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 30rpx;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n.navbar-title {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  text-align: center;\r\n}\r\n.title-text {\r\n  font-size: 32rpx;\r\n  font-weight: 500;\r\n  color: #4A4A4A;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.content-area {\r\n  padding: 30rpx 24rpx;\r\n}\r\n.header {\r\n  padding: 0 0 20rpx 0;\r\n}\r\n.subtitle {\r\n  font-size: 26rpx;\r\n  color: #9B8FB8;\r\n  display: block;\r\n}\r\n\r\n/* ÂÆûÊó∂‰ΩçÁΩÆÂç°Áâá */\r\n.location-card {\r\n  background: #ffffff;\r\n  border-radius: 24rpx;\r\n  padding: 30rpx;\r\n  margin-bottom: 30rpx;\r\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.06);\r\n}\r\n.location-card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 24rpx;\r\n}\r\n.location-title {\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  color: #2b2b2b;\r\n}\r\n.location-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n}\r\n.refresh-btn {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: linear-gradient(135deg, #FF9EBC 0%, #D9ACFF 100%);\r\n  border-radius: 30rpx;\r\n}\r\n.refresh-icon {\r\n  font-size: 28rpx;\r\n}\r\n.toggle-btn {\r\n  padding: 12rpx 24rpx;\r\n  background: #f5f5f5;\r\n  border-radius: 20rpx;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n}\r\n.toggle-btn.active {\r\n  background: linear-gradient(135deg, #FF9EBC 0%, #D9ACFF 100%);\r\n  color: #ffffff;\r\n}\r\n.toggle-text {\r\n  font-size: 24rpx;\r\n}\r\n.location-item {\r\n  margin-bottom: 20rpx;\r\n  padding-bottom: 20rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n.location-item:last-child {\r\n  margin-bottom: 0;\r\n  padding-bottom: 0;\r\n  border-bottom: none;\r\n}\r\n.location-label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n  margin-bottom: 12rpx;\r\n}\r\n.location-icon {\r\n  font-size: 28rpx;\r\n}\r\n.location-name {\r\n  font-size: 28rpx;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n.location-info {\r\n  margin-left: 40rpx;\r\n}\r\n.location-address {\r\n  display: block;\r\n  font-size: 26rpx;\r\n  color: #666;\r\n  margin-bottom: 8rpx;\r\n}\r\n.location-time {\r\n  display: block;\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n.distance-info {\r\n  margin-top: 24rpx;\r\n  padding-top: 24rpx;\r\n  border-top: 1rpx solid #f0f0f0;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.distance-label {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n}\r\n.distance-value {\r\n  font-size: 36rpx;\r\n  font-weight: 600;\r\n  color: #FF9EBC;\r\n}\r\n.location-error {\r\n  margin-top: 16rpx;\r\n  padding: 16rpx;\r\n  background: #fff3cd;\r\n  border-radius: 12rpx;\r\n}\r\n.error-text {\r\n  font-size: 24rpx;\r\n  color: #856404;\r\n}\r\n\r\n/* Âú∞ÂõæÂÆπÂô® */\r\n.map-container {\r\n  position: relative;\r\n  margin: 20rpx;\r\n  height: 600rpx;\r\n  border-radius: 24rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 8rpx 24rpx rgba(0,0,0,0.06);\r\n}\r\n.map {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.map-placeholder {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.map-bg {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n/* ËΩ®ËøπÁÇπ */\r\n.trajectory-point {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  z-index: 2;\r\n}\r\n.point-marker {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  border-radius: 30rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.15);\r\n}\r\n.point-icon {\r\n  font-size: 32rpx;\r\n}\r\n.point-label {\r\n  margin-top: 8rpx;\r\n  font-size: 24rpx;\r\n  color: #2b2b2b;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  padding: 4rpx 12rpx;\r\n  border-radius: 12rpx;\r\n  white-space: nowrap;\r\n}\r\n\r\n/* ËΩ®ËøπËøûÁ∫ø */\r\n.trajectory-line {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 1;\r\n}\r\n\r\n/* ÂºπÁ™óÊ†∑Âºè */\r\n.modal-mask {\r\n  position: fixed;\r\n  inset: 0;\r\n  background: rgba(0,0,0,0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 99;\r\n}\r\n.modal {\r\n  width: 86%;\r\n  max-width: 600rpx;\r\n  background: #ffffff;\r\n  border-radius: 24rpx;\r\n  padding: 40rpx 32rpx;\r\n  box-shadow: 0 12rpx 40rpx rgba(0,0,0,0.15);\r\n}\r\n.modal-header {\r\n  margin-bottom: 24rpx;\r\n}\r\n.modal-title {\r\n  font-size: 34rpx;\r\n  font-weight: 700;\r\n  color: #2b2b2b;\r\n  display: block;\r\n}\r\n.modal-date {\r\n  margin-top: 8rpx;\r\n  font-size: 26rpx;\r\n  color: #7a7a7a;\r\n  display: block;\r\n}\r\n.modal-content {\r\n  margin-bottom: 24rpx;\r\n}\r\n.point-image {\r\n  width: 100%;\r\n  height: 200rpx;\r\n  border-radius: 12rpx;\r\n  margin-bottom: 16rpx;\r\n}\r\n.point-description {\r\n  font-size: 26rpx;\r\n  color: #555;\r\n  line-height: 1.6;\r\n  margin-top: 16rpx;\r\n}\r\n.point-address {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8rpx;\r\n  margin-bottom: 16rpx;\r\n  padding: 12rpx;\r\n  background: #f8f8f8;\r\n  border-radius: 8rpx;\r\n}\r\n.address-label {\r\n  font-size: 24rpx;\r\n}\r\n.address-text {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n  flex: 1;\r\n}\r\n.point-meta {\r\n  margin-top: 16rpx;\r\n  padding-top: 16rpx;\r\n  border-top: 1rpx solid #f0f0f0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8rpx;\r\n}\r\n.meta-text {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n/* Ë°®ÂçïÊ†∑Âºè */\r\n.form {\r\n  margin-top: 24rpx;\r\n}\r\n.form-item {\r\n  margin-bottom: 24rpx;\r\n}\r\n.label {\r\n  font-size: 26rpx;\r\n  color: #4a4a4a;\r\n  display: block;\r\n  margin-bottom: 8rpx;\r\n}\r\n.input {\r\n  width: 100%;\r\n  border: 1rpx solid #e6e6e6;\r\n  border-radius: 12rpx;\r\n  padding: 14rpx;\r\n  font-size: 26rpx;\r\n}\r\n.textarea {\r\n  width: 100%;\r\n  border: 1rpx solid #e6e6e6;\r\n  border-radius: 12rpx;\r\n  padding: 14rpx;\r\n  font-size: 26rpx;\r\n  min-height: 120rpx;\r\n}\r\n.position-info {\r\n  margin-top: 8rpx;\r\n  font-size: 24rpx;\r\n  color: #2bad81;\r\n}\r\n.modal-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 16rpx;\r\n}\r\n.btn {\r\n  padding: 16rpx 26rpx;\r\n  border-radius: 12rpx;\r\n  font-size: 26rpx;\r\n  border: none;\r\n}\r\n.btn.primary {\r\n  background: linear-gradient(135deg, #FF9EBC 0%, #D9ACFF 100%);\r\n  color: #ffffff;\r\n}\r\n.btn.secondary {\r\n  background: #f0f0f0;\r\n  color: #333;\r\n}\r\n\r\n/* ÂéÜÂè≤ËΩ®ËøπÊµÆÂä®ÊåâÈíÆ */\r\n.history-float-btn {\r\n  position: fixed;\r\n  right: 30rpx;\r\n  bottom: 180rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 12rpx;\r\n  padding: 20rpx 32rpx;\r\n  background: linear-gradient(135deg, #FF9EBC 0%, #D9ACFF 100%);\r\n  border-radius: 50rpx;\r\n  box-shadow: 0 8rpx 24rpx rgba(255, 158, 188, 0.3);\r\n  z-index: 999;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.history-float-btn:active {\r\n  transform: scale(0.95);\r\n  box-shadow: 0 4rpx 12rpx rgba(255, 158, 188, 0.2);\r\n}\r\n\r\n.history-btn-icon {\r\n  font-size: 32rpx;\r\n  line-height: 1;\r\n}\r\n\r\n.history-btn-text {\r\n  font-size: 28rpx;\r\n  font-weight: 500;\r\n  color: #ffffff;\r\n  line-height: 1;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/love_time/pages/trajectory/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","updateLocation","getCurrentLocations"],"mappings":"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"}