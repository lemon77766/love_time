{"version":3,"file":"index.js","sources":["pages/trajectory/index.vue","D:/softcaree/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdHJhamVjdG9yeS9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"trajectory-page\" :style=\"{ paddingTop: containerPaddingTop }\">\n    <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->\n    <view class=\"custom-navbar\">\n      <!-- æ¸å˜èƒŒæ™¯ -->\n      <view class=\"navbar-gradient-bg\"></view>\n      <!-- çŠ¶æ€æ å ä½ -->\n      <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n      <!-- å¯¼èˆªæ å†…å®¹ -->\n      <view class=\"navbar-content\" :style=\"{ height: navBarHeight + 'px' }\">\n        <view class=\"navbar-title\">\n          <text class=\"title-text\">æ‹çˆ±è½¨è¿¹</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- å†…å®¹åŒºåŸŸ -->\n    <view class=\"content-area\">\n    <view class=\"header\">\n      <text class=\"subtitle\">è®°å½•ä½ ä»¬ä¸€èµ·èµ°è¿‡çš„ç‚¹ç‚¹æ»´æ»´</text>\n    </view>\n\n      <!-- å†å²è½¨è¿¹æŸ¥è¯¢å¡ç‰‡ -->\n      <view class=\"history-card\">\n        <view class=\"history-card-header\">\n          <text class=\"history-title\">å†å²è½¨è¿¹</text>\n        </view>\n        <view class=\"date-range-selector\">\n          <picker mode=\"date\" :value=\"startDate\" :start=\"startDateMin\" :end=\"startDateMax\" @change=\"onStartDateChange\">\n            <view class=\"date-item\">\n              <text class=\"date-label\">å¼€å§‹æ—¥æœŸ</text>\n              <text class=\"date-value\" :class=\"{ placeholder: !startDate }\">{{ startDate || 'è¯·é€‰æ‹©' }}</text>\n            </view>\n          </picker>\n          <text class=\"date-separator\">è‡³</text>\n          <picker mode=\"date\" :value=\"endDate\" :start=\"endDateMin\" :end=\"endDateMax\" @change=\"onEndDateChange\">\n            <view class=\"date-item\">\n              <text class=\"date-label\">ç»“æŸæ—¥æœŸ</text>\n              <text class=\"date-value\" :class=\"{ placeholder: !endDate }\">{{ endDate || 'è¯·é€‰æ‹©' }}</text>\n            </view>\n          </picker>\n        </view>\n        <view class=\"history-actions\">\n          <button class=\"btn-query\" @click=\"loadHistoryTrajectory\" :disabled=\"!startDate || !endDate || isLoadingHistory\">\n            {{ isLoadingHistory ? 'åŠ è½½ä¸­...' : 'æŸ¥è¯¢è½¨è¿¹' }}\n          </button>\n          <button class=\"btn-clear\" @click=\"clearHistory\" v-if=\"historyPoints.length > 0\">æ¸…é™¤</button>\n        </view>\n      </view>\n\n      <!-- å®æ—¶ä½ç½®å¡ç‰‡ -->\n      <view class=\"location-card\" v-if=\"myLocation || partnerLocation\">\n        <view class=\"location-card-header\">\n          <text class=\"location-title\">å®æ—¶ä½ç½®</text>\n          <view class=\"location-actions\">\n            <view class=\"refresh-btn\" @click=\"refreshLocation\">\n              <text class=\"refresh-icon\">ğŸ”„</text>\n            </view>\n            <view class=\"toggle-btn\" :class=\"{ active: isLocationTracking }\" @click=\"toggleLocationTracking\">\n              <text class=\"toggle-text\">{{ isLocationTracking ? 'è¿½è¸ªä¸­' : 'å¼€å¯è¿½è¸ª' }}</text>\n            </view>\n          </view>\n        </view>\n        \n        <!-- æˆ‘çš„ä½ç½® -->\n        <view class=\"location-item\" v-if=\"myLocation\">\n          <view class=\"location-label\">\n            <text class=\"location-icon\">ğŸ“</text>\n            <text class=\"location-name\">æˆ‘çš„ä½ç½®</text>\n          </view>\n          <view class=\"location-info\">\n            <text class=\"location-address\">{{ myLocation.address || myLocation.location_name || 'å®šä½ä¸­...' }}</text>\n            <text class=\"location-time\" v-if=\"myLocation.updateTime\">\n              {{ formatTime(myLocation.updateTime) }}\n            </text>\n          </view>\n        </view>\n\n        <!-- å¯¹æ–¹ä½ç½® -->\n        <view class=\"location-item\" v-if=\"partnerLocation\">\n          <view class=\"location-label\">\n            <text class=\"location-icon\">ğŸ’•</text>\n            <text class=\"location-name\">å¯¹æ–¹ä½ç½®</text>\n          </view>\n          <view class=\"location-info\">\n            <text class=\"location-address\">{{ partnerLocation.address || partnerLocation.location_name || 'å®šä½ä¸­...' }}</text>\n            <text class=\"location-time\" v-if=\"partnerLocation.updateTime\">\n              {{ formatTime(partnerLocation.updateTime) }}\n            </text>\n          </view>\n        </view>\n\n        <!-- è·ç¦»æ˜¾ç¤º -->\n        <view class=\"distance-info\" v-if=\"distance !== null\">\n          <text class=\"distance-label\">åŒæ–¹è·ç¦»</text>\n          <text class=\"distance-value\">{{ formatDistance(distance) }}</text>\n        </view>\n\n        <!-- é”™è¯¯æç¤º -->\n        <view class=\"location-error\" v-if=\"locationError\">\n          <text class=\"error-text\">{{ locationError }}</text>\n        </view>\n      </view>\n\n      <!-- åœ°å›¾å®¹å™¨ -->\n    <view class=\"map-container\">\n        <!-- çœŸå®åœ°å›¾ç»„ä»¶ -->\n        <map\n          class=\"map\"\n          :latitude=\"mapCenter.latitude\"\n          :longitude=\"mapCenter.longitude\"\n          :scale=\"mapScale\"\n          :markers=\"mapMarkers\"\n          :polyline=\"mapPolyline\"\n          :show-location=\"true\"\n          :enable-zoom=\"true\"\n          :enable-scroll=\"true\"\n          @tap=\"onMapTap\"\n          @markertap=\"onMarkerTap\"\n        />\n        \n        <!-- å¤‡ç”¨ï¼šå¦‚æœæ²¡æœ‰ä½ç½®ä¿¡æ¯ï¼Œæ˜¾ç¤ºé™æ€åœ°å›¾å’Œè½¨è¿¹ç‚¹ -->\n        <view v-if=\"!myLocation && !partnerLocation\" class=\"map-placeholder\">\n          <image class=\"map-bg\" src=\"/static/trajectory/map.jpg\" mode=\"aspectFill\" />\n      \n      <!-- è½¨è¿¹ç‚¹ -->\n      <view \n        v-for=\"(point, index) in trajectoryPoints\" \n        :key=\"index\"\n        class=\"trajectory-point\"\n        :style=\"{ top: point.top + '%', left: point.left + '%' }\"\n        @click=\"showPointDetail(point)\"\n      >\n        <view class=\"point-marker\">\n          <text class=\"point-icon\">ğŸ“</text>\n        </view>\n        <view class=\"point-label\">{{ point.title }}</view>\n      </view>\n\n      <!-- è½¨è¿¹è¿çº¿ -->\n          <view v-if=\"trajectoryPoints.length > 1\" class=\"trajectory-line\"></view>\n    </view>\n      </view>\n    </view>\n\n    <!-- è½¨è¿¹ç‚¹è¯¦æƒ…å¼¹çª— -->\n    <view v-if=\"showDetail\" class=\"modal-mask\" @click=\"hidePointDetail\">\n      <view class=\"modal\" @click.stop>\n        <view class=\"modal-header\">\n          <text class=\"modal-title\">{{ currentPoint.location_name || currentPoint.locationName || currentPoint.title || 'æœªçŸ¥åœ°ç‚¹' }}</text>\n          <text class=\"modal-date\">{{ formatPointDate(currentPoint) }}</text>\n        </view>\n        <view class=\"modal-content\">\n          <view v-if=\"currentPoint.address\" class=\"point-address\">\n            <text class=\"address-label\">ğŸ“</text>\n            <text class=\"address-text\">{{ currentPoint.address }}</text>\n        </view>\n          <image v-if=\"currentPoint.photos && currentPoint.photos.length > 0\" :src=\"currentPoint.photos[0]\" class=\"point-image\" mode=\"aspectFill\" />\n          <image v-else-if=\"currentPoint.image\" :src=\"currentPoint.image\" class=\"point-image\" mode=\"aspectFill\" />\n          <text class=\"point-description\">{{ currentPoint.description || \"æš‚æ— æè¿°\" }}</text>\n          <view v-if=\"currentPoint.visit_count\" class=\"point-meta\">\n            <text class=\"meta-text\">åˆ°è®¿æ¬¡æ•°ï¼š{{ currentPoint.visit_count }}</text>\n            <text v-if=\"currentPoint.stay_duration\" class=\"meta-text\">åœç•™æ—¶é•¿ï¼š{{ formatDuration(currentPoint.stay_duration) }}</text>\n          </view>\n        </view>\n        <view class=\"modal-actions\">\n          <button class=\"btn secondary\" @click=\"hidePointDetail\">å…³é—­</button>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { updateLocation, getCurrentLocations, getTrajectoryPoints } from '@/api/trajectory.js';\n\nexport default {\n  data() {\n    return {\n      statusBarHeight: 0,\n      navBarHeight: 54,\n      screenWidth: 375,\n      trajectoryPoints: [],  // é™æ€è½¨è¿¹ç‚¹ï¼ˆå·²åºŸå¼ƒï¼Œä¿ç•™å…¼å®¹æ€§ï¼‰\n      showDetail: false,\n      currentPoint: {},\n      // å†å²è½¨è¿¹ç›¸å…³\n      startDate: '',  // å¼€å§‹æ—¥æœŸ\n      endDate: '',    // ç»“æŸæ—¥æœŸ\n      historyPoints: [],  // å†å²è½¨è¿¹ç‚¹åˆ—è¡¨\n      isLoadingHistory: false,  // æ˜¯å¦æ­£åœ¨åŠ è½½å†å²è½¨è¿¹\n      // å®šä½ç›¸å…³\n      isLocationTracking: false,  // æ˜¯å¦å¼€å¯å®šä½è¿½è¸ª\n      locationTimer: null,         // å®šæ—¶å™¨ID\n      myLocation: null,            // æˆ‘çš„ä½ç½®\n      partnerLocation: null,        // å¯¹æ–¹ä½ç½®\n      distance: null,               // åŒæ–¹è·ç¦»ï¼ˆå…¬é‡Œï¼‰\n      isRequestingLocation: false,  // æ˜¯å¦æ­£åœ¨è¯·æ±‚ä½ç½®\n      locationError: null,           // å®šä½é”™è¯¯ä¿¡æ¯\n      // åœ°å›¾ç›¸å…³\n      mapCenter: {\n        latitude: 39.9042,  // é»˜è®¤åŒ—äº¬\n        longitude: 116.4074\n      },\n      mapScale: 13,  // åœ°å›¾ç¼©æ”¾çº§åˆ«\n      mapMarkers: [],  // åœ°å›¾æ ‡è®°ç‚¹\n      mapPolyline: [],  // åœ°å›¾è·¯çº¿\n      showHistoryMode: false  // æ˜¯å¦æ˜¾ç¤ºå†å²è½¨è¿¹æ¨¡å¼\n    };\n  },\n  computed: {\n    containerPaddingTop() {\n      // å°†pxè½¬æ¢ä¸ºrpx: rpx = px * 750 / screenWidth\n      // æ·»åŠ 20rpxé¢å¤–é—´è·\n      const totalHeightPx = this.statusBarHeight + this.navBarHeight;\n      const pxToRpx = 750 / this.screenWidth;\n      const totalHeightRpx = totalHeightPx * pxToRpx;\n      return totalHeightRpx + 20 + 'rpx';\n    },\n    // å¼€å§‹æ—¥æœŸé€‰æ‹©å™¨çš„æœ€å°æ—¥æœŸ\n    startDateMin() {\n      return '2020-01-01';\n    },\n    // å¼€å§‹æ—¥æœŸé€‰æ‹©å™¨çš„æœ€å¤§æ—¥æœŸ\n    startDateMax() {\n      return this.endDate || this.formatDate(new Date());\n    },\n    // ç»“æŸæ—¥æœŸé€‰æ‹©å™¨çš„æœ€å°æ—¥æœŸ\n    endDateMin() {\n      return this.startDate || '2020-01-01';\n    },\n    // ç»“æŸæ—¥æœŸé€‰æ‹©å™¨çš„æœ€å¤§æ—¥æœŸ\n    endDateMax() {\n      return this.formatDate(new Date());\n    }\n  },\n  watch: {\n    // ç›‘å¬ä½ç½®å˜åŒ–ï¼Œæ›´æ–°åœ°å›¾\n    myLocation: {\n      handler() {\n        if (!this.showHistoryMode) {\n          this.updateMap();\n        }\n      },\n      deep: true\n    },\n    partnerLocation: {\n      handler() {\n        if (!this.showHistoryMode) {\n          this.updateMap();\n        }\n      },\n      deep: true\n    },\n    // ç›‘å¬å†å²è½¨è¿¹ç‚¹å˜åŒ–ï¼Œæ›´æ–°åœ°å›¾\n    historyPoints: {\n      handler() {\n        if (this.showHistoryMode && this.historyPoints.length > 0) {\n          this.updateHistoryMap();\n        }\n      },\n      deep: true\n    }\n  },\n  onLoad() {\n    this.getSystemInfo();\n    // æ£€æŸ¥å®šä½æƒé™å¹¶åˆå§‹åŒ–\n    this.initLocation();\n  },\n  onUnload() {\n    // é¡µé¢å¸è½½æ—¶åœæ­¢å®šä½è¿½è¸ª\n    this.stopLocationTracking();\n  },\n  methods: {\n    getSystemInfo() {\n      const systemInfo = uni.getSystemInfoSync();\n      this.statusBarHeight = systemInfo.statusBarHeight || 0;\n      this.screenWidth = systemInfo.windowWidth || 375;\n      this.navBarHeight = 54;\n    },\n    showPointDetail(point) {\n      this.currentPoint = point;\n      this.showDetail = true;\n    },\n    hidePointDetail() {\n      this.showDetail = false;\n      this.currentPoint = {};\n    },\n    \n    // ========== å®šä½ç›¸å…³æ–¹æ³• ==========\n    \n    /**\n     * åˆå§‹åŒ–å®šä½åŠŸèƒ½\n     */\n    async initLocation() {\n      try {\n        // æ£€æŸ¥å®šä½æƒé™\n        const setting = await this.checkLocationPermission();\n        if (setting) {\n          // é¦–æ¬¡è·å–ä½ç½®\n          await this.getCurrentLocation();\n          // åŠ è½½åŒæ–¹ä½ç½®\n          await this.loadCurrentLocations();\n        }\n      } catch (error) {\n        console.error('åˆå§‹åŒ–å®šä½å¤±è´¥:', error);\n      }\n    },\n    \n    /**\n     * æ£€æŸ¥å®šä½æƒé™\n     */\n    checkLocationPermission() {\n      return new Promise((resolve) => {\n        uni.getSetting({\n          success: (res) => {\n            if (res.authSetting['scope.userLocation']) {\n              // å·²æˆæƒ\n              resolve(true);\n            } else if (res.authSetting['scope.userLocation'] === false) {\n              // å·²æ‹’ç»ï¼Œæç¤ºç”¨æˆ·æ‰‹åŠ¨å¼€å¯\n              uni.showModal({\n                title: 'éœ€è¦å®šä½æƒé™',\n                content: 'ä¸ºäº†å±•ç¤ºåŒæ–¹ä½ç½®ï¼Œéœ€è¦è·å–æ‚¨çš„ä½ç½®ä¿¡æ¯ã€‚è¯·åœ¨è®¾ç½®ä¸­å¼€å¯å®šä½æƒé™ã€‚',\n                showCancel: true,\n                confirmText: 'å»è®¾ç½®',\n                cancelText: 'å–æ¶ˆ',\n                success: (modalRes) => {\n                  if (modalRes.confirm) {\n                    uni.openSetting({\n                      success: (settingRes) => {\n                        if (settingRes.authSetting['scope.userLocation']) {\n                          resolve(true);\n                        } else {\n                          resolve(false);\n                        }\n                      }\n                    });\n                  } else {\n                    resolve(false);\n                  }\n                }\n              });\n            } else {\n              // æœªæˆæƒï¼Œè¯·æ±‚æˆæƒ\n              uni.authorize({\n                scope: 'scope.userLocation',\n                success: () => {\n                  resolve(true);\n                },\n                fail: () => {\n                  uni.showToast({\n                    title: 'éœ€è¦å®šä½æƒé™æ‰èƒ½ä½¿ç”¨æ­¤åŠŸèƒ½',\n                    icon: 'none',\n                    duration: 2000\n                  });\n                  resolve(false);\n                }\n              });\n            }\n          },\n          fail: () => {\n            resolve(false);\n          }\n        });\n      });\n    },\n    \n    /**\n     * è·å–å½“å‰ä½ç½®å¹¶ä¸Šä¼ \n     */\n    async getCurrentLocation() {\n      if (this.isRequestingLocation) {\n        return;\n      }\n      \n      this.isRequestingLocation = true;\n      this.locationError = null;\n      \n      try {\n        // è·å–å½“å‰ä½ç½®\n        const locationRes = await new Promise((resolve, reject) => {\n          uni.getLocation({\n            type: 'gcj02',  // è…¾è®¯åœ°å›¾åæ ‡ç³»\n            altitude: false,\n            success: resolve,\n            fail: reject\n          });\n        });\n        \n        const { latitude, longitude } = locationRes;\n        \n        // ä¿å­˜æˆ‘çš„ä½ç½®\n        this.myLocation = {\n          latitude,\n          longitude,\n          updateTime: new Date()\n        };\n        \n        // ä¸Šä¼ åˆ°åç«¯\n        try {\n          await updateLocation({\n            latitude,\n            longitude\n          });\n          \n          console.log('ä½ç½®ä¸Šä¼ æˆåŠŸ');\n        } catch (error) {\n          console.error('ä½ç½®ä¸Šä¼ å¤±è´¥:', error);\n          // å¦‚æœæ˜¯\"ç”¨æˆ·ä¸å­˜åœ¨\"é”™è¯¯ï¼Œæç¤ºç”¨æˆ·ä½†ä¸è¦è·³è½¬ç™»å½•\n          if (error.message && error.message.includes('ç”¨æˆ·ä¸å­˜åœ¨')) {\n            console.warn('âš ï¸ ä½ç½®ä¸Šä¼ å¤±è´¥ï¼šç”¨æˆ·ä¿¡æ¯å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•');\n            // ä¸æ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œé¿å…æ‰“æ‰°ç”¨æˆ·\n            // ä½ç½®ä¸Šä¼ å¤±è´¥ä¸å½±å“æœ¬åœ°æ˜¾ç¤ºå’Œé¡µé¢ä½¿ç”¨\n          }\n          // ä¸Šä¼ å¤±è´¥ä¸å½±å“æœ¬åœ°æ˜¾ç¤º\n        }\n        \n        // é‡æ–°åŠ è½½åŒæ–¹ä½ç½®\n        try {\n          await this.loadCurrentLocations();\n        } catch (error) {\n          // åŠ è½½å¤±è´¥ä¸å½±å“å…¶ä»–åŠŸèƒ½\n          if (error.message && error.message.includes('ç”¨æˆ·ä¸å­˜åœ¨')) {\n            console.warn('âš ï¸ åŠ è½½åŒæ–¹ä½ç½®å¤±è´¥ï¼šç”¨æˆ·ä¿¡æ¯å·²å¤±æ•ˆ');\n          }\n        }\n        \n      } catch (error) {\n        console.error('è·å–ä½ç½®å¤±è´¥:', error);\n        this.locationError = error.errMsg || 'è·å–ä½ç½®å¤±è´¥';\n        \n        if (error.errMsg && error.errMsg.includes('auth deny')) {\n          uni.showToast({\n            title: 'å®šä½æƒé™è¢«æ‹’ç»',\n            icon: 'none',\n            duration: 2000\n          });\n        }\n      } finally {\n        this.isRequestingLocation = false;\n      }\n    },\n    \n    /**\n     * åŠ è½½åŒæ–¹å®æ—¶ä½ç½®\n     */\n    async loadCurrentLocations() {\n      try {\n        const res = await getCurrentLocations();\n        \n        if (res.success && res.data) {\n          // å…¼å®¹åç«¯è¿”å›çš„ä¸¤ç§å‘½åæ ¼å¼ï¼šé©¼å³°å‘½åï¼ˆmyLocationï¼‰å’Œä¸‹åˆ’çº¿å‘½åï¼ˆmy_locationï¼‰\n          const myLocationData = res.data.myLocation || res.data.my_location;\n          const partnerLocationData = res.data.partnerLocation || res.data.partner_location;\n          const distance = res.data.distance;\n          const distanceText = res.data.distance_text || res.data.distanceText;\n          \n          // æ›´æ–°æˆ‘çš„ä½ç½®\n          if (myLocationData) {\n            this.myLocation = {\n              latitude: myLocationData.latitude,\n              longitude: myLocationData.longitude,\n              address: myLocationData.address || myLocationData.description || null,\n              location_name: myLocationData.location_name || myLocationData.locationName || null,\n              updateTime: myLocationData.update_time || myLocationData.updatedAt || myLocationData.createdAt || new Date()\n            };\n            \n            // å¦‚æœæ²¡æœ‰åœ°å€ä¿¡æ¯ï¼Œæ ¹æ®ç»çº¬åº¦åè§£æåœ°å€\n            if (!this.myLocation.address && !this.myLocation.location_name) {\n              await this.reverseGeocode(this.myLocation.latitude, this.myLocation.longitude, 'my');\n            }\n          }\n          \n          // æ›´æ–°å¯¹æ–¹ä½ç½®\n          if (partnerLocationData) {\n            this.partnerLocation = {\n              latitude: partnerLocationData.latitude,\n              longitude: partnerLocationData.longitude,\n              address: partnerLocationData.address || partnerLocationData.description || null,\n              location_name: partnerLocationData.location_name || partnerLocationData.locationName || null,\n              updateTime: partnerLocationData.update_time || partnerLocationData.updatedAt || partnerLocationData.createdAt || new Date()\n            };\n            \n            // å¦‚æœæ²¡æœ‰åœ°å€ä¿¡æ¯ï¼Œæ ¹æ®ç»çº¬åº¦åè§£æåœ°å€\n            if (!this.partnerLocation.address && !this.partnerLocation.location_name) {\n              await this.reverseGeocode(this.partnerLocation.latitude, this.partnerLocation.longitude, 'partner');\n            }\n          } else {\n            this.partnerLocation = null;\n          }\n          \n          // æ›´æ–°è·ç¦»\n          this.distance = distance;\n          \n          // å¦‚æœåŒæ–¹éƒ½æœ‰ä½ç½®ï¼Œä½†åç«¯æ²¡æœ‰è¿”å›è·ç¦»ï¼Œå‰ç«¯è®¡ç®—è·ç¦»\n          if (this.distance === null || this.distance === undefined) {\n            if (this.myLocation && this.partnerLocation) {\n              this.distance = this.calculateDistance(\n                this.myLocation.latitude, this.myLocation.longitude,\n                this.partnerLocation.latitude, this.partnerLocation.longitude\n              );\n            }\n          }\n          \n          console.log('åŒæ–¹ä½ç½®åŠ è½½æˆåŠŸ', {\n            myLocation: this.myLocation,\n            partnerLocation: this.partnerLocation,\n            distance: distanceText || this.distance,\n            rawData: res.data\n          });\n          \n          // æ›´æ–°åœ°å›¾æ˜¾ç¤º\n          this.updateMap();\n        }\n      } catch (error) {\n        console.error('åŠ è½½åŒæ–¹ä½ç½®å¤±è´¥:', error);\n        // å¦‚æœæ˜¯\"ç”¨æˆ·ä¸å­˜åœ¨\"é”™è¯¯ï¼Œä¼˜é›…å¤„ç†ï¼Œä¸è§¦å‘å…¨å±€ç™»å½•è·³è½¬\n        if (error.message && error.message.includes('ç”¨æˆ·ä¸å­˜åœ¨')) {\n          console.warn('âš ï¸ åŠ è½½åŒæ–¹ä½ç½®å¤±è´¥ï¼šç”¨æˆ·ä¿¡æ¯å·²å¤±æ•ˆ');\n          // ä¸æ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œé¿å…æ‰“æ‰°ç”¨æˆ·\n          // ä½ç½®åŠ è½½å¤±è´¥ä¸å½±å“é¡µé¢å…¶ä»–åŠŸèƒ½\n          return;\n        }\n        // å¦‚æœåç«¯æ¥å£æœªå®ç°ï¼Œä¸æ˜¾ç¤ºé”™è¯¯ï¼ˆå¼€å‘é˜¶æ®µï¼‰\n        if (process.env.NODE_ENV === 'development') {\n          console.warn('âš ï¸ åç«¯æ¥å£å¯èƒ½æœªå®ç°ï¼Œè·³è¿‡åŠ è½½åŒæ–¹ä½ç½®');\n        }\n      }\n    },\n    \n    /**\n     * å¼€å¯å®šä½è¿½è¸ªï¼ˆå®šæ—¶ä¸Šä¼ ä½ç½®ï¼‰\n     */\n    startLocationTracking() {\n      if (this.isLocationTracking) {\n        return;\n      }\n      \n      // æ£€æŸ¥æƒé™\n      this.checkLocationPermission().then((hasPermission) => {\n        if (!hasPermission) {\n        return;\n      }\n      \n        this.isLocationTracking = true;\n        \n        // ç«‹å³è·å–ä¸€æ¬¡ä½ç½®\n        this.getCurrentLocation();\n        \n        // æ¯5åˆ†é’Ÿä¸Šä¼ ä¸€æ¬¡ä½ç½®\n        this.locationTimer = setInterval(() => {\n          this.getCurrentLocation();\n        }, 5 * 60 * 1000);  // 5åˆ†é’Ÿ\n        \n        uni.showToast({\n          title: 'å®šä½è¿½è¸ªå·²å¼€å¯',\n          icon: 'success',\n          duration: 2000\n        });\n      });\n    },\n    \n    /**\n     * åœæ­¢å®šä½è¿½è¸ª\n     */\n    stopLocationTracking() {\n      if (this.locationTimer) {\n        clearInterval(this.locationTimer);\n        this.locationTimer = null;\n      }\n      this.isLocationTracking = false;\n      \n      uni.showToast({\n        title: 'å®šä½è¿½è¸ªå·²å…³é—­',\n        icon: 'none',\n        duration: 2000\n      });\n    },\n    \n    /**\n     * åˆ‡æ¢å®šä½è¿½è¸ªçŠ¶æ€\n     */\n    toggleLocationTracking() {\n      if (this.isLocationTracking) {\n        this.stopLocationTracking();\n      } else {\n        this.startLocationTracking();\n      }\n    },\n    \n    /**\n     * æ‰‹åŠ¨åˆ·æ–°ä½ç½®\n     */\n    async refreshLocation() {\n      uni.showLoading({ title: 'è·å–ä½ç½®ä¸­...' });\n      try {\n        await this.getCurrentLocation();\n        uni.showToast({\n          title: 'ä½ç½®å·²æ›´æ–°',\n          icon: 'success',\n          duration: 1500\n        });\n      } catch (error) {\n        uni.showToast({\n          title: 'è·å–ä½ç½®å¤±è´¥',\n          icon: 'none',\n          duration: 2000\n        });\n      } finally {\n        uni.hideLoading();\n      }\n    },\n    \n    /**\n     * æ ¼å¼åŒ–æ—¶é—´\n     */\n    formatTime(time) {\n      if (!time) return '';\n      \n      const date = new Date(time);\n      const now = new Date();\n      const diff = now - date;\n      const minutes = Math.floor(diff / 60000);\n      \n      if (minutes < 1) {\n        return 'åˆšåˆš';\n      } else if (minutes < 60) {\n        return `${minutes}åˆ†é’Ÿå‰`;\n      } else if (minutes < 1440) {\n        const hours = Math.floor(minutes / 60);\n        return `${hours}å°æ—¶å‰`;\n      } else {\n        const month = date.getMonth() + 1;\n        const day = date.getDate();\n        const hour = date.getHours();\n        const minute = date.getMinutes();\n        return `${month}-${day} ${hour}:${minute.toString().padStart(2, '0')}`;\n      }\n    },\n    \n    /**\n     * æ ¼å¼åŒ–è·ç¦»\n     */\n    formatDistance(distance) {\n      if (distance === null || distance === undefined) {\n        return '--';\n      }\n      \n      if (distance < 1) {\n        // å°äº1å…¬é‡Œï¼Œæ˜¾ç¤ºç±³\n        const meters = Math.round(distance * 1000);\n        return `${meters}ç±³`;\n      } else if (distance < 100) {\n        // 1-100å…¬é‡Œï¼Œæ˜¾ç¤ºå…¬é‡Œï¼ˆä¿ç•™1ä½å°æ•°ï¼‰\n        return `${distance.toFixed(1)}å…¬é‡Œ`;\n      } else {\n        // å¤§äº100å…¬é‡Œï¼Œæ˜¾ç¤ºå…¬é‡Œï¼ˆæ•´æ•°ï¼‰\n        return `${Math.round(distance)}å…¬é‡Œ`;\n      }\n    },\n    \n    /**\n     * æ ¹æ®ç»çº¬åº¦åè§£æåœ°å€ï¼ˆä½¿ç”¨è…¾è®¯åœ°å›¾APIï¼‰\n     */\n    async reverseGeocode(latitude, longitude, type = 'my') {\n      try {\n        // ä½¿ç”¨uni.getLocationçš„åå‘åœ°ç†ç¼–ç åŠŸèƒ½\n        // æ³¨æ„ï¼šuni.getLocationåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ä¸æ”¯æŒé€†åœ°å€è§£æ\n        // è¿™é‡Œä½¿ç”¨è…¾è®¯åœ°å›¾APIï¼ˆéœ€è¦é…ç½®keyï¼‰\n        // æˆ–è€…ä½¿ç”¨åç«¯æ¥å£è¿›è¡Œåœ°å€è§£æ\n        \n        // ä¸´æ—¶æ–¹æ¡ˆï¼šä½¿ç”¨ç®€å•çš„æè¿°\n        const location = {\n          latitude,\n          longitude,\n          address: `${latitude.toFixed(4)}, ${longitude.toFixed(4)}`,\n          location_name: 'å½“å‰ä½ç½®'\n        };\n        \n        // æ›´æ–°ä½ç½®ä¿¡æ¯\n        if (type === 'my' && this.myLocation) {\n          this.myLocation.address = this.myLocation.address || location.address;\n          this.myLocation.location_name = this.myLocation.location_name || location.location_name;\n        } else if (type === 'partner' && this.partnerLocation) {\n          this.partnerLocation.address = this.partnerLocation.address || location.address;\n          this.partnerLocation.location_name = this.partnerLocation.location_name || location.location_name;\n        }\n        \n        // TODO: é›†æˆè…¾è®¯åœ°å›¾APIæˆ–åç«¯åœ°å€è§£ææ¥å£\n        // å¦‚æœéœ€è¦è¯¦ç»†åœ°å€ï¼Œå¯ä»¥è°ƒç”¨åç«¯æ¥å£æˆ–ç¬¬ä¸‰æ–¹åœ°å›¾API\n      } catch (error) {\n        console.error('åœ°å€åè§£æå¤±è´¥:', error);\n      }\n    },\n    \n    /**\n     * è®¡ç®—ä¸¤ç‚¹é—´è·ç¦»ï¼ˆä½¿ç”¨Haversineå…¬å¼ï¼Œå•ä½ï¼šå…¬é‡Œï¼‰\n     */\n    calculateDistance(lat1, lon1, lat2, lon2) {\n      const R = 6371; // åœ°çƒåŠå¾„ï¼ˆå…¬é‡Œï¼‰\n      const dLat = (lat2 - lat1) * Math.PI / 180;\n      const dLon = (lon2 - lon1) * Math.PI / 180;\n      const a = \n        Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\n      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      const distance = R * c;\n      return distance;\n    },\n    \n    /**\n     * æ›´æ–°åœ°å›¾æ˜¾ç¤º\n     */\n    updateMap() {\n      const markers = [];\n      \n      // æ·»åŠ æˆ‘çš„ä½ç½®æ ‡è®°\n      if (this.myLocation && this.myLocation.latitude && this.myLocation.longitude) {\n        const marker = {\n          id: 1,\n          latitude: this.myLocation.latitude,\n          longitude: this.myLocation.longitude,\n          width: 30,\n          height: 30,\n          title: 'æˆ‘çš„ä½ç½®',\n          callout: {\n            content: this.myLocation.address || this.myLocation.location_name || 'æˆ‘çš„ä½ç½®',\n            color: '#333',\n            fontSize: 12,\n            borderRadius: 4,\n            bgColor: '#fff',\n            padding: 8,\n            display: 'BYCLICK'\n          }\n        };\n        // å¦‚æœæœ‰è‡ªå®šä¹‰å›¾æ ‡ï¼Œä½¿ç”¨è‡ªå®šä¹‰å›¾æ ‡ï¼›å¦åˆ™ä½¿ç”¨é»˜è®¤æ ·å¼\n        // marker.iconPath = '/static/trajectory/my-location.png';\n        markers.push(marker);\n      }\n      \n      // æ·»åŠ å¯¹æ–¹ä½ç½®æ ‡è®°\n      if (this.partnerLocation && this.partnerLocation.latitude && this.partnerLocation.longitude) {\n        const marker = {\n          id: 2,\n          latitude: this.partnerLocation.latitude,\n          longitude: this.partnerLocation.longitude,\n          width: 30,\n          height: 30,\n          title: 'å¯¹æ–¹ä½ç½®',\n          callout: {\n            content: this.partnerLocation.address || this.partnerLocation.location_name || 'å¯¹æ–¹ä½ç½®',\n            color: '#333',\n            fontSize: 12,\n            borderRadius: 4,\n            bgColor: '#fff',\n            padding: 8,\n            display: 'BYCLICK'\n          }\n        };\n        // å¦‚æœæœ‰è‡ªå®šä¹‰å›¾æ ‡ï¼Œä½¿ç”¨è‡ªå®šä¹‰å›¾æ ‡ï¼›å¦åˆ™ä½¿ç”¨é»˜è®¤æ ·å¼\n        // marker.iconPath = '/static/trajectory/partner-location.png';\n        markers.push(marker);\n      }\n      \n      this.mapMarkers = markers;\n      \n      // è®¡ç®—åœ°å›¾ä¸­å¿ƒç‚¹\n      if (markers.length > 0) {\n        if (markers.length === 1) {\n          // åªæœ‰ä¸€ä¸ªä½ç½®ï¼Œä»¥è¯¥ä½ç½®ä¸ºä¸­å¿ƒ\n          this.mapCenter = {\n            latitude: markers[0].latitude,\n            longitude: markers[0].longitude\n          };\n          this.mapScale = 15;\n        } else {\n          // ä¸¤ä¸ªä½ç½®ï¼Œè®¡ç®—ä¸­å¿ƒç‚¹\n          const avgLat = (markers[0].latitude + markers[1].latitude) / 2;\n          const avgLon = (markers[0].longitude + markers[1].longitude) / 2;\n          this.mapCenter = {\n            latitude: avgLat,\n            longitude: avgLon\n          };\n          \n          // æ ¹æ®è·ç¦»è°ƒæ•´ç¼©æ”¾çº§åˆ«\n          const dist = this.calculateDistance(\n            markers[0].latitude, markers[0].longitude,\n            markers[1].latitude, markers[1].longitude\n          );\n          if (dist < 1) {\n            this.mapScale = 16; // 1å…¬é‡Œå†…ï¼Œæ”¾å¤§\n          } else if (dist < 10) {\n            this.mapScale = 14; // 10å…¬é‡Œå†…\n          } else if (dist < 100) {\n            this.mapScale = 12; // 100å…¬é‡Œå†…\n          } else {\n            this.mapScale = 10; // æ›´è¿œè·ç¦»\n          }\n          \n          // æ·»åŠ è¿çº¿\n          this.mapPolyline = [{\n            points: [\n              { latitude: markers[0].latitude, longitude: markers[0].longitude },\n              { latitude: markers[1].latitude, longitude: markers[1].longitude }\n            ],\n            color: '#FF69B4',\n            width: 3,\n            borderColor: '#fff',\n            borderWidth: 1,\n            arrowLine: true\n          }];\n        }\n      } else {\n        // æ²¡æœ‰ä½ç½®ä¿¡æ¯ï¼Œä½¿ç”¨é»˜è®¤ä¸­å¿ƒç‚¹\n        this.mapCenter = {\n          latitude: 39.9042,\n          longitude: 116.4074\n        };\n        this.mapScale = 13;\n        this.mapPolyline = [];\n      }\n    },\n    \n    /**\n     * åœ°å›¾ç‚¹å‡»äº‹ä»¶\n     */\n    onMapTap(e) {\n      console.log('åœ°å›¾ç‚¹å‡»:', e);\n    },\n    \n    /**\n     * åœ°å›¾æ ‡è®°ç‚¹ç‚¹å‡»äº‹ä»¶\n     */\n    onMarkerTap(e) {\n      console.log('æ ‡è®°ç‚¹ç‚¹å‡»:', e);\n      if (this.showHistoryMode && e.detail) {\n        const markerId = e.detail.markerId;\n        // æ‰¾åˆ°å¯¹åº”çš„è½¨è¿¹ç‚¹\n        const marker = this.mapMarkers.find(m => m.id === markerId);\n        if (marker && marker.pointData) {\n          this.showPointDetail(marker.pointData);\n        }\n      }\n    },\n    \n    // ========== å†å²è½¨è¿¹ç›¸å…³æ–¹æ³• ==========\n    \n    /**\n     * å¼€å§‹æ—¥æœŸæ”¹å˜\n     */\n    onStartDateChange(e) {\n      const selectedDate = e.detail.value;\n      if (this.endDate && selectedDate > this.endDate) {\n        uni.showToast({\n          title: 'å¼€å§‹æ—¥æœŸä¸èƒ½æ™šäºç»“æŸæ—¥æœŸ',\n          icon: 'none'\n        });\n        return;\n      }\n      this.startDate = selectedDate;\n    },\n    \n    /**\n     * ç»“æŸæ—¥æœŸæ”¹å˜\n     */\n    onEndDateChange(e) {\n      const selectedDate = e.detail.value;\n      if (this.startDate && selectedDate < this.startDate) {\n        uni.showToast({\n          title: 'ç»“æŸæ—¥æœŸä¸èƒ½æ—©äºå¼€å§‹æ—¥æœŸ',\n          icon: 'none'\n        });\n        return;\n      }\n      this.endDate = selectedDate;\n    },\n    \n    /**\n     * æ ¼å¼åŒ–æ—¥æœŸä¸º YYYY-MM-DD\n     */\n    formatDate(date) {\n      if (typeof date === 'string') {\n        return date;\n      }\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const day = String(date.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    \n    /**\n     * åŠ è½½å†å²è½¨è¿¹ç‚¹\n     */\n    async loadHistoryTrajectory() {\n      if (!this.startDate || !this.endDate) {\n        uni.showToast({\n          title: 'è¯·é€‰æ‹©æ—¶é—´åŒºé—´',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      if (this.startDate > this.endDate) {\n        uni.showToast({\n          title: 'å¼€å§‹æ—¥æœŸä¸èƒ½æ™šäºç»“æŸæ—¥æœŸ',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      this.isLoadingHistory = true;\n      \n      try {\n        const res = await getTrajectoryPoints({\n          start_date: this.startDate,\n          end_date: this.endDate,\n          limit: 1000  // è·å–æ›´å¤šè½¨è¿¹ç‚¹\n        });\n        \n        console.log('è½¨è¿¹ç‚¹æŸ¥è¯¢å“åº”:', res);\n        console.log('é€‰æ‹©çš„æ—¥æœŸèŒƒå›´:', this.startDate, 'è‡³', this.endDate);\n        \n        if (res.success && res.data) {\n          // å…¼å®¹ä¸¤ç§æ•°æ®æ ¼å¼ï¼š\n          // 1. res.data.points (æ ‡å‡†æ ¼å¼)\n          // 2. res.data ç›´æ¥æ˜¯æ•°ç»„ (åç«¯è¿”å›æ ¼å¼)\n          let points = [];\n          if (Array.isArray(res.data)) {\n            points = res.data;\n          } else if (res.data.points && Array.isArray(res.data.points)) {\n            points = res.data.points;\n          }\n          \n          console.log('è§£æåçš„è½¨è¿¹ç‚¹æ•°é‡:', points.length);\n          console.log('è½¨è¿¹ç‚¹æ•°æ®ç¤ºä¾‹:', points[0]);\n          \n          this.historyPoints = points;\n          this.showHistoryMode = true;\n          \n          // æ›´æ–°åœ°å›¾æ˜¾ç¤º\n          if (this.historyPoints.length > 0) {\n            this.updateHistoryMap();\n            uni.showToast({\n              title: `åŠ è½½äº† ${this.historyPoints.length} ä¸ªè½¨è¿¹ç‚¹`,\n              icon: 'success',\n              duration: 2000\n            });\n          } else {\n            uni.showToast({\n              title: 'è¯¥æ—¶é—´æ®µå†…æ²¡æœ‰è½¨è¿¹ç‚¹',\n              icon: 'none'\n            });\n            this.showHistoryMode = false;\n          }\n        } else {\n          throw new Error(res.message || 'åŠ è½½å¤±è´¥');\n        }\n      } catch (error) {\n        console.error('åŠ è½½å†å²è½¨è¿¹å¤±è´¥:', error);\n        uni.showToast({\n          title: error.message || 'åŠ è½½å†å²è½¨è¿¹å¤±è´¥',\n          icon: 'none',\n          duration: 2000\n        });\n        this.showHistoryMode = false;\n      } finally {\n        this.isLoadingHistory = false;\n      }\n    },\n    \n    /**\n     * æ¸…é™¤å†å²è½¨è¿¹\n     */\n    clearHistory() {\n      this.historyPoints = [];\n      this.showHistoryMode = false;\n      this.startDate = '';\n      this.endDate = '';\n      // æ¢å¤å®æ—¶ä½ç½®åœ°å›¾æ˜¾ç¤º\n      this.updateMap();\n    },\n    \n    /**\n     * æ›´æ–°å†å²è½¨è¿¹åœ°å›¾æ˜¾ç¤º\n     */\n    updateHistoryMap() {\n      if (this.historyPoints.length === 0) {\n        return;\n      }\n      \n      // æŒ‰æ—¶é—´æ’åºè½¨è¿¹ç‚¹\n      const sortedPoints = [...this.historyPoints].sort((a, b) => {\n        const timeA = this.parseTimeString(a.visit_time || a.visitTime);\n        const timeB = this.parseTimeString(b.visit_time || b.visitTime);\n        \n        if (!timeA && !timeB) return 0;\n        if (!timeA) return 1;\n        if (!timeB) return -1;\n        \n        return timeA.getTime() - timeB.getTime();\n      });\n      \n      // åˆ›å»ºåœ°å›¾æ ‡è®°ç‚¹\n      const markers = sortedPoints.map((point, index) => {\n        const latitude = point.latitude;\n        const longitude = point.longitude;\n        const locationName = point.location_name || point.locationName || point.address || 'æœªçŸ¥åœ°ç‚¹';\n        const visitTime = point.visit_time || point.visitTime;\n        \n        return {\n          id: index + 100,  // ä½¿ç”¨100+é¿å…ä¸å®æ—¶ä½ç½®æ ‡è®°å†²çª\n          latitude: latitude,\n          longitude: longitude,\n          width: 30,\n          height: 30,\n          title: locationName,\n          callout: {\n            content: `${locationName}\\n${this.formatVisitTime(visitTime)}`,\n            color: '#333',\n            fontSize: 12,\n            borderRadius: 4,\n            bgColor: '#fff',\n            padding: 8,\n            display: 'BYCLICK'\n          },\n          // æ·»åŠ ç‚¹å‡»äº‹ä»¶æ•°æ®\n          pointData: point\n        };\n      });\n      \n      this.mapMarkers = markers;\n      \n      // è®¡ç®—åœ°å›¾ä¸­å¿ƒç‚¹å’Œç¼©æ”¾çº§åˆ«\n      if (markers.length > 0) {\n        // è®¡ç®—æ‰€æœ‰ç‚¹çš„è¾¹ç•Œ\n        const latitudes = markers.map(m => m.latitude);\n        const longitudes = markers.map(m => m.longitude);\n        const minLat = Math.min(...latitudes);\n        const maxLat = Math.max(...latitudes);\n        const minLon = Math.min(...longitudes);\n        const maxLon = Math.max(...longitudes);\n        \n        // ä¸­å¿ƒç‚¹\n        this.mapCenter = {\n          latitude: (minLat + maxLat) / 2,\n          longitude: (minLon + maxLon) / 2\n        };\n        \n        // æ ¹æ®è¦†ç›–èŒƒå›´è°ƒæ•´ç¼©æ”¾çº§åˆ«\n        const latDiff = maxLat - minLat;\n        const lonDiff = maxLon - minLon;\n        const maxDiff = Math.max(latDiff, lonDiff);\n        \n        if (maxDiff < 0.01) {\n          this.mapScale = 16;  // å¾ˆå°èŒƒå›´ï¼Œæ”¾å¤§\n        } else if (maxDiff < 0.1) {\n          this.mapScale = 14;  // å°èŒƒå›´\n        } else if (maxDiff < 1) {\n          this.mapScale = 12;  // ä¸­ç­‰èŒƒå›´\n        } else {\n          this.mapScale = 10;  // å¤§èŒƒå›´\n        }\n        \n        // åˆ›å»ºè½¨è¿¹è¿çº¿ï¼ˆæŒ‰æ—¶é—´é¡ºåºï¼‰\n        if (sortedPoints.length > 1) {\n          const points = sortedPoints.map(point => ({\n            latitude: point.latitude,\n            longitude: point.longitude\n          }));\n          \n          this.mapPolyline = [{\n            points: points,\n            color: '#2bad81',\n            width: 4,\n            borderColor: '#fff',\n            borderWidth: 1,\n            arrowLine: true,\n            dottedLine: false\n          }];\n        } else {\n          this.mapPolyline = [];\n        }\n      }\n    },\n    \n    /**\n     * è§£ææ—¶é—´å­—ç¬¦ä¸²ï¼ˆå…¼å®¹å¤šç§æ ¼å¼ï¼‰\n     */\n    parseTimeString(timeStr) {\n      if (!timeStr) return null;\n      \n      // å¦‚æœæ˜¯ Date å¯¹è±¡ï¼Œç›´æ¥è¿”å›\n      if (timeStr instanceof Date) {\n        return timeStr;\n      }\n      \n      // å°è¯•ç›´æ¥è§£æ\n      let date = new Date(timeStr);\n      \n      // å¦‚æœè§£æå¤±è´¥ï¼Œå°è¯•å¤„ç†ç‰¹æ®Šæ ¼å¼ \"Nov 5, 2025, 3:13:02 PM\"\n      if (isNaN(date.getTime())) {\n        // å¤„ç† \"Nov 5, 2025, 3:13:02 PM\" æ ¼å¼\n        // å°†ç¬¬äºŒä¸ªé€—å·æ›¿æ¢ä¸ºç©ºæ ¼: \"Nov 5, 2025 3:13:02 PM\"\n        const normalized = timeStr.replace(/,\\s*(\\d{1,2}:\\d{2}:\\d{2})/, ' $1');\n        date = new Date(normalized);\n      }\n      \n      // å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œè¿”å› null\n      if (isNaN(date.getTime())) {\n        console.warn('æ— æ³•è§£ææ—¶é—´å­—ç¬¦ä¸²:', timeStr);\n        return null;\n      }\n      \n      return date;\n    },\n    \n    /**\n     * æ ¼å¼åŒ–è®¿é—®æ—¶é—´\n     */\n    formatVisitTime(timeStr) {\n      if (!timeStr) return '';\n      const date = this.parseTimeString(timeStr);\n      if (!date) return timeStr; // å¦‚æœè§£æå¤±è´¥ï¼Œè¿”å›åŸå§‹å­—ç¬¦ä¸²\n      \n      const month = date.getMonth() + 1;\n      const day = date.getDate();\n      const hour = date.getHours();\n      const minute = date.getMinutes();\n      return `${month}-${day} ${hour}:${minute.toString().padStart(2, '0')}`;\n    },\n    \n    /**\n     * æ ¼å¼åŒ–è½¨è¿¹ç‚¹æ—¥æœŸ\n     */\n    formatPointDate(point) {\n      if (point.visit_time || point.visitTime) {\n        const date = this.parseTimeString(point.visit_time || point.visitTime);\n        if (!date) return '';\n        \n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const day = String(date.getDate()).padStart(2, '0');\n        const hour = String(date.getHours()).padStart(2, '0');\n        const minute = String(date.getMinutes()).padStart(2, '0');\n        return `${year}-${month}-${day} ${hour}:${minute}`;\n      }\n      return point.date || 'æœªçŸ¥æ—¥æœŸ';\n    },\n    \n    /**\n     * æ ¼å¼åŒ–åœç•™æ—¶é•¿\n     */\n    formatDuration(minutes) {\n      if (!minutes) return '';\n      if (minutes < 60) {\n        return `${minutes}åˆ†é’Ÿ`;\n      } else if (minutes < 1440) {\n        const hours = Math.floor(minutes / 60);\n        const mins = minutes % 60;\n        return mins > 0 ? `${hours}å°æ—¶${mins}åˆ†é’Ÿ` : `${hours}å°æ—¶`;\n      } else {\n        const days = Math.floor(minutes / 1440);\n        const hours = Math.floor((minutes % 1440) / 60);\n        return hours > 0 ? `${days}å¤©${hours}å°æ—¶` : `${days}å¤©`;\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.trajectory-page {\n  min-height: 100vh;\n  background-color: #F8F0FC;\n  padding-bottom: 40rpx;\n}\n\n/* è‡ªå®šä¹‰å¯¼èˆªæ æ ·å¼ */\n.custom-navbar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 9999;\n  background-color: #F8F0FC;\n  overflow: hidden;\n}\n.navbar-gradient-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 200%;\n  background: linear-gradient(180deg, #F8F0FC 0%, #F3E8FF 30%, #F0E0FF 60%, #F8F0FC 100%);\n  background: -webkit-linear-gradient(top, #F8F0FC 0%, #F3E8FF 30%, #F0E0FF 60%, #F8F0FC 100%);\n}\n.status-bar {\n  width: 100%;\n  background: transparent;\n  position: relative;\n  z-index: 1;\n}\n.navbar-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 30rpx;\n  box-sizing: border-box;\n  position: relative;\n  z-index: 1;\n}\n.navbar-title {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n.title-text {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #6B5B95;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n.content-area {\n  padding: 30rpx 24rpx;\n}\n.header {\n  padding: 0 0 20rpx 0;\n}\n.subtitle {\n  font-size: 26rpx;\n  color: #9B8FB8;\n  display: block;\n}\n\n/* å†å²è½¨è¿¹æŸ¥è¯¢å¡ç‰‡ */\n.history-card {\n  background: #ffffff;\n  border-radius: 24rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.06);\n}\n.history-card-header {\n  margin-bottom: 24rpx;\n}\n.history-title {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #2b2b2b;\n}\n.date-range-selector {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n  margin-bottom: 24rpx;\n}\n.date-item {\n  flex: 1;\n  padding: 20rpx;\n  background: #f8f8f8;\n  border-radius: 12rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 8rpx;\n}\n.date-label {\n  font-size: 24rpx;\n  color: #999;\n}\n.date-value {\n  font-size: 28rpx;\n  color: #333;\n  font-weight: 500;\n}\n.date-value.placeholder {\n  color: #999;\n}\n.date-separator {\n  font-size: 26rpx;\n  color: #666;\n  padding: 0 8rpx;\n}\n.history-actions {\n  display: flex;\n  gap: 16rpx;\n  margin-bottom: 16rpx;\n}\n.btn-query {\n  flex: 1;\n  padding: 20rpx;\n  background: #2bad81;\n  color: #ffffff;\n  border-radius: 12rpx;\n  font-size: 28rpx;\n  font-weight: 500;\n  border: none;\n}\n.btn-query:disabled {\n  background: #cccccc;\n  color: #999;\n}\n.btn-clear {\n  padding: 20rpx 32rpx;\n  background: #f5f5f5;\n  color: #666;\n  border-radius: 12rpx;\n  font-size: 28rpx;\n  border: none;\n}\n/* å®æ—¶ä½ç½®å¡ç‰‡ */\n.location-card {\n  background: #ffffff;\n  border-radius: 24rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.06);\n}\n.location-card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24rpx;\n}\n.location-title {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #2b2b2b;\n}\n.location-actions {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n}\n.refresh-btn {\n  width: 60rpx;\n  height: 60rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #f5f5f5;\n  border-radius: 30rpx;\n}\n.refresh-icon {\n  font-size: 28rpx;\n}\n.toggle-btn {\n  padding: 12rpx 24rpx;\n  background: #f5f5f5;\n  border-radius: 20rpx;\n  font-size: 24rpx;\n  color: #666;\n}\n.toggle-btn.active {\n  background: #2bad81;\n  color: #ffffff;\n}\n.toggle-text {\n  font-size: 24rpx;\n}\n.location-item {\n  margin-bottom: 20rpx;\n  padding-bottom: 20rpx;\n  border-bottom: 1rpx solid #f0f0f0;\n}\n.location-item:last-child {\n  margin-bottom: 0;\n  padding-bottom: 0;\n  border-bottom: none;\n}\n.location-label {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n  margin-bottom: 12rpx;\n}\n.location-icon {\n  font-size: 28rpx;\n}\n.location-name {\n  font-size: 28rpx;\n  font-weight: 500;\n  color: #333;\n}\n.location-info {\n  margin-left: 40rpx;\n}\n.location-address {\n  display: block;\n  font-size: 26rpx;\n  color: #666;\n  margin-bottom: 8rpx;\n}\n.location-time {\n  display: block;\n  font-size: 24rpx;\n  color: #999;\n}\n.distance-info {\n  margin-top: 24rpx;\n  padding-top: 24rpx;\n  border-top: 1rpx solid #f0f0f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.distance-label {\n  font-size: 28rpx;\n  color: #666;\n}\n.distance-value {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #2bad81;\n}\n.location-error {\n  margin-top: 16rpx;\n  padding: 16rpx;\n  background: #fff3cd;\n  border-radius: 12rpx;\n}\n.error-text {\n  font-size: 24rpx;\n  color: #856404;\n}\n\n/* åœ°å›¾å®¹å™¨ */\n.map-container {\n  position: relative;\n  margin: 20rpx;\n  height: 600rpx;\n  border-radius: 24rpx;\n  overflow: hidden;\n  box-shadow: 0 8rpx 24rpx rgba(0,0,0,0.06);\n}\n.map {\n  width: 100%;\n  height: 100%;\n}\n.map-placeholder {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.map-bg {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n/* è½¨è¿¹ç‚¹ */\n.trajectory-point {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  z-index: 2;\n}\n.point-marker {\n  width: 60rpx;\n  height: 60rpx;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 30rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.15);\n}\n.point-icon {\n  font-size: 32rpx;\n}\n.point-label {\n  margin-top: 8rpx;\n  font-size: 24rpx;\n  color: #2b2b2b;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 4rpx 12rpx;\n  border-radius: 12rpx;\n  white-space: nowrap;\n}\n\n/* è½¨è¿¹è¿çº¿ */\n.trajectory-line {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n\n/* å¼¹çª—æ ·å¼ */\n.modal-mask {\n  position: fixed;\n  inset: 0;\n  background: rgba(0,0,0,0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 99;\n}\n.modal {\n  width: 86%;\n  max-width: 600rpx;\n  background: #ffffff;\n  border-radius: 24rpx;\n  padding: 40rpx 32rpx;\n  box-shadow: 0 12rpx 40rpx rgba(0,0,0,0.15);\n}\n.modal-header {\n  margin-bottom: 24rpx;\n}\n.modal-title {\n  font-size: 34rpx;\n  font-weight: 700;\n  color: #2b2b2b;\n  display: block;\n}\n.modal-date {\n  margin-top: 8rpx;\n  font-size: 26rpx;\n  color: #7a7a7a;\n  display: block;\n}\n.modal-content {\n  margin-bottom: 24rpx;\n}\n.point-image {\n  width: 100%;\n  height: 200rpx;\n  border-radius: 12rpx;\n  margin-bottom: 16rpx;\n}\n.point-description {\n  font-size: 26rpx;\n  color: #555;\n  line-height: 1.6;\n  margin-top: 16rpx;\n}\n.point-address {\n  display: flex;\n  align-items: center;\n  gap: 8rpx;\n  margin-bottom: 16rpx;\n  padding: 12rpx;\n  background: #f8f8f8;\n  border-radius: 8rpx;\n}\n.address-label {\n  font-size: 24rpx;\n}\n.address-text {\n  font-size: 26rpx;\n  color: #666;\n  flex: 1;\n}\n.point-meta {\n  margin-top: 16rpx;\n  padding-top: 16rpx;\n  border-top: 1rpx solid #f0f0f0;\n  display: flex;\n  flex-direction: column;\n  gap: 8rpx;\n}\n.meta-text {\n  font-size: 24rpx;\n  color: #999;\n}\n\n/* è¡¨å•æ ·å¼ */\n.form {\n  margin-top: 24rpx;\n}\n.form-item {\n  margin-bottom: 24rpx;\n}\n.label {\n  font-size: 26rpx;\n  color: #4a4a4a;\n  display: block;\n  margin-bottom: 8rpx;\n}\n.input {\n  width: 100%;\n  border: 1rpx solid #e6e6e6;\n  border-radius: 12rpx;\n  padding: 14rpx;\n  font-size: 26rpx;\n}\n.textarea {\n  width: 100%;\n  border: 1rpx solid #e6e6e6;\n  border-radius: 12rpx;\n  padding: 14rpx;\n  font-size: 26rpx;\n  min-height: 120rpx;\n}\n.position-info {\n  margin-top: 8rpx;\n  font-size: 24rpx;\n  color: #2bad81;\n}\n.modal-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 16rpx;\n}\n.btn {\n  padding: 16rpx 26rpx;\n  border-radius: 12rpx;\n  font-size: 26rpx;\n  border: none;\n}\n.btn.primary {\n  background: #2bad81;\n  color: #ffffff;\n}\n.btn.secondary {\n  background: #f0f0f0;\n  color: #333;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/é¡¹ç›®/love_time_fu/pages/trajectory/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","updateLocation","getCurrentLocations","getTrajectoryPoints"],"mappings":"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"}