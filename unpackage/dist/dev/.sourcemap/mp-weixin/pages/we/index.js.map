{"version":3,"file":"index.js","sources":["pages/we/index.vue","D:/softcaree/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvd2UvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <view class=\"profile-page\" :style=\"{ paddingTop: containerPaddingTop }\">\r\n    <!-- Ëá™ÂÆö‰πâÂØºËà™Ê†è -->\r\n    <view class=\"custom-navbar\">\r\n      <!-- Ê∏êÂèòËÉåÊôØ -->\r\n      <view class=\"navbar-gradient-bg\"></view>\r\n      <!-- Áä∂ÊÄÅÊ†èÂç†‰Ωç -->\r\n      <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\r\n      <!-- ÂØºËà™Ê†èÂÜÖÂÆπ -->\r\n      <view class=\"navbar-content\" :style=\"{ height: navBarHeight + 'px' }\">\r\n        <view class=\"navbar-title\">\r\n          <text class=\"title-text\">‰∏™‰∫∫‰∏≠ÂøÉ</text>\r\n        </view>\r\n        <view class=\"navbar-right\"></view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ÂÜÖÂÆπÂå∫Âüü -->\r\n    <view class=\"content\">\r\n      <!-- Áî®Êà∑‰ø°ÊÅØÂç°Áâá -->\r\n      <view class=\"user-info-card\">\r\n        <image \r\n          class=\"user-avatar-large\" \r\n          :src=\"userInfo.displayAvatar || userInfo.avatarUrl || '/static/login/love.jpg'\" \r\n          mode=\"aspectFill\"\r\n        />\r\n        <view class=\"user-info-text\">\r\n          <text class=\"user-name\">{{ userInfo.displayName || userInfo.nickName || 'Áî®Êà∑' }}</text>\r\n          <text class=\"user-days\" v-if=\"isBound && bindTime\">Âú®ÊÅãÁà±‰∏≠ {{ daysTogether }} Â§©</text>\r\n          <text class=\"user-days\" v-else-if=\"isBound\">Â∑≤ÊúâÁà±‰∫∫</text>\r\n          <text class=\"user-days\" v-else>Á≠âÂæÖÂè¶‰∏ÄÂçä</text>\r\n        </view>\r\n        <view class=\"edit-icon\" @click=\"goToEdit\">\r\n          <text>‚úèÔ∏è</text>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- ÊÉÖ‰æ£‰ø°ÊÅØÂç°ÁâáÔºàÊòæÁ§∫ÂèåÊñπÂ§¥ÂÉèÂíåÊòµÁß∞Ôºâ -->\r\n      <view class=\"couple-info-card\" v-if=\"isBound && partnerInfo\">\r\n        <text class=\"section-title\">Êàë‰ª¨ÁöÑ‰ø°ÊÅØ</text>\r\n        <view class=\"couple-avatars-section\">\r\n          <view class=\"couple-avatar-item\">\r\n            <image \r\n              class=\"couple-avatar\" \r\n              :src=\"userInfo.displayAvatar || userInfo.avatarUrl || '/static/login/love.jpg'\" \r\n              mode=\"aspectFill\"\r\n            />\r\n            <text class=\"couple-name\">{{ userInfo.displayName || userInfo.nickName || 'Êàë' }}</text>\r\n          </view>\r\n          <view class=\"heart-connector\">\r\n            <text class=\"heart-icon\">‚ù§Ô∏è</text>\r\n          </view>\r\n          <view class=\"couple-avatar-item\">\r\n            <image \r\n              class=\"couple-avatar\" \r\n              :src=\"partnerInfo.displayAvatar || partnerInfo.avatarUrl || '/static/login/love.jpg'\" \r\n              mode=\"aspectFill\"\r\n            />\r\n            <text class=\"couple-name\">{{ partnerInfo.displayName || partnerInfo.nickName || 'Âè¶‰∏ÄÂçä' }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- ÊàëÁöÑÊàêÂ∞± -->\r\n      <view class=\"section achievements-section\">\r\n        <text class=\"section-title\">ÊàëÁöÑÊàêÂ∞±</text>\r\n        <view class=\"achievements-grid\">\r\n          <view class=\"achievement-item\" v-for=\"(achievement, index) in achievements\" :key=\"index\">\r\n            <view class=\"achievement-icon\" :style=\"{ background: achievement.bgColor }\">\r\n              <text class=\"achievement-emoji\">{{ achievement.icon }}</text>\r\n            </view>\r\n            <text class=\"achievement-name\">{{ achievement.name }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- ËÆæÁΩÆ -->\r\n      <view class=\"section settings-section\">\r\n        <text class=\"section-title\">ËÆæÁΩÆ</text>\r\n        <view class=\"settings-list\">\r\n          <view class=\"setting-item\" @click=\"handleSetting('notification')\">\r\n            <view class=\"setting-left\">\r\n              <text class=\"setting-icon\">üîî</text>\r\n              <text class=\"setting-text\">ÈÄöÁü•ËÆæÁΩÆ</text>\r\n            </view>\r\n            <text class=\"setting-arrow\">‚Ä∫</text>\r\n          </view>\r\n          <view class=\"setting-item\" @click=\"handleSetting('privacy')\">\r\n            <view class=\"setting-left\">\r\n              <text class=\"setting-icon\">üõ°Ô∏è</text>\r\n              <text class=\"setting-text\">ÈöêÁßÅËÆæÁΩÆ</text>\r\n            </view>\r\n            <text class=\"setting-arrow\">‚Ä∫</text>\r\n          </view>\r\n          <view class=\"setting-item\" @click=\"handleSetting('sync')\">\r\n            <view class=\"setting-left\">\r\n              <text class=\"setting-icon\">‚òÅÔ∏è</text>\r\n              <text class=\"setting-text\">‰∫ëÂêåÊ≠•</text>\r\n            </view>\r\n            <text class=\"setting-arrow\">‚Ä∫</text>\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- Ëß£Èô§ÂÖ≥Á≥ªÂå∫ÂüüÔºà‰ªÖÂú®Â∑≤ÁªëÂÆöÊó∂ÊòæÁ§∫Ôºâ -->\r\n        <view class=\"unbind-section\" v-if=\"isBound && partnerInfo\">\r\n          <view class=\"unbind-content\" @click=\"handleUnbind\">\r\n            <text class=\"unbind-icon\">üîó</text>\r\n            <text class=\"unbind-text\">Ëß£Èô§ÂÖ≥Á≥ª</text>\r\n      </view>\r\n      </view>\r\n    </view>\r\n\r\n      <!-- Ë¥¶Âè∑‰∏éÂÆâÂÖ® -->\r\n      <view class=\"section account-section\">\r\n        <view class=\"setting-item\" @click=\"toggleProfileSettings\">\r\n          <view class=\"setting-left\">\r\n            <text class=\"setting-icon\">üîí</text>\r\n            <text class=\"setting-text\">Ë¥¶Âè∑‰∏éÂÆâÂÖ®</text>\r\n          </view>\r\n          <text class=\"setting-arrow\" :class=\"{ expanded: showProfileSettings }\">‚Ä∫</text>\r\n        </view>\r\n        \r\n        <!-- ‰∏™‰∫∫ËµÑÊñôËÆæÁΩÆÂÜÖÂÆπ -->\r\n        <view v-if=\"showProfileSettings\" class=\"profile-settings-content\">\r\n          <!-- Â§¥ÂÉèËÆæÁΩÆ -->\r\n          <view class=\"profile-setting-block\">\r\n            <text class=\"profile-setting-title\">Â§¥ÂÉèËÆæÁΩÆ</text>\r\n            <view class=\"avatar-section\">\r\n              <view class=\"current-avatar\">\r\n                <image class=\"avatar\" :src=\"userInfo.displayAvatar || userInfo.avatarUrl || '/static/login/love.jpg'\" mode=\"aspectFill\" />\r\n                <text class=\"avatar-label\">ÂΩìÂâçÂ§¥ÂÉè</text>\r\n              </view>\r\n              \r\n              <view class=\"avatar-options\">\r\n                <button class=\"avatar-btn\" @click=\"selectWechatAvatar\">\r\n                  <text class=\"btn-icon\">üì±</text>\r\n                  <text class=\"btn-text\">‰ΩøÁî®ÂæÆ‰ø°Â§¥ÂÉè</text>\r\n                </button>\r\n                \r\n                <button class=\"avatar-btn\" @click=\"uploadCustomAvatar\">\r\n                  <text class=\"btn-icon\">üñºÔ∏è</text>\r\n                  <text class=\"btn-text\">‰∏ä‰º†Ëá™ÂÆö‰πâÂ§¥ÂÉè</text>\r\n                </button>\r\n              </view>\r\n        </view>\r\n      </view>\r\n\r\n          <!-- ÊòµÁß∞ËÆæÁΩÆ -->\r\n          <view class=\"profile-setting-block\">\r\n            <text class=\"profile-setting-title\">ÊòµÁß∞ËÆæÁΩÆ</text>\r\n            <view class=\"nickname-section\">\r\n              <view class=\"nickname-option\" @click=\"toggleUseWechatNickname\">\r\n                <view class=\"checkbox\" :class=\"{ checked: useWechatNickname }\"></view>\r\n                <text class=\"option-text\">‰ΩøÁî®ÂæÆ‰ø°ÊòµÁß∞</text>\r\n                <text class=\"current-nickname\">{{ userInfo.nickName }}</text>\r\n              </view>\r\n              \r\n              <view v-if=\"!useWechatNickname\" class=\"custom-nickname\">\r\n                <input \r\n                  v-model=\"customNickname\" \r\n                  class=\"nickname-input\" \r\n                  placeholder=\"ËØ∑ËæìÂÖ•Ëá™ÂÆö‰πâÊòµÁß∞\"\r\n                  maxlength=\"20\"\r\n                />\r\n                <text class=\"char-count\">{{ customNickname.length }}/20</text>\r\n              </view>\r\n      </view>\r\n    </view>\r\n\r\n          <!-- ‰øùÂ≠òÊåâÈíÆ -->\r\n          <view class=\"save-section\">\r\n            <button class=\"save-btn\" @click=\"saveProfile\" :disabled=\"isLoading\">\r\n              <text class=\"save-icon\">üíæ</text>\r\n              <text class=\"save-text\">‰øùÂ≠òËÆæÁΩÆ</text>\r\n            </button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- Ëá™ÂÆö‰πâ TabBar -->\r\n    <custom-tabbar :current=\"2\"></custom-tabbar>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport http from '@/utils/http.js';\r\nimport config from '@/utils/config.js';\r\nimport { getCoupleInfo, getPartnerInfo, isBound as checkIsBound, clearCoupleInfo } from '../../utils/couple.js';\r\nimport { getCoupleStatus, unbindCouple } from '../../api/couple.js';\r\nimport { saveCoupleInfo } from '../../utils/couple.js';\r\nimport { updateUserProfile } from '../../api/user.js';\r\nimport { isGuestUser } from '../../utils/auth.js';\r\nimport CustomTabbar from '@/components/custom-tabbar/index.vue';\r\n\r\nexport default {\r\n  components: {\r\n    CustomTabbar\r\n  },\r\n  data() {\r\n    return {\r\n      statusBarHeight: 0,\r\n      navBarHeight: 54,\r\n      screenWidth: 375,\r\n      userInfo: {\r\n        nickName: '',\r\n        avatarUrl: '',\r\n        displayName: '',\r\n        displayAvatar: ''\r\n      },\r\n      // ‰∏™‰∫∫ËµÑÊñôËÆæÁΩÆÁõ∏ÂÖ≥\r\n      showProfileSettings: false,\r\n      useWechatNickname: true,\r\n      customNickname: '',\r\n      isLoading: false,\r\n      // ÊÉÖ‰æ£ÂÖ≥Á≥ªÁõ∏ÂÖ≥\r\n      isBound: false,\r\n      partnerInfo: null,\r\n      bindTime: '',\r\n      // ÊàêÂ∞±Êï∞ÊçÆ\r\n      achievements: [\r\n        { icon: 'üßÅ', name: 'ÁæéÈ£üÂÆ∂', bgColor: 'rgba(255, 217, 61, 0.2)' },\r\n        { icon: '‚úàÔ∏è', name: 'ÊóÖË°åËÄÖ', bgColor: 'rgba(255, 158, 188, 0.2)' },\r\n        { icon: 'üìÖ', name: 'Á∫™ÂøµÊó•', bgColor: 'rgba(217, 172, 255, 0.2)' }\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    // ËÆ°ÁÆóÂú®‰∏ÄËµ∑ÁöÑÂ§©Êï∞\r\n    daysTogether() {\r\n      if (!this.bindTime) return 0;\r\n      try {\r\n        const bindDate = new Date(this.bindTime);\r\n        const now = new Date();\r\n        const diffTime = now - bindDate;\r\n        const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\r\n        return diffDays > 0 ? diffDays : 1; // Ëá≥Â∞ëÊòæÁ§∫1Â§©\r\n      } catch (e) {\r\n        return 0;\r\n      }\r\n    },\r\n    // ËÆ°ÁÆóÂÆπÂô®È°∂ÈÉ®ÂÜÖËæπË∑ù\r\n    containerPaddingTop() {\r\n      const totalHeightPx = this.statusBarHeight + this.navBarHeight;\r\n      const pxToRpx = 750 / this.screenWidth;\r\n      const totalHeightRpx = totalHeightPx * pxToRpx;\r\n      return totalHeightRpx + 20 + 'rpx';\r\n    }\r\n  },\r\n  \r\n  onLoad() {\r\n    this.getSystemInfo();\r\n    // Ê£ÄÊü•ÊòØÂê¶‰∏∫Ê∏∏ÂÆ¢Áî®Êà∑ÔºåÂ¶ÇÊûúÊòØÂàôË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µÈù¢\r\n    if (isGuestUser()) {\r\n      this.goToLogin();\r\n      return;\r\n    }\r\n    this.loadUserInfo();\r\n    this.loadCoupleInfo();\r\n  },\r\n  onShow() {\r\n    // ÊØèÊ¨°È°µÈù¢ÊòæÁ§∫Êó∂Ê£ÄÊü•ÊòØÂê¶‰∏∫Ê∏∏ÂÆ¢Áî®Êà∑\r\n    if (isGuestUser()) {\r\n      this.goToLogin();\r\n      return;\r\n    }\r\n    // ÊØèÊ¨°È°µÈù¢ÊòæÁ§∫Êó∂ÈáçÊñ∞Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØÂíåÊÉÖ‰æ£‰ø°ÊÅØ\r\n    this.loadUserInfo();\r\n    this.loadCoupleInfo();\r\n  },\r\n  \r\n  methods: {\r\n    // Ë∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µÈù¢\r\n    goToLogin() {\r\n      uni.redirectTo({\r\n        url: '/pages/login/index'\r\n      });\r\n    },\r\n    \r\n    // Ëé∑ÂèñÁ≥ªÁªü‰ø°ÊÅØ\r\n    getSystemInfo() {\r\n      // #ifdef MP-WEIXIN\r\n      try {\r\n        // Â∞ùËØï‰ΩøÁî®Êñ∞ API\r\n        const windowInfo = wx.getWindowInfo && wx.getWindowInfo();\r\n        const deviceInfo = wx.getDeviceInfo && wx.getDeviceInfo();\r\n        \r\n        if (windowInfo && deviceInfo) {\r\n          this.statusBarHeight = windowInfo.statusBarHeight || 0;\r\n          this.screenWidth = windowInfo.windowWidth || 375;\r\n        } else {\r\n          // ÈôçÁ∫ßÂà∞Êóß API\r\n          const sysInfo = uni.getSystemInfoSync();\r\n          this.statusBarHeight = sysInfo.statusBarHeight || 0;\r\n          this.screenWidth = sysInfo.windowWidth || 375;\r\n        }\r\n      } catch (e) {\r\n        // Â¶ÇÊûúÊñ∞ API ‰∏çÊîØÊåÅÔºåÈôçÁ∫ßÂà∞Êóß API\r\n        const sysInfo = uni.getSystemInfoSync();\r\n        this.statusBarHeight = sysInfo.statusBarHeight || 0;\r\n        this.screenWidth = sysInfo.windowWidth || 375;\r\n      }\r\n      this.navBarHeight = 54;\r\n      // #endif\r\n      // #ifdef H5\r\n      const sysInfoH5 = uni.getSystemInfoSync();\r\n      this.statusBarHeight = sysInfoH5.statusBarHeight || 0;\r\n      this.screenWidth = sysInfoH5.windowWidth || 375;\r\n      this.navBarHeight = 54;\r\n      // #endif\r\n      // #ifndef MP-WEIXIN || H5\r\n      const sysInfoOther = uni.getSystemInfoSync();\r\n      this.statusBarHeight = sysInfoOther.statusBarHeight || 0;\r\n      this.screenWidth = sysInfoOther.windowWidth || 375;\r\n      this.navBarHeight = 54;\r\n      // #endif\r\n    },\r\n    // Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØ\r\n    loadUserInfo() {\r\n      try {\r\n        const loginInfo = uni.getStorageSync('login_info');\r\n        if (loginInfo && loginInfo.userInfo) {\r\n          this.userInfo = { ...loginInfo.userInfo };\r\n          // ÂàùÂßãÂåñÊòµÁß∞ËÆæÁΩÆÁä∂ÊÄÅ\r\n          this.useWechatNickname = !this.userInfo.displayName || \r\n            this.userInfo.displayName === this.userInfo.nickName;\r\n          this.customNickname = this.useWechatNickname ? '' : this.userInfo.displayName;\r\n        }\r\n      } catch (error) {\r\n        console.error('Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØÂ§±Ë¥•', error);\r\n      }\r\n    },\r\n    \r\n    // ÂàáÊç¢‰∏™‰∫∫ËµÑÊñôËÆæÁΩÆÂ±ïÂºÄ/Êî∂Ëµ∑\r\n    toggleProfileSettings() {\r\n      this.showProfileSettings = !this.showProfileSettings;\r\n    },\r\n    // Âä†ËΩΩÊÉÖ‰æ£‰ø°ÊÅØ\r\n    async loadCoupleInfo() {\r\n      // Ê∏∏ÂÆ¢Áî®Êà∑‰∏çÂä†ËΩΩÊÉÖ‰æ£‰ø°ÊÅØ\r\n      if (isGuestUser()) {\r\n        console.log('Ê∏∏ÂÆ¢Áî®Êà∑ÔºåË∑≥ËøáÂä†ËΩΩÊÉÖ‰æ£‰ø°ÊÅØ');\r\n        this.isBound = false;\r\n        this.partnerInfo = null;\r\n        this.bindTime = '';\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        // ÂÖàÊ£ÄÊü•Êú¨Âú∞\r\n        const localCoupleInfo = getCoupleInfo();\r\n        if (localCoupleInfo && localCoupleInfo.isBound) {\r\n          this.isBound = true;\r\n          this.partnerInfo = localCoupleInfo.partnerInfo || null;\r\n          this.bindTime = localCoupleInfo.bindTime || '';\r\n          \r\n          // ÂêåÊó∂‰ªéÊúçÂä°Âô®ÂêåÊ≠•‰∏ÄÊ¨°Áä∂ÊÄÅ\r\n          try {\r\n            const response = await getCoupleStatus();\r\n            if (response && response.data && response.data.isBound) {\r\n              // Êõ¥Êñ∞Êú¨Âú∞‰ø°ÊÅØ\r\n              saveCoupleInfo({\r\n                isBound: true,\r\n                coupleId: response.data.coupleId,\r\n                partnerId: response.data.partnerInfo?.userId || '',\r\n                partnerInfo: response.data.partnerInfo || {},\r\n                bindTime: response.data.bindTime || '',\r\n                role: response.data.role || ''\r\n              });\r\n              this.partnerInfo = response.data.partnerInfo || {};\r\n              this.bindTime = response.data.bindTime || '';\r\n            } else {\r\n              // ÊúçÂä°Âô®ËøîÂõûÊú™ÁªëÂÆöÔºåÊ∏ÖÈô§Êú¨Âú∞\r\n              this.isBound = false;\r\n              this.partnerInfo = null;\r\n              this.bindTime = '';\r\n            }\r\n          } catch (e) {\r\n            console.error('ÂêåÊ≠•ÁªëÂÆöÁä∂ÊÄÅÂ§±Ë¥•', e);\r\n            // ÂêåÊ≠•Â§±Ë¥•Êó∂‰øùÊåÅÊú¨Âú∞Áä∂ÊÄÅ\r\n          }\r\n          return;\r\n        }\r\n        \r\n        // Êú¨Âú∞Ê≤°ÊúâÔºåÊü•ËØ¢ÊúçÂä°Âô®\r\n        this.isBound = false;\r\n        this.partnerInfo = null;\r\n        try {\r\n          const response = await getCoupleStatus();\r\n          if (response && response.data && response.data.isBound) {\r\n            this.isBound = true;\r\n            this.partnerInfo = response.data.partnerInfo || {};\r\n            this.bindTime = response.data.bindTime || '';\r\n            \r\n            // ‰øùÂ≠òÂà∞Êú¨Âú∞\r\n            saveCoupleInfo({\r\n              isBound: true,\r\n              coupleId: response.data.coupleId,\r\n              partnerId: response.data.partnerInfo?.userId || '',\r\n              partnerInfo: response.data.partnerInfo || {},\r\n              bindTime: response.data.bindTime || '',\r\n              role: response.data.role || ''\r\n            });\r\n          } else {\r\n            // ÊúçÂä°Âô®ËøîÂõûÊú™ÁªëÂÆöÔºåÁ°Æ‰øùÊú¨Âú∞‰πüÊòØÊú™ÁªëÂÆöÁä∂ÊÄÅ\r\n            this.isBound = false;\r\n            this.partnerInfo = null;\r\n            this.bindTime = '';\r\n            clearCoupleInfo();\r\n          }\r\n        } catch (e) {\r\n          console.error('Êü•ËØ¢ÊÉÖ‰æ£Áä∂ÊÄÅÂ§±Ë¥•', e);\r\n          // Êü•ËØ¢Â§±Ë¥•Êó∂‰ΩøÁî®Êú¨Âú∞Áä∂ÊÄÅ\r\n          this.isBound = checkIsBound();\r\n          if (this.isBound) {\r\n            this.partnerInfo = getPartnerInfo();\r\n            const coupleInfo = getCoupleInfo();\r\n            this.bindTime = coupleInfo ? coupleInfo.bindTime : '';\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error('Âä†ËΩΩÊÉÖ‰æ£‰ø°ÊÅØÂ§±Ë¥•', e);\r\n        this.isBound = checkIsBound();\r\n        if (this.isBound) {\r\n          this.partnerInfo = getPartnerInfo();\r\n        }\r\n      }\r\n    },\r\n    \r\n    // ÈÄâÊã©ÂæÆ‰ø°Â§¥ÂÉè\r\n    async selectWechatAvatar() {\r\n      if (this.isLoading) return;\r\n      \r\n      this.isLoading = true;\r\n      try {\r\n        // Ë∞ÉÁî®ÂæÆ‰ø°ÈÄâÊã©ÂõæÁâáAPI\r\n        const [err, res] = await uni.chooseImage({\r\n          count: 1,\r\n          sizeType: ['compressed'],\r\n          sourceType: ['album', 'camera']\r\n        });\r\n        \r\n        if (err) {\r\n          console.error('ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•', err);\r\n          uni.showToast({\r\n            title: 'ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•',\r\n            icon: 'none'\r\n          });\r\n          return;\r\n        }\r\n        \r\n        const tempFilePath = res.tempFilePaths[0];\r\n        if (!tempFilePath) {\r\n          uni.showToast({\r\n            title: 'Êú™ÈÄâÊã©ÂõæÁâá',\r\n            icon: 'none'\r\n          });\r\n          return;\r\n        }\r\n        \r\n        // ‰∏ä‰º†Â§¥ÂÉè\r\n        await this.uploadAvatar(tempFilePath);\r\n      } catch (error) {\r\n        console.error('ÈÄâÊã©ÂæÆ‰ø°Â§¥ÂÉèÂ§±Ë¥•', error);\r\n        uni.showToast({\r\n          title: 'Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n          icon: 'none'\r\n        });\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    \r\n    // ‰∏ä‰º†Ëá™ÂÆö‰πâÂ§¥ÂÉè\r\n    async uploadCustomAvatar() {\r\n      if (this.isLoading) return;\r\n      \r\n      this.isLoading = true;\r\n      try {\r\n        // Ë∞ÉÁî®ÂæÆ‰ø°ÈÄâÊã©ÂõæÁâáAPI\r\n        const [err, res] = await uni.chooseImage({\r\n          count: 1,\r\n          sizeType: ['compressed'],\r\n          sourceType: ['album']\r\n        });\r\n        \r\n        if (err) {\r\n          console.error('ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•', err);\r\n          uni.showToast({\r\n            title: 'ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•',\r\n            icon: 'none'\r\n          });\r\n          return;\r\n        }\r\n        \r\n        const tempFilePath = res.tempFilePaths[0];\r\n        if (!tempFilePath) {\r\n          uni.showToast({\r\n            title: 'Êú™ÈÄâÊã©ÂõæÁâá',\r\n            icon: 'none'\r\n          });\r\n          return;\r\n        }\r\n        \r\n        // ‰∏ä‰º†Â§¥ÂÉè\r\n        await this.uploadAvatar(tempFilePath);\r\n      } catch (error) {\r\n        console.error('‰∏ä‰º†Ëá™ÂÆö‰πâÂ§¥ÂÉèÂ§±Ë¥•', error);\r\n        uni.showToast({\r\n          title: 'Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n          icon: 'none'\r\n        });\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    \r\n    // ‰∏ä‰º†Â§¥ÂÉèÂà∞ÊúçÂä°Âô®\r\n    async uploadAvatar(filePath) {\r\n      try {\r\n        // ‰∏ä‰º†Êñá‰ª∂\r\n        const [uploadErr, uploadRes] = await uni.uploadFile({\r\n          url: config.API.USER.UPLOAD_AVATAR,\r\n          filePath: filePath,\r\n          name: 'file',\r\n          header: {\r\n            'Authorization': http.getAuthToken()\r\n          }\r\n        });\r\n        \r\n        if (uploadErr) {\r\n          console.error('‰∏ä‰º†Â§¥ÂÉèÂ§±Ë¥•', uploadErr);\r\n          uni.showToast({\r\n            title: '‰∏ä‰º†Â§±Ë¥•',\r\n            icon: 'none'\r\n          });\r\n          return;\r\n        }\r\n        \r\n        const data = JSON.parse(uploadRes.data);\r\n        if (data.code === 200 && data.data) {\r\n          // Êõ¥Êñ∞Áî®Êà∑‰ø°ÊÅØ\r\n          this.userInfo.displayAvatar = data.data.url;\r\n          uni.showToast({\r\n            title: '‰∏ä‰º†ÊàêÂäü',\r\n            icon: 'success'\r\n          });\r\n        } else {\r\n          console.error('‰∏ä‰º†Â§¥ÂÉèÂ§±Ë¥•', data);\r\n          uni.showToast({\r\n            title: data.message || '‰∏ä‰º†Â§±Ë¥•',\r\n            icon: 'none'\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('‰∏ä‰º†Â§¥ÂÉèÂºÇÂ∏∏', error);\r\n        uni.showToast({\r\n          title: '‰∏ä‰º†ÂºÇÂ∏∏',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    // ÂàáÊç¢‰ΩøÁî®ÂæÆ‰ø°ÊòµÁß∞\r\n    toggleUseWechatNickname() {\r\n      this.useWechatNickname = !this.useWechatNickname;\r\n      if (this.useWechatNickname) {\r\n        this.customNickname = '';\r\n      }\r\n    },\r\n    \r\n    // ‰øùÂ≠ò‰∏™‰∫∫ËµÑÊñô\r\n    async saveProfile() {\r\n      if (this.isLoading) return;\r\n      \r\n      // È™åËØÅËæìÂÖ•\r\n      if (!this.useWechatNickname && !this.customNickname.trim()) {\r\n        uni.showToast({\r\n          title: 'ËØ∑ËæìÂÖ•ÊòµÁß∞',\r\n          icon: 'none'\r\n        });\r\n        return;\r\n      }\r\n      \r\n      this.isLoading = true;\r\n      try {\r\n        // ÂáÜÂ§áË¶ÅÊõ¥Êñ∞ÁöÑÊï∞ÊçÆ\r\n        const updateData = {};\r\n        if (this.useWechatNickname) {\r\n          // ‰ΩøÁî®ÂæÆ‰ø°ÊòµÁß∞ÔºåÊ∏ÖÁ©∫Ëá™ÂÆö‰πâÊòµÁß∞\r\n          updateData.displayName = this.userInfo.nickName;\r\n        } else {\r\n          // ‰ΩøÁî®Ëá™ÂÆö‰πâÊòµÁß∞\r\n          updateData.displayName = this.customNickname.trim();\r\n        }\r\n        \r\n        // Â¶ÇÊûúÂ§¥ÂÉèÂ∑≤Êõ¥ÊîπÔºå‰πüÊõ¥Êñ∞Â§¥ÂÉè\r\n        if (this.userInfo.displayAvatar && this.userInfo.displayAvatar !== this.userInfo.avatarUrl) {\r\n          updateData.displayAvatar = this.userInfo.displayAvatar;\r\n        }\r\n        \r\n        // Ë∞ÉÁî®APIÊõ¥Êñ∞Áî®Êà∑ËµÑÊñô\r\n        const response = await updateUserProfile(updateData);\r\n        \r\n        if (response && response.code === 200) {\r\n          // Êõ¥Êñ∞Êú¨Âú∞Â≠òÂÇ®ÁöÑÁî®Êà∑‰ø°ÊÅØ\r\n          const loginInfo = uni.getStorageSync('login_info');\r\n          if (loginInfo && loginInfo.userInfo) {\r\n            loginInfo.userInfo.displayName = updateData.displayName;\r\n            if (updateData.displayAvatar) {\r\n              loginInfo.userInfo.displayAvatar = updateData.displayAvatar;\r\n            }\r\n            uni.setStorageSync('login_info', loginInfo);\r\n          }\r\n          \r\n          // Êõ¥Êñ∞È°µÈù¢Êï∞ÊçÆ\r\n          this.userInfo.displayName = updateData.displayName;\r\n          if (updateData.displayAvatar) {\r\n            this.userInfo.displayAvatar = updateData.displayAvatar;\r\n          }\r\n          \r\n          uni.showToast({\r\n            title: '‰øùÂ≠òÊàêÂäü',\r\n            icon: 'success'\r\n          });\r\n        } else {\r\n          console.error('‰øùÂ≠ò‰∏™‰∫∫ËµÑÊñôÂ§±Ë¥•', response);\r\n          uni.showToast({\r\n            title: response?.message || '‰øùÂ≠òÂ§±Ë¥•',\r\n            icon: 'none'\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('‰øùÂ≠ò‰∏™‰∫∫ËµÑÊñôÂºÇÂ∏∏', error);\r\n        uni.showToast({\r\n          title: '‰øùÂ≠òÂºÇÂ∏∏ÔºåËØ∑ÈáçËØï',\r\n          icon: 'none'\r\n        });\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    \r\n    // Â§ÑÁêÜËÆæÁΩÆÈ°πÁÇπÂáª\r\n    handleSetting(type) {\r\n      switch (type) {\r\n        case 'notification':\r\n          console.log('Ë∑≥ËΩ¨Âà∞ÈÄöÁü•ËÆæÁΩÆ');\r\n          break;\r\n        case 'privacy':\r\n          console.log('Ë∑≥ËΩ¨Âà∞ÈöêÁßÅËÆæÁΩÆ');\r\n          break;\r\n        case 'sync':\r\n          console.log('Ë∑≥ËΩ¨Âà∞‰∫ëÂêåÊ≠•');\r\n          break;\r\n        default:\r\n          console.warn('Êú™Áü•ËÆæÁΩÆÈ°π:', type);\r\n      }\r\n    },\r\n    \r\n    // Ëß£Èô§ÂÖ≥Á≥ª\r\n    async handleUnbind() {\r\n      uni.showModal({\r\n        title: 'Á°ÆËÆ§Ëß£Èô§ÂÖ≥Á≥ª',\r\n        content: 'Ëß£Èô§ÂÖ≥Á≥ªÂêéÔºå‰Ω†‰ª¨Â∞Ü‰∏çÂÜçÊòØÊÉÖ‰æ£ÂÖ≥Á≥ªÔºåÁõ∏ÂÖ≥Êï∞ÊçÆ‰πü‰ºöË¢´Âà†Èô§„ÄÇÊòØÂê¶Á°ÆËÆ§Ëß£Èô§Ôºü',\r\n        confirmColor: '#FF6B6B',\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            try {\r\n              const response = await unbindCouple();\r\n              if (response && response.code === 200) {\r\n                // Ê∏ÖÈô§Êú¨Âú∞ÊÉÖ‰æ£‰ø°ÊÅØ\r\n                clearCoupleInfo();\r\n                \r\n                // Êõ¥Êñ∞È°µÈù¢Áä∂ÊÄÅ\r\n                this.isBound = false;\r\n                this.partnerInfo = null;\r\n                this.bindTime = '';\r\n                \r\n                uni.showToast({\r\n                  title: 'Ëß£Èô§ÊàêÂäü',\r\n                  icon: 'success'\r\n                });\r\n                \r\n                // Âª∂ËøüË∑≥ËΩ¨Âà∞È¶ñÈ°µ\r\n                setTimeout(() => {\r\n                  uni.switchTab({\r\n                    url: '/pages/index/index'\r\n                  });\r\n                }, 1500);\r\n              } else {\r\n                console.error('Ëß£Èô§ÂÖ≥Á≥ªÂ§±Ë¥•', response);\r\n                uni.showToast({\r\n                  title: response?.message || 'Ëß£Èô§Â§±Ë¥•',\r\n                  icon: 'none'\r\n                });\r\n              }\r\n            } catch (error) {\r\n              console.error('Ëß£Èô§ÂÖ≥Á≥ªÂºÇÂ∏∏', error);\r\n              uni.showToast({\r\n                title: 'Êìç‰ΩúÂºÇÂ∏∏ÔºåËØ∑ÈáçËØï',\r\n                icon: 'none'\r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.profile-page {\r\n  min-height: 100vh;\r\n  background-color: #FFFAF4;\r\n  padding-bottom: calc(120rpx + env(safe-area-inset-bottom));\r\n  position: relative;\r\n  overflow-x: hidden;\r\n}\r\n\r\n/* Ëá™ÂÆö‰πâÂØºËà™Ê†è */\r\n.custom-navbar {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 9999;\r\n  background-color: #FFFAF4;\r\n  overflow: hidden;\r\n}\r\n\r\n.navbar-gradient-bg {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 200%;\r\n  background: rgba(255, 255, 255, 0.7);\r\n  backdrop-filter: blur(15px);\r\n  -webkit-backdrop-filter: blur(15px);\r\n}\r\n\r\n.status-bar {\r\n  width: 100%;\r\n  background: transparent;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.navbar-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 30rpx;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.navbar-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n}\r\n\r\n.title-text {\r\n  font-size: 36rpx;\r\n  font-weight: 500;\r\n  color: #4A4A4A;\r\n}\r\n\r\n.navbar-right {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.navbar-right:active {\r\n  opacity: 0.7;\r\n}\r\n\r\n/* ÂÜÖÂÆπÂå∫Âüü */\r\n.content {\r\n  padding: 30rpx;\r\n  padding-top: calc(10rpx + var(--status-bar-height, 0px) + 54px);\r\n}\r\n\r\n/* Áî®Êà∑‰ø°ÊÅØÂç°Áâá */\r\n.user-info-card {\r\n  display: flex;\r\n  align-items: center;\r\n  background: #ffffff;\r\n  border-radius: 20rpx;\r\n  padding: 20rpx 30rpx;\r\n  margin-bottom: 20rpx;\r\n  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.08);\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.user-avatar-large {\r\n  width: 120rpx;\r\n  height: 120rpx;\r\n  border-radius: 60rpx;\r\n  border: 6rpx solid #ffffff;\r\n  box-shadow: 0 8rpx 20rpx rgba(0, 0, 0, 0.1);\r\n  margin-right: 30rpx;\r\n}\r\n\r\n.user-info-text {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12rpx;\r\n}\r\n\r\n.user-name {\r\n  font-size: 36rpx;\r\n  font-weight: 600;\r\n  color: #000000;\r\n}\r\n\r\n.user-days {\r\n  font-size: 26rpx;\r\n  color: #666666;\r\n}\r\n\r\n.edit-icon {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #f8f8f8;\r\n  border-radius: 30rpx;\r\n  font-size: 28rpx;\r\n  cursor: pointer;\r\n}\r\n\r\n.edit-icon:active {\r\n  background: #f0f0f0;\r\n}\r\n\r\n/* ÊÉÖ‰æ£‰ø°ÊÅØÂç°Áâá */\r\n.couple-info-card {\r\n  background: #ffffff;\r\n  border-radius: 20rpx;\r\n  padding: 30rpx;\r\n  margin-bottom: 20rpx;\r\n  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.couple-avatars-section {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n  margin-top: 20rpx;\r\n}\r\n\r\n.couple-avatar-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n}\r\n\r\n.couple-avatar {\r\n  width: 100rpx;\r\n  height: 100rpx;\r\n  border-radius: 50rpx;\r\n  border: 4rpx solid #ffffff;\r\n  box-shadow: 0 6rpx 16rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.couple-name {\r\n  font-size: 24rpx;\r\n  color: #000000;\r\n  max-width: 120rpx;\r\n  text-align: center;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.heart-connector {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.heart-icon {\r\n  font-size: 48rpx;\r\n  color: #FF6B6B;\r\n}\r\n\r\n/* ÊàêÂ∞±Âå∫Âüü */\r\n.achievements-section {\r\n  background: #ffffff;\r\n  border-radius: 20rpx;\r\n  padding: 30rpx;\r\n  margin-bottom: 20rpx;\r\n  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.achievements-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 20rpx;\r\n}\r\n\r\n.achievement-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n}\r\n\r\n.achievement-icon {\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n  border-radius: 40rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 36rpx;\r\n}\r\n\r\n.achievement-name {\r\n  font-size: 24rpx;\r\n  color: #000000;\r\n  text-align: center;\r\n}\r\n\r\n/* ËÆæÁΩÆÂå∫Âüü */\r\n.settings-section {\r\n  background: #ffffff;\r\n  border-radius: 20rpx;\r\n  padding: 30rpx;\r\n  margin-bottom: 20rpx;\r\n  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.settings-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20rpx;\r\n}\r\n\r\n.setting-item {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 20rpx;\r\n  background: #f8f8f8;\r\n  border-radius: 16rpx;\r\n  cursor: pointer;\r\n}\r\n\r\n.setting-item:active {\r\n  background: #f0f0f0;\r\n}\r\n\r\n.setting-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20rpx;\r\n}\r\n\r\n.setting-icon {\r\n  font-size: 32rpx;\r\n}\r\n\r\n.setting-text {\r\n  font-size: 28rpx;\r\n  color: #000000;\r\n  font-weight: 500;\r\n}\r\n\r\n.setting-arrow {\r\n  font-size: 28rpx;\r\n  color: #999999;\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.setting-arrow.expanded {\r\n  transform: rotate(90deg);\r\n}\r\n\r\n/* Ëß£Èô§ÂÖ≥Á≥ªÂå∫Âüü */\r\n.unbind-section {\r\n  margin-top: 30rpx;\r\n  padding-top: 30rpx;\r\n  border-top: 2rpx solid #f0f0f0;\r\n}\r\n\r\n.unbind-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 16rpx;\r\n  padding: 20rpx;\r\n  background: #FFF0F0;\r\n  border-radius: 16rpx;\r\n  cursor: pointer;\r\n}\r\n\r\n.unbind-content:active {\r\n  background: #ffe0e0;\r\n}\r\n\r\n.unbind-icon {\r\n  font-size: 32rpx;\r\n  color: #FF6B6B;\r\n}\r\n\r\n.unbind-text {\r\n  font-size: 28rpx;\r\n  color: #FF6B6B;\r\n  font-weight: 500;\r\n}\r\n\r\n/* Ë¥¶Âè∑‰∏éÂÆâÂÖ®Âå∫Âüü */\r\n.account-section {\r\n  background: #ffffff;\r\n  border-radius: 20rpx;\r\n  padding: 30rpx;\r\n  margin-bottom: 20rpx;\r\n  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.profile-settings-content {\r\n  margin-top: 20rpx;\r\n  padding-top: 20rpx;\r\n  border-top: 2rpx solid #f0f0f0;\r\n}\r\n\r\n.profile-setting-block {\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.profile-setting-block:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.profile-setting-title {\r\n  display: block;\r\n  font-size: 26rpx;\r\n  font-weight: 600;\r\n  color: #000000;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n/* Â§¥ÂÉèËÆæÁΩÆ */\r\n.avatar-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 30rpx;\r\n}\r\n\r\n.current-avatar {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n}\r\n\r\n.avatar {\r\n  width: 120rpx;\r\n  height: 120rpx;\r\n  border-radius: 60rpx;\r\n  border: 4rpx solid #e5e5e5;\r\n}\r\n\r\n.avatar-label {\r\n  font-size: 24rpx;\r\n  color: #000000;\r\n}\r\n\r\n.avatar-options {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16rpx;\r\n}\r\n\r\n.avatar-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 12rpx;\r\n  padding: 20rpx;\r\n  background: #f8f8f8;\r\n  border-radius: 12rpx;\r\n  border: none;\r\n  font-size: 28rpx;\r\n  color: #333;\r\n}\r\n\r\n.avatar-btn:active {\r\n  background: #f0f0f0;\r\n}\r\n\r\n.btn-icon {\r\n  font-size: 32rpx;\r\n}\r\n\r\n.btn-text {\r\n  font-size: 28rpx;\r\n}\r\n\r\n/* ÊòµÁß∞ËÆæÁΩÆ */\r\n.nickname-option {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20rpx;\r\n  background: #f8f8f8;\r\n  border-radius: 12rpx;\r\n  margin-bottom: 16rpx;\r\n  cursor: pointer;\r\n}\r\n\r\n.checkbox {\r\n  width: 28rpx;\r\n  height: 28rpx;\r\n  border: 2rpx solid #d0d0d0;\r\n  border-radius: 6rpx;\r\n  margin-right: 12rpx;\r\n  position: relative;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.checkbox.checked {\r\n  background: #2bad81;\r\n  border-color: #2bad81;\r\n}\r\n\r\n.checkbox.checked::after {\r\n  content: '';\r\n  position: absolute;\r\n  width: 12rpx;\r\n  height: 20rpx;\r\n  border: solid #fff;\r\n  border-width: 0 2rpx 2rpx 0;\r\n  transform: rotate(45deg);\r\n  top: 50%;\r\n  left: 50%;\r\n  margin-top: -10rpx;\r\n  margin-left: -8rpx;\r\n}\r\n\r\n.option-text {\r\n  flex: 1;\r\n  font-size: 28rpx;\r\n  color: #000000;\r\n  font-weight: 500;\r\n}\r\n\r\n.current-nickname {\r\n  font-size: 24rpx;\r\n  color: #000000;\r\n}\r\n\r\n.custom-nickname {\r\n  background: #f8f8f8;\r\n  border-radius: 12rpx;\r\n  padding: 20rpx;\r\n}\r\n\r\n.nickname-input {\r\n  width: 100%;\r\n  padding: 16rpx;\r\n  border: 1rpx solid #e5e5e5;\r\n  border-radius: 8rpx;\r\n  font-size: 28rpx;\r\n  background: #ffffff;\r\n  margin-bottom: 8rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.char-count {\r\n  display: block;\r\n  font-size: 22rpx;\r\n  color: #000000;\r\n  text-align: right;\r\n}\r\n\r\n/* ‰øùÂ≠òÊåâÈíÆ */\r\n.save-section {\r\n  margin-top: 30rpx;\r\n}\r\n\r\n.save-btn {\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 12rpx;\r\n  padding: 28rpx;\r\n  background: #2bad81;\r\n  border-radius: 48rpx;\r\n  border: none;\r\n  color: #ffffff;\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n  box-shadow: 0 8rpx 20rpx rgba(43, 173, 129, 0.25);\r\n}\r\n\r\n.save-btn:active {\r\n  opacity: 0.85;\r\n}\r\n\r\n.save-btn[disabled] {\r\n  opacity: 0.6;\r\n}\r\n\r\n.save-icon {\r\n  font-size: 32rpx;\r\n}\r\n\r\n.save-text {\r\n  font-size: 30rpx;\r\n}\r\n\r\n/* Âå∫ÂùóÊ†∑Âºè */\r\n.section {\r\n  background: #ffffff;\r\n  border-radius: 16rpx;\r\n  padding: 30rpx;\r\n  margin-bottom: 20rpx;\r\n  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.section-title {\r\n  display: block;\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  color: #000000;\r\n  margin-bottom: 20rpx;\r\n}\r\n</style>","import MiniProgramPage from 'C:/Users/Administrator/Desktop/love_time/pages/we/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["isGuestUser","uni","wx","getCoupleInfo","getCoupleStatus","saveCoupleInfo","clearCoupleInfo","checkIsBound","getPartnerInfo","config","http","updateUserProfile","unbindCouple"],"mappings":";;;;;;;;AAiMA,MAAK,eAAgB,MAAW;AAEhC,MAAK,YAAU;AAAA,EACb,YAAY;AAAA,IACV;AAAA,EACD;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,iBAAiB;AAAA,MACjB,cAAc;AAAA,MACd,aAAa;AAAA,MACb,UAAU;AAAA,QACR,UAAU;AAAA,QACV,WAAW;AAAA,QACX,aAAa;AAAA,QACb,eAAe;AAAA,MAChB;AAAA;AAAA,MAED,qBAAqB;AAAA,MACrB,mBAAmB;AAAA,MACnB,gBAAgB;AAAA,MAChB,WAAW;AAAA;AAAA,MAEX,SAAS;AAAA,MACT,aAAa;AAAA,MACb,UAAU;AAAA;AAAA,MAEV,cAAc;AAAA,QACZ,EAAE,MAAM,MAAM,MAAM,OAAO,SAAS,0BAA2B;AAAA,QAC/D,EAAE,MAAM,MAAM,MAAM,OAAO,SAAS,2BAA4B;AAAA,QAChE,EAAE,MAAM,MAAM,MAAM,OAAO,SAAS,2BAA2B;AAAA,MACjE;AAAA;EAEH;AAAA,EACD,UAAU;AAAA;AAAA,IAER,eAAe;AACb,UAAI,CAAC,KAAK;AAAU,eAAO;AAC3B,UAAI;AACF,cAAM,WAAW,IAAI,KAAK,KAAK,QAAQ;AACvC,cAAM,MAAM,oBAAI;AAChB,cAAM,WAAW,MAAM;AACvB,cAAM,WAAW,KAAK,MAAM,YAAY,MAAO,KAAK,KAAK,GAAG;AAC5D,eAAO,WAAW,IAAI,WAAW;AAAA,MACnC,SAAS,GAAG;AACV,eAAO;AAAA,MACT;AAAA,IACD;AAAA;AAAA,IAED,sBAAsB;AACpB,YAAM,gBAAgB,KAAK,kBAAkB,KAAK;AAClD,YAAM,UAAU,MAAM,KAAK;AAC3B,YAAM,iBAAiB,gBAAgB;AACvC,aAAO,iBAAiB,KAAK;AAAA,IAC/B;AAAA,EACD;AAAA,EAED,SAAS;AACP,SAAK,cAAa;AAElB,QAAIA,WAAW,YAAA,GAAI;AACjB,WAAK,UAAS;AACd;AAAA,IACF;AACA,SAAK,aAAY;AACjB,SAAK,eAAc;AAAA,EACpB;AAAA,EACD,SAAS;AAEP,QAAIA,WAAW,YAAA,GAAI;AACjB,WAAK,UAAS;AACd;AAAA,IACF;AAEA,SAAK,aAAY;AACjB,SAAK,eAAc;AAAA,EACpB;AAAA,EAED,SAAS;AAAA;AAAA,IAEP,YAAY;AACVC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACP,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,gBAAgB;AAEd,UAAI;AAEF,cAAM,aAAaC,cAAE,KAAC,iBAAiBA,cAAE,KAAC,cAAa;AACvD,cAAM,aAAaA,cAAE,KAAC,iBAAiBA,cAAE,KAAC,cAAa;AAEvD,YAAI,cAAc,YAAY;AAC5B,eAAK,kBAAkB,WAAW,mBAAmB;AACrD,eAAK,cAAc,WAAW,eAAe;AAAA,eACxC;AAEL,gBAAM,UAAUD,oBAAI;AACpB,eAAK,kBAAkB,QAAQ,mBAAmB;AAClD,eAAK,cAAc,QAAQ,eAAe;AAAA,QAC5C;AAAA,MACF,SAAS,GAAG;AAEV,cAAM,UAAUA,oBAAI;AACpB,aAAK,kBAAkB,QAAQ,mBAAmB;AAClD,aAAK,cAAc,QAAQ,eAAe;AAAA,MAC5C;AACA,WAAK,eAAe;AAAA,IAcrB;AAAA;AAAA,IAED,eAAe;AACb,UAAI;AACF,cAAM,YAAYA,cAAAA,MAAI,eAAe,YAAY;AACjD,YAAI,aAAa,UAAU,UAAU;AACnC,eAAK,WAAW,EAAE,GAAG,UAAU;AAE/B,eAAK,oBAAoB,CAAC,KAAK,SAAS,eACtC,KAAK,SAAS,gBAAgB,KAAK,SAAS;AAC9C,eAAK,iBAAiB,KAAK,oBAAoB,KAAK,KAAK,SAAS;AAAA,QACpE;AAAA,MACA,SAAO,OAAO;AACdA,sBAAc,MAAA,MAAA,SAAA,6BAAA,YAAY,KAAK;AAAA,MACjC;AAAA,IACD;AAAA;AAAA,IAGD,wBAAwB;AACtB,WAAK,sBAAsB,CAAC,KAAK;AAAA,IAClC;AAAA;AAAA,IAED,MAAM,iBAAiB;;AAErB,UAAID,WAAW,YAAA,GAAI;AACjBC,sBAAAA,MAAA,MAAA,OAAA,6BAAY,eAAe;AAC3B,aAAK,UAAU;AACf,aAAK,cAAc;AACnB,aAAK,WAAW;AAChB;AAAA,MACF;AAEA,UAAI;AAEF,cAAM,kBAAkBE,aAAAA;AACxB,YAAI,mBAAmB,gBAAgB,SAAS;AAC9C,eAAK,UAAU;AACf,eAAK,cAAc,gBAAgB,eAAe;AAClD,eAAK,WAAW,gBAAgB,YAAY;AAG5C,cAAI;AACF,kBAAM,WAAW,MAAMC,WAAAA;AACvB,gBAAI,YAAY,SAAS,QAAQ,SAAS,KAAK,SAAS;AAEtDC,0CAAe;AAAA,gBACb,SAAS;AAAA,gBACT,UAAU,SAAS,KAAK;AAAA,gBACxB,aAAW,cAAS,KAAK,gBAAd,mBAA2B,WAAU;AAAA,gBAChD,aAAa,SAAS,KAAK,eAAe,CAAE;AAAA,gBAC5C,UAAU,SAAS,KAAK,YAAY;AAAA,gBACpC,MAAM,SAAS,KAAK,QAAQ;AAAA,cAC9B,CAAC;AACD,mBAAK,cAAc,SAAS,KAAK,eAAe,CAAA;AAChD,mBAAK,WAAW,SAAS,KAAK,YAAY;AAAA,mBACrC;AAEL,mBAAK,UAAU;AACf,mBAAK,cAAc;AACnB,mBAAK,WAAW;AAAA,YAClB;AAAA,UACF,SAAS,GAAG;AACVJ,0BAAc,MAAA,MAAA,SAAA,6BAAA,YAAY,CAAC;AAAA,UAE7B;AACA;AAAA,QACF;AAGA,aAAK,UAAU;AACf,aAAK,cAAc;AACnB,YAAI;AACF,gBAAM,WAAW,MAAMG,WAAAA;AACvB,cAAI,YAAY,SAAS,QAAQ,SAAS,KAAK,SAAS;AACtD,iBAAK,UAAU;AACf,iBAAK,cAAc,SAAS,KAAK,eAAe,CAAA;AAChD,iBAAK,WAAW,SAAS,KAAK,YAAY;AAG1CC,wCAAe;AAAA,cACb,SAAS;AAAA,cACT,UAAU,SAAS,KAAK;AAAA,cACxB,aAAW,cAAS,KAAK,gBAAd,mBAA2B,WAAU;AAAA,cAChD,aAAa,SAAS,KAAK,eAAe,CAAE;AAAA,cAC5C,UAAU,SAAS,KAAK,YAAY;AAAA,cACpC,MAAM,SAAS,KAAK,QAAQ;AAAA,YAC9B,CAAC;AAAA,iBACI;AAEL,iBAAK,UAAU;AACf,iBAAK,cAAc;AACnB,iBAAK,WAAW;AAChBC,yBAAAA;UACF;AAAA,QACF,SAAS,GAAG;AACVL,wBAAA,MAAA,MAAA,SAAA,6BAAc,YAAY,CAAC;AAE3B,eAAK,UAAUM,aAAAA;AACf,cAAI,KAAK,SAAS;AAChB,iBAAK,cAAcC,aAAAA;AACnB,kBAAM,aAAaL,aAAAA;AACnB,iBAAK,WAAW,aAAa,WAAW,WAAW;AAAA,UACrD;AAAA,QACF;AAAA,MACF,SAAS,GAAG;AACVF,sBAAc,MAAA,MAAA,SAAA,6BAAA,YAAY,CAAC;AAC3B,aAAK,UAAUM,aAAAA;AACf,YAAI,KAAK,SAAS;AAChB,eAAK,cAAcC,aAAAA;QACrB;AAAA,MACF;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,qBAAqB;AACzB,UAAI,KAAK;AAAW;AAEpB,WAAK,YAAY;AACjB,UAAI;AAEF,cAAM,CAAC,KAAK,GAAG,IAAI,MAAMP,cAAAA,MAAI,YAAY;AAAA,UACvC,OAAO;AAAA,UACP,UAAU,CAAC,YAAY;AAAA,UACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,QAChC,CAAC;AAED,YAAI,KAAK;AACPA,wBAAA,MAAA,MAAA,SAAA,6BAAc,UAAU,GAAG;AAC3BA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACR,CAAC;AACD;AAAA,QACF;AAEA,cAAM,eAAe,IAAI,cAAc,CAAC;AACxC,YAAI,CAAC,cAAc;AACjBA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACR,CAAC;AACD;AAAA,QACF;AAGA,cAAM,KAAK,aAAa,YAAY;AAAA,MACpC,SAAO,OAAO;AACdA,sBAAc,MAAA,MAAA,SAAA,6BAAA,YAAY,KAAK;AAC/BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAAA,MACH,UAAU;AACR,aAAK,YAAY;AAAA,MACnB;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,qBAAqB;AACzB,UAAI,KAAK;AAAW;AAEpB,WAAK,YAAY;AACjB,UAAI;AAEF,cAAM,CAAC,KAAK,GAAG,IAAI,MAAMA,cAAAA,MAAI,YAAY;AAAA,UACvC,OAAO;AAAA,UACP,UAAU,CAAC,YAAY;AAAA,UACvB,YAAY,CAAC,OAAO;AAAA,QACtB,CAAC;AAED,YAAI,KAAK;AACPA,wBAAA,MAAA,MAAA,SAAA,6BAAc,UAAU,GAAG;AAC3BA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACR,CAAC;AACD;AAAA,QACF;AAEA,cAAM,eAAe,IAAI,cAAc,CAAC;AACxC,YAAI,CAAC,cAAc;AACjBA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACR,CAAC;AACD;AAAA,QACF;AAGA,cAAM,KAAK,aAAa,YAAY;AAAA,MACpC,SAAO,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,6BAAc,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAAA,MACH,UAAU;AACR,aAAK,YAAY;AAAA,MACnB;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,aAAa,UAAU;AAC3B,UAAI;AAEF,cAAM,CAAC,WAAW,SAAS,IAAI,MAAMA,cAAAA,MAAI,WAAW;AAAA,UAClD,KAAKQ,aAAM,OAAC,IAAI,KAAK;AAAA,UACrB;AAAA,UACA,MAAM;AAAA,UACN,QAAQ;AAAA,YACN,iBAAiBC,WAAI,KAAC,aAAa;AAAA,UACrC;AAAA,QACF,CAAC;AAED,YAAI,WAAW;AACbT,wBAAA,MAAA,MAAA,SAAA,6BAAc,UAAU,SAAS;AACjCA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACR,CAAC;AACD;AAAA,QACF;AAEA,cAAM,OAAO,KAAK,MAAM,UAAU,IAAI;AACtC,YAAI,KAAK,SAAS,OAAO,KAAK,MAAM;AAElC,eAAK,SAAS,gBAAgB,KAAK,KAAK;AACxCA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACR,CAAC;AAAA,eACI;AACLA,wBAAc,MAAA,MAAA,SAAA,6BAAA,UAAU,IAAI;AAC5BA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,KAAK,WAAW;AAAA,YACvB,MAAM;AAAA,UACR,CAAC;AAAA,QACH;AAAA,MACA,SAAO,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,6BAAc,UAAU,KAAK;AAC7BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAAA,MACH;AAAA,IACD;AAAA;AAAA,IAGD,0BAA0B;AACxB,WAAK,oBAAoB,CAAC,KAAK;AAC/B,UAAI,KAAK,mBAAmB;AAC1B,aAAK,iBAAiB;AAAA,MACxB;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,cAAc;AAClB,UAAI,KAAK;AAAW;AAGpB,UAAI,CAAC,KAAK,qBAAqB,CAAC,KAAK,eAAe,QAAQ;AAC1DA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD;AAAA,MACF;AAEA,WAAK,YAAY;AACjB,UAAI;AAEF,cAAM,aAAa,CAAA;AACnB,YAAI,KAAK,mBAAmB;AAE1B,qBAAW,cAAc,KAAK,SAAS;AAAA,eAClC;AAEL,qBAAW,cAAc,KAAK,eAAe,KAAI;AAAA,QACnD;AAGA,YAAI,KAAK,SAAS,iBAAiB,KAAK,SAAS,kBAAkB,KAAK,SAAS,WAAW;AAC1F,qBAAW,gBAAgB,KAAK,SAAS;AAAA,QAC3C;AAGA,cAAM,WAAW,MAAMU,2BAAkB,UAAU;AAEnD,YAAI,YAAY,SAAS,SAAS,KAAK;AAErC,gBAAM,YAAYV,cAAAA,MAAI,eAAe,YAAY;AACjD,cAAI,aAAa,UAAU,UAAU;AACnC,sBAAU,SAAS,cAAc,WAAW;AAC5C,gBAAI,WAAW,eAAe;AAC5B,wBAAU,SAAS,gBAAgB,WAAW;AAAA,YAChD;AACAA,0BAAAA,MAAI,eAAe,cAAc,SAAS;AAAA,UAC5C;AAGA,eAAK,SAAS,cAAc,WAAW;AACvC,cAAI,WAAW,eAAe;AAC5B,iBAAK,SAAS,gBAAgB,WAAW;AAAA,UAC3C;AAEAA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACR,CAAC;AAAA,eACI;AACLA,wBAAc,MAAA,MAAA,SAAA,6BAAA,YAAY,QAAQ;AAClCA,wBAAAA,MAAI,UAAU;AAAA,YACZ,QAAO,qCAAU,YAAW;AAAA,YAC5B,MAAM;AAAA,UACR,CAAC;AAAA,QACH;AAAA,MACA,SAAO,OAAO;AACdA,sBAAc,MAAA,MAAA,SAAA,6BAAA,YAAY,KAAK;AAC/BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAAA,MACH,UAAU;AACR,aAAK,YAAY;AAAA,MACnB;AAAA,IACD;AAAA;AAAA,IAGD,cAAc,MAAM;AAClB,cAAQ,MAAI;AAAA,QACV,KAAK;AACHA,wBAAAA,MAAA,MAAA,OAAA,6BAAY,SAAS;AACrB;AAAA,QACF,KAAK;AACHA,wBAAAA,MAAA,MAAA,OAAA,6BAAY,SAAS;AACrB;AAAA,QACF,KAAK;AACHA,wBAAAA,MAAA,MAAA,OAAA,6BAAY,QAAQ;AACpB;AAAA,QACF;AACEA,wBAAa,MAAA,MAAA,QAAA,6BAAA,UAAU,IAAI;AAAA,MAC/B;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,eAAe;AACnBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,cAAc;AAAA,QACd,SAAS,OAAO,QAAQ;AACtB,cAAI,IAAI,SAAS;AACf,gBAAI;AACF,oBAAM,WAAW,MAAMW,WAAAA;AACvB,kBAAI,YAAY,SAAS,SAAS,KAAK;AAErCN,6BAAAA;AAGA,qBAAK,UAAU;AACf,qBAAK,cAAc;AACnB,qBAAK,WAAW;AAEhBL,8BAAAA,MAAI,UAAU;AAAA,kBACZ,OAAO;AAAA,kBACP,MAAM;AAAA,gBACR,CAAC;AAGD,2BAAW,MAAM;AACfA,gCAAAA,MAAI,UAAU;AAAA,oBACZ,KAAK;AAAA,kBACP,CAAC;AAAA,gBACF,GAAE,IAAI;AAAA,qBACF;AACLA,gFAAc,UAAU,QAAQ;AAChCA,8BAAAA,MAAI,UAAU;AAAA,kBACZ,QAAO,qCAAU,YAAW;AAAA,kBAC5B,MAAM;AAAA,gBACR,CAAC;AAAA,cACH;AAAA,YACA,SAAO,OAAO;AACdA,4BAAc,MAAA,MAAA,SAAA,6BAAA,UAAU,KAAK;AAC7BA,4BAAAA,MAAI,UAAU;AAAA,gBACZ,OAAO;AAAA,gBACP,MAAM;AAAA,cACR,CAAC;AAAA,YACH;AAAA,UACF;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpsBA,GAAG,WAAW,eAAe;"}