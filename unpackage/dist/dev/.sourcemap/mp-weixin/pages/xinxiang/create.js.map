{"version":3,"file":"create.js","sources":["pages/xinxiang/create.vue","D:/softcaree/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMveGlueGlhbmcvY3JlYXRlLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"create-page\" :style=\"{ paddingTop: containerPaddingTop }\">\n    <!-- Ëá™ÂÆö‰πâÂØºËà™Ê†è -->\n    <view class=\"custom-navbar\">\n      <!-- Ê∏êÂèòËÉåÊôØ -->\n      <view class=\"navbar-gradient-bg\"></view>\n      <!-- Áä∂ÊÄÅÊ†èÂç†‰Ωç -->\n      <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n      <!-- ÂØºËà™Ê†èÂÜÖÂÆπ -->\n      <view class=\"navbar-content\" :style=\"{ height: navBarHeight + 'px' }\">\n        <view class=\"navbar-left\" @click=\"goBack\">\n          <text class=\"back-icon\">‚Üê</text>\n        </view>\n        <view class=\"navbar-title\">\n          <text class=\"title-text\">ÂÜô‰ø°</text>\n        </view>\n        <view class=\"navbar-right\"></view>\n      </view>\n    </view>\n\n    <!-- Ê≠•È™§ÊåáÁ§∫Âô® -->\n    <view class=\"steps\">\n      <view class=\"step\" :class=\"{ active: currentStep === 1 }\">\n        <view class=\"step-number\">1</view>\n        <text class=\"step-text\">ÈÄâÊã©Ê†∑Âºè</text>\n      </view>\n      <view class=\"step-line\"></view>\n      <view class=\"step\" :class=\"{ active: currentStep === 2 }\">\n        <view class=\"step-number\">2</view>\n        <text class=\"step-text\">Â°´ÂÜô‰ø°ÊÅØ</text>\n      </view>\n    </view>\n\n    <!-- Á¨¨‰∏ÄÊ≠•ÔºöÈÄâÊã©‰ø°‰ª∂Ê†∑Âºè -->\n    <view v-if=\"currentStep === 1\" class=\"step-content\">\n      <text class=\"section-title\">ÈÄâÊã©‰ø°‰ª∂Ê†∑Âºè</text>\n      \n      <!-- È¢ÑËÆæÊ†∑ÂºèÁΩëÊ†º -->\n      <view class=\"style-grid\">\n        <view \n          v-for=\"i in [1, 2, 3]\" \n          :key=\"i\" \n          class=\"style-item\"\n          :class=\"{ selected: selectedStyle === i && !isCustomStyle }\"\n          @click=\"selectPresetStyle(i)\"\n        >\n          <image class=\"style-image\" :src=\"`/static/xinxiang/xin${i}.jpg`\" mode=\"aspectFill\"></image>\n          <view v-if=\"selectedStyle === i && !isCustomStyle\" class=\"check-mark\">‚úì</view>\n        </view>\n      </view>\n\n      <!-- Ëá™ÂÆö‰πâÊ†∑Âºè -->\n      <view class=\"custom-section\">\n        <button class=\"custom-btn\" @click=\"uploadCustom\">\n          <text class=\"btn-icon\">üì∑</text>\n          <text>Ëá™ÂÆö‰πâ‰ø°‰ª∂Â∫ïÂõæ</text>\n        </button>\n        \n        <view v-if=\"customImage\" class=\"custom-preview\">\n          <view class=\"preview-wrapper\">\n            <image class=\"preview-bg\" :src=\"customImage\" mode=\"aspectFill\"></image>\n          </view>\n        </view>\n      </view>\n\n      <button class=\"next-btn\" @click=\"nextStep\">‰∏ã‰∏ÄÊ≠•</button>\n    </view>\n\n\n    <!-- Á¨¨‰∫åÊ≠•ÔºöÂ°´ÂÜô‰ø°ÊÅØ -->\n    <view v-if=\"currentStep === 2\" class=\"step-content\">\n      <text class=\"section-title\">Â°´ÂÜô‰ø°‰ª∂‰ø°ÊÅØ</text>\n      \n      <view class=\"form\">\n        <!-- ‰ø°‰ª∂‰∏ªÈ¢ò -->\n        <view class=\"form-item\">\n          <text class=\"form-label\">‰ø°‰ª∂‰∏ªÈ¢ò</text>\n          <input \n            class=\"form-input\" \n            v-model=\"form.title\" \n            placeholder=\"‰æãÂ¶ÇÔºöÁªôÊú™Êù•ÁöÑ‰Ω†\"\n            maxlength=\"50\"\n          />\n        </view>\n\n        <!-- È¢ÑËÆ°ÈÄÅËææÊó∂Èó¥ -->\n        <view class=\"form-item\">\n          <text class=\"form-label\">È¢ÑËÆ°ÈÄÅËææÊó∂Èó¥</text>\n          <picker \n            mode=\"date\" \n            :value=\"form.deliveryDate\" \n            @change=\"onDateChange\"\n            :start=\"minDate\"\n          >\n            <view class=\"picker-display\">\n              {{ form.deliveryDate || 'ËØ∑ÈÄâÊã©Êó•Êúü' }}\n            </view>\n          </picker>\n        </view>\n\n        <!-- ‰ø°‰ª∂ÂÜÖÂÆπ -->\n        <view class=\"form-item\">\n          <text class=\"form-label\">‰ø°‰ª∂ÂÜÖÂÆπ</text>\n          <textarea \n            class=\"form-textarea\" \n            v-model=\"form.content\" \n            placeholder=\"ÂÜô‰∏ã‰Ω†ÊÉ≥ËØ¥ÁöÑËØù...\"\n            maxlength=\"1000\"\n          />\n          <text class=\"char-count\">{{ form.content.length }}/1000</text>\n        </view>\n      </view>\n\n      <view class=\"action-btns\">\n        <button class=\"back-btn\" @click=\"prevStep\">‰∏ä‰∏ÄÊ≠•</button>\n        <button class=\"preview-btn\" @click=\"openPreview\">üëÅÔ∏è È¢ÑËßà</button>\n        <button class=\"submit-btn\" @click=\"submitLetter\">Êèê‰∫§‰ø°‰ª∂</button>\n      </view>\n    </view>\n\n    <!-- È¢ÑËßàÂºπÁ™ó -->\n    <view v-if=\"showLivePreviewModal\" class=\"preview-modal-overlay\" @click=\"showLivePreviewModal = false\">\n      <view class=\"preview-modal-content\" @click.stop>\n        <text class=\"preview-modal-title\">‰ø°‰ª∂È¢ÑËßà</text>\n        \n        <!-- ‰ø°‰ª∂ËûçÂêàÈ¢ÑËßà -->\n        <view class=\"letter-preview\">\n          <view class=\"letter-wrapper\">\n            <!-- Â∫ïÂõæÂ±Ç -->\n            <image \n              class=\"letter-bg\" \n              :src=\"letterBackground\" \n              mode=\"aspectFill\"\n            ></image>\n            \n            <!-- ‰ø°‰ª∂ÂÜÖÂÆπÂ±Ç -->\n            <view class=\"letter-content\">\n              <view class=\"letter-header\">\n                <text class=\"letter-title\">{{ form.title || '‰ø°‰ª∂‰∏ªÈ¢ò' }}</text>\n                <text class=\"letter-date\">ÈÄÅËææÊó∂Èó¥Ôºö{{ form.deliveryDate || 'Êú™ÈÄâÊã©' }}</text>\n              </view>\n              \n              <view class=\"letter-body\">\n                <text class=\"letter-text\">{{ form.content || '‰ø°‰ª∂ÂÜÖÂÆπ...' }}</text>\n              </view>\n              \n              <view class=\"letter-footer\">\n                <text class=\"letter-sign\">‚Äî‚Äî ÁªôÊú™Êù•ÁöÑ‰Ω†</text>\n              </view>\n            </view>\n          </view>\n        </view>\n\n        <view class=\"preview-modal-actions\">\n          <button class=\"preview-modal-btn close\" @click=\"showLivePreviewModal = false\">ÂÖ≥Èó≠</button>\n        </view>\n      </view>\n    </view>\n\n\n    <!-- ‰ø°‰ª∂È¢ÑËßàÂºπÁ™ó -->\n    <view v-if=\"showPreviewModal\" class=\"preview-modal-overlay\">\n      <view class=\"preview-modal-content\" @click.stop>\n        <text class=\"preview-modal-title\">‰ø°‰ª∂È¢ÑËßà</text>\n        \n        <!-- ‰ø°‰ª∂ËûçÂêàÈ¢ÑËßà -->\n        <view class=\"letter-preview\">\n          <view class=\"letter-wrapper\">\n            <!-- Â∫ïÂõæÂ±Ç -->\n            <image \n              class=\"letter-bg\" \n              :src=\"letterBackground\" \n              mode=\"aspectFill\"\n            ></image>\n            \n            <!-- ‰ø°‰ª∂ÂÜÖÂÆπÂ±Ç -->\n            <view class=\"letter-content\">\n              <view class=\"letter-header\">\n                <text class=\"letter-title\">{{ form.title }}</text>\n                <text class=\"letter-date\">ÈÄÅËææÊó∂Èó¥Ôºö{{ form.deliveryDate }}</text>\n              </view>\n              \n              <view class=\"letter-body\">\n                <text class=\"letter-text\">{{ form.content }}</text>\n              </view>\n              \n              <view class=\"letter-footer\">\n                <text class=\"letter-sign\">‚Äî‚Äî ÁªôÊú™Êù•ÁöÑ‰Ω†</text>\n              </view>\n            </view>\n          </view>\n        </view>\n\n        <view class=\"preview-modal-actions\">\n          <button class=\"preview-modal-btn confirm\" @click=\"closePreviewAndBack\">Á°ÆËÆ§</button>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { createFutureLetter, sendFutureLetter } from '@/api/futureLetter.js';\nimport { getPartnerInfo, isBound } from '@/utils/couple.js';\n\nexport default {\n  data() {\n    return {\n      statusBarHeight: 0,\n      navBarHeight: 44,\n      screenWidth: 375,\n      currentStep: 1,\n      selectedStyle: 1,\n      isCustomStyle: false,\n      customImage: '',\n      showPreviewModal: false,\n      showLivePreviewModal: false,\n      form: {\n        title: '',\n        deliveryDate: '',\n        content: ''\n      }\n    };\n  },\n  computed: {\n    containerPaddingTop() {\n      const totalHeightPx = this.statusBarHeight + this.navBarHeight;\n      const pxToRpx = 750 / this.screenWidth;\n      const totalHeightRpx = totalHeightPx * pxToRpx;\n      return totalHeightRpx + 20 + 'rpx';\n    },\n    minDate() {\n      const today = new Date();\n      const year = today.getFullYear();\n      const month = String(today.getMonth() + 1).padStart(2, '0');\n      const day = String(today.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    // Ëé∑Âèñ‰ø°‰ª∂Â∫ïÂõæË∑ØÂæÑ\n    letterBackground() {\n      if (this.isCustomStyle) {\n        return this.customImage;\n      }\n      return `/static/xinxiang/xin${this.selectedStyle}.jpg`;\n    }\n  },\n  onLoad() {\n    this.getSystemInfo();\n  },\n  methods: {\n    goBack() {\n      uni.navigateBack();\n    },\n    getSystemInfo() {\n      const systemInfo = uni.getSystemInfoSync();\n      this.statusBarHeight = systemInfo.statusBarHeight || 0;\n      this.screenWidth = systemInfo.windowWidth || 375;\n      // #ifdef MP-WEIXIN\n      this.navBarHeight = 44;\n      // #endif\n      // #ifdef H5\n      this.navBarHeight = 44;\n      // #endif\n    },\n    // ÈÄâÊã©È¢ÑËÆæÊ†∑Âºè\n    selectPresetStyle(index) {\n      this.selectedStyle = index;\n      this.isCustomStyle = false;\n      this.customImage = '';\n    },\n    \n    // ‰∏ä‰º†Ëá™ÂÆö‰πâÂõæÁâá\n    uploadCustom() {\n      uni.chooseImage({\n        count: 1,\n        sizeType: ['compressed'],\n        sourceType: ['album', 'camera'],\n        success: (res) => {\n          this.customImage = res.tempFilePaths[0];\n          this.isCustomStyle = true;\n          uni.showToast({ title: 'Ëá™ÂÆö‰πâÂ∫ïÂõæÂ∑≤ÈÄâÊã©', icon: 'success' });\n        }\n      });\n    },\n    \n    // ÊâìÂºÄÈ¢ÑËßàÂºπÁ™ó\n    openPreview() {\n      this.showLivePreviewModal = true;\n    },\n    \n    // Êó•ÊúüÈÄâÊã©\n    onDateChange(e) {\n      this.form.deliveryDate = e.detail.value;\n    },\n    \n    // ‰∏ã‰∏ÄÊ≠•\n    nextStep() {\n      if (!this.selectedStyle && !this.isCustomStyle) {\n        uni.showToast({ title: 'ËØ∑ÈÄâÊã©‰ø°‰ª∂Ê†∑Âºè', icon: 'none' });\n        return;\n      }\n      this.currentStep = 2;\n    },\n    \n    // ‰∏ä‰∏ÄÊ≠•\n    prevStep() {\n      this.currentStep = 1;\n    },\n    \n    // Êèê‰∫§‰ø°‰ª∂\n    async submitLetter() {\n      // È™åËØÅÂøÖÂ°´È°π\n      if (!this.form.title) {\n        uni.showToast({ title: 'ËØ∑Â°´ÂÜô‰ø°‰ª∂‰∏ªÈ¢ò', icon: 'none' });\n        return;\n      }\n      if (!this.form.deliveryDate) {\n        uni.showToast({ title: 'ËØ∑ÈÄâÊã©ÈÄÅËææÊó∂Èó¥', icon: 'none' });\n        return;\n      }\n      if (!this.form.content) {\n        uni.showToast({ title: 'ËØ∑Â°´ÂÜô‰ø°‰ª∂ÂÜÖÂÆπ', icon: 'none' });\n        return;\n      }\n\n      // ÊòæÁ§∫Âä†ËΩΩÊèêÁ§∫\n      uni.showLoading({ title: 'Ê≠£Âú®ÂàõÂª∫...' });\n\n      try {\n        // Ëé∑ÂèñÂØπÊñπIDÔºàÂ¶ÇÊûúÂ∑≤ÁªëÂÆöÔºâ\n        let receiverId = null;\n        if (isBound()) {\n          try {\n            const coupleInfo = uni.getStorageSync('couple_info');\n            console.log('üë´ [ÊÉÖ‰æ£‰ø°ÊÅØ]', coupleInfo);\n            \n            // ‰ºòÂÖà‰ΩøÁî® partnerIdÔºàÂ¶ÇÊûúÂ≠òÂú®Ôºâ\n            if (coupleInfo && coupleInfo.partnerId) {\n              receiverId = coupleInfo.partnerId;\n              console.log('‚úÖ [Ëé∑ÂèñÂØπÊñπID] ‰ªé partnerId Ëé∑Âèñ:', receiverId);\n            } else {\n              // Âê¶Âàô‰ªé partnerInfo.userId Ëé∑Âèñ\n              const partnerInfo = getPartnerInfo();\n              if (partnerInfo && partnerInfo.userId) {\n                receiverId = partnerInfo.userId;\n                console.log('‚úÖ [Ëé∑ÂèñÂØπÊñπID] ‰ªé partnerInfo.userId Ëé∑Âèñ:', receiverId);\n              }\n            }\n          } catch (e) {\n            console.warn('‚ö†Ô∏è Ëé∑ÂèñÂØπÊñπIDÂ§±Ë¥•:', e);\n          }\n        } else {\n          console.log('‚ö†Ô∏è Êú™ÁªëÂÆöÊÉÖ‰æ£ÂÖ≥Á≥ªÔºåË∑≥Ëøá receiverId');\n        }\n\n        // ÊûÑÂª∫ËÉåÊôØÂõæÁâáURLÔºàÂ¶ÇÊûúÊòØËá™ÂÆö‰πâÂõæÁâáÔºåÈúÄË¶ÅÂÖà‰∏ä‰º†Ôºâ\n        let backgroundImage = null;\n        if (this.isCustomStyle && this.customImage) {\n          // Â¶ÇÊûúÊòØËá™ÂÆö‰πâÂõæÁâáÔºåËøôÈáåÈúÄË¶Å‰∏ä‰º†Âà∞ÊúçÂä°Âô®Ëé∑ÂèñURL\n          // ÊöÇÊó∂‰ΩøÁî®Êú¨Âú∞Ë∑ØÂæÑÔºåÂêéÁª≠ÂèØ‰ª•ÈõÜÊàêÂõæÁâá‰∏ä‰º†ÂäüËÉΩ\n          backgroundImage = this.customImage;\n        } else {\n          // È¢ÑËÆæÊ†∑ÂºèÂèØ‰ª•ËΩ¨Êç¢‰∏∫ÂÆåÊï¥URLÊàñ‰ΩøÁî®Ê†∑ÂºèID\n          backgroundImage = `/static/xinxiang/xin${this.selectedStyle}.jpg`;\n        }\n\n        // È™åËØÅÊó•ÊúüÊ†ºÂºè\n        if (!this.form.deliveryDate || !/^\\d{4}-\\d{2}-\\d{2}$/.test(this.form.deliveryDate)) {\n          uni.hideLoading();\n          uni.showToast({ title: 'Êó•ÊúüÊ†ºÂºèÈîôËØØÔºåËØ∑ÈáçÊñ∞ÈÄâÊã©', icon: 'none' });\n          return;\n        }\n\n        // ÊûÑÂª∫ÂêéÁ´ØAPIËØ∑Ê±ÇÊï∞ÊçÆ\n        const letterData = {\n          title: this.form.title.trim(),\n          content: this.form.content.trim(),\n          deliveryMethod: 'PARTNER', // ÁõÆÂâçÂè™ÊîØÊåÅPARTNER\n          scheduledDate: this.form.deliveryDate, // Ê†ºÂºèÔºöYYYY-MM-DD\n          scheduledTime: '00:00:00', // ÈªòËÆ§Êó∂Èó¥\n          status: 'DRAFT' // ËçâÁ®øÁä∂ÊÄÅ\n        };\n\n        // Â¶ÇÊûúÂ∑≤ÁªëÂÆö‰∏îËé∑ÂèñÂà∞ÂØπÊñπIDÔºåÊ∑ªÂä†receiverIdÔºàÁ°Æ‰øùÊòØÊï∞Â≠óÁ±ªÂûãÔºâ\n        if (receiverId) {\n          letterData.receiverId = Number(receiverId);\n          if (isNaN(letterData.receiverId)) {\n            console.warn('receiverId ‰∏çÊòØÊúâÊïàÊï∞Â≠ó:', receiverId);\n            delete letterData.receiverId;\n          }\n        }\n\n        // Âè™ÊúâÂΩìËÉåÊôØÂõæÁâáÂ≠òÂú®Êó∂ÊâçÊ∑ªÂä†ÔºàÈÅøÂÖçnullÂÄºÂØºËá¥ÂêéÁ´ØÈîôËØØÔºâ\n        if (backgroundImage && backgroundImage.trim()) {\n          letterData.backgroundImage = backgroundImage.trim();\n        }\n\n        console.log('üì§ [ÂàõÂª∫ÊÉÖ‰π¶] ÊúÄÁªàËØ∑Ê±ÇÂèÇÊï∞:', JSON.stringify(letterData, null, 2));\n\n        // Ë∞ÉÁî®ÂêéÁ´ØAPIÂàõÂª∫ÊÉÖ‰π¶\n        const response = await createFutureLetter(letterData);\n\n        if (response && response.success !== false && response.data?.id) {\n          const letterId = response.data.id;\n          \n          // ÂàõÂª∫ÊàêÂäüÂêéÁ´ãÂç≥ÂèëÈÄÅ‰ø°‰ª∂\n          uni.showLoading({ title: 'Ê≠£Âú®ÂèëÈÄÅ...' });\n          \n          try {\n            // Ë∞ÉÁî®ÂèëÈÄÅÊé•Âè£\n            const sendResponse = await sendFutureLetter(letterId);\n            \n            uni.hideLoading();\n            \n            if (sendResponse && sendResponse.success !== false) {\n              // ‰øùÂ≠òÊú¨Âú∞È¢ÑËßàÊï∞ÊçÆÔºàÁî®‰∫éÈ¢ÑËßàÊòæÁ§∫Ôºâ\n              const localData = {\n                id: letterId,\n                style: this.isCustomStyle ? 'custom' : this.selectedStyle,\n                customImage: this.customImage,\n                title: this.form.title,\n                deliveryDate: this.form.deliveryDate,\n                content: this.form.content,\n                createTime: new Date().toLocaleString(),\n                status: 'SENT' // Ê†áËÆ∞‰∏∫Â∑≤ÂèëÈÄÅ\n              };\n\n              // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®ÔºàÁî®‰∫éÈ¢ÑËßàÔºâ\n              try {\n                const letters = uni.getStorageSync('xinxiang_letters') || [];\n                letters.unshift(localData);\n                uni.setStorageSync('xinxiang_letters', letters);\n              } catch (e) {\n                console.warn('‰øùÂ≠òÊú¨Âú∞È¢ÑËßàÊï∞ÊçÆÂ§±Ë¥•', e);\n              }\n\n              uni.showToast({ title: 'ÂèëÈÄÅÊàêÂäü', icon: 'success' });\n              \n              // ÊòæÁ§∫È¢ÑËßàÂºπÁ™ó\n              this.showPreviewModal = true;\n            } else {\n              // ÂèëÈÄÅÂ§±Ë¥•Ôºå‰ΩÜÂàõÂª∫ÊàêÂäü\n              uni.showToast({ \n                title: sendResponse.message || 'ÂàõÂª∫ÊàêÂäüÔºå‰ΩÜÂèëÈÄÅÂ§±Ë¥•', \n                icon: 'none',\n                duration: 2000\n              });\n              \n              // Âç≥‰ΩøÂèëÈÄÅÂ§±Ë¥•‰πüÊòæÁ§∫È¢ÑËßàÂºπÁ™ó\n              this.showPreviewModal = true;\n            }\n          } catch (sendError) {\n            uni.hideLoading();\n            console.error('ÂèëÈÄÅÊú™Êù•ÊÉÖ‰π¶Â§±Ë¥•:', sendError);\n            \n            // ÂèëÈÄÅÂ§±Ë¥•Ôºå‰ΩÜÂàõÂª∫ÊàêÂäüÔºå‰ªçÁÑ∂‰øùÂ≠òÊï∞ÊçÆ\n            const localData = {\n              id: letterId,\n              style: this.isCustomStyle ? 'custom' : this.selectedStyle,\n              customImage: this.customImage,\n              title: this.form.title,\n              deliveryDate: this.form.deliveryDate,\n              content: this.form.content,\n              createTime: new Date().toLocaleString(),\n              status: 'DRAFT' // Ê†áËÆ∞‰∏∫ËçâÁ®øÔºàÂèëÈÄÅÂ§±Ë¥•Ôºâ\n            };\n\n            // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®ÔºàÁî®‰∫éÈ¢ÑËßàÔºâ\n            try {\n              const letters = uni.getStorageSync('xinxiang_letters') || [];\n              letters.unshift(localData);\n              uni.setStorageSync('xinxiang_letters', letters);\n            } catch (e) {\n              console.warn('‰øùÂ≠òÊú¨Âú∞È¢ÑËßàÊï∞ÊçÆÂ§±Ë¥•', e);\n            }\n            \n            uni.showToast({ \n              title: sendError.message || 'ÂàõÂª∫ÊàêÂäüÔºå‰ΩÜÂèëÈÄÅÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï', \n              icon: 'none',\n              duration: 2000\n            });\n            \n            // Âç≥‰ΩøÂèëÈÄÅÂ§±Ë¥•‰πüÊòæÁ§∫È¢ÑËßàÂºπÁ™ó\n            this.showPreviewModal = true;\n          }\n        } else {\n          uni.showToast({ \n            title: response.message || 'ÂàõÂª∫Â§±Ë¥•ÔºåËØ∑ÈáçËØï', \n            icon: 'none' \n          });\n        }\n      } catch (error) {\n        uni.hideLoading();\n        console.error('ÂàõÂª∫Êú™Êù•ÊÉÖ‰π¶Â§±Ë¥•:', error);\n        uni.showToast({ \n          title: error.message || 'ÂàõÂª∫Â§±Ë¥•ÔºåËØ∑ÈáçËØï', \n          icon: 'none',\n          duration: 2000\n        });\n      }\n    },\n    \n    // ÂÖ≥Èó≠È¢ÑËßàÂºπÁ™óÂπ∂ËøîÂõû\n    closePreviewAndBack() {\n      this.showPreviewModal = false;\n      setTimeout(() => {\n        uni.navigateBack();\n      }, 300);\n    }\n  }\n};\n</script>\n\n<style>\n/* Ëá™ÂÆö‰πâÂØºËà™Ê†èÊ†∑Âºè */\n.custom-navbar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 9999;\n  background-color: #F8F0FC;\n  overflow: hidden;\n}\n\n.navbar-gradient-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 200%;\n  background: linear-gradient(180deg, #F8F0FC 0%, #F3E8FF 30%, #F0E0FF 60%, #F8F0FC 100%);\n  background: -webkit-linear-gradient(top, #F8F0FC 0%, #F3E8FF 30%, #F0E0FF 60%, #F8F0FC 100%);\n}\n\n.status-bar {\n  width: 100%;\n  background: transparent;\n  position: relative;\n  z-index: 1;\n}\n\n.navbar-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 30rpx;\n  box-sizing: border-box;\n  position: relative;\n  z-index: 1;\n}\n\n.navbar-title {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.title-text {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #6B5B95;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.navbar-left {\n  width: 80rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.back-icon {\n  font-size: 50rpx;\n  font-weight: 600;\n  color: #6B5B95;\n  line-height: 1;\n  cursor: pointer;\n  transition: opacity 0.3s;\n}\n\n.back-icon:active {\n  opacity: 0.6;\n}\n\n.navbar-right {\n  width: 80rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.create-page {\n  min-height: 100vh;\n  background: #F8F0FC;\n  padding: 24rpx;\n  padding-bottom: 120rpx;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n/* Ê≠•È™§ÊåáÁ§∫Âô® */\n.steps {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 32rpx 0;\n  margin-bottom: 24rpx;\n}\n\n.step {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8rpx;\n}\n\n.step-number {\n  width: 60rpx;\n  height: 60rpx;\n  border-radius: 50%;\n  background: #F3E8FF;\n  color: #9B8FB8;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24rpx;\n  font-weight: 600;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.step.active .step-number {\n  background: #DCC7E1;\n  color: #ffffff;\n}\n\n.step-text {\n  font-size: 24rpx;\n  color: #9B8FB8;\n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.step.active .step-text {\n  color: #DCC7E1;\n  font-weight: 600;\n}\n\n.step-line {\n  width: 120rpx;\n  height: 2rpx;\n  background: #F3E8FF;\n  margin: 0 20rpx;\n  margin-bottom: 28rpx;\n}\n\n/* ÂÜÖÂÆπÂå∫Âüü */\n.step-content {\n  background: #ffffff;\n  border-radius: 24rpx;\n  padding: 32rpx;\n}\n\n.section-title {\n  font-size: 34rpx;\n  font-weight: 600;\n  color: #6B5B95;\n  display: block;\n  margin-bottom: 24rpx;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n/* Ê†∑ÂºèÁΩëÊ†º */\n.style-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 16rpx;\n  margin-bottom: 32rpx;\n}\n\n.style-item {\n  position: relative;\n  aspect-ratio: 1;\n  border-radius: 16rpx;\n  overflow: hidden;\n  border: 3rpx solid transparent;\n  transition: all 0.3s ease;\n}\n\n.style-item.selected {\n  border-color: #DCC7E1;\n  box-shadow: 0 4rpx 12rpx rgba(220, 199, 225, 0.3);\n}\n\n.style-image {\n  width: 100%;\n  height: 100%;\n}\n\n.check-mark {\n  position: absolute;\n  top: 8rpx;\n  right: 8rpx;\n  width: 40rpx;\n  height: 40rpx;\n  border-radius: 50%;\n  background: #DCC7E1;\n  color: #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24rpx;\n}\n\n/* Ëá™ÂÆö‰πâÊ†∑Âºè */\n.custom-section {\n  margin-bottom: 32rpx;\n}\n\n.custom-btn {\n  width: 100%;\n  padding: 24rpx;\n  background: linear-gradient(135deg, #F8F0FC 0%, #F3E8FF 100%);\n  border-radius: 16rpx;\n  border: 2rpx dashed #D8B4FE;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12rpx;\n  font-size: 28rpx;\n  color: #6B5B95;\n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.btn-icon {\n  font-size: 36rpx;\n}\n\n.custom-preview {\n  margin-top: 20rpx;\n  border-radius: 16rpx;\n  overflow: hidden;\n  border: 2rpx solid #DCC7E1;\n  cursor: pointer;\n}\n\n.preview-wrapper {\n  position: relative;\n  width: 100%;\n  height: 400rpx;\n  overflow: hidden;\n}\n\n.preview-bg {\n  width: 100%;\n  height: 100%;\n}\n\n.preview-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: #ffffff;\n  pointer-events: none;\n}\n\n/* Ë£ÅÂâ™Ê°ÜÈ¢ÑËßà */\n.crop-preview {\n  position: absolute;\n  border: 2rpx solid #DCC7E1;\n  box-sizing: border-box;\n  pointer-events: none;\n}\n\n/* ÈÅÆÁΩ©Â±Ç - ËÆ©Êú™ÈÄâ‰∏≠Âå∫ÂüüÂèòÊöó */\n.mask-layer {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\n.mask-top,\n.mask-bottom {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.5);\n}\n\n.mask-top {\n  top: 0;\n}\n\n.mask-middle {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  display: flex;\n}\n\n.mask-left,\n.mask-right {\n  background: rgba(0, 0, 0, 0.5);\n  height: 100%;\n}\n\n.mask-center {\n  height: 100%;\n  /* ÈÄèÊòéÔºåÊòæÁ§∫ÈÄâ‰∏≠Âå∫Âüü */\n}\n\n.preview-tip {\n  display: block;\n  text-align: center;\n  padding: 16rpx;\n  background: #F8F0FC;\n  color: #DCC7E1;\n  font-size: 24rpx;\n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n/* ÈÄèÊòéÂ∫¶Ë∞ÉÊï¥ÂºπÁ™ó */\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  width: 90%;\n  max-width: 600rpx;\n  background: #ffffff;\n  border-radius: 24rpx;\n  padding: 32rpx;\n  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.2);\n}\n\n.modal-title {\n  font-size: 34rpx;\n  font-weight: 600;\n  color: #6B5B95;\n  display: block;\n  text-align: center;\n  margin-bottom: 24rpx;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.modal-preview {\n  margin-bottom: 24rpx;\n  border-radius: 16rpx;\n  overflow: hidden;\n}\n\n.modal-preview .preview-wrapper {\n  height: 400rpx;\n  position: relative;\n}\n\n/* ÂèØÊãñÂä®Ë£ÅÂâ™Ê°Ü */\n.crop-box {\n  position: absolute;\n  touch-action: none;\n  cursor: move;\n}\n\n.crop-border {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  border: 3rpx solid #DCC7E1;\n  box-sizing: border-box;\n  background: rgba(220, 199, 225, 0.1);\n}\n\n.crop-corner {\n  position: absolute;\n  width: 20rpx;\n  height: 20rpx;\n  background: #DCC7E1;\n  border: 2rpx solid #ffffff;\n  border-radius: 50%;\n}\n\n.corner-tl {\n  top: -10rpx;\n  left: -10rpx;\n}\n\n.corner-tr {\n  top: -10rpx;\n  right: -10rpx;\n}\n\n.corner-bl {\n  bottom: -10rpx;\n  left: -10rpx;\n}\n\n.corner-br {\n  bottom: -10rpx;\n  right: -10rpx;\n  width: 30rpx;\n  height: 30rpx;\n  background: #DCC7E1;\n  cursor: se-resize;\n}\n\n.crop-hint {\n  position: absolute;\n  bottom: -40rpx;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 22rpx;\n  color: #DCC7E1;\n  white-space: nowrap;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 4rpx 12rpx;\n  border-radius: 8rpx;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.opacity-control {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n  padding: 24rpx;\n  background: #F8F0FC;\n  border-radius: 16rpx;\n  margin-bottom: 24rpx;\n  border: 1rpx solid #F3E8FF;\n}\n\n.opacity-control .control-label {\n  font-size: 26rpx;\n  color: #6B5B95;\n  width: 100rpx;\n  font-weight: 600;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.opacity-control .slider {\n  flex: 1;\n}\n\n.opacity-control .control-value {\n  font-size: 28rpx;\n  color: #DCC7E1;\n  font-weight: 600;\n  width: 80rpx;\n  text-align: right;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.modal-actions {\n  display: flex;\n  gap: 16rpx;\n}\n\n.modal-btn {\n  flex: 1;\n  padding: 20rpx;\n  border-radius: 12rpx;\n  font-size: 28rpx;\n  font-weight: 600;\n}\n\n.modal-btn.cancel {\n  background: #DCC7E1;\n  color: #ffffff;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n/* Ë°®Âçï */\n.form {\n  display: flex;\n  flex-direction: column;\n  gap: 24rpx;\n}\n.form {\n  display: flex;\n  flex-direction: column;\n  gap: 24rpx;\n}\n\n.form-item {\n  display: flex;\n  flex-direction: column;\n  gap: 12rpx;\n}\n\n.form-label {\n  font-size: 28rpx;\n  color: #6B5B95;\n  font-weight: 600;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.form-input,\n.picker-display {\n  padding: 20rpx;\n  background: #ffffff;\n  border-radius: 12rpx;\n  font-size: 26rpx;\n  border: 1rpx solid #F3E8FF;\n  color: #333;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.picker-display {\n  color: #333;\n}\n\n.form-textarea {\n  min-height: 300rpx;\n  padding: 20rpx;\n  background: #ffffff;\n  border-radius: 12rpx;\n  font-size: 26rpx;\n  border: 1rpx solid #F3E8FF;\n  color: #333;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.char-count {\n  font-size: 22rpx;\n  color: #9B8FB8;\n  text-align: right;\n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n/* ÊåâÈíÆ */\n.next-btn {\n  width: 100%;\n  padding: 24rpx;\n  background: #DCC7E1;\n  color: #ffffff;\n  border-radius: 16rpx;\n  font-size: 28rpx;\n  font-weight: 600;\n  margin-top: 40rpx;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.action-btns {\n  display: flex;\n  gap: 16rpx;\n  margin-top: 40rpx;\n}\n\n.back-btn,\n.preview-btn,\n.submit-btn {\n  flex: 1;\n  padding: 24rpx;\n  border-radius: 16rpx;\n  font-size: 28rpx;\n  font-weight: 600;\n}\n\n.back-btn {\n  background: #F3E8FF;\n  color: #6B5B95;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.preview-btn {\n  background: #DCC7E1;\n  color: #ffffff;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.submit-btn {\n  background: #DCC7E1;\n  color: #ffffff;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.preview-modal-btn.adjust {\n  background: #F3E8FF;\n  color: #6B5B95;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.preview-modal-btn.close {\n  background: #DCC7E1;\n  color: #ffffff;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n/* ‰ø°‰ª∂È¢ÑËßàÂºπÁ™ó */\n.preview-modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n}\n\n.preview-modal-content {\n  width: 90%;\n  max-width: 650rpx;\n  background: #ffffff;\n  border-radius: 24rpx;\n  padding: 32rpx;\n  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.3);\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.preview-modal-title {\n  font-size: 34rpx;\n  font-weight: 600;\n  color: #6B5B95;\n  display: block;\n  text-align: center;\n  margin-bottom: 24rpx;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.letter-preview {\n  flex: 1;\n  overflow: hidden;\n  border-radius: 16rpx;\n  margin-bottom: 24rpx;\n}\n\n.letter-wrapper {\n  position: relative;\n  width: 100%;\n  height: 800rpx;\n  border-radius: 16rpx;\n  overflow: hidden;\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.1);\n}\n\n.letter-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 0;\n}\n\n.letter-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: #ffffff;\n  z-index: 1;\n}\n\n.letter-content {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  padding: 60rpx 40rpx;\n  display: flex;\n  flex-direction: column;\n  z-index: 2;\n  box-sizing: border-box;\n}\n\n.letter-header {\n  display: flex;\n  flex-direction: column;\n  gap: 12rpx;\n  margin-bottom: 40rpx;\n  padding-bottom: 24rpx;\n  border-bottom: 2rpx solid rgba(0, 0, 0, 0.1);\n}\n\n.letter-title {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #6B5B95;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.letter-date {\n  font-size: 24rpx;\n  color: #9B8FB8;\n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.letter-body {\n  flex: 1;\n  overflow-y: auto;\n  margin-bottom: 32rpx;\n}\n\n.letter-text {\n  font-size: 28rpx;\n  line-height: 2;\n  color: #6B5B95;\n  white-space: pre-wrap;\n  word-break: break-all;\n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.letter-footer {\n  display: flex;\n  justify-content: flex-end;\n  padding-top: 24rpx;\n  border-top: 2rpx solid rgba(0, 0, 0, 0.1);\n}\n\n.letter-sign {\n  font-size: 26rpx;\n  color: #9B8FB8;\n  font-style: italic;\n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n.preview-modal-actions {\n  display: flex;\n  gap: 16rpx;\n}\n\n.preview-modal-btn {\n  flex: 1;\n  padding: 24rpx;\n  border-radius: 12rpx;\n  font-size: 28rpx;\n  font-weight: 600;\n}\n\n.preview-modal-btn.confirm {\n  background: #DCC7E1;\n  color: #ffffff;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/È°πÁõÆ/love_time_fu/pages/xinxiang/create.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","isBound","getPartnerInfo","createFutureLetter","sendFutureLetter"],"mappings":"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"}